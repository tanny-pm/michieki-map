function xD(e,t){for(var r=0;r<t.length;r++){const o=t[r];if(typeof o!="string"&&!Array.isArray(o)){for(const c in o)if(c!=="default"&&!(c in e)){const h=Object.getOwnPropertyDescriptor(o,c);h&&Object.defineProperty(e,c,h.get?h:{enumerable:!0,get:()=>o[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))o(c);new MutationObserver(c=>{for(const h of c)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function r(c){const h={};return c.integrity&&(h.integrity=c.integrity),c.referrerPolicy&&(h.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?h.credentials="include":c.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(c){if(c.ep)return;c.ep=!0;const h=r(c);fetch(c.href,h)}})();var _f=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bD(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ey={},wD={get exports(){return Ey},set exports(e){Ey=e}},P0={},Me={},SD={get exports(){return Me},set exports(e){Me=e}},er={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp=Symbol.for("react.element"),kD=Symbol.for("react.portal"),TD=Symbol.for("react.fragment"),ED=Symbol.for("react.strict_mode"),CD=Symbol.for("react.profiler"),AD=Symbol.for("react.provider"),PD=Symbol.for("react.context"),ID=Symbol.for("react.forward_ref"),zD=Symbol.for("react.suspense"),MD=Symbol.for("react.memo"),DD=Symbol.for("react.lazy"),_k=Symbol.iterator;function RD(e){return e===null||typeof e!="object"?null:(e=_k&&e[_k]||e["@@iterator"],typeof e=="function"?e:null)}var b4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w4=Object.assign,S4={};function hd(e,t,r){this.props=e,this.context=t,this.refs=S4,this.updater=r||b4}hd.prototype.isReactComponent={};hd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};hd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function k4(){}k4.prototype=hd.prototype;function jb(e,t,r){this.props=e,this.context=t,this.refs=S4,this.updater=r||b4}var Gb=jb.prototype=new k4;Gb.constructor=jb;w4(Gb,hd.prototype);Gb.isPureReactComponent=!0;var vk=Array.isArray,T4=Object.prototype.hasOwnProperty,Zb={current:null},E4={key:!0,ref:!0,__self:!0,__source:!0};function C4(e,t,r){var o,c={},h=null,p=null;if(t!=null)for(o in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(h=""+t.key),t)T4.call(t,o)&&!E4.hasOwnProperty(o)&&(c[o]=t[o]);var l=arguments.length-2;if(l===1)c.children=r;else if(1<l){for(var b=Array(l),w=0;w<l;w++)b[w]=arguments[w+2];c.children=b}if(e&&e.defaultProps)for(o in l=e.defaultProps,l)c[o]===void 0&&(c[o]=l[o]);return{$$typeof:Hp,type:e,key:h,ref:p,props:c,_owner:Zb.current}}function LD(e,t){return{$$typeof:Hp,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Wb(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hp}function BD(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xk=/\/+/g;function S1(e,t){return typeof e=="object"&&e!==null&&e.key!=null?BD(""+e.key):t.toString(36)}function Hg(e,t,r,o,c){var h=typeof e;(h==="undefined"||h==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(h){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case Hp:case kD:p=!0}}if(p)return p=e,c=c(p),e=o===""?"."+S1(p,0):o,vk(c)?(r="",e!=null&&(r=e.replace(xk,"$&/")+"/"),Hg(c,t,r,"",function(w){return w})):c!=null&&(Wb(c)&&(c=LD(c,r+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(xk,"$&/")+"/")+e)),t.push(c)),1;if(p=0,o=o===""?".":o+":",vk(e))for(var l=0;l<e.length;l++){h=e[l];var b=o+S1(h,l);p+=Hg(h,t,r,b,c)}else if(b=RD(e),typeof b=="function")for(e=b.call(e),l=0;!(h=e.next()).done;)h=h.value,b=o+S1(h,l++),p+=Hg(h,t,r,b,c);else if(h==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function lg(e,t,r){if(e==null)return e;var o=[],c=0;return Hg(e,o,"","",function(h){return t.call(r,h,c++)}),o}function FD(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Wi={current:null},qg={transition:null},$D={ReactCurrentDispatcher:Wi,ReactCurrentBatchConfig:qg,ReactCurrentOwner:Zb};er.Children={map:lg,forEach:function(e,t,r){lg(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return lg(e,function(){t++}),t},toArray:function(e){return lg(e,function(t){return t})||[]},only:function(e){if(!Wb(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};er.Component=hd;er.Fragment=TD;er.Profiler=CD;er.PureComponent=jb;er.StrictMode=ED;er.Suspense=zD;er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$D;er.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=w4({},e.props),c=e.key,h=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(h=t.ref,p=Zb.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(b in t)T4.call(t,b)&&!E4.hasOwnProperty(b)&&(o[b]=t[b]===void 0&&l!==void 0?l[b]:t[b])}var b=arguments.length-2;if(b===1)o.children=r;else if(1<b){l=Array(b);for(var w=0;w<b;w++)l[w]=arguments[w+2];o.children=l}return{$$typeof:Hp,type:e.type,key:c,ref:h,props:o,_owner:p}};er.createContext=function(e){return e={$$typeof:PD,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:AD,_context:e},e.Consumer=e};er.createElement=C4;er.createFactory=function(e){var t=C4.bind(null,e);return t.type=e,t};er.createRef=function(){return{current:null}};er.forwardRef=function(e){return{$$typeof:ID,render:e}};er.isValidElement=Wb;er.lazy=function(e){return{$$typeof:DD,_payload:{_status:-1,_result:e},_init:FD}};er.memo=function(e,t){return{$$typeof:MD,type:e,compare:t===void 0?null:t}};er.startTransition=function(e){var t=qg.transition;qg.transition={};try{e()}finally{qg.transition=t}};er.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};er.useCallback=function(e,t){return Wi.current.useCallback(e,t)};er.useContext=function(e){return Wi.current.useContext(e)};er.useDebugValue=function(){};er.useDeferredValue=function(e){return Wi.current.useDeferredValue(e)};er.useEffect=function(e,t){return Wi.current.useEffect(e,t)};er.useId=function(){return Wi.current.useId()};er.useImperativeHandle=function(e,t,r){return Wi.current.useImperativeHandle(e,t,r)};er.useInsertionEffect=function(e,t){return Wi.current.useInsertionEffect(e,t)};er.useLayoutEffect=function(e,t){return Wi.current.useLayoutEffect(e,t)};er.useMemo=function(e,t){return Wi.current.useMemo(e,t)};er.useReducer=function(e,t,r){return Wi.current.useReducer(e,t,r)};er.useRef=function(e){return Wi.current.useRef(e)};er.useState=function(e){return Wi.current.useState(e)};er.useSyncExternalStore=function(e,t,r){return Wi.current.useSyncExternalStore(e,t,r)};er.useTransition=function(){return Wi.current.useTransition()};er.version="18.2.0";(function(e){e.exports=er})(SD);const Bo=bD(Me),bk=xD({__proto__:null,default:Bo},[Me]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OD=Me,VD=Symbol.for("react.element"),ND=Symbol.for("react.fragment"),UD=Object.prototype.hasOwnProperty,jD=OD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GD={key:!0,ref:!0,__self:!0,__source:!0};function A4(e,t,r){var o,c={},h=null,p=null;r!==void 0&&(h=""+r),t.key!==void 0&&(h=""+t.key),t.ref!==void 0&&(p=t.ref);for(o in t)UD.call(t,o)&&!GD.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps,t)c[o]===void 0&&(c[o]=t[o]);return{$$typeof:VD,type:e,key:h,ref:p,props:c,_owner:jD.current}}P0.Fragment=ND;P0.jsx=A4;P0.jsxs=A4;(function(e){e.exports=P0})(wD);const je=Ey.jsx,aa=Ey.jsxs;var Xv={},op={},ZD={get exports(){return op},set exports(e){op=e}},Uo={},Kv={},WD={get exports(){return Kv},set exports(e){Kv=e}},P4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(tt,_t){var wt=tt.length;tt.push(_t);e:for(;0<wt;){var Tt=wt-1>>>1,nr=tt[Tt];if(0<c(nr,_t))tt[Tt]=_t,tt[wt]=nr,wt=Tt;else break e}}function r(tt){return tt.length===0?null:tt[0]}function o(tt){if(tt.length===0)return null;var _t=tt[0],wt=tt.pop();if(wt!==_t){tt[0]=wt;e:for(var Tt=0,nr=tt.length,$t=nr>>>1;Tt<$t;){var an=2*(Tt+1)-1,fn=tt[an],br=an+1,pn=tt[br];if(0>c(fn,wt))br<nr&&0>c(pn,fn)?(tt[Tt]=pn,tt[br]=wt,Tt=br):(tt[Tt]=fn,tt[an]=wt,Tt=an);else if(br<nr&&0>c(pn,wt))tt[Tt]=pn,tt[br]=wt,Tt=br;else break e}}return _t}function c(tt,_t){var wt=tt.sortIndex-_t.sortIndex;return wt!==0?wt:tt.id-_t.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var p=Date,l=p.now();e.unstable_now=function(){return p.now()-l}}var b=[],w=[],T=1,D=null,P=3,$=!1,q=!1,ee=!1,me=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function H(tt){for(var _t=r(w);_t!==null;){if(_t.callback===null)o(w);else if(_t.startTime<=tt)o(w),_t.sortIndex=_t.expirationTime,t(b,_t);else break;_t=r(w)}}function ie(tt){if(ee=!1,H(tt),!q)if(r(b)!==null)q=!0,ut(_e);else{var _t=r(w);_t!==null&&It(ie,_t.startTime-tt)}}function _e(tt,_t){q=!1,ee&&(ee=!1,Z(Pe),Pe=-1),$=!0;var wt=P;try{for(H(_t),D=r(b);D!==null&&(!(D.expirationTime>_t)||tt&&!ct());){var Tt=D.callback;if(typeof Tt=="function"){D.callback=null,P=D.priorityLevel;var nr=Tt(D.expirationTime<=_t);_t=e.unstable_now(),typeof nr=="function"?D.callback=nr:D===r(b)&&o(b),H(_t)}else o(b);D=r(b)}if(D!==null)var $t=!0;else{var an=r(w);an!==null&&It(ie,an.startTime-_t),$t=!1}return $t}finally{D=null,P=wt,$=!1}}var Le=!1,ve=null,Pe=-1,Ne=5,$e=-1;function ct(){return!(e.unstable_now()-$e<Ne)}function qt(){if(ve!==null){var tt=e.unstable_now();$e=tt;var _t=!0;try{_t=ve(!0,tt)}finally{_t?Er():(Le=!1,ve=null)}}else Le=!1}var Er;if(typeof j=="function")Er=function(){j(qt)};else if(typeof MessageChannel<"u"){var Bt=new MessageChannel,Ft=Bt.port2;Bt.port1.onmessage=qt,Er=function(){Ft.postMessage(null)}}else Er=function(){me(qt,0)};function ut(tt){ve=tt,Le||(Le=!0,Er())}function It(tt,_t){Pe=me(function(){tt(e.unstable_now())},_t)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(tt){tt.callback=null},e.unstable_continueExecution=function(){q||$||(q=!0,ut(_e))},e.unstable_forceFrameRate=function(tt){0>tt||125<tt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ne=0<tt?Math.floor(1e3/tt):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(tt){switch(P){case 1:case 2:case 3:var _t=3;break;default:_t=P}var wt=P;P=_t;try{return tt()}finally{P=wt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(tt,_t){switch(tt){case 1:case 2:case 3:case 4:case 5:break;default:tt=3}var wt=P;P=tt;try{return _t()}finally{P=wt}},e.unstable_scheduleCallback=function(tt,_t,wt){var Tt=e.unstable_now();switch(typeof wt=="object"&&wt!==null?(wt=wt.delay,wt=typeof wt=="number"&&0<wt?Tt+wt:Tt):wt=Tt,tt){case 1:var nr=-1;break;case 2:nr=250;break;case 5:nr=1073741823;break;case 4:nr=1e4;break;default:nr=5e3}return nr=wt+nr,tt={id:T++,callback:_t,priorityLevel:tt,startTime:wt,expirationTime:nr,sortIndex:-1},wt>Tt?(tt.sortIndex=wt,t(w,tt),r(b)===null&&tt===r(w)&&(ee?(Z(Pe),Pe=-1):ee=!0,It(ie,wt-Tt))):(tt.sortIndex=nr,t(b,tt),q||$||(q=!0,ut(_e))),tt},e.unstable_shouldYield=ct,e.unstable_wrapCallback=function(tt){var _t=P;return function(){var wt=P;P=_t;try{return tt.apply(this,arguments)}finally{P=wt}}}})(P4);(function(e){e.exports=P4})(WD);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I4=Me,Vo=Kv;function Ge(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z4=new Set,ap={};function Fu(e,t){Jh(e,t),Jh(e+"Capture",t)}function Jh(e,t){for(ap[e]=t,e=0;e<t.length;e++)z4.add(t[e])}var ul=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yv=Object.prototype.hasOwnProperty,HD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wk={},Sk={};function qD(e){return Yv.call(Sk,e)?!0:Yv.call(wk,e)?!1:HD.test(e)?Sk[e]=!0:(wk[e]=!0,!1)}function XD(e,t,r,o){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return o?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function KD(e,t,r,o){if(t===null||typeof t>"u"||XD(e,t,r,o))return!0;if(o)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Hi(e,t,r,o,c,h,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=p}var gi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){gi[e]=new Hi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];gi[t]=new Hi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){gi[e]=new Hi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){gi[e]=new Hi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){gi[e]=new Hi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){gi[e]=new Hi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){gi[e]=new Hi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){gi[e]=new Hi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){gi[e]=new Hi(e,5,!1,e.toLowerCase(),null,!1,!1)});var Hb=/[\-:]([a-z])/g;function qb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Hb,qb);gi[t]=new Hi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Hb,qb);gi[t]=new Hi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Hb,qb);gi[t]=new Hi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){gi[e]=new Hi(e,1,!1,e.toLowerCase(),null,!1,!1)});gi.xlinkHref=new Hi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){gi[e]=new Hi(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xb(e,t,r,o){var c=gi.hasOwnProperty(t)?gi[t]:null;(c!==null?c.type!==0:o||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(KD(t,r,c,o)&&(r=null),o||c===null?qD(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,o=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,o?e.setAttributeNS(o,t,r):e.setAttribute(t,r))))}var _l=I4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cg=Symbol.for("react.element"),kh=Symbol.for("react.portal"),Th=Symbol.for("react.fragment"),Kb=Symbol.for("react.strict_mode"),Jv=Symbol.for("react.profiler"),M4=Symbol.for("react.provider"),D4=Symbol.for("react.context"),Yb=Symbol.for("react.forward_ref"),Qv=Symbol.for("react.suspense"),ex=Symbol.for("react.suspense_list"),Jb=Symbol.for("react.memo"),jl=Symbol.for("react.lazy"),R4=Symbol.for("react.offscreen"),kk=Symbol.iterator;function nf(e){return e===null||typeof e!="object"?null:(e=kk&&e[kk]||e["@@iterator"],typeof e=="function"?e:null)}var on=Object.assign,k1;function vf(e){if(k1===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);k1=t&&t[1]||""}return`
`+k1+e}var T1=!1;function E1(e,t){if(!e||T1)return"";T1=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var o=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){o=w}e.call(t.prototype)}else{try{throw Error()}catch(w){o=w}e()}}catch(w){if(w&&o&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),h=o.stack.split(`
`),p=c.length-1,l=h.length-1;1<=p&&0<=l&&c[p]!==h[l];)l--;for(;1<=p&&0<=l;p--,l--)if(c[p]!==h[l]){if(p!==1||l!==1)do if(p--,l--,0>l||c[p]!==h[l]){var b=`
`+c[p].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=p&&0<=l);break}}}finally{T1=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?vf(e):""}function YD(e){switch(e.tag){case 5:return vf(e.type);case 16:return vf("Lazy");case 13:return vf("Suspense");case 19:return vf("SuspenseList");case 0:case 2:case 15:return e=E1(e.type,!1),e;case 11:return e=E1(e.type.render,!1),e;case 1:return e=E1(e.type,!0),e;default:return""}}function tx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Th:return"Fragment";case kh:return"Portal";case Jv:return"Profiler";case Kb:return"StrictMode";case Qv:return"Suspense";case ex:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case D4:return(e.displayName||"Context")+".Consumer";case M4:return(e._context.displayName||"Context")+".Provider";case Yb:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jb:return t=e.displayName||null,t!==null?t:tx(e.type)||"Memo";case jl:t=e._payload,e=e._init;try{return tx(e(t))}catch{}}return null}function JD(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tx(t);case 8:return t===Kb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L4(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function QD(e){var t=L4(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),o=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,h=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){o=""+p,h.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return o},setValue:function(p){o=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ug(e){e._valueTracker||(e._valueTracker=QD(e))}function B4(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=L4(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function Cy(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function rx(e,t){var r=t.checked;return on({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Tk(e,t){var r=t.defaultValue==null?"":t.defaultValue,o=t.checked!=null?t.checked:t.defaultChecked;r=yc(t.value!=null?t.value:r),e._wrapperState={initialChecked:o,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function F4(e,t){t=t.checked,t!=null&&Xb(e,"checked",t,!1)}function nx(e,t){F4(e,t);var r=yc(t.value),o=t.type;if(r!=null)o==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(o==="submit"||o==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ix(e,t.type,r):t.hasOwnProperty("defaultValue")&&ix(e,t.type,yc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ek(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var o=t.type;if(!(o!=="submit"&&o!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function ix(e,t,r){(t!=="number"||Cy(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var xf=Array.isArray;function Oh(e,t,r,o){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&o&&(e[r].defaultSelected=!0)}else{for(r=""+yc(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,o&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function ox(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ge(91));return on({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ck(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Ge(92));if(xf(r)){if(1<r.length)throw Error(Ge(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:yc(r)}}function $4(e,t){var r=yc(t.value),o=yc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),o!=null&&(e.defaultValue=""+o)}function Ak(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function O4(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ax(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?O4(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var hg,V4=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,o,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,o,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=hg.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function sp(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Df={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},eR=["Webkit","ms","Moz","O"];Object.keys(Df).forEach(function(e){eR.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Df[t]=Df[e]})});function N4(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Df.hasOwnProperty(e)&&Df[e]?(""+t).trim():t+"px"}function U4(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var o=r.indexOf("--")===0,c=N4(r,t[r],o);r==="float"&&(r="cssFloat"),o?e.setProperty(r,c):e[r]=c}}var tR=on({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sx(e,t){if(t){if(tR[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ge(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ge(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ge(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ge(62))}}function lx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cx=null;function Qb(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ux=null,Vh=null,Nh=null;function Pk(e){if(e=Kp(e)){if(typeof ux!="function")throw Error(Ge(280));var t=e.stateNode;t&&(t=R0(t),ux(e.stateNode,e.type,t))}}function j4(e){Vh?Nh?Nh.push(e):Nh=[e]:Vh=e}function G4(){if(Vh){var e=Vh,t=Nh;if(Nh=Vh=null,Pk(e),t)for(e=0;e<t.length;e++)Pk(t[e])}}function Z4(e,t){return e(t)}function W4(){}var C1=!1;function H4(e,t,r){if(C1)return e(t,r);C1=!0;try{return Z4(e,t,r)}finally{C1=!1,(Vh!==null||Nh!==null)&&(W4(),G4())}}function lp(e,t){var r=e.stateNode;if(r===null)return null;var o=R0(r);if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Ge(231,t,typeof r));return r}var hx=!1;if(ul)try{var of={};Object.defineProperty(of,"passive",{get:function(){hx=!0}}),window.addEventListener("test",of,of),window.removeEventListener("test",of,of)}catch{hx=!1}function rR(e,t,r,o,c,h,p,l,b){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(T){this.onError(T)}}var Rf=!1,Ay=null,Py=!1,dx=null,nR={onError:function(e){Rf=!0,Ay=e}};function iR(e,t,r,o,c,h,p,l,b){Rf=!1,Ay=null,rR.apply(nR,arguments)}function oR(e,t,r,o,c,h,p,l,b){if(iR.apply(this,arguments),Rf){if(Rf){var w=Ay;Rf=!1,Ay=null}else throw Error(Ge(198));Py||(Py=!0,dx=w)}}function $u(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function q4(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ik(e){if($u(e)!==e)throw Error(Ge(188))}function aR(e){var t=e.alternate;if(!t){if(t=$u(e),t===null)throw Error(Ge(188));return t!==e?null:e}for(var r=e,o=t;;){var c=r.return;if(c===null)break;var h=c.alternate;if(h===null){if(o=c.return,o!==null){r=o;continue}break}if(c.child===h.child){for(h=c.child;h;){if(h===r)return Ik(c),e;if(h===o)return Ik(c),t;h=h.sibling}throw Error(Ge(188))}if(r.return!==o.return)r=c,o=h;else{for(var p=!1,l=c.child;l;){if(l===r){p=!0,r=c,o=h;break}if(l===o){p=!0,o=c,r=h;break}l=l.sibling}if(!p){for(l=h.child;l;){if(l===r){p=!0,r=h,o=c;break}if(l===o){p=!0,o=h,r=c;break}l=l.sibling}if(!p)throw Error(Ge(189))}}if(r.alternate!==o)throw Error(Ge(190))}if(r.tag!==3)throw Error(Ge(188));return r.stateNode.current===r?e:t}function X4(e){return e=aR(e),e!==null?K4(e):null}function K4(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=K4(e);if(t!==null)return t;e=e.sibling}return null}var Y4=Vo.unstable_scheduleCallback,zk=Vo.unstable_cancelCallback,sR=Vo.unstable_shouldYield,lR=Vo.unstable_requestPaint,vn=Vo.unstable_now,cR=Vo.unstable_getCurrentPriorityLevel,ew=Vo.unstable_ImmediatePriority,J4=Vo.unstable_UserBlockingPriority,Iy=Vo.unstable_NormalPriority,uR=Vo.unstable_LowPriority,Q4=Vo.unstable_IdlePriority,I0=null,ms=null;function hR(e){if(ms&&typeof ms.onCommitFiberRoot=="function")try{ms.onCommitFiberRoot(I0,e,void 0,(e.current.flags&128)===128)}catch{}}var za=Math.clz32?Math.clz32:pR,dR=Math.log,fR=Math.LN2;function pR(e){return e>>>=0,e===0?32:31-(dR(e)/fR|0)|0}var dg=64,fg=4194304;function bf(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function zy(e,t){var r=e.pendingLanes;if(r===0)return 0;var o=0,c=e.suspendedLanes,h=e.pingedLanes,p=r&268435455;if(p!==0){var l=p&~c;l!==0?o=bf(l):(h&=p,h!==0&&(o=bf(h)))}else p=r&~c,p!==0?o=bf(p):h!==0&&(o=bf(h));if(o===0)return 0;if(t!==0&&t!==o&&!(t&c)&&(c=o&-o,h=t&-t,c>=h||c===16&&(h&4194240)!==0))return t;if(o&4&&(o|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=o;0<t;)r=31-za(t),c=1<<r,o|=e[r],t&=~c;return o}function mR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gR(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,c=e.expirationTimes,h=e.pendingLanes;0<h;){var p=31-za(h),l=1<<p,b=c[p];b===-1?(!(l&r)||l&o)&&(c[p]=mR(l,t)):b<=t&&(e.expiredLanes|=l),h&=~l}}function fx(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function eA(){var e=dg;return dg<<=1,!(dg&4194240)&&(dg=64),e}function A1(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function qp(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-za(t),e[t]=r}function yR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var o=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-za(r),h=1<<c;t[c]=0,o[c]=-1,e[c]=-1,r&=~h}}function tw(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-za(r),c=1<<o;c&t|e[o]&t&&(e[o]|=t),r&=~c}}var Pr=0;function tA(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var rA,rw,nA,iA,oA,px=!1,pg=[],nc=null,ic=null,oc=null,cp=new Map,up=new Map,Wl=[],_R="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mk(e,t){switch(e){case"focusin":case"focusout":nc=null;break;case"dragenter":case"dragleave":ic=null;break;case"mouseover":case"mouseout":oc=null;break;case"pointerover":case"pointerout":cp.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":up.delete(t.pointerId)}}function af(e,t,r,o,c,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:h,targetContainers:[c]},t!==null&&(t=Kp(t),t!==null&&rw(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function vR(e,t,r,o,c){switch(t){case"focusin":return nc=af(nc,e,t,r,o,c),!0;case"dragenter":return ic=af(ic,e,t,r,o,c),!0;case"mouseover":return oc=af(oc,e,t,r,o,c),!0;case"pointerover":var h=c.pointerId;return cp.set(h,af(cp.get(h)||null,e,t,r,o,c)),!0;case"gotpointercapture":return h=c.pointerId,up.set(h,af(up.get(h)||null,e,t,r,o,c)),!0}return!1}function aA(e){var t=pu(e.target);if(t!==null){var r=$u(t);if(r!==null){if(t=r.tag,t===13){if(t=q4(r),t!==null){e.blockedOn=t,oA(e.priority,function(){nA(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Xg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=mx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);cx=o,r.target.dispatchEvent(o),cx=null}else return t=Kp(r),t!==null&&rw(t),e.blockedOn=r,!1;t.shift()}return!0}function Dk(e,t,r){Xg(e)&&r.delete(t)}function xR(){px=!1,nc!==null&&Xg(nc)&&(nc=null),ic!==null&&Xg(ic)&&(ic=null),oc!==null&&Xg(oc)&&(oc=null),cp.forEach(Dk),up.forEach(Dk)}function sf(e,t){e.blockedOn===t&&(e.blockedOn=null,px||(px=!0,Vo.unstable_scheduleCallback(Vo.unstable_NormalPriority,xR)))}function hp(e){function t(c){return sf(c,e)}if(0<pg.length){sf(pg[0],e);for(var r=1;r<pg.length;r++){var o=pg[r];o.blockedOn===e&&(o.blockedOn=null)}}for(nc!==null&&sf(nc,e),ic!==null&&sf(ic,e),oc!==null&&sf(oc,e),cp.forEach(t),up.forEach(t),r=0;r<Wl.length;r++)o=Wl[r],o.blockedOn===e&&(o.blockedOn=null);for(;0<Wl.length&&(r=Wl[0],r.blockedOn===null);)aA(r),r.blockedOn===null&&Wl.shift()}var Uh=_l.ReactCurrentBatchConfig,My=!0;function bR(e,t,r,o){var c=Pr,h=Uh.transition;Uh.transition=null;try{Pr=1,nw(e,t,r,o)}finally{Pr=c,Uh.transition=h}}function wR(e,t,r,o){var c=Pr,h=Uh.transition;Uh.transition=null;try{Pr=4,nw(e,t,r,o)}finally{Pr=c,Uh.transition=h}}function nw(e,t,r,o){if(My){var c=mx(e,t,r,o);if(c===null)$1(e,t,o,Dy,r),Mk(e,o);else if(vR(c,e,t,r,o))o.stopPropagation();else if(Mk(e,o),t&4&&-1<_R.indexOf(e)){for(;c!==null;){var h=Kp(c);if(h!==null&&rA(h),h=mx(e,t,r,o),h===null&&$1(e,t,o,Dy,r),h===c)break;c=h}c!==null&&o.stopPropagation()}else $1(e,t,o,null,r)}}var Dy=null;function mx(e,t,r,o){if(Dy=null,e=Qb(o),e=pu(e),e!==null)if(t=$u(e),t===null)e=null;else if(r=t.tag,r===13){if(e=q4(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Dy=e,null}function sA(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cR()){case ew:return 1;case J4:return 4;case Iy:case uR:return 16;case Q4:return 536870912;default:return 16}default:return 16}}var Yl=null,iw=null,Kg=null;function lA(){if(Kg)return Kg;var e,t=iw,r=t.length,o,c="value"in Yl?Yl.value:Yl.textContent,h=c.length;for(e=0;e<r&&t[e]===c[e];e++);var p=r-e;for(o=1;o<=p&&t[r-o]===c[h-o];o++);return Kg=c.slice(e,1<o?1-o:void 0)}function Yg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function mg(){return!0}function Rk(){return!1}function jo(e){function t(r,o,c,h,p){this._reactName=r,this._targetInst=c,this.type=o,this.nativeEvent=h,this.target=p,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(h):h[l]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?mg:Rk,this.isPropagationStopped=Rk,this}return on(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mg)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mg)},persist:function(){},isPersistent:mg}),t}var dd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ow=jo(dd),Xp=on({},dd,{view:0,detail:0}),SR=jo(Xp),P1,I1,lf,z0=on({},Xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:aw,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lf&&(lf&&e.type==="mousemove"?(P1=e.screenX-lf.screenX,I1=e.screenY-lf.screenY):I1=P1=0,lf=e),P1)},movementY:function(e){return"movementY"in e?e.movementY:I1}}),Lk=jo(z0),kR=on({},z0,{dataTransfer:0}),TR=jo(kR),ER=on({},Xp,{relatedTarget:0}),z1=jo(ER),CR=on({},dd,{animationName:0,elapsedTime:0,pseudoElement:0}),AR=jo(CR),PR=on({},dd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),IR=jo(PR),zR=on({},dd,{data:0}),Bk=jo(zR),MR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RR[e])?!!t[e]:!1}function aw(){return LR}var BR=on({},Xp,{key:function(e){if(e.key){var t=MR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Yg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:aw,charCode:function(e){return e.type==="keypress"?Yg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Yg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FR=jo(BR),$R=on({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fk=jo($R),OR=on({},Xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:aw}),VR=jo(OR),NR=on({},dd,{propertyName:0,elapsedTime:0,pseudoElement:0}),UR=jo(NR),jR=on({},z0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),GR=jo(jR),ZR=[9,13,27,32],sw=ul&&"CompositionEvent"in window,Lf=null;ul&&"documentMode"in document&&(Lf=document.documentMode);var WR=ul&&"TextEvent"in window&&!Lf,cA=ul&&(!sw||Lf&&8<Lf&&11>=Lf),$k=String.fromCharCode(32),Ok=!1;function uA(e,t){switch(e){case"keyup":return ZR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hA(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Eh=!1;function HR(e,t){switch(e){case"compositionend":return hA(t);case"keypress":return t.which!==32?null:(Ok=!0,$k);case"textInput":return e=t.data,e===$k&&Ok?null:e;default:return null}}function qR(e,t){if(Eh)return e==="compositionend"||!sw&&uA(e,t)?(e=lA(),Kg=iw=Yl=null,Eh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return cA&&t.locale!=="ko"?null:t.data;default:return null}}var XR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vk(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XR[e.type]:t==="textarea"}function dA(e,t,r,o){j4(o),t=Ry(t,"onChange"),0<t.length&&(r=new ow("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Bf=null,dp=null;function KR(e){SA(e,0)}function M0(e){var t=Ph(e);if(B4(t))return e}function YR(e,t){if(e==="change")return t}var fA=!1;if(ul){var M1;if(ul){var D1="oninput"in document;if(!D1){var Nk=document.createElement("div");Nk.setAttribute("oninput","return;"),D1=typeof Nk.oninput=="function"}M1=D1}else M1=!1;fA=M1&&(!document.documentMode||9<document.documentMode)}function Uk(){Bf&&(Bf.detachEvent("onpropertychange",pA),dp=Bf=null)}function pA(e){if(e.propertyName==="value"&&M0(dp)){var t=[];dA(t,dp,e,Qb(e)),H4(KR,t)}}function JR(e,t,r){e==="focusin"?(Uk(),Bf=t,dp=r,Bf.attachEvent("onpropertychange",pA)):e==="focusout"&&Uk()}function QR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return M0(dp)}function eL(e,t){if(e==="click")return M0(t)}function tL(e,t){if(e==="input"||e==="change")return M0(t)}function rL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Da=typeof Object.is=="function"?Object.is:rL;function fp(e,t){if(Da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var c=r[o];if(!Yv.call(t,c)||!Da(e[c],t[c]))return!1}return!0}function jk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gk(e,t){var r=jk(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=jk(r)}}function mA(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?mA(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function gA(){for(var e=window,t=Cy();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cy(e.document)}return t}function lw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function nL(e){var t=gA(),r=e.focusedElem,o=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&mA(r.ownerDocument.documentElement,r)){if(o!==null&&lw(r)){if(t=o.start,e=o.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,h=Math.min(o.start,c);o=o.end===void 0?h:Math.min(o.end,c),!e.extend&&h>o&&(c=o,o=h,h=c),c=Gk(r,h);var p=Gk(r,o);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),h>o?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var iL=ul&&"documentMode"in document&&11>=document.documentMode,Ch=null,gx=null,Ff=null,yx=!1;function Zk(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yx||Ch==null||Ch!==Cy(o)||(o=Ch,"selectionStart"in o&&lw(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Ff&&fp(Ff,o)||(Ff=o,o=Ry(gx,"onSelect"),0<o.length&&(t=new ow("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=Ch)))}function gg(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ah={animationend:gg("Animation","AnimationEnd"),animationiteration:gg("Animation","AnimationIteration"),animationstart:gg("Animation","AnimationStart"),transitionend:gg("Transition","TransitionEnd")},R1={},yA={};ul&&(yA=document.createElement("div").style,"AnimationEvent"in window||(delete Ah.animationend.animation,delete Ah.animationiteration.animation,delete Ah.animationstart.animation),"TransitionEvent"in window||delete Ah.transitionend.transition);function D0(e){if(R1[e])return R1[e];if(!Ah[e])return e;var t=Ah[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in yA)return R1[e]=t[r];return e}var _A=D0("animationend"),vA=D0("animationiteration"),xA=D0("animationstart"),bA=D0("transitionend"),wA=new Map,Wk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xc(e,t){wA.set(e,t),Fu(t,[e])}for(var L1=0;L1<Wk.length;L1++){var B1=Wk[L1],oL=B1.toLowerCase(),aL=B1[0].toUpperCase()+B1.slice(1);xc(oL,"on"+aL)}xc(_A,"onAnimationEnd");xc(vA,"onAnimationIteration");xc(xA,"onAnimationStart");xc("dblclick","onDoubleClick");xc("focusin","onFocus");xc("focusout","onBlur");xc(bA,"onTransitionEnd");Jh("onMouseEnter",["mouseout","mouseover"]);Jh("onMouseLeave",["mouseout","mouseover"]);Jh("onPointerEnter",["pointerout","pointerover"]);Jh("onPointerLeave",["pointerout","pointerover"]);Fu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),sL=new Set("cancel close invalid load scroll toggle".split(" ").concat(wf));function Hk(e,t,r){var o=e.type||"unknown-event";e.currentTarget=r,oR(o,t,void 0,e),e.currentTarget=null}function SA(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],c=o.event;o=o.listeners;e:{var h=void 0;if(t)for(var p=o.length-1;0<=p;p--){var l=o[p],b=l.instance,w=l.currentTarget;if(l=l.listener,b!==h&&c.isPropagationStopped())break e;Hk(c,l,w),h=b}else for(p=0;p<o.length;p++){if(l=o[p],b=l.instance,w=l.currentTarget,l=l.listener,b!==h&&c.isPropagationStopped())break e;Hk(c,l,w),h=b}}}if(Py)throw e=dx,Py=!1,dx=null,e}function Ur(e,t){var r=t[wx];r===void 0&&(r=t[wx]=new Set);var o=e+"__bubble";r.has(o)||(kA(t,e,2,!1),r.add(o))}function F1(e,t,r){var o=0;t&&(o|=4),kA(r,e,o,t)}var yg="_reactListening"+Math.random().toString(36).slice(2);function pp(e){if(!e[yg]){e[yg]=!0,z4.forEach(function(r){r!=="selectionchange"&&(sL.has(r)||F1(r,!1,e),F1(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[yg]||(t[yg]=!0,F1("selectionchange",!1,t))}}function kA(e,t,r,o){switch(sA(t)){case 1:var c=bR;break;case 4:c=wR;break;default:c=nw}r=c.bind(null,t,r,e),c=void 0,!hx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),o?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function $1(e,t,r,o,c){var h=o;if(!(t&1)&&!(t&2)&&o!==null)e:for(;;){if(o===null)return;var p=o.tag;if(p===3||p===4){var l=o.stateNode.containerInfo;if(l===c||l.nodeType===8&&l.parentNode===c)break;if(p===4)for(p=o.return;p!==null;){var b=p.tag;if((b===3||b===4)&&(b=p.stateNode.containerInfo,b===c||b.nodeType===8&&b.parentNode===c))return;p=p.return}for(;l!==null;){if(p=pu(l),p===null)return;if(b=p.tag,b===5||b===6){o=h=p;continue e}l=l.parentNode}}o=o.return}H4(function(){var w=h,T=Qb(r),D=[];e:{var P=wA.get(e);if(P!==void 0){var $=ow,q=e;switch(e){case"keypress":if(Yg(r)===0)break e;case"keydown":case"keyup":$=FR;break;case"focusin":q="focus",$=z1;break;case"focusout":q="blur",$=z1;break;case"beforeblur":case"afterblur":$=z1;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Lk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=TR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=VR;break;case _A:case vA:case xA:$=AR;break;case bA:$=UR;break;case"scroll":$=SR;break;case"wheel":$=GR;break;case"copy":case"cut":case"paste":$=IR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Fk}var ee=(t&4)!==0,me=!ee&&e==="scroll",Z=ee?P!==null?P+"Capture":null:P;ee=[];for(var j=w,H;j!==null;){H=j;var ie=H.stateNode;if(H.tag===5&&ie!==null&&(H=ie,Z!==null&&(ie=lp(j,Z),ie!=null&&ee.push(mp(j,ie,H)))),me)break;j=j.return}0<ee.length&&(P=new $(P,q,null,r,T),D.push({event:P,listeners:ee}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",P&&r!==cx&&(q=r.relatedTarget||r.fromElement)&&(pu(q)||q[hl]))break e;if(($||P)&&(P=T.window===T?T:(P=T.ownerDocument)?P.defaultView||P.parentWindow:window,$?(q=r.relatedTarget||r.toElement,$=w,q=q?pu(q):null,q!==null&&(me=$u(q),q!==me||q.tag!==5&&q.tag!==6)&&(q=null)):($=null,q=w),$!==q)){if(ee=Lk,ie="onMouseLeave",Z="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(ee=Fk,ie="onPointerLeave",Z="onPointerEnter",j="pointer"),me=$==null?P:Ph($),H=q==null?P:Ph(q),P=new ee(ie,j+"leave",$,r,T),P.target=me,P.relatedTarget=H,ie=null,pu(T)===w&&(ee=new ee(Z,j+"enter",q,r,T),ee.target=H,ee.relatedTarget=me,ie=ee),me=ie,$&&q)t:{for(ee=$,Z=q,j=0,H=ee;H;H=_h(H))j++;for(H=0,ie=Z;ie;ie=_h(ie))H++;for(;0<j-H;)ee=_h(ee),j--;for(;0<H-j;)Z=_h(Z),H--;for(;j--;){if(ee===Z||Z!==null&&ee===Z.alternate)break t;ee=_h(ee),Z=_h(Z)}ee=null}else ee=null;$!==null&&qk(D,P,$,ee,!1),q!==null&&me!==null&&qk(D,me,q,ee,!0)}}e:{if(P=w?Ph(w):window,$=P.nodeName&&P.nodeName.toLowerCase(),$==="select"||$==="input"&&P.type==="file")var _e=YR;else if(Vk(P))if(fA)_e=tL;else{_e=QR;var Le=JR}else($=P.nodeName)&&$.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(_e=eL);if(_e&&(_e=_e(e,w))){dA(D,_e,r,T);break e}Le&&Le(e,P,w),e==="focusout"&&(Le=P._wrapperState)&&Le.controlled&&P.type==="number"&&ix(P,"number",P.value)}switch(Le=w?Ph(w):window,e){case"focusin":(Vk(Le)||Le.contentEditable==="true")&&(Ch=Le,gx=w,Ff=null);break;case"focusout":Ff=gx=Ch=null;break;case"mousedown":yx=!0;break;case"contextmenu":case"mouseup":case"dragend":yx=!1,Zk(D,r,T);break;case"selectionchange":if(iL)break;case"keydown":case"keyup":Zk(D,r,T)}var ve;if(sw)e:{switch(e){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Eh?uA(e,r)&&(Pe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Pe="onCompositionStart");Pe&&(cA&&r.locale!=="ko"&&(Eh||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Eh&&(ve=lA()):(Yl=T,iw="value"in Yl?Yl.value:Yl.textContent,Eh=!0)),Le=Ry(w,Pe),0<Le.length&&(Pe=new Bk(Pe,e,null,r,T),D.push({event:Pe,listeners:Le}),ve?Pe.data=ve:(ve=hA(r),ve!==null&&(Pe.data=ve)))),(ve=WR?HR(e,r):qR(e,r))&&(w=Ry(w,"onBeforeInput"),0<w.length&&(T=new Bk("onBeforeInput","beforeinput",null,r,T),D.push({event:T,listeners:w}),T.data=ve))}SA(D,t)})}function mp(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ry(e,t){for(var r=t+"Capture",o=[];e!==null;){var c=e,h=c.stateNode;c.tag===5&&h!==null&&(c=h,h=lp(e,r),h!=null&&o.unshift(mp(e,h,c)),h=lp(e,t),h!=null&&o.push(mp(e,h,c))),e=e.return}return o}function _h(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qk(e,t,r,o,c){for(var h=t._reactName,p=[];r!==null&&r!==o;){var l=r,b=l.alternate,w=l.stateNode;if(b!==null&&b===o)break;l.tag===5&&w!==null&&(l=w,c?(b=lp(r,h),b!=null&&p.unshift(mp(r,b,l))):c||(b=lp(r,h),b!=null&&p.push(mp(r,b,l)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var lL=/\r\n?/g,cL=/\u0000|\uFFFD/g;function Xk(e){return(typeof e=="string"?e:""+e).replace(lL,`
`).replace(cL,"")}function _g(e,t,r){if(t=Xk(t),Xk(e)!==t&&r)throw Error(Ge(425))}function Ly(){}var _x=null,vx=null;function xx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bx=typeof setTimeout=="function"?setTimeout:void 0,uL=typeof clearTimeout=="function"?clearTimeout:void 0,Kk=typeof Promise=="function"?Promise:void 0,hL=typeof queueMicrotask=="function"?queueMicrotask:typeof Kk<"u"?function(e){return Kk.resolve(null).then(e).catch(dL)}:bx;function dL(e){setTimeout(function(){throw e})}function O1(e,t){var r=t,o=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(o===0){e.removeChild(c),hp(t);return}o--}else r!=="$"&&r!=="$?"&&r!=="$!"||o++;r=c}while(r);hp(t)}function ac(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var fd=Math.random().toString(36).slice(2),ds="__reactFiber$"+fd,gp="__reactProps$"+fd,hl="__reactContainer$"+fd,wx="__reactEvents$"+fd,fL="__reactListeners$"+fd,pL="__reactHandles$"+fd;function pu(e){var t=e[ds];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hl]||r[ds]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Yk(e);e!==null;){if(r=e[ds])return r;e=Yk(e)}return t}e=r,r=e.parentNode}return null}function Kp(e){return e=e[ds]||e[hl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ph(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ge(33))}function R0(e){return e[gp]||null}var Sx=[],Ih=-1;function bc(e){return{current:e}}function Zr(e){0>Ih||(e.current=Sx[Ih],Sx[Ih]=null,Ih--)}function Nr(e,t){Ih++,Sx[Ih]=e.current,e.current=t}var _c={},Pi=bc(_c),uo=bc(!1),Pu=_c;function Qh(e,t){var r=e.type.contextTypes;if(!r)return _c;var o=e.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===t)return o.__reactInternalMemoizedMaskedChildContext;var c={},h;for(h in r)c[h]=t[h];return o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function ho(e){return e=e.childContextTypes,e!=null}function By(){Zr(uo),Zr(Pi)}function Jk(e,t,r){if(Pi.current!==_c)throw Error(Ge(168));Nr(Pi,t),Nr(uo,r)}function TA(e,t,r){var o=e.stateNode;if(t=t.childContextTypes,typeof o.getChildContext!="function")return r;o=o.getChildContext();for(var c in o)if(!(c in t))throw Error(Ge(108,JD(e)||"Unknown",c));return on({},r,o)}function Fy(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_c,Pu=Pi.current,Nr(Pi,e),Nr(uo,uo.current),!0}function Qk(e,t,r){var o=e.stateNode;if(!o)throw Error(Ge(169));r?(e=TA(e,t,Pu),o.__reactInternalMemoizedMergedChildContext=e,Zr(uo),Zr(Pi),Nr(Pi,e)):Zr(uo),Nr(uo,r)}var Ys=null,L0=!1,V1=!1;function EA(e){Ys===null?Ys=[e]:Ys.push(e)}function mL(e){L0=!0,EA(e)}function wc(){if(!V1&&Ys!==null){V1=!0;var e=0,t=Pr;try{var r=Ys;for(Pr=1;e<r.length;e++){var o=r[e];do o=o(!0);while(o!==null)}Ys=null,L0=!1}catch(c){throw Ys!==null&&(Ys=Ys.slice(e+1)),Y4(ew,wc),c}finally{Pr=t,V1=!1}}return null}var zh=[],Mh=0,$y=null,Oy=0,ra=[],na=0,Iu=null,rl=1,nl="";function ou(e,t){zh[Mh++]=Oy,zh[Mh++]=$y,$y=e,Oy=t}function CA(e,t,r){ra[na++]=rl,ra[na++]=nl,ra[na++]=Iu,Iu=e;var o=rl;e=nl;var c=32-za(o)-1;o&=~(1<<c),r+=1;var h=32-za(t)+c;if(30<h){var p=c-c%5;h=(o&(1<<p)-1).toString(32),o>>=p,c-=p,rl=1<<32-za(t)+c|r<<c|o,nl=h+e}else rl=1<<h|r<<c|o,nl=e}function cw(e){e.return!==null&&(ou(e,1),CA(e,1,0))}function uw(e){for(;e===$y;)$y=zh[--Mh],zh[Mh]=null,Oy=zh[--Mh],zh[Mh]=null;for(;e===Iu;)Iu=ra[--na],ra[na]=null,nl=ra[--na],ra[na]=null,rl=ra[--na],ra[na]=null}var Fo=null,Ro=null,Yr=!1,Pa=null;function AA(e,t){var r=oa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function eT(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Fo=e,Ro=ac(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Fo=e,Ro=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Iu!==null?{id:rl,overflow:nl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=oa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Fo=e,Ro=null,!0):!1;default:return!1}}function kx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Tx(e){if(Yr){var t=Ro;if(t){var r=t;if(!eT(e,t)){if(kx(e))throw Error(Ge(418));t=ac(r.nextSibling);var o=Fo;t&&eT(e,t)?AA(o,r):(e.flags=e.flags&-4097|2,Yr=!1,Fo=e)}}else{if(kx(e))throw Error(Ge(418));e.flags=e.flags&-4097|2,Yr=!1,Fo=e}}}function tT(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Fo=e}function vg(e){if(e!==Fo)return!1;if(!Yr)return tT(e),Yr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!xx(e.type,e.memoizedProps)),t&&(t=Ro)){if(kx(e))throw PA(),Error(Ge(418));for(;t;)AA(e,t),t=ac(t.nextSibling)}if(tT(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ge(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ro=ac(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ro=null}}else Ro=Fo?ac(e.stateNode.nextSibling):null;return!0}function PA(){for(var e=Ro;e;)e=ac(e.nextSibling)}function ed(){Ro=Fo=null,Yr=!1}function hw(e){Pa===null?Pa=[e]:Pa.push(e)}var gL=_l.ReactCurrentBatchConfig;function Ca(e,t){if(e&&e.defaultProps){t=on({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Vy=bc(null),Ny=null,Dh=null,dw=null;function fw(){dw=Dh=Ny=null}function pw(e){var t=Vy.current;Zr(Vy),e._currentValue=t}function Ex(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function jh(e,t){Ny=e,dw=Dh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(lo=!0),e.firstContext=null)}function ca(e){var t=e._currentValue;if(dw!==e)if(e={context:e,memoizedValue:t,next:null},Dh===null){if(Ny===null)throw Error(Ge(308));Dh=e,Ny.dependencies={lanes:0,firstContext:e}}else Dh=Dh.next=e;return t}var mu=null;function mw(e){mu===null?mu=[e]:mu.push(e)}function IA(e,t,r,o){var c=t.interleaved;return c===null?(r.next=r,mw(t)):(r.next=c.next,c.next=r),t.interleaved=r,dl(e,o)}function dl(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Gl=!1;function gw(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zA(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function al(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function sc(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,dr&2){var c=o.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),o.pending=t,dl(e,r)}return c=o.interleaved,c===null?(t.next=t,mw(o)):(t.next=c.next,c.next=t),o.interleaved=t,dl(e,r)}function Jg(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,tw(e,r)}}function rT(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var c=null,h=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};h===null?c=h=p:h=h.next=p,r=r.next}while(r!==null);h===null?c=h=t:h=h.next=t}else c=h=t;r={baseState:o.baseState,firstBaseUpdate:c,lastBaseUpdate:h,shared:o.shared,effects:o.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Uy(e,t,r,o){var c=e.updateQueue;Gl=!1;var h=c.firstBaseUpdate,p=c.lastBaseUpdate,l=c.shared.pending;if(l!==null){c.shared.pending=null;var b=l,w=b.next;b.next=null,p===null?h=w:p.next=w,p=b;var T=e.alternate;T!==null&&(T=T.updateQueue,l=T.lastBaseUpdate,l!==p&&(l===null?T.firstBaseUpdate=w:l.next=w,T.lastBaseUpdate=b))}if(h!==null){var D=c.baseState;p=0,T=w=b=null,l=h;do{var P=l.lane,$=l.eventTime;if((o&P)===P){T!==null&&(T=T.next={eventTime:$,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var q=e,ee=l;switch(P=t,$=r,ee.tag){case 1:if(q=ee.payload,typeof q=="function"){D=q.call($,D,P);break e}D=q;break e;case 3:q.flags=q.flags&-65537|128;case 0:if(q=ee.payload,P=typeof q=="function"?q.call($,D,P):q,P==null)break e;D=on({},D,P);break e;case 2:Gl=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,P=c.effects,P===null?c.effects=[l]:P.push(l))}else $={eventTime:$,lane:P,tag:l.tag,payload:l.payload,callback:l.callback,next:null},T===null?(w=T=$,b=D):T=T.next=$,p|=P;if(l=l.next,l===null){if(l=c.shared.pending,l===null)break;P=l,l=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(1);if(T===null&&(b=D),c.baseState=b,c.firstBaseUpdate=w,c.lastBaseUpdate=T,t=c.shared.interleaved,t!==null){c=t;do p|=c.lane,c=c.next;while(c!==t)}else h===null&&(c.shared.lanes=0);Mu|=p,e.lanes=p,e.memoizedState=D}}function nT(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var o=e[t],c=o.callback;if(c!==null){if(o.callback=null,o=r,typeof c!="function")throw Error(Ge(191,c));c.call(o)}}}var MA=new I4.Component().refs;function Cx(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:on({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var B0={isMounted:function(e){return(e=e._reactInternals)?$u(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var o=ji(),c=cc(e),h=al(o,c);h.payload=t,r!=null&&(h.callback=r),t=sc(e,h,c),t!==null&&(Ma(t,e,c,o),Jg(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=ji(),c=cc(e),h=al(o,c);h.tag=1,h.payload=t,r!=null&&(h.callback=r),t=sc(e,h,c),t!==null&&(Ma(t,e,c,o),Jg(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ji(),o=cc(e),c=al(r,o);c.tag=2,t!=null&&(c.callback=t),t=sc(e,c,o),t!==null&&(Ma(t,e,o,r),Jg(t,e,o))}};function iT(e,t,r,o,c,h,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,h,p):t.prototype&&t.prototype.isPureReactComponent?!fp(r,o)||!fp(c,h):!0}function DA(e,t,r){var o=!1,c=_c,h=t.contextType;return typeof h=="object"&&h!==null?h=ca(h):(c=ho(t)?Pu:Pi.current,o=t.contextTypes,h=(o=o!=null)?Qh(e,c):_c),t=new t(r,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=B0,e.stateNode=t,t._reactInternals=e,o&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=h),t}function oT(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&B0.enqueueReplaceState(t,t.state,null)}function Ax(e,t,r,o){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=MA,gw(e);var h=t.contextType;typeof h=="object"&&h!==null?c.context=ca(h):(h=ho(t)?Pu:Pi.current,c.context=Qh(e,h)),c.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(Cx(e,t,h,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&B0.enqueueReplaceState(c,c.state,null),Uy(e,r,c,o),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function cf(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Ge(309));var o=r.stateNode}if(!o)throw Error(Ge(147,e));var c=o,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(p){var l=c.refs;l===MA&&(l=c.refs={}),p===null?delete l[h]:l[h]=p},t._stringRef=h,t)}if(typeof e!="string")throw Error(Ge(284));if(!r._owner)throw Error(Ge(290,e))}return e}function xg(e,t){throw e=Object.prototype.toString.call(t),Error(Ge(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function aT(e){var t=e._init;return t(e._payload)}function RA(e){function t(Z,j){if(e){var H=Z.deletions;H===null?(Z.deletions=[j],Z.flags|=16):H.push(j)}}function r(Z,j){if(!e)return null;for(;j!==null;)t(Z,j),j=j.sibling;return null}function o(Z,j){for(Z=new Map;j!==null;)j.key!==null?Z.set(j.key,j):Z.set(j.index,j),j=j.sibling;return Z}function c(Z,j){return Z=uc(Z,j),Z.index=0,Z.sibling=null,Z}function h(Z,j,H){return Z.index=H,e?(H=Z.alternate,H!==null?(H=H.index,H<j?(Z.flags|=2,j):H):(Z.flags|=2,j)):(Z.flags|=1048576,j)}function p(Z){return e&&Z.alternate===null&&(Z.flags|=2),Z}function l(Z,j,H,ie){return j===null||j.tag!==6?(j=H1(H,Z.mode,ie),j.return=Z,j):(j=c(j,H),j.return=Z,j)}function b(Z,j,H,ie){var _e=H.type;return _e===Th?T(Z,j,H.props.children,ie,H.key):j!==null&&(j.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===jl&&aT(_e)===j.type)?(ie=c(j,H.props),ie.ref=cf(Z,j,H),ie.return=Z,ie):(ie=iy(H.type,H.key,H.props,null,Z.mode,ie),ie.ref=cf(Z,j,H),ie.return=Z,ie)}function w(Z,j,H,ie){return j===null||j.tag!==4||j.stateNode.containerInfo!==H.containerInfo||j.stateNode.implementation!==H.implementation?(j=q1(H,Z.mode,ie),j.return=Z,j):(j=c(j,H.children||[]),j.return=Z,j)}function T(Z,j,H,ie,_e){return j===null||j.tag!==7?(j=Tu(H,Z.mode,ie,_e),j.return=Z,j):(j=c(j,H),j.return=Z,j)}function D(Z,j,H){if(typeof j=="string"&&j!==""||typeof j=="number")return j=H1(""+j,Z.mode,H),j.return=Z,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cg:return H=iy(j.type,j.key,j.props,null,Z.mode,H),H.ref=cf(Z,null,j),H.return=Z,H;case kh:return j=q1(j,Z.mode,H),j.return=Z,j;case jl:var ie=j._init;return D(Z,ie(j._payload),H)}if(xf(j)||nf(j))return j=Tu(j,Z.mode,H,null),j.return=Z,j;xg(Z,j)}return null}function P(Z,j,H,ie){var _e=j!==null?j.key:null;if(typeof H=="string"&&H!==""||typeof H=="number")return _e!==null?null:l(Z,j,""+H,ie);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case cg:return H.key===_e?b(Z,j,H,ie):null;case kh:return H.key===_e?w(Z,j,H,ie):null;case jl:return _e=H._init,P(Z,j,_e(H._payload),ie)}if(xf(H)||nf(H))return _e!==null?null:T(Z,j,H,ie,null);xg(Z,H)}return null}function $(Z,j,H,ie,_e){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return Z=Z.get(H)||null,l(j,Z,""+ie,_e);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case cg:return Z=Z.get(ie.key===null?H:ie.key)||null,b(j,Z,ie,_e);case kh:return Z=Z.get(ie.key===null?H:ie.key)||null,w(j,Z,ie,_e);case jl:var Le=ie._init;return $(Z,j,H,Le(ie._payload),_e)}if(xf(ie)||nf(ie))return Z=Z.get(H)||null,T(j,Z,ie,_e,null);xg(j,ie)}return null}function q(Z,j,H,ie){for(var _e=null,Le=null,ve=j,Pe=j=0,Ne=null;ve!==null&&Pe<H.length;Pe++){ve.index>Pe?(Ne=ve,ve=null):Ne=ve.sibling;var $e=P(Z,ve,H[Pe],ie);if($e===null){ve===null&&(ve=Ne);break}e&&ve&&$e.alternate===null&&t(Z,ve),j=h($e,j,Pe),Le===null?_e=$e:Le.sibling=$e,Le=$e,ve=Ne}if(Pe===H.length)return r(Z,ve),Yr&&ou(Z,Pe),_e;if(ve===null){for(;Pe<H.length;Pe++)ve=D(Z,H[Pe],ie),ve!==null&&(j=h(ve,j,Pe),Le===null?_e=ve:Le.sibling=ve,Le=ve);return Yr&&ou(Z,Pe),_e}for(ve=o(Z,ve);Pe<H.length;Pe++)Ne=$(ve,Z,Pe,H[Pe],ie),Ne!==null&&(e&&Ne.alternate!==null&&ve.delete(Ne.key===null?Pe:Ne.key),j=h(Ne,j,Pe),Le===null?_e=Ne:Le.sibling=Ne,Le=Ne);return e&&ve.forEach(function(ct){return t(Z,ct)}),Yr&&ou(Z,Pe),_e}function ee(Z,j,H,ie){var _e=nf(H);if(typeof _e!="function")throw Error(Ge(150));if(H=_e.call(H),H==null)throw Error(Ge(151));for(var Le=_e=null,ve=j,Pe=j=0,Ne=null,$e=H.next();ve!==null&&!$e.done;Pe++,$e=H.next()){ve.index>Pe?(Ne=ve,ve=null):Ne=ve.sibling;var ct=P(Z,ve,$e.value,ie);if(ct===null){ve===null&&(ve=Ne);break}e&&ve&&ct.alternate===null&&t(Z,ve),j=h(ct,j,Pe),Le===null?_e=ct:Le.sibling=ct,Le=ct,ve=Ne}if($e.done)return r(Z,ve),Yr&&ou(Z,Pe),_e;if(ve===null){for(;!$e.done;Pe++,$e=H.next())$e=D(Z,$e.value,ie),$e!==null&&(j=h($e,j,Pe),Le===null?_e=$e:Le.sibling=$e,Le=$e);return Yr&&ou(Z,Pe),_e}for(ve=o(Z,ve);!$e.done;Pe++,$e=H.next())$e=$(ve,Z,Pe,$e.value,ie),$e!==null&&(e&&$e.alternate!==null&&ve.delete($e.key===null?Pe:$e.key),j=h($e,j,Pe),Le===null?_e=$e:Le.sibling=$e,Le=$e);return e&&ve.forEach(function(qt){return t(Z,qt)}),Yr&&ou(Z,Pe),_e}function me(Z,j,H,ie){if(typeof H=="object"&&H!==null&&H.type===Th&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case cg:e:{for(var _e=H.key,Le=j;Le!==null;){if(Le.key===_e){if(_e=H.type,_e===Th){if(Le.tag===7){r(Z,Le.sibling),j=c(Le,H.props.children),j.return=Z,Z=j;break e}}else if(Le.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===jl&&aT(_e)===Le.type){r(Z,Le.sibling),j=c(Le,H.props),j.ref=cf(Z,Le,H),j.return=Z,Z=j;break e}r(Z,Le);break}else t(Z,Le);Le=Le.sibling}H.type===Th?(j=Tu(H.props.children,Z.mode,ie,H.key),j.return=Z,Z=j):(ie=iy(H.type,H.key,H.props,null,Z.mode,ie),ie.ref=cf(Z,j,H),ie.return=Z,Z=ie)}return p(Z);case kh:e:{for(Le=H.key;j!==null;){if(j.key===Le)if(j.tag===4&&j.stateNode.containerInfo===H.containerInfo&&j.stateNode.implementation===H.implementation){r(Z,j.sibling),j=c(j,H.children||[]),j.return=Z,Z=j;break e}else{r(Z,j);break}else t(Z,j);j=j.sibling}j=q1(H,Z.mode,ie),j.return=Z,Z=j}return p(Z);case jl:return Le=H._init,me(Z,j,Le(H._payload),ie)}if(xf(H))return q(Z,j,H,ie);if(nf(H))return ee(Z,j,H,ie);xg(Z,H)}return typeof H=="string"&&H!==""||typeof H=="number"?(H=""+H,j!==null&&j.tag===6?(r(Z,j.sibling),j=c(j,H),j.return=Z,Z=j):(r(Z,j),j=H1(H,Z.mode,ie),j.return=Z,Z=j),p(Z)):r(Z,j)}return me}var td=RA(!0),LA=RA(!1),Yp={},gs=bc(Yp),yp=bc(Yp),_p=bc(Yp);function gu(e){if(e===Yp)throw Error(Ge(174));return e}function yw(e,t){switch(Nr(_p,t),Nr(yp,e),Nr(gs,Yp),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ax(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ax(t,e)}Zr(gs),Nr(gs,t)}function rd(){Zr(gs),Zr(yp),Zr(_p)}function BA(e){gu(_p.current);var t=gu(gs.current),r=ax(t,e.type);t!==r&&(Nr(yp,e),Nr(gs,r))}function _w(e){yp.current===e&&(Zr(gs),Zr(yp))}var tn=bc(0);function jy(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var N1=[];function vw(){for(var e=0;e<N1.length;e++)N1[e]._workInProgressVersionPrimary=null;N1.length=0}var Qg=_l.ReactCurrentDispatcher,U1=_l.ReactCurrentBatchConfig,zu=0,nn=null,Rn=null,Wn=null,Gy=!1,$f=!1,vp=0,yL=0;function Ti(){throw Error(Ge(321))}function xw(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Da(e[r],t[r]))return!1;return!0}function bw(e,t,r,o,c,h){if(zu=h,nn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qg.current=e===null||e.memoizedState===null?bL:wL,e=r(o,c),$f){h=0;do{if($f=!1,vp=0,25<=h)throw Error(Ge(301));h+=1,Wn=Rn=null,t.updateQueue=null,Qg.current=SL,e=r(o,c)}while($f)}if(Qg.current=Zy,t=Rn!==null&&Rn.next!==null,zu=0,Wn=Rn=nn=null,Gy=!1,t)throw Error(Ge(300));return e}function ww(){var e=vp!==0;return vp=0,e}function ss(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wn===null?nn.memoizedState=Wn=e:Wn=Wn.next=e,Wn}function ua(){if(Rn===null){var e=nn.alternate;e=e!==null?e.memoizedState:null}else e=Rn.next;var t=Wn===null?nn.memoizedState:Wn.next;if(t!==null)Wn=t,Rn=e;else{if(e===null)throw Error(Ge(310));Rn=e,e={memoizedState:Rn.memoizedState,baseState:Rn.baseState,baseQueue:Rn.baseQueue,queue:Rn.queue,next:null},Wn===null?nn.memoizedState=Wn=e:Wn=Wn.next=e}return Wn}function xp(e,t){return typeof t=="function"?t(e):t}function j1(e){var t=ua(),r=t.queue;if(r===null)throw Error(Ge(311));r.lastRenderedReducer=e;var o=Rn,c=o.baseQueue,h=r.pending;if(h!==null){if(c!==null){var p=c.next;c.next=h.next,h.next=p}o.baseQueue=c=h,r.pending=null}if(c!==null){h=c.next,o=o.baseState;var l=p=null,b=null,w=h;do{var T=w.lane;if((zu&T)===T)b!==null&&(b=b.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),o=w.hasEagerState?w.eagerState:e(o,w.action);else{var D={lane:T,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};b===null?(l=b=D,p=o):b=b.next=D,nn.lanes|=T,Mu|=T}w=w.next}while(w!==null&&w!==h);b===null?p=o:b.next=l,Da(o,t.memoizedState)||(lo=!0),t.memoizedState=o,t.baseState=p,t.baseQueue=b,r.lastRenderedState=o}if(e=r.interleaved,e!==null){c=e;do h=c.lane,nn.lanes|=h,Mu|=h,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function G1(e){var t=ua(),r=t.queue;if(r===null)throw Error(Ge(311));r.lastRenderedReducer=e;var o=r.dispatch,c=r.pending,h=t.memoizedState;if(c!==null){r.pending=null;var p=c=c.next;do h=e(h,p.action),p=p.next;while(p!==c);Da(h,t.memoizedState)||(lo=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),r.lastRenderedState=h}return[h,o]}function FA(){}function $A(e,t){var r=nn,o=ua(),c=t(),h=!Da(o.memoizedState,c);if(h&&(o.memoizedState=c,lo=!0),o=o.queue,Sw(NA.bind(null,r,o,e),[e]),o.getSnapshot!==t||h||Wn!==null&&Wn.memoizedState.tag&1){if(r.flags|=2048,bp(9,VA.bind(null,r,o,c,t),void 0,null),Xn===null)throw Error(Ge(349));zu&30||OA(r,t,c)}return c}function OA(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=nn.updateQueue,t===null?(t={lastEffect:null,stores:null},nn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function VA(e,t,r,o){t.value=r,t.getSnapshot=o,UA(t)&&jA(e)}function NA(e,t,r){return r(function(){UA(t)&&jA(e)})}function UA(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Da(e,r)}catch{return!0}}function jA(e){var t=dl(e,1);t!==null&&Ma(t,e,1,-1)}function sT(e){var t=ss();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xp,lastRenderedState:e},t.queue=e,e=e.dispatch=xL.bind(null,nn,e),[t.memoizedState,e]}function bp(e,t,r,o){return e={tag:e,create:t,destroy:r,deps:o,next:null},t=nn.updateQueue,t===null?(t={lastEffect:null,stores:null},nn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e)),e}function GA(){return ua().memoizedState}function ey(e,t,r,o){var c=ss();nn.flags|=e,c.memoizedState=bp(1|t,r,void 0,o===void 0?null:o)}function F0(e,t,r,o){var c=ua();o=o===void 0?null:o;var h=void 0;if(Rn!==null){var p=Rn.memoizedState;if(h=p.destroy,o!==null&&xw(o,p.deps)){c.memoizedState=bp(t,r,h,o);return}}nn.flags|=e,c.memoizedState=bp(1|t,r,h,o)}function lT(e,t){return ey(8390656,8,e,t)}function Sw(e,t){return F0(2048,8,e,t)}function ZA(e,t){return F0(4,2,e,t)}function WA(e,t){return F0(4,4,e,t)}function HA(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function qA(e,t,r){return r=r!=null?r.concat([e]):null,F0(4,4,HA.bind(null,t,e),r)}function kw(){}function XA(e,t){var r=ua();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&xw(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function KA(e,t){var r=ua();t=t===void 0?null:t;var o=r.memoizedState;return o!==null&&t!==null&&xw(t,o[1])?o[0]:(e=e(),r.memoizedState=[e,t],e)}function YA(e,t,r){return zu&21?(Da(r,t)||(r=eA(),nn.lanes|=r,Mu|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,lo=!0),e.memoizedState=r)}function _L(e,t){var r=Pr;Pr=r!==0&&4>r?r:4,e(!0);var o=U1.transition;U1.transition={};try{e(!1),t()}finally{Pr=r,U1.transition=o}}function JA(){return ua().memoizedState}function vL(e,t,r){var o=cc(e);if(r={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null},QA(e))e5(t,r);else if(r=IA(e,t,r,o),r!==null){var c=ji();Ma(r,e,o,c),t5(r,t,o)}}function xL(e,t,r){var o=cc(e),c={lane:o,action:r,hasEagerState:!1,eagerState:null,next:null};if(QA(e))e5(t,c);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var p=t.lastRenderedState,l=h(p,r);if(c.hasEagerState=!0,c.eagerState=l,Da(l,p)){var b=t.interleaved;b===null?(c.next=c,mw(t)):(c.next=b.next,b.next=c),t.interleaved=c;return}}catch{}finally{}r=IA(e,t,c,o),r!==null&&(c=ji(),Ma(r,e,o,c),t5(r,t,o))}}function QA(e){var t=e.alternate;return e===nn||t!==null&&t===nn}function e5(e,t){$f=Gy=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function t5(e,t,r){if(r&4194240){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,tw(e,r)}}var Zy={readContext:ca,useCallback:Ti,useContext:Ti,useEffect:Ti,useImperativeHandle:Ti,useInsertionEffect:Ti,useLayoutEffect:Ti,useMemo:Ti,useReducer:Ti,useRef:Ti,useState:Ti,useDebugValue:Ti,useDeferredValue:Ti,useTransition:Ti,useMutableSource:Ti,useSyncExternalStore:Ti,useId:Ti,unstable_isNewReconciler:!1},bL={readContext:ca,useCallback:function(e,t){return ss().memoizedState=[e,t===void 0?null:t],e},useContext:ca,useEffect:lT,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ey(4194308,4,HA.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ey(4194308,4,e,t)},useInsertionEffect:function(e,t){return ey(4,2,e,t)},useMemo:function(e,t){var r=ss();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var o=ss();return t=r!==void 0?r(t):t,o.memoizedState=o.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},o.queue=e,e=e.dispatch=vL.bind(null,nn,e),[o.memoizedState,e]},useRef:function(e){var t=ss();return e={current:e},t.memoizedState=e},useState:sT,useDebugValue:kw,useDeferredValue:function(e){return ss().memoizedState=e},useTransition:function(){var e=sT(!1),t=e[0];return e=_L.bind(null,e[1]),ss().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var o=nn,c=ss();if(Yr){if(r===void 0)throw Error(Ge(407));r=r()}else{if(r=t(),Xn===null)throw Error(Ge(349));zu&30||OA(o,t,r)}c.memoizedState=r;var h={value:r,getSnapshot:t};return c.queue=h,lT(NA.bind(null,o,h,e),[e]),o.flags|=2048,bp(9,VA.bind(null,o,h,r,t),void 0,null),r},useId:function(){var e=ss(),t=Xn.identifierPrefix;if(Yr){var r=nl,o=rl;r=(o&~(1<<32-za(o)-1)).toString(32)+r,t=":"+t+"R"+r,r=vp++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=yL++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wL={readContext:ca,useCallback:XA,useContext:ca,useEffect:Sw,useImperativeHandle:qA,useInsertionEffect:ZA,useLayoutEffect:WA,useMemo:KA,useReducer:j1,useRef:GA,useState:function(){return j1(xp)},useDebugValue:kw,useDeferredValue:function(e){var t=ua();return YA(t,Rn.memoizedState,e)},useTransition:function(){var e=j1(xp)[0],t=ua().memoizedState;return[e,t]},useMutableSource:FA,useSyncExternalStore:$A,useId:JA,unstable_isNewReconciler:!1},SL={readContext:ca,useCallback:XA,useContext:ca,useEffect:Sw,useImperativeHandle:qA,useInsertionEffect:ZA,useLayoutEffect:WA,useMemo:KA,useReducer:G1,useRef:GA,useState:function(){return G1(xp)},useDebugValue:kw,useDeferredValue:function(e){var t=ua();return Rn===null?t.memoizedState=e:YA(t,Rn.memoizedState,e)},useTransition:function(){var e=G1(xp)[0],t=ua().memoizedState;return[e,t]},useMutableSource:FA,useSyncExternalStore:$A,useId:JA,unstable_isNewReconciler:!1};function nd(e,t){try{var r="",o=t;do r+=YD(o),o=o.return;while(o);var c=r}catch(h){c=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:c,digest:null}}function Z1(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Px(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var kL=typeof WeakMap=="function"?WeakMap:Map;function r5(e,t,r){r=al(-1,r),r.tag=3,r.payload={element:null};var o=t.value;return r.callback=function(){Hy||(Hy=!0,Ox=o),Px(e,t)},r}function n5(e,t,r){r=al(-1,r),r.tag=3;var o=e.type.getDerivedStateFromError;if(typeof o=="function"){var c=t.value;r.payload=function(){return o(c)},r.callback=function(){Px(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(r.callback=function(){Px(e,t),typeof o!="function"&&(lc===null?lc=new Set([this]):lc.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function cT(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new kL;var c=new Set;o.set(t,c)}else c=o.get(t),c===void 0&&(c=new Set,o.set(t,c));c.has(r)||(c.add(r),e=$L.bind(null,e,t,r),t.then(e,e))}function uT(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hT(e,t,r,o,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=al(-1,1),t.tag=2,sc(r,t,1))),r.lanes|=1),e)}var TL=_l.ReactCurrentOwner,lo=!1;function Oi(e,t,r,o){t.child=e===null?LA(t,null,r,o):td(t,e.child,r,o)}function dT(e,t,r,o,c){r=r.render;var h=t.ref;return jh(t,c),o=bw(e,t,r,o,h,c),r=ww(),e!==null&&!lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,fl(e,t,c)):(Yr&&r&&cw(t),t.flags|=1,Oi(e,t,o,c),t.child)}function fT(e,t,r,o,c){if(e===null){var h=r.type;return typeof h=="function"&&!Mw(h)&&h.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=h,i5(e,t,h,o,c)):(e=iy(r.type,null,o,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,!(e.lanes&c)){var p=h.memoizedProps;if(r=r.compare,r=r!==null?r:fp,r(p,o)&&e.ref===t.ref)return fl(e,t,c)}return t.flags|=1,e=uc(h,o),e.ref=t.ref,e.return=t,t.child=e}function i5(e,t,r,o,c){if(e!==null){var h=e.memoizedProps;if(fp(h,o)&&e.ref===t.ref)if(lo=!1,t.pendingProps=o=h,(e.lanes&c)!==0)e.flags&131072&&(lo=!0);else return t.lanes=e.lanes,fl(e,t,c)}return Ix(e,t,r,o,c)}function o5(e,t,r){var o=t.pendingProps,c=o.children,h=e!==null?e.memoizedState:null;if(o.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Nr(Lh,Po),Po|=r;else{if(!(r&1073741824))return e=h!==null?h.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Nr(Lh,Po),Po|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=h!==null?h.baseLanes:r,Nr(Lh,Po),Po|=o}else h!==null?(o=h.baseLanes|r,t.memoizedState=null):o=r,Nr(Lh,Po),Po|=o;return Oi(e,t,c,r),t.child}function a5(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Ix(e,t,r,o,c){var h=ho(r)?Pu:Pi.current;return h=Qh(t,h),jh(t,c),r=bw(e,t,r,o,h,c),o=ww(),e!==null&&!lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,fl(e,t,c)):(Yr&&o&&cw(t),t.flags|=1,Oi(e,t,r,c),t.child)}function pT(e,t,r,o,c){if(ho(r)){var h=!0;Fy(t)}else h=!1;if(jh(t,c),t.stateNode===null)ty(e,t),DA(t,r,o),Ax(t,r,o,c),o=!0;else if(e===null){var p=t.stateNode,l=t.memoizedProps;p.props=l;var b=p.context,w=r.contextType;typeof w=="object"&&w!==null?w=ca(w):(w=ho(r)?Pu:Pi.current,w=Qh(t,w));var T=r.getDerivedStateFromProps,D=typeof T=="function"||typeof p.getSnapshotBeforeUpdate=="function";D||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(l!==o||b!==w)&&oT(t,p,o,w),Gl=!1;var P=t.memoizedState;p.state=P,Uy(t,o,p,c),b=t.memoizedState,l!==o||P!==b||uo.current||Gl?(typeof T=="function"&&(Cx(t,r,T,o),b=t.memoizedState),(l=Gl||iT(t,r,l,o,P,b,w))?(D||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=b),p.props=o,p.state=b,p.context=w,o=l):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{p=t.stateNode,zA(e,t),l=t.memoizedProps,w=t.type===t.elementType?l:Ca(t.type,l),p.props=w,D=t.pendingProps,P=p.context,b=r.contextType,typeof b=="object"&&b!==null?b=ca(b):(b=ho(r)?Pu:Pi.current,b=Qh(t,b));var $=r.getDerivedStateFromProps;(T=typeof $=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(l!==D||P!==b)&&oT(t,p,o,b),Gl=!1,P=t.memoizedState,p.state=P,Uy(t,o,p,c);var q=t.memoizedState;l!==D||P!==q||uo.current||Gl?(typeof $=="function"&&(Cx(t,r,$,o),q=t.memoizedState),(w=Gl||iT(t,r,w,o,P,q,b)||!1)?(T||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,q,b),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,q,b)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=q),p.props=o,p.state=q,p.context=b,o=w):(typeof p.componentDidUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),o=!1)}return zx(e,t,r,o,h,c)}function zx(e,t,r,o,c,h){a5(e,t);var p=(t.flags&128)!==0;if(!o&&!p)return c&&Qk(t,r,!1),fl(e,t,h);o=t.stateNode,TL.current=t;var l=p&&typeof r.getDerivedStateFromError!="function"?null:o.render();return t.flags|=1,e!==null&&p?(t.child=td(t,e.child,null,h),t.child=td(t,null,l,h)):Oi(e,t,l,h),t.memoizedState=o.state,c&&Qk(t,r,!0),t.child}function s5(e){var t=e.stateNode;t.pendingContext?Jk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Jk(e,t.context,!1),yw(e,t.containerInfo)}function mT(e,t,r,o,c){return ed(),hw(c),t.flags|=256,Oi(e,t,r,o),t.child}var Mx={dehydrated:null,treeContext:null,retryLane:0};function Dx(e){return{baseLanes:e,cachePool:null,transitions:null}}function l5(e,t,r){var o=t.pendingProps,c=tn.current,h=!1,p=(t.flags&128)!==0,l;if((l=p)||(l=e!==null&&e.memoizedState===null?!1:(c&2)!==0),l?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),Nr(tn,c&1),e===null)return Tx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=o.children,e=o.fallback,h?(o=t.mode,h=t.child,p={mode:"hidden",children:p},!(o&1)&&h!==null?(h.childLanes=0,h.pendingProps=p):h=V0(p,o,0,null),e=Tu(e,o,r,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Dx(r),t.memoizedState=Mx,e):Tw(t,p));if(c=e.memoizedState,c!==null&&(l=c.dehydrated,l!==null))return EL(e,t,p,o,l,c,r);if(h){h=o.fallback,p=t.mode,c=e.child,l=c.sibling;var b={mode:"hidden",children:o.children};return!(p&1)&&t.child!==c?(o=t.child,o.childLanes=0,o.pendingProps=b,t.deletions=null):(o=uc(c,b),o.subtreeFlags=c.subtreeFlags&14680064),l!==null?h=uc(l,h):(h=Tu(h,p,r,null),h.flags|=2),h.return=t,o.return=t,o.sibling=h,t.child=o,o=h,h=t.child,p=e.child.memoizedState,p=p===null?Dx(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},h.memoizedState=p,h.childLanes=e.childLanes&~r,t.memoizedState=Mx,o}return h=e.child,e=h.sibling,o=uc(h,{mode:"visible",children:o.children}),!(t.mode&1)&&(o.lanes=r),o.return=t,o.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=o,t.memoizedState=null,o}function Tw(e,t){return t=V0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function bg(e,t,r,o){return o!==null&&hw(o),td(t,e.child,null,r),e=Tw(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function EL(e,t,r,o,c,h,p){if(r)return t.flags&256?(t.flags&=-257,o=Z1(Error(Ge(422))),bg(e,t,p,o)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=o.fallback,c=t.mode,o=V0({mode:"visible",children:o.children},c,0,null),h=Tu(h,c,p,null),h.flags|=2,o.return=t,h.return=t,o.sibling=h,t.child=o,t.mode&1&&td(t,e.child,null,p),t.child.memoizedState=Dx(p),t.memoizedState=Mx,h);if(!(t.mode&1))return bg(e,t,p,null);if(c.data==="$!"){if(o=c.nextSibling&&c.nextSibling.dataset,o)var l=o.dgst;return o=l,h=Error(Ge(419)),o=Z1(h,o,void 0),bg(e,t,p,o)}if(l=(p&e.childLanes)!==0,lo||l){if(o=Xn,o!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(o.suspendedLanes|p)?0:c,c!==0&&c!==h.retryLane&&(h.retryLane=c,dl(e,c),Ma(o,e,c,-1))}return zw(),o=Z1(Error(Ge(421))),bg(e,t,p,o)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=OL.bind(null,e),c._reactRetry=t,null):(e=h.treeContext,Ro=ac(c.nextSibling),Fo=t,Yr=!0,Pa=null,e!==null&&(ra[na++]=rl,ra[na++]=nl,ra[na++]=Iu,rl=e.id,nl=e.overflow,Iu=t),t=Tw(t,o.children),t.flags|=4096,t)}function gT(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),Ex(e.return,t,r)}function W1(e,t,r,o,c){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:c}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=o,h.tail=r,h.tailMode=c)}function c5(e,t,r){var o=t.pendingProps,c=o.revealOrder,h=o.tail;if(Oi(e,t,o.children,r),o=tn.current,o&2)o=o&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&gT(e,r,t);else if(e.tag===19)gT(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}o&=1}if(Nr(tn,o),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&jy(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),W1(t,!1,c,r,h);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&jy(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}W1(t,!0,r,null,h);break;case"together":W1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ty(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function fl(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Mu|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ge(153));if(t.child!==null){for(e=t.child,r=uc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=uc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function CL(e,t,r){switch(t.tag){case 3:s5(t),ed();break;case 5:BA(t);break;case 1:ho(t.type)&&Fy(t);break;case 4:yw(t,t.stateNode.containerInfo);break;case 10:var o=t.type._context,c=t.memoizedProps.value;Nr(Vy,o._currentValue),o._currentValue=c;break;case 13:if(o=t.memoizedState,o!==null)return o.dehydrated!==null?(Nr(tn,tn.current&1),t.flags|=128,null):r&t.child.childLanes?l5(e,t,r):(Nr(tn,tn.current&1),e=fl(e,t,r),e!==null?e.sibling:null);Nr(tn,tn.current&1);break;case 19:if(o=(r&t.childLanes)!==0,e.flags&128){if(o)return c5(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Nr(tn,tn.current),o)break;return null;case 22:case 23:return t.lanes=0,o5(e,t,r)}return fl(e,t,r)}var u5,Rx,h5,d5;u5=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Rx=function(){};h5=function(e,t,r,o){var c=e.memoizedProps;if(c!==o){e=t.stateNode,gu(gs.current);var h=null;switch(r){case"input":c=rx(e,c),o=rx(e,o),h=[];break;case"select":c=on({},c,{value:void 0}),o=on({},o,{value:void 0}),h=[];break;case"textarea":c=ox(e,c),o=ox(e,o),h=[];break;default:typeof c.onClick!="function"&&typeof o.onClick=="function"&&(e.onclick=Ly)}sx(r,o);var p;r=null;for(w in c)if(!o.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var l=c[w];for(p in l)l.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(ap.hasOwnProperty(w)?h||(h=[]):(h=h||[]).push(w,null));for(w in o){var b=o[w];if(l=c!=null?c[w]:void 0,o.hasOwnProperty(w)&&b!==l&&(b!=null||l!=null))if(w==="style")if(l){for(p in l)!l.hasOwnProperty(p)||b&&b.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in b)b.hasOwnProperty(p)&&l[p]!==b[p]&&(r||(r={}),r[p]=b[p])}else r||(h||(h=[]),h.push(w,r)),r=b;else w==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,l=l?l.__html:void 0,b!=null&&l!==b&&(h=h||[]).push(w,b)):w==="children"?typeof b!="string"&&typeof b!="number"||(h=h||[]).push(w,""+b):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(ap.hasOwnProperty(w)?(b!=null&&w==="onScroll"&&Ur("scroll",e),h||l===b||(h=[])):(h=h||[]).push(w,b))}r&&(h=h||[]).push("style",r);var w=h;(t.updateQueue=w)&&(t.flags|=4)}};d5=function(e,t,r,o){r!==o&&(t.flags|=4)};function uf(e,t){if(!Yr)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function Ei(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags&14680064,o|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,o|=c.subtreeFlags,o|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function AL(e,t,r){var o=t.pendingProps;switch(uw(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ei(t),null;case 1:return ho(t.type)&&By(),Ei(t),null;case 3:return o=t.stateNode,rd(),Zr(uo),Zr(Pi),vw(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(e===null||e.child===null)&&(vg(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Pa!==null&&(Ux(Pa),Pa=null))),Rx(e,t),Ei(t),null;case 5:_w(t);var c=gu(_p.current);if(r=t.type,e!==null&&t.stateNode!=null)h5(e,t,r,o,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!o){if(t.stateNode===null)throw Error(Ge(166));return Ei(t),null}if(e=gu(gs.current),vg(t)){o=t.stateNode,r=t.type;var h=t.memoizedProps;switch(o[ds]=t,o[gp]=h,e=(t.mode&1)!==0,r){case"dialog":Ur("cancel",o),Ur("close",o);break;case"iframe":case"object":case"embed":Ur("load",o);break;case"video":case"audio":for(c=0;c<wf.length;c++)Ur(wf[c],o);break;case"source":Ur("error",o);break;case"img":case"image":case"link":Ur("error",o),Ur("load",o);break;case"details":Ur("toggle",o);break;case"input":Tk(o,h),Ur("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!h.multiple},Ur("invalid",o);break;case"textarea":Ck(o,h),Ur("invalid",o)}sx(r,h),c=null;for(var p in h)if(h.hasOwnProperty(p)){var l=h[p];p==="children"?typeof l=="string"?o.textContent!==l&&(h.suppressHydrationWarning!==!0&&_g(o.textContent,l,e),c=["children",l]):typeof l=="number"&&o.textContent!==""+l&&(h.suppressHydrationWarning!==!0&&_g(o.textContent,l,e),c=["children",""+l]):ap.hasOwnProperty(p)&&l!=null&&p==="onScroll"&&Ur("scroll",o)}switch(r){case"input":ug(o),Ek(o,h,!0);break;case"textarea":ug(o),Ak(o);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(o.onclick=Ly)}o=c,t.updateQueue=o,o!==null&&(t.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=O4(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof o.is=="string"?e=p.createElement(r,{is:o.is}):(e=p.createElement(r),r==="select"&&(p=e,o.multiple?p.multiple=!0:o.size&&(p.size=o.size))):e=p.createElementNS(e,r),e[ds]=t,e[gp]=o,u5(e,t,!1,!1),t.stateNode=e;e:{switch(p=lx(r,o),r){case"dialog":Ur("cancel",e),Ur("close",e),c=o;break;case"iframe":case"object":case"embed":Ur("load",e),c=o;break;case"video":case"audio":for(c=0;c<wf.length;c++)Ur(wf[c],e);c=o;break;case"source":Ur("error",e),c=o;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),c=o;break;case"details":Ur("toggle",e),c=o;break;case"input":Tk(e,o),c=rx(e,o),Ur("invalid",e);break;case"option":c=o;break;case"select":e._wrapperState={wasMultiple:!!o.multiple},c=on({},o,{value:void 0}),Ur("invalid",e);break;case"textarea":Ck(e,o),c=ox(e,o),Ur("invalid",e);break;default:c=o}sx(r,c),l=c;for(h in l)if(l.hasOwnProperty(h)){var b=l[h];h==="style"?U4(e,b):h==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&V4(e,b)):h==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&sp(e,b):typeof b=="number"&&sp(e,""+b):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(ap.hasOwnProperty(h)?b!=null&&h==="onScroll"&&Ur("scroll",e):b!=null&&Xb(e,h,b,p))}switch(r){case"input":ug(e),Ek(e,o,!1);break;case"textarea":ug(e),Ak(e);break;case"option":o.value!=null&&e.setAttribute("value",""+yc(o.value));break;case"select":e.multiple=!!o.multiple,h=o.value,h!=null?Oh(e,!!o.multiple,h,!1):o.defaultValue!=null&&Oh(e,!!o.multiple,o.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=Ly)}switch(r){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ei(t),null;case 6:if(e&&t.stateNode!=null)d5(e,t,e.memoizedProps,o);else{if(typeof o!="string"&&t.stateNode===null)throw Error(Ge(166));if(r=gu(_p.current),gu(gs.current),vg(t)){if(o=t.stateNode,r=t.memoizedProps,o[ds]=t,(h=o.nodeValue!==r)&&(e=Fo,e!==null))switch(e.tag){case 3:_g(o.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&_g(o.nodeValue,r,(e.mode&1)!==0)}h&&(t.flags|=4)}else o=(r.nodeType===9?r:r.ownerDocument).createTextNode(o),o[ds]=t,t.stateNode=o}return Ei(t),null;case 13:if(Zr(tn),o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Yr&&Ro!==null&&t.mode&1&&!(t.flags&128))PA(),ed(),t.flags|=98560,h=!1;else if(h=vg(t),o!==null&&o.dehydrated!==null){if(e===null){if(!h)throw Error(Ge(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(Ge(317));h[ds]=t}else ed(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ei(t),h=!1}else Pa!==null&&(Ux(Pa),Pa=null),h=!0;if(!h)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(o=o!==null,o!==(e!==null&&e.memoizedState!==null)&&o&&(t.child.flags|=8192,t.mode&1&&(e===null||tn.current&1?Ln===0&&(Ln=3):zw())),t.updateQueue!==null&&(t.flags|=4),Ei(t),null);case 4:return rd(),Rx(e,t),e===null&&pp(t.stateNode.containerInfo),Ei(t),null;case 10:return pw(t.type._context),Ei(t),null;case 17:return ho(t.type)&&By(),Ei(t),null;case 19:if(Zr(tn),h=t.memoizedState,h===null)return Ei(t),null;if(o=(t.flags&128)!==0,p=h.rendering,p===null)if(o)uf(h,!1);else{if(Ln!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=jy(e),p!==null){for(t.flags|=128,uf(h,!1),o=p.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),t.subtreeFlags=0,o=r,r=t.child;r!==null;)h=r,e=o,h.flags&=14680066,p=h.alternate,p===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=p.childLanes,h.lanes=p.lanes,h.child=p.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=p.memoizedProps,h.memoizedState=p.memoizedState,h.updateQueue=p.updateQueue,h.type=p.type,e=p.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Nr(tn,tn.current&1|2),t.child}e=e.sibling}h.tail!==null&&vn()>id&&(t.flags|=128,o=!0,uf(h,!1),t.lanes=4194304)}else{if(!o)if(e=jy(p),e!==null){if(t.flags|=128,o=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),uf(h,!0),h.tail===null&&h.tailMode==="hidden"&&!p.alternate&&!Yr)return Ei(t),null}else 2*vn()-h.renderingStartTime>id&&r!==1073741824&&(t.flags|=128,o=!0,uf(h,!1),t.lanes=4194304);h.isBackwards?(p.sibling=t.child,t.child=p):(r=h.last,r!==null?r.sibling=p:t.child=p,h.last=p)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=vn(),t.sibling=null,r=tn.current,Nr(tn,o?r&1|2:r&1),t):(Ei(t),null);case 22:case 23:return Iw(),o=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==o&&(t.flags|=8192),o&&t.mode&1?Po&1073741824&&(Ei(t),t.subtreeFlags&6&&(t.flags|=8192)):Ei(t),null;case 24:return null;case 25:return null}throw Error(Ge(156,t.tag))}function PL(e,t){switch(uw(t),t.tag){case 1:return ho(t.type)&&By(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return rd(),Zr(uo),Zr(Pi),vw(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return _w(t),null;case 13:if(Zr(tn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ge(340));ed()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Zr(tn),null;case 4:return rd(),null;case 10:return pw(t.type._context),null;case 22:case 23:return Iw(),null;case 24:return null;default:return null}}var wg=!1,Ai=!1,IL=typeof WeakSet=="function"?WeakSet:Set,pt=null;function Rh(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(o){dn(e,t,o)}else r.current=null}function Lx(e,t,r){try{r()}catch(o){dn(e,t,o)}}var yT=!1;function zL(e,t){if(_x=My,e=gA(),lw(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var c=o.anchorOffset,h=o.focusNode;o=o.focusOffset;try{r.nodeType,h.nodeType}catch{r=null;break e}var p=0,l=-1,b=-1,w=0,T=0,D=e,P=null;t:for(;;){for(var $;D!==r||c!==0&&D.nodeType!==3||(l=p+c),D!==h||o!==0&&D.nodeType!==3||(b=p+o),D.nodeType===3&&(p+=D.nodeValue.length),($=D.firstChild)!==null;)P=D,D=$;for(;;){if(D===e)break t;if(P===r&&++w===c&&(l=p),P===h&&++T===o&&(b=p),($=D.nextSibling)!==null)break;D=P,P=D.parentNode}D=$}r=l===-1||b===-1?null:{start:l,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(vx={focusedElem:e,selectionRange:r},My=!1,pt=t;pt!==null;)if(t=pt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pt=e;else for(;pt!==null;){t=pt;try{var q=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(q!==null){var ee=q.memoizedProps,me=q.memoizedState,Z=t.stateNode,j=Z.getSnapshotBeforeUpdate(t.elementType===t.type?ee:Ca(t.type,ee),me);Z.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var H=t.stateNode.containerInfo;H.nodeType===1?H.textContent="":H.nodeType===9&&H.documentElement&&H.removeChild(H.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ge(163))}}catch(ie){dn(t,t.return,ie)}if(e=t.sibling,e!==null){e.return=t.return,pt=e;break}pt=t.return}return q=yT,yT=!1,q}function Of(e,t,r){var o=t.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&e)===e){var h=c.destroy;c.destroy=void 0,h!==void 0&&Lx(t,r,h)}c=c.next}while(c!==o)}}function $0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var o=r.create;r.destroy=o()}r=r.next}while(r!==t)}}function Bx(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function f5(e){var t=e.alternate;t!==null&&(e.alternate=null,f5(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ds],delete t[gp],delete t[wx],delete t[fL],delete t[pL])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function p5(e){return e.tag===5||e.tag===3||e.tag===4}function _T(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||p5(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Fx(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ly));else if(o!==4&&(e=e.child,e!==null))for(Fx(e,t,r),e=e.sibling;e!==null;)Fx(e,t,r),e=e.sibling}function $x(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(e=e.child,e!==null))for($x(e,t,r),e=e.sibling;e!==null;)$x(e,t,r),e=e.sibling}var hi=null,Aa=!1;function Bl(e,t,r){for(r=r.child;r!==null;)m5(e,t,r),r=r.sibling}function m5(e,t,r){if(ms&&typeof ms.onCommitFiberUnmount=="function")try{ms.onCommitFiberUnmount(I0,r)}catch{}switch(r.tag){case 5:Ai||Rh(r,t);case 6:var o=hi,c=Aa;hi=null,Bl(e,t,r),hi=o,Aa=c,hi!==null&&(Aa?(e=hi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):hi.removeChild(r.stateNode));break;case 18:hi!==null&&(Aa?(e=hi,r=r.stateNode,e.nodeType===8?O1(e.parentNode,r):e.nodeType===1&&O1(e,r),hp(e)):O1(hi,r.stateNode));break;case 4:o=hi,c=Aa,hi=r.stateNode.containerInfo,Aa=!0,Bl(e,t,r),hi=o,Aa=c;break;case 0:case 11:case 14:case 15:if(!Ai&&(o=r.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){c=o=o.next;do{var h=c,p=h.destroy;h=h.tag,p!==void 0&&(h&2||h&4)&&Lx(r,t,p),c=c.next}while(c!==o)}Bl(e,t,r);break;case 1:if(!Ai&&(Rh(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=r.memoizedProps,o.state=r.memoizedState,o.componentWillUnmount()}catch(l){dn(r,t,l)}Bl(e,t,r);break;case 21:Bl(e,t,r);break;case 22:r.mode&1?(Ai=(o=Ai)||r.memoizedState!==null,Bl(e,t,r),Ai=o):Bl(e,t,r);break;default:Bl(e,t,r)}}function vT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new IL),t.forEach(function(o){var c=VL.bind(null,e,o);r.has(o)||(r.add(o),o.then(c,c))})}}function Ta(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var c=r[o];try{var h=e,p=t,l=p;e:for(;l!==null;){switch(l.tag){case 5:hi=l.stateNode,Aa=!1;break e;case 3:hi=l.stateNode.containerInfo,Aa=!0;break e;case 4:hi=l.stateNode.containerInfo,Aa=!0;break e}l=l.return}if(hi===null)throw Error(Ge(160));m5(h,p,c),hi=null,Aa=!1;var b=c.alternate;b!==null&&(b.return=null),c.return=null}catch(w){dn(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)g5(t,e),t=t.sibling}function g5(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ta(t,e),ts(e),o&4){try{Of(3,e,e.return),$0(3,e)}catch(ee){dn(e,e.return,ee)}try{Of(5,e,e.return)}catch(ee){dn(e,e.return,ee)}}break;case 1:Ta(t,e),ts(e),o&512&&r!==null&&Rh(r,r.return);break;case 5:if(Ta(t,e),ts(e),o&512&&r!==null&&Rh(r,r.return),e.flags&32){var c=e.stateNode;try{sp(c,"")}catch(ee){dn(e,e.return,ee)}}if(o&4&&(c=e.stateNode,c!=null)){var h=e.memoizedProps,p=r!==null?r.memoizedProps:h,l=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{l==="input"&&h.type==="radio"&&h.name!=null&&F4(c,h),lx(l,p);var w=lx(l,h);for(p=0;p<b.length;p+=2){var T=b[p],D=b[p+1];T==="style"?U4(c,D):T==="dangerouslySetInnerHTML"?V4(c,D):T==="children"?sp(c,D):Xb(c,T,D,w)}switch(l){case"input":nx(c,h);break;case"textarea":$4(c,h);break;case"select":var P=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!h.multiple;var $=h.value;$!=null?Oh(c,!!h.multiple,$,!1):P!==!!h.multiple&&(h.defaultValue!=null?Oh(c,!!h.multiple,h.defaultValue,!0):Oh(c,!!h.multiple,h.multiple?[]:"",!1))}c[gp]=h}catch(ee){dn(e,e.return,ee)}}break;case 6:if(Ta(t,e),ts(e),o&4){if(e.stateNode===null)throw Error(Ge(162));c=e.stateNode,h=e.memoizedProps;try{c.nodeValue=h}catch(ee){dn(e,e.return,ee)}}break;case 3:if(Ta(t,e),ts(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{hp(t.containerInfo)}catch(ee){dn(e,e.return,ee)}break;case 4:Ta(t,e),ts(e);break;case 13:Ta(t,e),ts(e),c=e.child,c.flags&8192&&(h=c.memoizedState!==null,c.stateNode.isHidden=h,!h||c.alternate!==null&&c.alternate.memoizedState!==null||(Aw=vn())),o&4&&vT(e);break;case 22:if(T=r!==null&&r.memoizedState!==null,e.mode&1?(Ai=(w=Ai)||T,Ta(t,e),Ai=w):Ta(t,e),ts(e),o&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!T&&e.mode&1)for(pt=e,T=e.child;T!==null;){for(D=pt=T;pt!==null;){switch(P=pt,$=P.child,P.tag){case 0:case 11:case 14:case 15:Of(4,P,P.return);break;case 1:Rh(P,P.return);var q=P.stateNode;if(typeof q.componentWillUnmount=="function"){o=P,r=P.return;try{t=o,q.props=t.memoizedProps,q.state=t.memoizedState,q.componentWillUnmount()}catch(ee){dn(o,r,ee)}}break;case 5:Rh(P,P.return);break;case 22:if(P.memoizedState!==null){bT(D);continue}}$!==null?($.return=P,pt=$):bT(D)}T=T.sibling}e:for(T=null,D=e;;){if(D.tag===5){if(T===null){T=D;try{c=D.stateNode,w?(h=c.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(l=D.stateNode,b=D.memoizedProps.style,p=b!=null&&b.hasOwnProperty("display")?b.display:null,l.style.display=N4("display",p))}catch(ee){dn(e,e.return,ee)}}}else if(D.tag===6){if(T===null)try{D.stateNode.nodeValue=w?"":D.memoizedProps}catch(ee){dn(e,e.return,ee)}}else if((D.tag!==22&&D.tag!==23||D.memoizedState===null||D===e)&&D.child!==null){D.child.return=D,D=D.child;continue}if(D===e)break e;for(;D.sibling===null;){if(D.return===null||D.return===e)break e;T===D&&(T=null),D=D.return}T===D&&(T=null),D.sibling.return=D.return,D=D.sibling}}break;case 19:Ta(t,e),ts(e),o&4&&vT(e);break;case 21:break;default:Ta(t,e),ts(e)}}function ts(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(p5(r)){var o=r;break e}r=r.return}throw Error(Ge(160))}switch(o.tag){case 5:var c=o.stateNode;o.flags&32&&(sp(c,""),o.flags&=-33);var h=_T(e);$x(e,h,c);break;case 3:case 4:var p=o.stateNode.containerInfo,l=_T(e);Fx(e,l,p);break;default:throw Error(Ge(161))}}catch(b){dn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ML(e,t,r){pt=e,y5(e)}function y5(e,t,r){for(var o=(e.mode&1)!==0;pt!==null;){var c=pt,h=c.child;if(c.tag===22&&o){var p=c.memoizedState!==null||wg;if(!p){var l=c.alternate,b=l!==null&&l.memoizedState!==null||Ai;l=wg;var w=Ai;if(wg=p,(Ai=b)&&!w)for(pt=c;pt!==null;)p=pt,b=p.child,p.tag===22&&p.memoizedState!==null?wT(c):b!==null?(b.return=p,pt=b):wT(c);for(;h!==null;)pt=h,y5(h),h=h.sibling;pt=c,wg=l,Ai=w}xT(e)}else c.subtreeFlags&8772&&h!==null?(h.return=c,pt=h):xT(e)}}function xT(e){for(;pt!==null;){var t=pt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ai||$0(5,t);break;case 1:var o=t.stateNode;if(t.flags&4&&!Ai)if(r===null)o.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Ca(t.type,r.memoizedProps);o.componentDidUpdate(c,r.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&nT(t,h,o);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}nT(t,p,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var T=w.memoizedState;if(T!==null){var D=T.dehydrated;D!==null&&hp(D)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ge(163))}Ai||t.flags&512&&Bx(t)}catch(P){dn(t,t.return,P)}}if(t===e){pt=null;break}if(r=t.sibling,r!==null){r.return=t.return,pt=r;break}pt=t.return}}function bT(e){for(;pt!==null;){var t=pt;if(t===e){pt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,pt=r;break}pt=t.return}}function wT(e){for(;pt!==null;){var t=pt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{$0(4,t)}catch(b){dn(t,r,b)}break;case 1:var o=t.stateNode;if(typeof o.componentDidMount=="function"){var c=t.return;try{o.componentDidMount()}catch(b){dn(t,c,b)}}var h=t.return;try{Bx(t)}catch(b){dn(t,h,b)}break;case 5:var p=t.return;try{Bx(t)}catch(b){dn(t,p,b)}}}catch(b){dn(t,t.return,b)}if(t===e){pt=null;break}var l=t.sibling;if(l!==null){l.return=t.return,pt=l;break}pt=t.return}}var DL=Math.ceil,Wy=_l.ReactCurrentDispatcher,Ew=_l.ReactCurrentOwner,sa=_l.ReactCurrentBatchConfig,dr=0,Xn=null,In=null,mi=0,Po=0,Lh=bc(0),Ln=0,wp=null,Mu=0,O0=0,Cw=0,Vf=null,ao=null,Aw=0,id=1/0,Ks=null,Hy=!1,Ox=null,lc=null,Sg=!1,Jl=null,qy=0,Nf=0,Vx=null,ry=-1,ny=0;function ji(){return dr&6?vn():ry!==-1?ry:ry=vn()}function cc(e){return e.mode&1?dr&2&&mi!==0?mi&-mi:gL.transition!==null?(ny===0&&(ny=eA()),ny):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:sA(e.type)),e):1}function Ma(e,t,r,o){if(50<Nf)throw Nf=0,Vx=null,Error(Ge(185));qp(e,r,o),(!(dr&2)||e!==Xn)&&(e===Xn&&(!(dr&2)&&(O0|=r),Ln===4&&Hl(e,mi)),fo(e,o),r===1&&dr===0&&!(t.mode&1)&&(id=vn()+500,L0&&wc()))}function fo(e,t){var r=e.callbackNode;gR(e,t);var o=zy(e,e===Xn?mi:0);if(o===0)r!==null&&zk(r),e.callbackNode=null,e.callbackPriority=0;else if(t=o&-o,e.callbackPriority!==t){if(r!=null&&zk(r),t===1)e.tag===0?mL(ST.bind(null,e)):EA(ST.bind(null,e)),hL(function(){!(dr&6)&&wc()}),r=null;else{switch(tA(o)){case 1:r=ew;break;case 4:r=J4;break;case 16:r=Iy;break;case 536870912:r=Q4;break;default:r=Iy}r=T5(r,_5.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _5(e,t){if(ry=-1,ny=0,dr&6)throw Error(Ge(327));var r=e.callbackNode;if(Gh()&&e.callbackNode!==r)return null;var o=zy(e,e===Xn?mi:0);if(o===0)return null;if(o&30||o&e.expiredLanes||t)t=Xy(e,o);else{t=o;var c=dr;dr|=2;var h=x5();(Xn!==e||mi!==t)&&(Ks=null,id=vn()+500,ku(e,t));do try{BL();break}catch(l){v5(e,l)}while(1);fw(),Wy.current=h,dr=c,In!==null?t=0:(Xn=null,mi=0,t=Ln)}if(t!==0){if(t===2&&(c=fx(e),c!==0&&(o=c,t=Nx(e,c))),t===1)throw r=wp,ku(e,0),Hl(e,o),fo(e,vn()),r;if(t===6)Hl(e,o);else{if(c=e.current.alternate,!(o&30)&&!RL(c)&&(t=Xy(e,o),t===2&&(h=fx(e),h!==0&&(o=h,t=Nx(e,h))),t===1))throw r=wp,ku(e,0),Hl(e,o),fo(e,vn()),r;switch(e.finishedWork=c,e.finishedLanes=o,t){case 0:case 1:throw Error(Ge(345));case 2:au(e,ao,Ks);break;case 3:if(Hl(e,o),(o&130023424)===o&&(t=Aw+500-vn(),10<t)){if(zy(e,0)!==0)break;if(c=e.suspendedLanes,(c&o)!==o){ji(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=bx(au.bind(null,e,ao,Ks),t);break}au(e,ao,Ks);break;case 4:if(Hl(e,o),(o&4194240)===o)break;for(t=e.eventTimes,c=-1;0<o;){var p=31-za(o);h=1<<p,p=t[p],p>c&&(c=p),o&=~h}if(o=c,o=vn()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*DL(o/1960))-o,10<o){e.timeoutHandle=bx(au.bind(null,e,ao,Ks),o);break}au(e,ao,Ks);break;case 5:au(e,ao,Ks);break;default:throw Error(Ge(329))}}}return fo(e,vn()),e.callbackNode===r?_5.bind(null,e):null}function Nx(e,t){var r=Vf;return e.current.memoizedState.isDehydrated&&(ku(e,t).flags|=256),e=Xy(e,t),e!==2&&(t=ao,ao=r,t!==null&&Ux(t)),e}function Ux(e){ao===null?ao=e:ao.push.apply(ao,e)}function RL(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var o=0;o<r.length;o++){var c=r[o],h=c.getSnapshot;c=c.value;try{if(!Da(h(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Hl(e,t){for(t&=~Cw,t&=~O0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-za(t),o=1<<r;e[r]=-1,t&=~o}}function ST(e){if(dr&6)throw Error(Ge(327));Gh();var t=zy(e,0);if(!(t&1))return fo(e,vn()),null;var r=Xy(e,t);if(e.tag!==0&&r===2){var o=fx(e);o!==0&&(t=o,r=Nx(e,o))}if(r===1)throw r=wp,ku(e,0),Hl(e,t),fo(e,vn()),r;if(r===6)throw Error(Ge(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,au(e,ao,Ks),fo(e,vn()),null}function Pw(e,t){var r=dr;dr|=1;try{return e(t)}finally{dr=r,dr===0&&(id=vn()+500,L0&&wc())}}function Du(e){Jl!==null&&Jl.tag===0&&!(dr&6)&&Gh();var t=dr;dr|=1;var r=sa.transition,o=Pr;try{if(sa.transition=null,Pr=1,e)return e()}finally{Pr=o,sa.transition=r,dr=t,!(dr&6)&&wc()}}function Iw(){Po=Lh.current,Zr(Lh)}function ku(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,uL(r)),In!==null)for(r=In.return;r!==null;){var o=r;switch(uw(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&By();break;case 3:rd(),Zr(uo),Zr(Pi),vw();break;case 5:_w(o);break;case 4:rd();break;case 13:Zr(tn);break;case 19:Zr(tn);break;case 10:pw(o.type._context);break;case 22:case 23:Iw()}r=r.return}if(Xn=e,In=e=uc(e.current,null),mi=Po=t,Ln=0,wp=null,Cw=O0=Mu=0,ao=Vf=null,mu!==null){for(t=0;t<mu.length;t++)if(r=mu[t],o=r.interleaved,o!==null){r.interleaved=null;var c=o.next,h=r.pending;if(h!==null){var p=h.next;h.next=c,o.next=p}r.pending=o}mu=null}return e}function v5(e,t){do{var r=In;try{if(fw(),Qg.current=Zy,Gy){for(var o=nn.memoizedState;o!==null;){var c=o.queue;c!==null&&(c.pending=null),o=o.next}Gy=!1}if(zu=0,Wn=Rn=nn=null,$f=!1,vp=0,Ew.current=null,r===null||r.return===null){Ln=1,wp=t,In=null;break}e:{var h=e,p=r.return,l=r,b=t;if(t=mi,l.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var w=b,T=l,D=T.tag;if(!(T.mode&1)&&(D===0||D===11||D===15)){var P=T.alternate;P?(T.updateQueue=P.updateQueue,T.memoizedState=P.memoizedState,T.lanes=P.lanes):(T.updateQueue=null,T.memoizedState=null)}var $=uT(p);if($!==null){$.flags&=-257,hT($,p,l,h,t),$.mode&1&&cT(h,w,t),t=$,b=w;var q=t.updateQueue;if(q===null){var ee=new Set;ee.add(b),t.updateQueue=ee}else q.add(b);break e}else{if(!(t&1)){cT(h,w,t),zw();break e}b=Error(Ge(426))}}else if(Yr&&l.mode&1){var me=uT(p);if(me!==null){!(me.flags&65536)&&(me.flags|=256),hT(me,p,l,h,t),hw(nd(b,l));break e}}h=b=nd(b,l),Ln!==4&&(Ln=2),Vf===null?Vf=[h]:Vf.push(h),h=p;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var Z=r5(h,b,t);rT(h,Z);break e;case 1:l=b;var j=h.type,H=h.stateNode;if(!(h.flags&128)&&(typeof j.getDerivedStateFromError=="function"||H!==null&&typeof H.componentDidCatch=="function"&&(lc===null||!lc.has(H)))){h.flags|=65536,t&=-t,h.lanes|=t;var ie=n5(h,l,t);rT(h,ie);break e}}h=h.return}while(h!==null)}w5(r)}catch(_e){t=_e,In===r&&r!==null&&(In=r=r.return);continue}break}while(1)}function x5(){var e=Wy.current;return Wy.current=Zy,e===null?Zy:e}function zw(){(Ln===0||Ln===3||Ln===2)&&(Ln=4),Xn===null||!(Mu&268435455)&&!(O0&268435455)||Hl(Xn,mi)}function Xy(e,t){var r=dr;dr|=2;var o=x5();(Xn!==e||mi!==t)&&(Ks=null,ku(e,t));do try{LL();break}catch(c){v5(e,c)}while(1);if(fw(),dr=r,Wy.current=o,In!==null)throw Error(Ge(261));return Xn=null,mi=0,Ln}function LL(){for(;In!==null;)b5(In)}function BL(){for(;In!==null&&!sR();)b5(In)}function b5(e){var t=k5(e.alternate,e,Po);e.memoizedProps=e.pendingProps,t===null?w5(e):In=t,Ew.current=null}function w5(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=PL(r,t),r!==null){r.flags&=32767,In=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ln=6,In=null;return}}else if(r=AL(r,t,Po),r!==null){In=r;return}if(t=t.sibling,t!==null){In=t;return}In=t=e}while(t!==null);Ln===0&&(Ln=5)}function au(e,t,r){var o=Pr,c=sa.transition;try{sa.transition=null,Pr=1,FL(e,t,r,o)}finally{sa.transition=c,Pr=o}return null}function FL(e,t,r,o){do Gh();while(Jl!==null);if(dr&6)throw Error(Ge(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Ge(177));e.callbackNode=null,e.callbackPriority=0;var h=r.lanes|r.childLanes;if(yR(e,h),e===Xn&&(In=Xn=null,mi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Sg||(Sg=!0,T5(Iy,function(){return Gh(),null})),h=(r.flags&15990)!==0,r.subtreeFlags&15990||h){h=sa.transition,sa.transition=null;var p=Pr;Pr=1;var l=dr;dr|=4,Ew.current=null,zL(e,r),g5(r,e),nL(vx),My=!!_x,vx=_x=null,e.current=r,ML(r),lR(),dr=l,Pr=p,sa.transition=h}else e.current=r;if(Sg&&(Sg=!1,Jl=e,qy=c),h=e.pendingLanes,h===0&&(lc=null),hR(r.stateNode),fo(e,vn()),t!==null)for(o=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],o(c.value,{componentStack:c.stack,digest:c.digest});if(Hy)throw Hy=!1,e=Ox,Ox=null,e;return qy&1&&e.tag!==0&&Gh(),h=e.pendingLanes,h&1?e===Vx?Nf++:(Nf=0,Vx=e):Nf=0,wc(),null}function Gh(){if(Jl!==null){var e=tA(qy),t=sa.transition,r=Pr;try{if(sa.transition=null,Pr=16>e?16:e,Jl===null)var o=!1;else{if(e=Jl,Jl=null,qy=0,dr&6)throw Error(Ge(331));var c=dr;for(dr|=4,pt=e.current;pt!==null;){var h=pt,p=h.child;if(pt.flags&16){var l=h.deletions;if(l!==null){for(var b=0;b<l.length;b++){var w=l[b];for(pt=w;pt!==null;){var T=pt;switch(T.tag){case 0:case 11:case 15:Of(8,T,h)}var D=T.child;if(D!==null)D.return=T,pt=D;else for(;pt!==null;){T=pt;var P=T.sibling,$=T.return;if(f5(T),T===w){pt=null;break}if(P!==null){P.return=$,pt=P;break}pt=$}}}var q=h.alternate;if(q!==null){var ee=q.child;if(ee!==null){q.child=null;do{var me=ee.sibling;ee.sibling=null,ee=me}while(ee!==null)}}pt=h}}if(h.subtreeFlags&2064&&p!==null)p.return=h,pt=p;else e:for(;pt!==null;){if(h=pt,h.flags&2048)switch(h.tag){case 0:case 11:case 15:Of(9,h,h.return)}var Z=h.sibling;if(Z!==null){Z.return=h.return,pt=Z;break e}pt=h.return}}var j=e.current;for(pt=j;pt!==null;){p=pt;var H=p.child;if(p.subtreeFlags&2064&&H!==null)H.return=p,pt=H;else e:for(p=j;pt!==null;){if(l=pt,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$0(9,l)}}catch(_e){dn(l,l.return,_e)}if(l===p){pt=null;break e}var ie=l.sibling;if(ie!==null){ie.return=l.return,pt=ie;break e}pt=l.return}}if(dr=c,wc(),ms&&typeof ms.onPostCommitFiberRoot=="function")try{ms.onPostCommitFiberRoot(I0,e)}catch{}o=!0}return o}finally{Pr=r,sa.transition=t}}return!1}function kT(e,t,r){t=nd(r,t),t=r5(e,t,1),e=sc(e,t,1),t=ji(),e!==null&&(qp(e,1,t),fo(e,t))}function dn(e,t,r){if(e.tag===3)kT(e,e,r);else for(;t!==null;){if(t.tag===3){kT(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(lc===null||!lc.has(o))){e=nd(r,e),e=n5(t,e,1),t=sc(t,e,1),e=ji(),t!==null&&(qp(t,1,e),fo(t,e));break}}t=t.return}}function $L(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),t=ji(),e.pingedLanes|=e.suspendedLanes&r,Xn===e&&(mi&r)===r&&(Ln===4||Ln===3&&(mi&130023424)===mi&&500>vn()-Aw?ku(e,0):Cw|=r),fo(e,t)}function S5(e,t){t===0&&(e.mode&1?(t=fg,fg<<=1,!(fg&130023424)&&(fg=4194304)):t=1);var r=ji();e=dl(e,t),e!==null&&(qp(e,t,r),fo(e,r))}function OL(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),S5(e,r)}function VL(e,t){var r=0;switch(e.tag){case 13:var o=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:o=e.stateNode;break;default:throw Error(Ge(314))}o!==null&&o.delete(t),S5(e,r)}var k5;k5=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||uo.current)lo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return lo=!1,CL(e,t,r);lo=!!(e.flags&131072)}else lo=!1,Yr&&t.flags&1048576&&CA(t,Oy,t.index);switch(t.lanes=0,t.tag){case 2:var o=t.type;ty(e,t),e=t.pendingProps;var c=Qh(t,Pi.current);jh(t,r),c=bw(null,t,o,e,c,r);var h=ww();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ho(o)?(h=!0,Fy(t)):h=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,gw(t),c.updater=B0,t.stateNode=c,c._reactInternals=t,Ax(t,o,e,r),t=zx(null,t,o,!0,h,r)):(t.tag=0,Yr&&h&&cw(t),Oi(null,t,c,r),t=t.child),t;case 16:o=t.elementType;e:{switch(ty(e,t),e=t.pendingProps,c=o._init,o=c(o._payload),t.type=o,c=t.tag=UL(o),e=Ca(o,e),c){case 0:t=Ix(null,t,o,e,r);break e;case 1:t=pT(null,t,o,e,r);break e;case 11:t=dT(null,t,o,e,r);break e;case 14:t=fT(null,t,o,Ca(o.type,e),r);break e}throw Error(Ge(306,o,""))}return t;case 0:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ca(o,c),Ix(e,t,o,c,r);case 1:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ca(o,c),pT(e,t,o,c,r);case 3:e:{if(s5(t),e===null)throw Error(Ge(387));o=t.pendingProps,h=t.memoizedState,c=h.element,zA(e,t),Uy(t,o,null,r);var p=t.memoizedState;if(o=p.element,h.isDehydrated)if(h={element:o,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){c=nd(Error(Ge(423)),t),t=mT(e,t,o,r,c);break e}else if(o!==c){c=nd(Error(Ge(424)),t),t=mT(e,t,o,r,c);break e}else for(Ro=ac(t.stateNode.containerInfo.firstChild),Fo=t,Yr=!0,Pa=null,r=LA(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ed(),o===c){t=fl(e,t,r);break e}Oi(e,t,o,r)}t=t.child}return t;case 5:return BA(t),e===null&&Tx(t),o=t.type,c=t.pendingProps,h=e!==null?e.memoizedProps:null,p=c.children,xx(o,c)?p=null:h!==null&&xx(o,h)&&(t.flags|=32),a5(e,t),Oi(e,t,p,r),t.child;case 6:return e===null&&Tx(t),null;case 13:return l5(e,t,r);case 4:return yw(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=td(t,null,o,r):Oi(e,t,o,r),t.child;case 11:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ca(o,c),dT(e,t,o,c,r);case 7:return Oi(e,t,t.pendingProps,r),t.child;case 8:return Oi(e,t,t.pendingProps.children,r),t.child;case 12:return Oi(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(o=t.type._context,c=t.pendingProps,h=t.memoizedProps,p=c.value,Nr(Vy,o._currentValue),o._currentValue=p,h!==null)if(Da(h.value,p)){if(h.children===c.children&&!uo.current){t=fl(e,t,r);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var l=h.dependencies;if(l!==null){p=h.child;for(var b=l.firstContext;b!==null;){if(b.context===o){if(h.tag===1){b=al(-1,r&-r),b.tag=2;var w=h.updateQueue;if(w!==null){w=w.shared;var T=w.pending;T===null?b.next=b:(b.next=T.next,T.next=b),w.pending=b}}h.lanes|=r,b=h.alternate,b!==null&&(b.lanes|=r),Ex(h.return,r,t),l.lanes|=r;break}b=b.next}}else if(h.tag===10)p=h.type===t.type?null:h.child;else if(h.tag===18){if(p=h.return,p===null)throw Error(Ge(341));p.lanes|=r,l=p.alternate,l!==null&&(l.lanes|=r),Ex(p,r,t),p=h.sibling}else p=h.child;if(p!==null)p.return=h;else for(p=h;p!==null;){if(p===t){p=null;break}if(h=p.sibling,h!==null){h.return=p.return,p=h;break}p=p.return}h=p}Oi(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,o=t.pendingProps.children,jh(t,r),c=ca(c),o=o(c),t.flags|=1,Oi(e,t,o,r),t.child;case 14:return o=t.type,c=Ca(o,t.pendingProps),c=Ca(o.type,c),fT(e,t,o,c,r);case 15:return i5(e,t,t.type,t.pendingProps,r);case 17:return o=t.type,c=t.pendingProps,c=t.elementType===o?c:Ca(o,c),ty(e,t),t.tag=1,ho(o)?(e=!0,Fy(t)):e=!1,jh(t,r),DA(t,o,c),Ax(t,o,c,r),zx(null,t,o,!0,e,r);case 19:return c5(e,t,r);case 22:return o5(e,t,r)}throw Error(Ge(156,t.tag))};function T5(e,t){return Y4(e,t)}function NL(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function oa(e,t,r,o){return new NL(e,t,r,o)}function Mw(e){return e=e.prototype,!(!e||!e.isReactComponent)}function UL(e){if(typeof e=="function")return Mw(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yb)return 11;if(e===Jb)return 14}return 2}function uc(e,t){var r=e.alternate;return r===null?(r=oa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function iy(e,t,r,o,c,h){var p=2;if(o=e,typeof e=="function")Mw(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case Th:return Tu(r.children,c,h,t);case Kb:p=8,c|=8;break;case Jv:return e=oa(12,r,t,c|2),e.elementType=Jv,e.lanes=h,e;case Qv:return e=oa(13,r,t,c),e.elementType=Qv,e.lanes=h,e;case ex:return e=oa(19,r,t,c),e.elementType=ex,e.lanes=h,e;case R4:return V0(r,c,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M4:p=10;break e;case D4:p=9;break e;case Yb:p=11;break e;case Jb:p=14;break e;case jl:p=16,o=null;break e}throw Error(Ge(130,e==null?e:typeof e,""))}return t=oa(p,r,t,c),t.elementType=e,t.type=o,t.lanes=h,t}function Tu(e,t,r,o){return e=oa(7,e,o,t),e.lanes=r,e}function V0(e,t,r,o){return e=oa(22,e,o,t),e.elementType=R4,e.lanes=r,e.stateNode={isHidden:!1},e}function H1(e,t,r){return e=oa(6,e,null,t),e.lanes=r,e}function q1(e,t,r){return t=oa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jL(e,t,r,o,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=A1(0),this.expirationTimes=A1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=A1(0),this.identifierPrefix=o,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function Dw(e,t,r,o,c,h,p,l,b){return e=new jL(e,t,r,l,b),t===1?(t=1,h===!0&&(t|=8)):t=0,h=oa(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:o,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},gw(h),e}function GL(e,t,r){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kh,key:o==null?null:""+o,children:e,containerInfo:t,implementation:r}}function E5(e){if(!e)return _c;e=e._reactInternals;e:{if($u(e)!==e||e.tag!==1)throw Error(Ge(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ho(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ge(171))}if(e.tag===1){var r=e.type;if(ho(r))return TA(e,r,t)}return t}function C5(e,t,r,o,c,h,p,l,b){return e=Dw(r,o,!0,e,c,h,p,l,b),e.context=E5(null),r=e.current,o=ji(),c=cc(r),h=al(o,c),h.callback=t??null,sc(r,h,c),e.current.lanes=c,qp(e,c,o),fo(e,o),e}function N0(e,t,r,o){var c=t.current,h=ji(),p=cc(c);return r=E5(r),t.context===null?t.context=r:t.pendingContext=r,t=al(h,p),t.payload={element:e},o=o===void 0?null:o,o!==null&&(t.callback=o),e=sc(c,t,p),e!==null&&(Ma(e,c,p,h),Jg(e,c,p)),p}function Ky(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function TT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Rw(e,t){TT(e,t),(e=e.alternate)&&TT(e,t)}function ZL(){return null}var A5=typeof reportError=="function"?reportError:function(e){console.error(e)};function Lw(e){this._internalRoot=e}U0.prototype.render=Lw.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ge(409));N0(e,t,null,null)};U0.prototype.unmount=Lw.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Du(function(){N0(null,e,null,null)}),t[hl]=null}};function U0(e){this._internalRoot=e}U0.prototype.unstable_scheduleHydration=function(e){if(e){var t=iA();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Wl.length&&t!==0&&t<Wl[r].priority;r++);Wl.splice(r,0,e),r===0&&aA(e)}};function Bw(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function j0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ET(){}function WL(e,t,r,o,c){if(c){if(typeof o=="function"){var h=o;o=function(){var w=Ky(p);h.call(w)}}var p=C5(t,o,e,0,null,!1,!1,"",ET);return e._reactRootContainer=p,e[hl]=p.current,pp(e.nodeType===8?e.parentNode:e),Du(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof o=="function"){var l=o;o=function(){var w=Ky(b);l.call(w)}}var b=Dw(e,0,!1,null,null,!1,!1,"",ET);return e._reactRootContainer=b,e[hl]=b.current,pp(e.nodeType===8?e.parentNode:e),Du(function(){N0(t,b,r,o)}),b}function G0(e,t,r,o,c){var h=r._reactRootContainer;if(h){var p=h;if(typeof c=="function"){var l=c;c=function(){var b=Ky(p);l.call(b)}}N0(t,p,e,c)}else p=WL(r,t,e,c,o);return Ky(p)}rA=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bf(t.pendingLanes);r!==0&&(tw(t,r|1),fo(t,vn()),!(dr&6)&&(id=vn()+500,wc()))}break;case 13:Du(function(){var o=dl(e,1);if(o!==null){var c=ji();Ma(o,e,1,c)}}),Rw(e,1)}};rw=function(e){if(e.tag===13){var t=dl(e,134217728);if(t!==null){var r=ji();Ma(t,e,134217728,r)}Rw(e,134217728)}};nA=function(e){if(e.tag===13){var t=cc(e),r=dl(e,t);if(r!==null){var o=ji();Ma(r,e,t,o)}Rw(e,t)}};iA=function(){return Pr};oA=function(e,t){var r=Pr;try{return Pr=e,t()}finally{Pr=r}};ux=function(e,t,r){switch(t){case"input":if(nx(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var c=R0(o);if(!c)throw Error(Ge(90));B4(o),nx(o,c)}}}break;case"textarea":$4(e,r);break;case"select":t=r.value,t!=null&&Oh(e,!!r.multiple,t,!1)}};Z4=Pw;W4=Du;var HL={usingClientEntryPoint:!1,Events:[Kp,Ph,R0,j4,G4,Pw]},hf={findFiberByHostInstance:pu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},qL={bundleType:hf.bundleType,version:hf.version,rendererPackageName:hf.rendererPackageName,rendererConfig:hf.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_l.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=X4(e),e===null?null:e.stateNode},findFiberByHostInstance:hf.findFiberByHostInstance||ZL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kg.isDisabled&&kg.supportsFiber)try{I0=kg.inject(qL),ms=kg}catch{}}Uo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HL;Uo.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bw(t))throw Error(Ge(200));return GL(e,t,null,r)};Uo.createRoot=function(e,t){if(!Bw(e))throw Error(Ge(299));var r=!1,o="",c=A5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=Dw(e,1,!1,null,null,r,!1,o,c),e[hl]=t.current,pp(e.nodeType===8?e.parentNode:e),new Lw(t)};Uo.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ge(188)):(e=Object.keys(e).join(","),Error(Ge(268,e)));return e=X4(t),e=e===null?null:e.stateNode,e};Uo.flushSync=function(e){return Du(e)};Uo.hydrate=function(e,t,r){if(!j0(t))throw Error(Ge(200));return G0(null,e,t,!0,r)};Uo.hydrateRoot=function(e,t,r){if(!Bw(e))throw Error(Ge(405));var o=r!=null&&r.hydratedSources||null,c=!1,h="",p=A5;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=C5(t,null,e,1,r??null,c,!1,h,p),e[hl]=t.current,pp(e),o)for(e=0;e<o.length;e++)r=o[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new U0(t)};Uo.render=function(e,t,r){if(!j0(t))throw Error(Ge(200));return G0(null,e,t,!1,r)};Uo.unmountComponentAtNode=function(e){if(!j0(e))throw Error(Ge(40));return e._reactRootContainer?(Du(function(){G0(null,null,e,!1,function(){e._reactRootContainer=null,e[hl]=null})}),!0):!1};Uo.unstable_batchedUpdates=Pw;Uo.unstable_renderSubtreeIntoContainer=function(e,t,r,o){if(!j0(r))throw Error(Ge(200));if(e==null||e._reactInternals===void 0)throw Error(Ge(38));return G0(e,t,r,!1,o)};Uo.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(r){console.error(r)}}t(),e.exports=Uo})(ZD);var CT=op;Xv.createRoot=CT.createRoot,Xv.hydrateRoot=CT.hydrateRoot;function XL(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function KL(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var YL=function(){function e(r){var o=this;this._insertTag=function(c){var h;o.tags.length===0?o.insertionPoint?h=o.insertionPoint.nextSibling:o.prepend?h=o.container.firstChild:h=o.before:h=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(c,h),o.tags.push(c)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(KL(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var h=XL(c);try{h.insertRule(o,h.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){return o.parentNode&&o.parentNode.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Ci="-ms-",Yy="-moz-",vr="-webkit-",P5="comm",Fw="rule",$w="decl",JL="@import",I5="@keyframes",QL=Math.abs,Z0=String.fromCharCode,e8=Object.assign;function t8(e,t){return fi(e,0)^45?(((t<<2^fi(e,0))<<2^fi(e,1))<<2^fi(e,2))<<2^fi(e,3):0}function z5(e){return e.trim()}function r8(e,t){return(e=t.exec(e))?e[0]:e}function kr(e,t,r){return e.replace(t,r)}function jx(e,t){return e.indexOf(t)}function fi(e,t){return e.charCodeAt(t)|0}function Sp(e,t,r){return e.slice(t,r)}function us(e){return e.length}function Ow(e){return e.length}function Tg(e,t){return t.push(e),e}function n8(e,t){return e.map(t).join("")}var W0=1,od=1,M5=0,po=0,Pn=0,pd="";function H0(e,t,r,o,c,h,p){return{value:e,root:t,parent:r,type:o,props:c,children:h,line:W0,column:od,length:p,return:""}}function df(e,t){return e8(H0("",null,null,"",null,null,0),e,{length:-e.length},t)}function i8(){return Pn}function o8(){return Pn=po>0?fi(pd,--po):0,od--,Pn===10&&(od=1,W0--),Pn}function $o(){return Pn=po<M5?fi(pd,po++):0,od++,Pn===10&&(od=1,W0++),Pn}function ys(){return fi(pd,po)}function oy(){return po}function Jp(e,t){return Sp(pd,e,t)}function kp(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D5(e){return W0=od=1,M5=us(pd=e),po=0,[]}function R5(e){return pd="",e}function ay(e){return z5(Jp(po-1,Gx(e===91?e+2:e===40?e+1:e)))}function a8(e){for(;(Pn=ys())&&Pn<33;)$o();return kp(e)>2||kp(Pn)>3?"":" "}function s8(e,t){for(;--t&&$o()&&!(Pn<48||Pn>102||Pn>57&&Pn<65||Pn>70&&Pn<97););return Jp(e,oy()+(t<6&&ys()==32&&$o()==32))}function Gx(e){for(;$o();)switch(Pn){case e:return po;case 34:case 39:e!==34&&e!==39&&Gx(Pn);break;case 40:e===41&&Gx(e);break;case 92:$o();break}return po}function l8(e,t){for(;$o()&&e+Pn!==47+10;)if(e+Pn===42+42&&ys()===47)break;return"/*"+Jp(t,po-1)+"*"+Z0(e===47?e:$o())}function c8(e){for(;!kp(ys());)$o();return Jp(e,po)}function u8(e){return R5(sy("",null,null,null,[""],e=D5(e),0,[0],e))}function sy(e,t,r,o,c,h,p,l,b){for(var w=0,T=0,D=p,P=0,$=0,q=0,ee=1,me=1,Z=1,j=0,H="",ie=c,_e=h,Le=o,ve=H;me;)switch(q=j,j=$o()){case 40:if(q!=108&&fi(ve,D-1)==58){jx(ve+=kr(ay(j),"&","&\f"),"&\f")!=-1&&(Z=-1);break}case 34:case 39:case 91:ve+=ay(j);break;case 9:case 10:case 13:case 32:ve+=a8(q);break;case 92:ve+=s8(oy()-1,7);continue;case 47:switch(ys()){case 42:case 47:Tg(h8(l8($o(),oy()),t,r),b);break;default:ve+="/"}break;case 123*ee:l[w++]=us(ve)*Z;case 125*ee:case 59:case 0:switch(j){case 0:case 125:me=0;case 59+T:$>0&&us(ve)-D&&Tg($>32?PT(ve+";",o,r,D-1):PT(kr(ve," ","")+";",o,r,D-2),b);break;case 59:ve+=";";default:if(Tg(Le=AT(ve,t,r,w,T,c,l,H,ie=[],_e=[],D),h),j===123)if(T===0)sy(ve,t,Le,Le,ie,h,D,l,_e);else switch(P===99&&fi(ve,3)===110?100:P){case 100:case 109:case 115:sy(e,Le,Le,o&&Tg(AT(e,Le,Le,0,0,c,l,H,c,ie=[],D),_e),c,_e,D,l,o?ie:_e);break;default:sy(ve,Le,Le,Le,[""],_e,0,l,_e)}}w=T=$=0,ee=Z=1,H=ve="",D=p;break;case 58:D=1+us(ve),$=q;default:if(ee<1){if(j==123)--ee;else if(j==125&&ee++==0&&o8()==125)continue}switch(ve+=Z0(j),j*ee){case 38:Z=T>0?1:(ve+="\f",-1);break;case 44:l[w++]=(us(ve)-1)*Z,Z=1;break;case 64:ys()===45&&(ve+=ay($o())),P=ys(),T=D=us(H=ve+=c8(oy())),j++;break;case 45:q===45&&us(ve)==2&&(ee=0)}}return h}function AT(e,t,r,o,c,h,p,l,b,w,T){for(var D=c-1,P=c===0?h:[""],$=Ow(P),q=0,ee=0,me=0;q<o;++q)for(var Z=0,j=Sp(e,D+1,D=QL(ee=p[q])),H=e;Z<$;++Z)(H=z5(ee>0?P[Z]+" "+j:kr(j,/&\f/g,P[Z])))&&(b[me++]=H);return H0(e,t,r,c===0?Fw:l,b,w,T)}function h8(e,t,r){return H0(e,t,r,P5,Z0(i8()),Sp(e,2,-2),0)}function PT(e,t,r,o){return H0(e,t,r,$w,Sp(e,0,o),Sp(e,o+1,-1),o)}function Zh(e,t){for(var r="",o=Ow(e),c=0;c<o;c++)r+=t(e[c],c,e,t)||"";return r}function d8(e,t,r,o){switch(e.type){case JL:case $w:return e.return=e.return||e.value;case P5:return"";case I5:return e.return=e.value+"{"+Zh(e.children,o)+"}";case Fw:e.value=e.props.join(",")}return us(r=Zh(e.children,o))?e.return=e.value+"{"+r+"}":""}function f8(e){var t=Ow(e);return function(r,o,c,h){for(var p="",l=0;l<t;l++)p+=e[l](r,o,c,h)||"";return p}}function p8(e){return function(t){t.root||(t=t.return)&&e(t)}}var IT=function(t){var r=new WeakMap;return function(o){if(r.has(o))return r.get(o);var c=t(o);return r.set(o,c),c}};function L5(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var m8=function(t,r,o){for(var c=0,h=0;c=h,h=ys(),c===38&&h===12&&(r[o]=1),!kp(h);)$o();return Jp(t,po)},g8=function(t,r){var o=-1,c=44;do switch(kp(c)){case 0:c===38&&ys()===12&&(r[o]=1),t[o]+=m8(po-1,r,o);break;case 2:t[o]+=ay(c);break;case 4:if(c===44){t[++o]=ys()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=Z0(c)}while(c=$o());return t},y8=function(t,r){return R5(g8(D5(t),r))},zT=new WeakMap,_8=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,c=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!zT.get(o))&&!c){zT.set(t,!0);for(var h=[],p=y8(r,h),l=o.props,b=0,w=0;b<p.length;b++)for(var T=0;T<l.length;T++,w++)t.props[w]=h[b]?p[b].replace(/&\f/g,l[T]):l[T]+" "+p[b]}}},v8=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function B5(e,t){switch(t8(e,t)){case 5103:return vr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return vr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return vr+e+Yy+e+Ci+e+e;case 6828:case 4268:return vr+e+Ci+e+e;case 6165:return vr+e+Ci+"flex-"+e+e;case 5187:return vr+e+kr(e,/(\w+).+(:[^]+)/,vr+"box-$1$2"+Ci+"flex-$1$2")+e;case 5443:return vr+e+Ci+"flex-item-"+kr(e,/flex-|-self/,"")+e;case 4675:return vr+e+Ci+"flex-line-pack"+kr(e,/align-content|flex-|-self/,"")+e;case 5548:return vr+e+Ci+kr(e,"shrink","negative")+e;case 5292:return vr+e+Ci+kr(e,"basis","preferred-size")+e;case 6060:return vr+"box-"+kr(e,"-grow","")+vr+e+Ci+kr(e,"grow","positive")+e;case 4554:return vr+kr(e,/([^-])(transform)/g,"$1"+vr+"$2")+e;case 6187:return kr(kr(kr(e,/(zoom-|grab)/,vr+"$1"),/(image-set)/,vr+"$1"),e,"")+e;case 5495:case 3959:return kr(e,/(image-set\([^]*)/,vr+"$1$`$1");case 4968:return kr(kr(e,/(.+:)(flex-)?(.*)/,vr+"box-pack:$3"+Ci+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+vr+e+e;case 4095:case 3583:case 4068:case 2532:return kr(e,/(.+)-inline(.+)/,vr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(us(e)-1-t>6)switch(fi(e,t+1)){case 109:if(fi(e,t+4)!==45)break;case 102:return kr(e,/(.+:)(.+)-([^]+)/,"$1"+vr+"$2-$3$1"+Yy+(fi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~jx(e,"stretch")?B5(kr(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(fi(e,t+1)!==115)break;case 6444:switch(fi(e,us(e)-3-(~jx(e,"!important")&&10))){case 107:return kr(e,":",":"+vr)+e;case 101:return kr(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+vr+(fi(e,14)===45?"inline-":"")+"box$3$1"+vr+"$2$3$1"+Ci+"$2box$3")+e}break;case 5936:switch(fi(e,t+11)){case 114:return vr+e+Ci+kr(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return vr+e+Ci+kr(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return vr+e+Ci+kr(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return vr+e+Ci+e+e}return e}var x8=function(t,r,o,c){if(t.length>-1&&!t.return)switch(t.type){case $w:t.return=B5(t.value,t.length);break;case I5:return Zh([df(t,{value:kr(t.value,"@","@"+vr)})],c);case Fw:if(t.length)return n8(t.props,function(h){switch(r8(h,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Zh([df(t,{props:[kr(h,/:(read-\w+)/,":"+Yy+"$1")]})],c);case"::placeholder":return Zh([df(t,{props:[kr(h,/:(plac\w+)/,":"+vr+"input-$1")]}),df(t,{props:[kr(h,/:(plac\w+)/,":"+Yy+"$1")]}),df(t,{props:[kr(h,/:(plac\w+)/,Ci+"input-$1")]})],c)}return""})}},b8=[x8],w8=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(ee){var me=ee.getAttribute("data-emotion");me.indexOf(" ")!==-1&&(document.head.appendChild(ee),ee.setAttribute("data-s",""))})}var c=t.stylisPlugins||b8,h={},p,l=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(ee){for(var me=ee.getAttribute("data-emotion").split(" "),Z=1;Z<me.length;Z++)h[me[Z]]=!0;l.push(ee)});var b,w=[_8,v8];{var T,D=[d8,p8(function(ee){T.insert(ee)})],P=f8(w.concat(c,D)),$=function(me){return Zh(u8(me),P)};b=function(me,Z,j,H){T=j,$(me?me+"{"+Z.styles+"}":Z.styles),H&&(q.inserted[Z.name]=!0)}}var q={key:r,sheet:new YL({key:r,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:h,registered:{},insert:b};return q.sheet.hydrate(l),q};function Jy(){return Jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jy.apply(this,arguments)}var Zx={},S8={get exports(){return Zx},set exports(e){Zx=e}},Ir={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kn=typeof Symbol=="function"&&Symbol.for,Vw=Kn?Symbol.for("react.element"):60103,Nw=Kn?Symbol.for("react.portal"):60106,q0=Kn?Symbol.for("react.fragment"):60107,X0=Kn?Symbol.for("react.strict_mode"):60108,K0=Kn?Symbol.for("react.profiler"):60114,Y0=Kn?Symbol.for("react.provider"):60109,J0=Kn?Symbol.for("react.context"):60110,Uw=Kn?Symbol.for("react.async_mode"):60111,Q0=Kn?Symbol.for("react.concurrent_mode"):60111,e_=Kn?Symbol.for("react.forward_ref"):60112,t_=Kn?Symbol.for("react.suspense"):60113,k8=Kn?Symbol.for("react.suspense_list"):60120,r_=Kn?Symbol.for("react.memo"):60115,n_=Kn?Symbol.for("react.lazy"):60116,T8=Kn?Symbol.for("react.block"):60121,E8=Kn?Symbol.for("react.fundamental"):60117,C8=Kn?Symbol.for("react.responder"):60118,A8=Kn?Symbol.for("react.scope"):60119;function Go(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Vw:switch(e=e.type,e){case Uw:case Q0:case q0:case K0:case X0:case t_:return e;default:switch(e=e&&e.$$typeof,e){case J0:case e_:case n_:case r_:case Y0:return e;default:return t}}case Nw:return t}}}function F5(e){return Go(e)===Q0}Ir.AsyncMode=Uw;Ir.ConcurrentMode=Q0;Ir.ContextConsumer=J0;Ir.ContextProvider=Y0;Ir.Element=Vw;Ir.ForwardRef=e_;Ir.Fragment=q0;Ir.Lazy=n_;Ir.Memo=r_;Ir.Portal=Nw;Ir.Profiler=K0;Ir.StrictMode=X0;Ir.Suspense=t_;Ir.isAsyncMode=function(e){return F5(e)||Go(e)===Uw};Ir.isConcurrentMode=F5;Ir.isContextConsumer=function(e){return Go(e)===J0};Ir.isContextProvider=function(e){return Go(e)===Y0};Ir.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Vw};Ir.isForwardRef=function(e){return Go(e)===e_};Ir.isFragment=function(e){return Go(e)===q0};Ir.isLazy=function(e){return Go(e)===n_};Ir.isMemo=function(e){return Go(e)===r_};Ir.isPortal=function(e){return Go(e)===Nw};Ir.isProfiler=function(e){return Go(e)===K0};Ir.isStrictMode=function(e){return Go(e)===X0};Ir.isSuspense=function(e){return Go(e)===t_};Ir.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===q0||e===Q0||e===K0||e===X0||e===t_||e===k8||typeof e=="object"&&e!==null&&(e.$$typeof===n_||e.$$typeof===r_||e.$$typeof===Y0||e.$$typeof===J0||e.$$typeof===e_||e.$$typeof===E8||e.$$typeof===C8||e.$$typeof===A8||e.$$typeof===T8)};Ir.typeOf=Go;(function(e){e.exports=Ir})(S8);var $5=Zx,P8={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},I8={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},O5={};O5[$5.ForwardRef]=P8;O5[$5.Memo]=I8;var z8=!0;function M8(e,t,r){var o="";return r.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):o+=c+" "}),o}var V5=function(t,r,o){var c=t.key+"-"+r.name;(o===!1||z8===!1)&&t.registered[c]===void 0&&(t.registered[c]=r.styles)},N5=function(t,r,o){V5(t,r,o);var c=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var h=r;do t.insert(r===h?"."+c:"",h,t.sheet,!0),h=h.next;while(h!==void 0)}};function D8(e){for(var t=0,r,o=0,c=e.length;c>=4;++o,c-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var R8={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},L8=/[A-Z]|^ms/g,B8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,U5=function(t){return t.charCodeAt(1)===45},MT=function(t){return t!=null&&typeof t!="boolean"},X1=L5(function(e){return U5(e)?e:e.replace(L8,"-$&").toLowerCase()}),DT=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(B8,function(o,c,h){return hs={name:c,styles:h,next:hs},c})}return R8[t]!==1&&!U5(t)&&typeof r=="number"&&r!==0?r+"px":r};function Tp(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return hs={name:r.name,styles:r.styles,next:hs},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)hs={name:o.name,styles:o.styles,next:hs},o=o.next;var c=r.styles+";";return c}return F8(e,t,r)}case"function":{if(e!==void 0){var h=hs,p=r(e);return hs=h,Tp(e,t,p)}break}}if(t==null)return r;var l=t[r];return l!==void 0?l:r}function F8(e,t,r){var o="";if(Array.isArray(r))for(var c=0;c<r.length;c++)o+=Tp(e,t,r[c])+";";else for(var h in r){var p=r[h];if(typeof p!="object")t!=null&&t[p]!==void 0?o+=h+"{"+t[p]+"}":MT(p)&&(o+=X1(h)+":"+DT(h,p)+";");else if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var l=0;l<p.length;l++)MT(p[l])&&(o+=X1(h)+":"+DT(h,p[l])+";");else{var b=Tp(e,t,p);switch(h){case"animation":case"animationName":{o+=X1(h)+":"+b+";";break}default:o+=h+"{"+b+"}"}}}return o}var RT=/label:\s*([^\s;\n{]+)\s*(;|$)/g,hs,jw=function(t,r,o){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,h="";hs=void 0;var p=t[0];p==null||p.raw===void 0?(c=!1,h+=Tp(o,r,p)):h+=p[0];for(var l=1;l<t.length;l++)h+=Tp(o,r,t[l]),c&&(h+=p[l]);RT.lastIndex=0;for(var b="",w;(w=RT.exec(h))!==null;)b+="-"+w[1];var T=D8(h)+b;return{name:T,styles:h,next:hs}},$8=function(t){return t()},j5=bk["useInsertionEffect"]?bk["useInsertionEffect"]:!1,O8=j5||$8,LT=j5||Me.useLayoutEffect,G5=Me.createContext(typeof HTMLElement<"u"?w8({key:"css"}):null);G5.Provider;var Z5=function(t){return Me.forwardRef(function(r,o){var c=Me.useContext(G5);return t(r,c,o)})},Ep=Me.createContext({}),V8=function(t,r){if(typeof r=="function"){var o=r(t);return o}return Jy({},t,r)},N8=IT(function(e){return IT(function(t){return V8(e,t)})}),U8=function(t){var r=Me.useContext(Ep);return t.theme!==r&&(r=N8(r)(t.theme)),Me.createElement(Ep.Provider,{value:r},t.children)},i_=Z5(function(e,t){var r=e.styles,o=jw([r],void 0,Me.useContext(Ep)),c=Me.useRef();return LT(function(){var h=t.key+"-global",p=new t.sheet.constructor({key:h,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),l=!1,b=document.querySelector('style[data-emotion="'+h+" "+o.name+'"]');return t.sheet.tags.length&&(p.before=t.sheet.tags[0]),b!==null&&(l=!0,b.setAttribute("data-emotion",h),p.hydrate([b])),c.current=[p,l],function(){p.flush()}},[t]),LT(function(){var h=c.current,p=h[0],l=h[1];if(l){h[1]=!1;return}if(o.next!==void 0&&N5(t,o.next,!0),p.tags.length){var b=p.tags[p.tags.length-1].nextElementSibling;p.before=b,p.flush()}t.insert("",o,p,!1)},[t,o.name]),null});function j8(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return jw(t)}var G8=function(){var t=j8.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},W5=String.raw,H5=W5`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,Z8=()=>je(i_,{styles:H5}),W8=({scope:e=""})=>je(i_,{styles:W5`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${e} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${e} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${e} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${e} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${e} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${e} :where(b, strong) {
        font-weight: bold;
      }

      ${e} small {
        font-size: 80%;
      }

      ${e} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${e} sub {
        bottom: -0.25em;
      }

      ${e} sup {
        top: -0.5em;
      }

      ${e} img {
        border-style: none;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${e} :where(button, input) {
        overflow: visible;
      }

      ${e} :where(button, select) {
        text-transform: none;
      }

      ${e} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${e} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${e} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${e} progress {
        vertical-align: baseline;
      }

      ${e} textarea {
        overflow: auto;
      }

      ${e} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${e} input[type="number"]::-webkit-inner-spin-button,
      ${e} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${e} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${e} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${e} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${e} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${e} details {
        display: block;
      }

      ${e} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${e} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${e} button {
        background: transparent;
        padding: 0;
      }

      ${e} fieldset {
        margin: 0;
        padding: 0;
      }

      ${e} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${e} textarea {
        resize: vertical;
      }

      ${e} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${e} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${e} table {
        border-collapse: collapse;
      }

      ${e} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${e} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${e} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${e} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${e} select::-ms-expand {
        display: none;
      }

      ${H5}
    `});function H8(e,t){return`${e} returned \`undefined\`. Seems you forgot to wrap component within ${t}`}function Qp(e={}){const{name:t,strict:r=!0,hookName:o="useContext",providerName:c="Provider",errorMessage:h,defaultValue:p}=e,l=Me.createContext(p);l.displayName=t;function b(){var w;const T=Me.useContext(l);if(!T&&r){const D=new Error(h??H8(o,c));throw D.name="ContextError",(w=Error.captureStackTrace)==null||w.call(Error,D,b),D}return T}return[l.Provider,b,l]}var[q8,X8]=Qp({strict:!1,name:"PortalManagerContext"});function q5(e){const{children:t,zIndex:r}=e;return je(q8,{value:{zIndex:r},children:t})}q5.displayName="PortalManager";var Qy=globalThis!=null&&globalThis.document?Me.useLayoutEffect:Me.useEffect,[X5,K8]=Qp({strict:!1,name:"PortalContext"}),Gw="chakra-portal",Y8=".chakra-portal",J8=e=>je("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:e.zIndex,top:0,left:0,right:0},children:e.children}),Q8=e=>{const{appendToParentPortal:t,children:r}=e,[o,c]=Me.useState(null),h=Me.useRef(null),[,p]=Me.useState({});Me.useEffect(()=>p({}),[]);const l=K8(),b=X8();Qy(()=>{if(!o)return;const T=o.ownerDocument,D=t?l??T.body:T.body;if(!D)return;h.current=T.createElement("div"),h.current.className=Gw,D.appendChild(h.current),p({});const P=h.current;return()=>{D.contains(P)&&D.removeChild(P)}},[o]);const w=b!=null&&b.zIndex?je(J8,{zIndex:b==null?void 0:b.zIndex,children:r}):r;return h.current?op.createPortal(je(X5,{value:h.current,children:w}),h.current):je("span",{ref:T=>{T&&c(T)}})},eB=e=>{const{children:t,containerRef:r,appendToParentPortal:o}=e,c=r.current,h=c??(typeof window<"u"?document.body:void 0),p=Me.useMemo(()=>{const b=c==null?void 0:c.ownerDocument.createElement("div");return b&&(b.className=Gw),b},[c]),[,l]=Me.useState({});return Qy(()=>l({}),[]),Qy(()=>{if(!(!p||!h))return h.appendChild(p),()=>{h.removeChild(p)}},[p,h]),h&&p?op.createPortal(je(X5,{value:o?p:null,children:t}),p):null};function o_(e){const t={appendToParentPortal:!0,...e},{containerRef:r,...o}=t;return r?je(eB,{containerRef:r,...o}):je(Q8,{...o})}o_.className=Gw;o_.selector=Y8;o_.displayName="Portal";function tB(){const e=Me.useContext(Ep);if(!e)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return e}var Zw=Me.createContext({});Zw.displayName="ColorModeContext";function Ww(){const e=Me.useContext(Zw);if(e===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return e}var Eg={light:"chakra-ui-light",dark:"chakra-ui-dark"};function rB(e={}){const{preventTransition:t=!0}=e,r={setDataset:o=>{const c=t?r.preventTransition():void 0;document.documentElement.dataset.theme=o,document.documentElement.style.colorScheme=o,c==null||c()},setClassName(o){document.body.classList.add(o?Eg.dark:Eg.light),document.body.classList.remove(o?Eg.light:Eg.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(o){var c;return((c=r.query().matches)!=null?c:o==="dark")?"dark":"light"},addListener(o){const c=r.query(),h=p=>{o(p.matches?"dark":"light")};return typeof c.addListener=="function"?c.addListener(h):c.addEventListener("change",h),()=>{typeof c.removeListener=="function"?c.removeListener(h):c.removeEventListener("change",h)}},preventTransition(){const o=document.createElement("style");return o.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(o),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(o)})})}}};return r}var nB="chakra-ui-color-mode";function iB(e){return{ssr:!1,type:"localStorage",get(t){if(!(globalThis!=null&&globalThis.document))return t;let r;try{r=localStorage.getItem(e)||t}catch{}return r||t},set(t){try{localStorage.setItem(e,t)}catch{}}}}var oB=iB(nB),BT=()=>{};function FT(e,t){return e.type==="cookie"&&e.ssr?e.get(t):t}function K5(e){const{value:t,children:r,options:{useSystemColorMode:o,initialColorMode:c,disableTransitionOnChange:h}={},colorModeManager:p=oB}=e,l=c==="dark"?"dark":"light",[b,w]=Me.useState(()=>FT(p,l)),[T,D]=Me.useState(()=>FT(p)),{getSystemTheme:P,setClassName:$,setDataset:q,addListener:ee}=Me.useMemo(()=>rB({preventTransition:h}),[h]),me=c==="system"&&!b?T:b,Z=Me.useCallback(ie=>{const _e=ie==="system"?P():ie;w(_e),$(_e==="dark"),q(_e),p.set(_e)},[p,P,$,q]);Qy(()=>{c==="system"&&D(P())},[]),Me.useEffect(()=>{const ie=p.get();if(ie){Z(ie);return}if(c==="system"){Z("system");return}Z(l)},[p,l,c,Z]);const j=Me.useCallback(()=>{Z(me==="dark"?"light":"dark")},[me,Z]);Me.useEffect(()=>{if(o)return ee(Z)},[o,ee,Z]);const H=Me.useMemo(()=>({colorMode:t??me,toggleColorMode:t?BT:j,setColorMode:t?BT:Z,forced:t!==void 0}),[me,j,Z,t]);return je(Zw.Provider,{value:H,children:r})}K5.displayName="ColorModeProvider";function aB(){const e=Ww(),t=tB();return{...e,theme:t}}var Sc=(...e)=>e.filter(Boolean).join(" ");function la(e){const t=typeof e;return e!=null&&(t==="object"||t==="function")&&!Array.isArray(e)}function Ql(e,...t){return sB(e)?e(...t):e}var sB=e=>typeof e=="function",e0={},lB={get exports(){return e0},set exports(e){e0=e}};(function(e,t){var r=200,o="__lodash_hash_undefined__",c=800,h=16,p=9007199254740991,l="[object Arguments]",b="[object Array]",w="[object AsyncFunction]",T="[object Boolean]",D="[object Date]",P="[object Error]",$="[object Function]",q="[object GeneratorFunction]",ee="[object Map]",me="[object Number]",Z="[object Null]",j="[object Object]",H="[object Proxy]",ie="[object RegExp]",_e="[object Set]",Le="[object String]",ve="[object Undefined]",Pe="[object WeakMap]",Ne="[object ArrayBuffer]",$e="[object DataView]",ct="[object Float32Array]",qt="[object Float64Array]",Er="[object Int8Array]",Bt="[object Int16Array]",Ft="[object Int32Array]",ut="[object Uint8Array]",It="[object Uint8ClampedArray]",tt="[object Uint16Array]",_t="[object Uint32Array]",wt=/[\\^$.*+?()[\]{}|]/g,Tt=/^\[object .+?Constructor\]$/,nr=/^(?:0|[1-9]\d*)$/,$t={};$t[ct]=$t[qt]=$t[Er]=$t[Bt]=$t[Ft]=$t[ut]=$t[It]=$t[tt]=$t[_t]=!0,$t[l]=$t[b]=$t[Ne]=$t[T]=$t[$e]=$t[D]=$t[P]=$t[$]=$t[ee]=$t[me]=$t[j]=$t[ie]=$t[_e]=$t[Le]=$t[Pe]=!1;var an=typeof _f=="object"&&_f&&_f.Object===Object&&_f,fn=typeof self=="object"&&self&&self.Object===Object&&self,br=an||fn||Function("return this")(),pn=t&&!t.nodeType&&t,Fn=pn&&!0&&e&&!e.nodeType&&e,Qr=Fn&&Fn.exports===pn,Jn=Qr&&an.process,$n=function(){try{var Q=Fn&&Fn.require&&Fn.require("util").types;return Q||Jn&&Jn.binding&&Jn.binding("util")}catch{}}(),Qn=$n&&$n.isTypedArray;function bn(Q,de,Te){switch(Te.length){case 0:return Q.call(de);case 1:return Q.call(de,Te[0]);case 2:return Q.call(de,Te[0],Te[1]);case 3:return Q.call(de,Te[0],Te[1],Te[2])}return Q.apply(de,Te)}function ws(Q,de){for(var Te=-1,st=Array(Q);++Te<Q;)st[Te]=de(Te);return st}function Zo(Q){return function(de){return Q(de)}}function La(Q,de){return Q==null?void 0:Q[de]}function Ba(Q,de){return function(Te){return Q(de(Te))}}var Ss=Array.prototype,Gt=Function.prototype,ei=Object.prototype,Ki=br["__core-js_shared__"],Ii=Gt.toString,ti=ei.hasOwnProperty,Yi=function(){var Q=/[^.]+$/.exec(Ki&&Ki.keys&&Ki.keys.IE_PROTO||"");return Q?"Symbol(src)_1."+Q:""}(),Ji=ei.toString,Fa=Ii.call(Object),go=RegExp("^"+Ii.call(ti).replace(wt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ie=Qr?br.Buffer:void 0,We=br.Symbol,Wo=br.Uint8Array,vi=Ie?Ie.allocUnsafe:void 0,Nt=Ba(Object.getPrototypeOf,Object),ri=Object.create,ni=ei.propertyIsEnumerable,ii=Ss.splice,On=We?We.toStringTag:void 0,Ue=function(){try{var Q=Ts(Object,"defineProperty");return Q({},"",{}),Q}catch{}}(),Mt=Ie?Ie.isBuffer:void 0,Et=Math.max,mn=Date.now,yo=Ts(br,"Map"),St=Ts(Object,"create"),_o=function(){function Q(){}return function(de){if(!vo(de))return{};if(ri)return ri(de);Q.prototype=de;var Te=new Q;return Q.prototype=void 0,Te}}();function zr(Q){var de=-1,Te=Q==null?0:Q.length;for(this.clear();++de<Te;){var st=Q[de];this.set(st[0],st[1])}}function $a(){this.__data__=St?St(null):{},this.size=0}function Hr(Q){var de=this.has(Q)&&delete this.__data__[Q];return this.size-=de?1:0,de}function zn(Q){var de=this.__data__;if(St){var Te=de[Q];return Te===o?void 0:Te}return ti.call(de,Q)?de[Q]:void 0}function ir(Q){var de=this.__data__;return St?de[Q]!==void 0:ti.call(de,Q)}function Oa(Q,de){var Te=this.__data__;return this.size+=this.has(Q)?0:1,Te[Q]=St&&de===void 0?o:de,this}zr.prototype.clear=$a,zr.prototype.delete=Hr,zr.prototype.get=zn,zr.prototype.has=ir,zr.prototype.set=Oa;function sn(Q){var de=-1,Te=Q==null?0:Q.length;for(this.clear();++de<Te;){var st=Q[de];this.set(st[0],st[1])}}function da(){this.__data__=[],this.size=0}function fa(Q){var de=this.__data__,Te=mt(de,Q);if(Te<0)return!1;var st=de.length-1;return Te==st?de.pop():ii.call(de,Te,1),--this.size,!0}function Va(Q){var de=this.__data__,Te=mt(de,Q);return Te<0?void 0:de[Te][1]}function pa(Q){return mt(this.__data__,Q)>-1}function K(Q,de){var Te=this.__data__,st=mt(Te,Q);return st<0?(++this.size,Te.push([Q,de])):Te[st][1]=de,this}sn.prototype.clear=da,sn.prototype.delete=fa,sn.prototype.get=Va,sn.prototype.has=pa,sn.prototype.set=K;function M(Q){var de=-1,Te=Q==null?0:Q.length;for(this.clear();++de<Te;){var st=Q[de];this.set(st[0],st[1])}}function F(){this.size=0,this.__data__={hash:new zr,map:new(yo||sn),string:new zr}}function W(Q){var de=ma(this,Q).delete(Q);return this.size-=de?1:0,de}function X(Q){return ma(this,Q).get(Q)}function ae(Q){return ma(this,Q).has(Q)}function ue(Q,de){var Te=ma(this,Q),st=Te.size;return Te.set(Q,de),this.size+=Te.size==st?0:1,this}M.prototype.clear=F,M.prototype.delete=W,M.prototype.get=X,M.prototype.has=ae,M.prototype.set=ue;function le(Q){var de=this.__data__=new sn(Q);this.size=de.size}function se(){this.__data__=new sn,this.size=0}function he(Q){var de=this.__data__,Te=de.delete(Q);return this.size=de.size,Te}function Ce(Q){return this.__data__.get(Q)}function Fe(Q){return this.__data__.has(Q)}function Ee(Q,de){var Te=this.__data__;if(Te instanceof sn){var st=Te.__data__;if(!yo||st.length<r-1)return st.push([Q,de]),this.size=++Te.size,this;Te=this.__data__=new M(st)}return Te.set(Q,de),this.size=Te.size,this}le.prototype.clear=se,le.prototype.delete=he,le.prototype.get=Ce,le.prototype.has=Fe,le.prototype.set=Ee;function ot(Q,de){var Te=zs(Q),st=!Te&&xl(Q),Ht=!Te&&!st&&Hu(Q),or=!Te&&!st&&!Ht&&Yt(Q),Sr=Te||st||Ht||or,Ut=Sr?ws(Q.length,String):[],mr=Ut.length;for(var ai in Q)(de||ti.call(Q,ai))&&!(Sr&&(ai=="length"||Ht&&(ai=="offset"||ai=="parent")||or&&(ai=="buffer"||ai=="byteLength"||ai=="byteOffset")||Ac(ai,mr)))&&Ut.push(ai);return Ut}function at(Q,de,Te){(Te!==void 0&&!Is(Q[de],Te)||Te===void 0&&!(de in Q))&&xt(Q,de,Te)}function Ke(Q,de,Te){var st=Q[de];(!(ti.call(Q,de)&&Is(st,Te))||Te===void 0&&!(de in Q))&&xt(Q,de,Te)}function mt(Q,de){for(var Te=Q.length;Te--;)if(Is(Q[Te][0],de))return Te;return-1}function xt(Q,de,Te){de=="__proto__"&&Ue?Ue(Q,de,{configurable:!0,enumerable:!0,value:Te,writable:!0}):Q[de]=Te}var Zt=xd();function kt(Q){return Q==null?Q===void 0?ve:Z:On&&On in Object(Q)?Gu(Q):ja(Q)}function zt(Q){return ya(Q)&&kt(Q)==l}function Wt(Q){if(!vo(Q)||Ua(Q))return!1;var de=Ic(Q)?go:Tt;return de.test(Ps(Q))}function lr(Q){return ya(Q)&&bl(Q.length)&&!!$t[kt(Q)]}function ln(Q){if(!vo(Q))return vl(Q);var de=Cs(Q),Te=[];for(var st in Q)st=="constructor"&&(de||!ti.call(Q,st))||Te.push(st);return Te}function wr(Q,de,Te,st,Ht){Q!==de&&Zt(de,function(or,Sr){if(Ht||(Ht=new le),vo(or))wn(Q,de,Sr,Te,wr,st,Ht);else{var Ut=st?st(Ga(Q,Sr),or,Sr+"",Q,de,Ht):void 0;Ut===void 0&&(Ut=or),at(Q,Sr,Ut)}},Xu)}function wn(Q,de,Te,st,Ht,or,Sr){var Ut=Ga(Q,Te),mr=Ga(de,Te),ai=Sr.get(mr);if(ai){at(Q,Te,ai);return}var Vn=or?or(Ut,mr,Te+"",Q,de,Sr):void 0,Qi=Vn===void 0;if(Qi){var Dc=zs(mr),Rc=!Dc&&Hu(mr),Ku=!Dc&&!Rc&&Yt(mr);Vn=mr,Dc||Rc||Ku?zs(Ut)?Vn=Ut:Wu(Ut)?Vn=Uu(Ut):Rc?(Qi=!1,Vn=cr(mr,!0)):Ku?(Qi=!1,Vn=Ec(mr,!0)):Vn=[]:zc(mr)||xl(mr)?(Vn=Ut,xl(Ut)?Vn=qu(Ut):(!vo(Ut)||Ic(Ut))&&(Vn=Zu(mr))):Qi=!1}Qi&&(Sr.set(mr,Vn),Ht(Vn,mr,st,or,Sr),Sr.delete(mr)),at(Q,Te,Vn)}function Na(Q,de){return As(Pc(Q,de,Mc),Q+"")}var ks=Ue?function(Q,de){return Ue(Q,"toString",{configurable:!0,enumerable:!1,value:Ds(de),writable:!0})}:Mc;function cr(Q,de){if(de)return Q.slice();var Te=Q.length,st=vi?vi(Te):new Q.constructor(Te);return Q.copy(st),st}function Tc(Q){var de=new Q.constructor(Q.byteLength);return new Wo(de).set(new Wo(Q)),de}function Ec(Q,de){var Te=de?Tc(Q.buffer):Q.buffer;return new Q.constructor(Te,Q.byteOffset,Q.length)}function Uu(Q,de){var Te=-1,st=Q.length;for(de||(de=Array(st));++Te<st;)de[Te]=Q[Te];return de}function ju(Q,de,Te,st){var Ht=!Te;Te||(Te={});for(var or=-1,Sr=de.length;++or<Sr;){var Ut=de[or],mr=st?st(Te[Ut],Q[Ut],Ut,Te,Q):void 0;mr===void 0&&(mr=Q[Ut]),Ht?xt(Te,Ut,mr):Ke(Te,Ut,mr)}return Te}function Cc(Q){return Na(function(de,Te){var st=-1,Ht=Te.length,or=Ht>1?Te[Ht-1]:void 0,Sr=Ht>2?Te[2]:void 0;for(or=Q.length>3&&typeof or=="function"?(Ht--,or):void 0,Sr&&ga(Te[0],Te[1],Sr)&&(or=Ht<3?void 0:or,Ht=1),de=Object(de);++st<Ht;){var Ut=Te[st];Ut&&Q(de,Ut,st,or)}return de})}function xd(Q){return function(de,Te,st){for(var Ht=-1,or=Object(de),Sr=st(de),Ut=Sr.length;Ut--;){var mr=Sr[Q?Ut:++Ht];if(Te(or[mr],mr,or)===!1)break}return de}}function ma(Q,de){var Te=Q.__data__;return Es(de)?Te[typeof de=="string"?"string":"hash"]:Te.map}function Ts(Q,de){var Te=La(Q,de);return Wt(Te)?Te:void 0}function Gu(Q){var de=ti.call(Q,On),Te=Q[On];try{Q[On]=void 0;var st=!0}catch{}var Ht=Ji.call(Q);return st&&(de?Q[On]=Te:delete Q[On]),Ht}function Zu(Q){return typeof Q.constructor=="function"&&!Cs(Q)?_o(Nt(Q)):{}}function Ac(Q,de){var Te=typeof Q;return de=de??p,!!de&&(Te=="number"||Te!="symbol"&&nr.test(Q))&&Q>-1&&Q%1==0&&Q<de}function ga(Q,de,Te){if(!vo(Te))return!1;var st=typeof de;return(st=="number"?Za(Te)&&Ac(de,Te.length):st=="string"&&de in Te)?Is(Te[de],Q):!1}function Es(Q){var de=typeof Q;return de=="string"||de=="number"||de=="symbol"||de=="boolean"?Q!=="__proto__":Q===null}function Ua(Q){return!!Yi&&Yi in Q}function Cs(Q){var de=Q&&Q.constructor,Te=typeof de=="function"&&de.prototype||ei;return Q===Te}function vl(Q){var de=[];if(Q!=null)for(var Te in Object(Q))de.push(Te);return de}function ja(Q){return Ji.call(Q)}function Pc(Q,de,Te){return de=Et(de===void 0?Q.length-1:de,0),function(){for(var st=arguments,Ht=-1,or=Et(st.length-de,0),Sr=Array(or);++Ht<or;)Sr[Ht]=st[de+Ht];Ht=-1;for(var Ut=Array(de+1);++Ht<de;)Ut[Ht]=st[Ht];return Ut[de]=Te(Sr),bn(Q,this,Ut)}}function Ga(Q,de){if(!(de==="constructor"&&typeof Q[de]=="function")&&de!="__proto__")return Q[de]}var As=Cr(ks);function Cr(Q){var de=0,Te=0;return function(){var st=mn(),Ht=h-(st-Te);if(Te=st,Ht>0){if(++de>=c)return arguments[0]}else de=0;return Q.apply(void 0,arguments)}}function Ps(Q){if(Q!=null){try{return Ii.call(Q)}catch{}try{return Q+""}catch{}}return""}function Is(Q,de){return Q===de||Q!==Q&&de!==de}var xl=zt(function(){return arguments}())?zt:function(Q){return ya(Q)&&ti.call(Q,"callee")&&!ni.call(Q,"callee")},zs=Array.isArray;function Za(Q){return Q!=null&&bl(Q.length)&&!Ic(Q)}function Wu(Q){return ya(Q)&&Za(Q)}var Hu=Mt||oi;function Ic(Q){if(!vo(Q))return!1;var de=kt(Q);return de==$||de==q||de==w||de==H}function bl(Q){return typeof Q=="number"&&Q>-1&&Q%1==0&&Q<=p}function vo(Q){var de=typeof Q;return Q!=null&&(de=="object"||de=="function")}function ya(Q){return Q!=null&&typeof Q=="object"}function zc(Q){if(!ya(Q)||kt(Q)!=j)return!1;var de=Nt(Q);if(de===null)return!0;var Te=ti.call(de,"constructor")&&de.constructor;return typeof Te=="function"&&Te instanceof Te&&Ii.call(Te)==Fa}var Yt=Qn?Zo(Qn):lr;function qu(Q){return ju(Q,Xu(Q))}function Xu(Q){return Za(Q)?ot(Q,!0):ln(Q)}var Ms=Cc(function(Q,de,Te,st){wr(Q,de,Te,st)});function Ds(Q){return function(){return Q}}function Mc(Q){return Q}function oi(){return!1}e.exports=Ms})(lB,e0);const ps=e0;var cB=e=>/!(important)?$/.test(e),$T=e=>typeof e=="string"?e.replace(/!(important)?$/,"").trim():e,uB=(e,t)=>r=>{const o=String(t),c=cB(o),h=$T(o),p=e?`${e}.${h}`:h;let l=la(r.__cssMap)&&p in r.__cssMap?r.__cssMap[p].varRef:t;return l=$T(l),c?`${l} !important`:l};function Hw(e){const{scale:t,transform:r,compose:o}=e;return(h,p)=>{var l;const b=uB(t,h)(p);let w=(l=r==null?void 0:r(b,p))!=null?l:b;return o&&(w=o(w,p)),w}}var Cg=(...e)=>t=>e.reduce((r,o)=>o(r),t);function Qo(e,t){return r=>{const o={property:r,scale:e};return o.transform=Hw({scale:e,transform:t}),o}}var hB=({rtl:e,ltr:t})=>r=>r.direction==="rtl"?e:t;function dB(e){const{property:t,scale:r,transform:o}=e;return{scale:r,property:hB(t),transform:r?Hw({scale:r,compose:o}):o}}var Y5=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function fB(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...Y5].join(" ")}function pB(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...Y5].join(" ")}var mB={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},gB={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function yB(e){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":e,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}var _B={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},Wx={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},vB=new Set(Object.values(Wx)),Hx=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),xB=e=>e.trim();function bB(e,t){if(e==null||Hx.has(e))return e;if(!(qx(e)||Hx.has(e)))return`url('${e}')`;const c=/(^[a-z-A-Z]+)\((.*)\)/g.exec(e),h=c==null?void 0:c[1],p=c==null?void 0:c[2];if(!h||!p)return e;const l=h.includes("-gradient")?h:`${h}-gradient`,[b,...w]=p.split(",").map(xB).filter(Boolean);if((w==null?void 0:w.length)===0)return e;const T=b in Wx?Wx[b]:b;w.unshift(T);const D=w.map(P=>{if(vB.has(P))return P;const $=P.indexOf(" "),[q,ee]=$!==-1?[P.substr(0,$),P.substr($+1)]:[P],me=qx(ee)?ee:ee&&ee.split(" "),Z=`colors.${q}`,j=Z in t.__cssMap?t.__cssMap[Z].varRef:q;return me?[j,...Array.isArray(me)?me:[me]].join(" "):j});return`${l}(${D.join(", ")})`}var qx=e=>typeof e=="string"&&e.includes("(")&&e.includes(")"),wB=(e,t)=>bB(e,t??{});function SB(e){return/^var\(--.+\)$/.test(e)}var kB=e=>{const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}},rs=e=>t=>`${e}(${t})`,pr={filter(e){return e!=="auto"?e:mB},backdropFilter(e){return e!=="auto"?e:gB},ring(e){return yB(pr.px(e))},bgClip(e){return e==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:e}},transform(e){return e==="auto"?fB():e==="auto-gpu"?pB():e},vh(e){return e==="$100vh"?"var(--chakra-vh)":e},px(e){if(e==null)return e;const{unitless:t}=kB(e);return t||typeof e=="number"?`${e}px`:e},fraction(e){return typeof e!="number"||e>1?e:`${e*100}%`},float(e,t){const r={left:"right",right:"left"};return t.direction==="rtl"?r[e]:e},degree(e){if(SB(e)||e==null)return e;const t=typeof e=="string"&&!e.endsWith("deg");return typeof e=="number"||t?`${e}deg`:e},gradient:wB,blur:rs("blur"),opacity:rs("opacity"),brightness:rs("brightness"),contrast:rs("contrast"),dropShadow:rs("drop-shadow"),grayscale:rs("grayscale"),hueRotate:rs("hue-rotate"),invert:rs("invert"),saturate:rs("saturate"),sepia:rs("sepia"),bgImage(e){return e==null||qx(e)||Hx.has(e)?e:`url(${e})`},outline(e){const t=String(e)==="0"||String(e)==="none";return e!==null&&t?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:e}},flexDirection(e){var t;const{space:r,divide:o}=(t=_B[e])!=null?t:{},c={flexDirection:e};return r&&(c[r]=1),o&&(c[o]=1),c}},ge={borderWidths:Qo("borderWidths"),borderStyles:Qo("borderStyles"),colors:Qo("colors"),borders:Qo("borders"),gradients:Qo("gradients",pr.gradient),radii:Qo("radii",pr.px),space:Qo("space",Cg(pr.vh,pr.px)),spaceT:Qo("space",Cg(pr.vh,pr.px)),degreeT(e){return{property:e,transform:pr.degree}},prop(e,t,r){return{property:e,scale:t,...t&&{transform:Hw({scale:t,transform:r})}}},propT(e,t){return{property:e,transform:t}},sizes:Qo("sizes",Cg(pr.vh,pr.px)),sizesT:Qo("sizes",Cg(pr.vh,pr.fraction)),shadows:Qo("shadows"),logical:dB,blur:Qo("blur",pr.blur)},ly={background:ge.colors("background"),backgroundColor:ge.colors("backgroundColor"),backgroundImage:ge.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:pr.bgClip},bgSize:ge.prop("backgroundSize"),bgPosition:ge.prop("backgroundPosition"),bg:ge.colors("background"),bgColor:ge.colors("backgroundColor"),bgPos:ge.prop("backgroundPosition"),bgRepeat:ge.prop("backgroundRepeat"),bgAttachment:ge.prop("backgroundAttachment"),bgGradient:ge.gradients("backgroundImage"),bgClip:{transform:pr.bgClip}};Object.assign(ly,{bgImage:ly.backgroundImage,bgImg:ly.backgroundImage});var _r={border:ge.borders("border"),borderWidth:ge.borderWidths("borderWidth"),borderStyle:ge.borderStyles("borderStyle"),borderColor:ge.colors("borderColor"),borderRadius:ge.radii("borderRadius"),borderTop:ge.borders("borderTop"),borderBlockStart:ge.borders("borderBlockStart"),borderTopLeftRadius:ge.radii("borderTopLeftRadius"),borderStartStartRadius:ge.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:ge.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:ge.radii("borderTopRightRadius"),borderStartEndRadius:ge.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:ge.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:ge.borders("borderRight"),borderInlineEnd:ge.borders("borderInlineEnd"),borderBottom:ge.borders("borderBottom"),borderBlockEnd:ge.borders("borderBlockEnd"),borderBottomLeftRadius:ge.radii("borderBottomLeftRadius"),borderBottomRightRadius:ge.radii("borderBottomRightRadius"),borderLeft:ge.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:ge.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:ge.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:ge.borders(["borderLeft","borderRight"]),borderInline:ge.borders("borderInline"),borderY:ge.borders(["borderTop","borderBottom"]),borderBlock:ge.borders("borderBlock"),borderTopWidth:ge.borderWidths("borderTopWidth"),borderBlockStartWidth:ge.borderWidths("borderBlockStartWidth"),borderTopColor:ge.colors("borderTopColor"),borderBlockStartColor:ge.colors("borderBlockStartColor"),borderTopStyle:ge.borderStyles("borderTopStyle"),borderBlockStartStyle:ge.borderStyles("borderBlockStartStyle"),borderBottomWidth:ge.borderWidths("borderBottomWidth"),borderBlockEndWidth:ge.borderWidths("borderBlockEndWidth"),borderBottomColor:ge.colors("borderBottomColor"),borderBlockEndColor:ge.colors("borderBlockEndColor"),borderBottomStyle:ge.borderStyles("borderBottomStyle"),borderBlockEndStyle:ge.borderStyles("borderBlockEndStyle"),borderLeftWidth:ge.borderWidths("borderLeftWidth"),borderInlineStartWidth:ge.borderWidths("borderInlineStartWidth"),borderLeftColor:ge.colors("borderLeftColor"),borderInlineStartColor:ge.colors("borderInlineStartColor"),borderLeftStyle:ge.borderStyles("borderLeftStyle"),borderInlineStartStyle:ge.borderStyles("borderInlineStartStyle"),borderRightWidth:ge.borderWidths("borderRightWidth"),borderInlineEndWidth:ge.borderWidths("borderInlineEndWidth"),borderRightColor:ge.colors("borderRightColor"),borderInlineEndColor:ge.colors("borderInlineEndColor"),borderRightStyle:ge.borderStyles("borderRightStyle"),borderInlineEndStyle:ge.borderStyles("borderInlineEndStyle"),borderTopRadius:ge.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:ge.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:ge.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:ge.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(_r,{rounded:_r.borderRadius,roundedTop:_r.borderTopRadius,roundedTopLeft:_r.borderTopLeftRadius,roundedTopRight:_r.borderTopRightRadius,roundedTopStart:_r.borderStartStartRadius,roundedTopEnd:_r.borderStartEndRadius,roundedBottom:_r.borderBottomRadius,roundedBottomLeft:_r.borderBottomLeftRadius,roundedBottomRight:_r.borderBottomRightRadius,roundedBottomStart:_r.borderEndStartRadius,roundedBottomEnd:_r.borderEndEndRadius,roundedLeft:_r.borderLeftRadius,roundedRight:_r.borderRightRadius,roundedStart:_r.borderInlineStartRadius,roundedEnd:_r.borderInlineEndRadius,borderStart:_r.borderInlineStart,borderEnd:_r.borderInlineEnd,borderTopStartRadius:_r.borderStartStartRadius,borderTopEndRadius:_r.borderStartEndRadius,borderBottomStartRadius:_r.borderEndStartRadius,borderBottomEndRadius:_r.borderEndEndRadius,borderStartRadius:_r.borderInlineStartRadius,borderEndRadius:_r.borderInlineEndRadius,borderStartWidth:_r.borderInlineStartWidth,borderEndWidth:_r.borderInlineEndWidth,borderStartColor:_r.borderInlineStartColor,borderEndColor:_r.borderInlineEndColor,borderStartStyle:_r.borderInlineStartStyle,borderEndStyle:_r.borderInlineEndStyle});var TB={color:ge.colors("color"),textColor:ge.colors("color"),fill:ge.colors("fill"),stroke:ge.colors("stroke")},Xx={boxShadow:ge.shadows("boxShadow"),mixBlendMode:!0,blendMode:ge.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:ge.prop("backgroundBlendMode"),opacity:!0};Object.assign(Xx,{shadow:Xx.boxShadow});var EB={filter:{transform:pr.filter},blur:ge.blur("--chakra-blur"),brightness:ge.propT("--chakra-brightness",pr.brightness),contrast:ge.propT("--chakra-contrast",pr.contrast),hueRotate:ge.degreeT("--chakra-hue-rotate"),invert:ge.propT("--chakra-invert",pr.invert),saturate:ge.propT("--chakra-saturate",pr.saturate),dropShadow:ge.propT("--chakra-drop-shadow",pr.dropShadow),backdropFilter:{transform:pr.backdropFilter},backdropBlur:ge.blur("--chakra-backdrop-blur"),backdropBrightness:ge.propT("--chakra-backdrop-brightness",pr.brightness),backdropContrast:ge.propT("--chakra-backdrop-contrast",pr.contrast),backdropHueRotate:ge.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:ge.propT("--chakra-backdrop-invert",pr.invert),backdropSaturate:ge.propT("--chakra-backdrop-saturate",pr.saturate)},t0={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:pr.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:ge.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:ge.space("gap"),rowGap:ge.space("rowGap"),columnGap:ge.space("columnGap")};Object.assign(t0,{flexDir:t0.flexDirection});var J5={gridGap:ge.space("gridGap"),gridColumnGap:ge.space("gridColumnGap"),gridRowGap:ge.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},CB={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:pr.outline},outlineOffset:!0,outlineColor:ge.colors("outlineColor")},ta={width:ge.sizesT("width"),inlineSize:ge.sizesT("inlineSize"),height:ge.sizes("height"),blockSize:ge.sizes("blockSize"),boxSize:ge.sizes(["width","height"]),minWidth:ge.sizes("minWidth"),minInlineSize:ge.sizes("minInlineSize"),minHeight:ge.sizes("minHeight"),minBlockSize:ge.sizes("minBlockSize"),maxWidth:ge.sizes("maxWidth"),maxInlineSize:ge.sizes("maxInlineSize"),maxHeight:ge.sizes("maxHeight"),maxBlockSize:ge.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,hideFrom:{scale:"breakpoints",transform:(e,t)=>{var r,o,c;return{[`@media screen and (min-width: ${(c=(o=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:o.minW)!=null?c:e})`]:{display:"none"}}}},hideBelow:{scale:"breakpoints",transform:(e,t)=>{var r,o,c;return{[`@media screen and (max-width: ${(c=(o=(r=t.__breakpoints)==null?void 0:r.get(e))==null?void 0:o._minW)!=null?c:e})`]:{display:"none"}}}},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:ge.propT("float",pr.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(ta,{w:ta.width,h:ta.height,minW:ta.minWidth,maxW:ta.maxWidth,minH:ta.minHeight,maxH:ta.maxHeight,overscroll:ta.overscrollBehavior,overscrollX:ta.overscrollBehaviorX,overscrollY:ta.overscrollBehaviorY});var AB={listStyleType:!0,listStylePosition:!0,listStylePos:ge.prop("listStylePosition"),listStyleImage:!0,listStyleImg:ge.prop("listStyleImage")};function PB(e,t,r,o){const c=typeof t=="string"?t.split("."):[t];for(o=0;o<c.length&&e;o+=1)e=e[c[o]];return e===void 0?r:e}var IB=e=>{const t=new WeakMap;return(o,c,h,p)=>{if(typeof o>"u")return e(o,c,h);t.has(o)||t.set(o,new Map);const l=t.get(o);if(l.has(c))return l.get(c);const b=e(o,c,h,p);return l.set(c,b),b}},zB=IB(PB),MB={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},DB={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},K1=(e,t,r)=>{const o={},c=zB(e,t,{});for(const h in c)h in r&&r[h]!=null||(o[h]=c[h]);return o},RB={srOnly:{transform(e){return e===!0?MB:e==="focusable"?DB:{}}},layerStyle:{processResult:!0,transform:(e,t,r)=>K1(t,`layerStyles.${e}`,r)},textStyle:{processResult:!0,transform:(e,t,r)=>K1(t,`textStyles.${e}`,r)},apply:{processResult:!0,transform:(e,t,r)=>K1(t,e,r)}},Uf={position:!0,pos:ge.prop("position"),zIndex:ge.prop("zIndex","zIndices"),inset:ge.spaceT("inset"),insetX:ge.spaceT(["left","right"]),insetInline:ge.spaceT("insetInline"),insetY:ge.spaceT(["top","bottom"]),insetBlock:ge.spaceT("insetBlock"),top:ge.spaceT("top"),insetBlockStart:ge.spaceT("insetBlockStart"),bottom:ge.spaceT("bottom"),insetBlockEnd:ge.spaceT("insetBlockEnd"),left:ge.spaceT("left"),insetInlineStart:ge.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:ge.spaceT("right"),insetInlineEnd:ge.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(Uf,{insetStart:Uf.insetInlineStart,insetEnd:Uf.insetInlineEnd});var LB={ring:{transform:pr.ring},ringColor:ge.colors("--chakra-ring-color"),ringOffset:ge.prop("--chakra-ring-offset-width"),ringOffsetColor:ge.colors("--chakra-ring-offset-color"),ringInset:ge.prop("--chakra-ring-inset")},jr={margin:ge.spaceT("margin"),marginTop:ge.spaceT("marginTop"),marginBlockStart:ge.spaceT("marginBlockStart"),marginRight:ge.spaceT("marginRight"),marginInlineEnd:ge.spaceT("marginInlineEnd"),marginBottom:ge.spaceT("marginBottom"),marginBlockEnd:ge.spaceT("marginBlockEnd"),marginLeft:ge.spaceT("marginLeft"),marginInlineStart:ge.spaceT("marginInlineStart"),marginX:ge.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:ge.spaceT("marginInline"),marginY:ge.spaceT(["marginTop","marginBottom"]),marginBlock:ge.spaceT("marginBlock"),padding:ge.space("padding"),paddingTop:ge.space("paddingTop"),paddingBlockStart:ge.space("paddingBlockStart"),paddingRight:ge.space("paddingRight"),paddingBottom:ge.space("paddingBottom"),paddingBlockEnd:ge.space("paddingBlockEnd"),paddingLeft:ge.space("paddingLeft"),paddingInlineStart:ge.space("paddingInlineStart"),paddingInlineEnd:ge.space("paddingInlineEnd"),paddingX:ge.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:ge.space("paddingInline"),paddingY:ge.space(["paddingTop","paddingBottom"]),paddingBlock:ge.space("paddingBlock")};Object.assign(jr,{m:jr.margin,mt:jr.marginTop,mr:jr.marginRight,me:jr.marginInlineEnd,marginEnd:jr.marginInlineEnd,mb:jr.marginBottom,ml:jr.marginLeft,ms:jr.marginInlineStart,marginStart:jr.marginInlineStart,mx:jr.marginX,my:jr.marginY,p:jr.padding,pt:jr.paddingTop,py:jr.paddingY,px:jr.paddingX,pb:jr.paddingBottom,pl:jr.paddingLeft,ps:jr.paddingInlineStart,paddingStart:jr.paddingInlineStart,pr:jr.paddingRight,pe:jr.paddingInlineEnd,paddingEnd:jr.paddingInlineEnd});var BB={textDecorationColor:ge.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:ge.shadows("textShadow")},FB={clipPath:!0,transform:ge.propT("transform",pr.transform),transformOrigin:!0,translateX:ge.spaceT("--chakra-translate-x"),translateY:ge.spaceT("--chakra-translate-y"),skewX:ge.degreeT("--chakra-skew-x"),skewY:ge.degreeT("--chakra-skew-y"),scaleX:ge.prop("--chakra-scale-x"),scaleY:ge.prop("--chakra-scale-y"),scale:ge.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:ge.degreeT("--chakra-rotate")},$B={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:ge.prop("transitionDuration","transition.duration"),transitionProperty:ge.prop("transitionProperty","transition.property"),transitionTimingFunction:ge.prop("transitionTimingFunction","transition.easing")},OB={fontFamily:ge.prop("fontFamily","fonts"),fontSize:ge.prop("fontSize","fontSizes",pr.px),fontWeight:ge.prop("fontWeight","fontWeights"),lineHeight:ge.prop("lineHeight","lineHeights"),letterSpacing:ge.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(e){if(e===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},VB={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:ge.spaceT("scrollMargin"),scrollMarginTop:ge.spaceT("scrollMarginTop"),scrollMarginBottom:ge.spaceT("scrollMarginBottom"),scrollMarginLeft:ge.spaceT("scrollMarginLeft"),scrollMarginRight:ge.spaceT("scrollMarginRight"),scrollMarginX:ge.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:ge.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:ge.spaceT("scrollPadding"),scrollPaddingTop:ge.spaceT("scrollPaddingTop"),scrollPaddingBottom:ge.spaceT("scrollPaddingBottom"),scrollPaddingLeft:ge.spaceT("scrollPaddingLeft"),scrollPaddingRight:ge.spaceT("scrollPaddingRight"),scrollPaddingX:ge.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:ge.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function Q5(e){return la(e)&&e.reference?e.reference:String(e)}var a_=(e,...t)=>t.map(Q5).join(` ${e} `).replace(/calc/g,""),OT=(...e)=>`calc(${a_("+",...e)})`,VT=(...e)=>`calc(${a_("-",...e)})`,Kx=(...e)=>`calc(${a_("*",...e)})`,NT=(...e)=>`calc(${a_("/",...e)})`,UT=e=>{const t=Q5(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:Kx(t,-1)},cu=Object.assign(e=>({add:(...t)=>cu(OT(e,...t)),subtract:(...t)=>cu(VT(e,...t)),multiply:(...t)=>cu(Kx(e,...t)),divide:(...t)=>cu(NT(e,...t)),negate:()=>cu(UT(e)),toString:()=>e.toString()}),{add:OT,subtract:VT,multiply:Kx,divide:NT,negate:UT});function NB(e,t="-"){return e.replace(/\s+/g,t)}function UB(e){const t=NB(e.toString());return GB(jB(t))}function jB(e){return e.includes("\\.")?e:!Number.isInteger(parseFloat(e.toString()))?e.replace(".","\\."):e}function GB(e){return e.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function ZB(e,t=""){return[t,e].filter(Boolean).join("-")}function WB(e,t){return`var(${e}${t?`, ${t}`:""})`}function HB(e,t=""){return UB(`--${ZB(e,t)}`)}function sr(e,t,r){const o=HB(e,r);return{variable:o,reference:WB(o,t)}}function qB(e,t){const r={};for(const o of t){if(Array.isArray(o)){const[c,h]=o;r[c]=sr(`${e}-${c}`,h);continue}r[o]=sr(`${e}-${o}`)}return r}function XB(e){const t=e==null?0:e.length;return t?e[t-1]:void 0}function KB(e){const t=parseFloat(e.toString()),r=e.toString().replace(String(t),"");return{unitless:!r,value:t,unit:r}}function Yx(e){if(e==null)return e;const{unitless:t}=KB(e);return t||typeof e=="number"?`${e}px`:e}var eP=(e,t)=>parseInt(e[1],10)>parseInt(t[1],10)?1:-1,qw=e=>Object.fromEntries(Object.entries(e).sort(eP));function jT(e){const t=qw(e);return Object.assign(Object.values(t),t)}function YB(e){const t=Object.keys(qw(e));return new Set(t)}function GT(e){var t;if(!e)return e;e=(t=Yx(e))!=null?t:e;const r=-.02;return typeof e=="number"?`${e+r}`:e.replace(/(\d+\.?\d*)/u,o=>`${parseFloat(o)+r}`)}function Sf(e,t){const r=["@media screen"];return e&&r.push("and",`(min-width: ${Yx(e)})`),t&&r.push("and",`(max-width: ${Yx(t)})`),r.join(" ")}function JB(e){var t;if(!e)return null;e.base=(t=e.base)!=null?t:"0px";const r=jT(e),o=Object.entries(e).sort(eP).map(([p,l],b,w)=>{var T;let[,D]=(T=w[b+1])!=null?T:[];return D=parseFloat(D)>0?GT(D):void 0,{_minW:GT(l),breakpoint:p,minW:l,maxW:D,maxWQuery:Sf(null,D),minWQuery:Sf(l),minMaxQuery:Sf(l,D)}}),c=YB(e),h=Array.from(c.values());return{keys:c,normalized:r,isResponsive(p){const l=Object.keys(p);return l.length>0&&l.every(b=>c.has(b))},asObject:qw(e),asArray:jT(e),details:o,get(p){return o.find(l=>l.breakpoint===p)},media:[null,...r.map(p=>Sf(p)).slice(1)],toArrayValue(p){if(!la(p))throw new Error("toArrayValue: value must be an object");const l=h.map(b=>{var w;return(w=p[b])!=null?w:null});for(;XB(l)===null;)l.pop();return l},toObjectValue(p){if(!Array.isArray(p))throw new Error("toObjectValue: value must be an array");return p.reduce((l,b,w)=>{const T=h[w];return T!=null&&b!=null&&(l[T]=b),l},{})}}}var ui={hover:(e,t)=>`${e}:hover ${t}, ${e}[data-hover] ${t}`,focus:(e,t)=>`${e}:focus ${t}, ${e}[data-focus] ${t}`,focusVisible:(e,t)=>`${e}:focus-visible ${t}`,focusWithin:(e,t)=>`${e}:focus-within ${t}`,active:(e,t)=>`${e}:active ${t}, ${e}[data-active] ${t}`,disabled:(e,t)=>`${e}:disabled ${t}, ${e}[data-disabled] ${t}`,invalid:(e,t)=>`${e}:invalid ${t}, ${e}[data-invalid] ${t}`,checked:(e,t)=>`${e}:checked ${t}, ${e}[data-checked] ${t}`,indeterminate:(e,t)=>`${e}:indeterminate ${t}, ${e}[aria-checked=mixed] ${t}, ${e}[data-indeterminate] ${t}`,readOnly:(e,t)=>`${e}:read-only ${t}, ${e}[readonly] ${t}, ${e}[data-read-only] ${t}`,expanded:(e,t)=>`${e}:read-only ${t}, ${e}[aria-expanded=true] ${t}, ${e}[data-expanded] ${t}`,placeholderShown:(e,t)=>`${e}:placeholder-shown ${t}`},Fl=e=>tP(t=>e(t,"&"),"[role=group]","[data-group]",".group"),Hs=e=>tP(t=>e(t,"~ &"),"[data-peer]",".peer"),tP=(e,...t)=>t.map(e).join(", "),s_={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Fl(ui.hover),_peerHover:Hs(ui.hover),_groupFocus:Fl(ui.focus),_peerFocus:Hs(ui.focus),_groupFocusVisible:Fl(ui.focusVisible),_peerFocusVisible:Hs(ui.focusVisible),_groupActive:Fl(ui.active),_peerActive:Hs(ui.active),_groupDisabled:Fl(ui.disabled),_peerDisabled:Hs(ui.disabled),_groupInvalid:Fl(ui.invalid),_peerInvalid:Hs(ui.invalid),_groupChecked:Fl(ui.checked),_peerChecked:Hs(ui.checked),_groupFocusWithin:Fl(ui.focusWithin),_peerFocusWithin:Hs(ui.focusWithin),_peerPlaceholderShown:Hs(ui.placeholderShown),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},QB=Object.keys(s_);function ZT(e,t){return sr(String(e).replace(/\./g,"-"),void 0,t)}function eF(e,t){let r={};const o={};for(const[c,h]of Object.entries(e)){const{isSemantic:p,value:l}=h,{variable:b,reference:w}=ZT(c,t==null?void 0:t.cssVarPrefix);if(!p){if(c.startsWith("space")){const P=c.split("."),[$,...q]=P,ee=`${$}.-${q.join(".")}`,me=cu.negate(l),Z=cu.negate(w);o[ee]={value:me,var:b,varRef:Z}}r[b]=l,o[c]={value:l,var:b,varRef:w};continue}const T=P=>{const q=[String(c).split(".")[0],P].join(".");if(!e[q])return P;const{reference:me}=ZT(q,t==null?void 0:t.cssVarPrefix);return me},D=la(l)?l:{default:l};r=ps(r,Object.entries(D).reduce((P,[$,q])=>{var ee,me;const Z=T(q.toString());if($==="default")return P[b]=Z,P;const j=(me=(ee=s_)==null?void 0:ee[$])!=null?me:$;return P[j]={[b]:Z},P},{})),o[c]={value:w,var:b,varRef:w}}return{cssVars:r,cssMap:o}}function tF(e,t=[]){const r=Object.assign({},e);for(const o of t)o in r&&delete r[o];return r}function rF(e,t){const r={};for(const o of t)o in e&&(r[o]=e[o]);return r}var nF=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function iF(e){return rF(e,nF)}function oF(e){return e.semanticTokens}function aF(e){const{__cssMap:t,__cssVars:r,__breakpoints:o,...c}=e;return c}function sF({tokens:e,semanticTokens:t}){var r,o;const c=Object.entries((r=Jx(e))!=null?r:{}).map(([p,l])=>[p,{isSemantic:!1,value:l}]),h=Object.entries((o=Jx(t,1))!=null?o:{}).map(([p,l])=>[p,{isSemantic:!0,value:l}]);return Object.fromEntries([...c,...h])}function Jx(e,t=1/0){return!la(e)&&!Array.isArray(e)||!t?e:Object.entries(e).reduce((r,[o,c])=>(la(c)||Array.isArray(c)?Object.entries(Jx(c,t-1)).forEach(([h,p])=>{r[`${o}.${h}`]=p}):r[o]=c,r),{})}function lF(e){var t;const r=aF(e),o=iF(r),c=oF(r),h=sF({tokens:o,semanticTokens:c}),p=(t=r.config)==null?void 0:t.cssVarPrefix,{cssMap:l,cssVars:b}=eF(h,{cssVarPrefix:p});return Object.assign(r,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...b},__cssMap:l,__breakpoints:JB(r.breakpoints)}),r}var Xw=ps({},ly,_r,TB,t0,ta,EB,LB,CB,J5,RB,Uf,Xx,jr,VB,OB,BB,FB,AB,$B);Object.assign({},jr,ta,t0,J5,Uf);var cF=[...Object.keys(Xw),...QB],uF={...Xw,...s_},hF=e=>e in uF,dF=e=>t=>{if(!t.__breakpoints)return e;const{isResponsive:r,toArrayValue:o,media:c}=t.__breakpoints,h={};for(const p in e){let l=Ql(e[p],t);if(l==null)continue;if(l=la(l)&&r(l)?o(l):l,!Array.isArray(l)){h[p]=l;continue}const b=l.slice(0,c.length).length;for(let w=0;w<b;w+=1){const T=c==null?void 0:c[w];if(!T){h[p]=l[w];continue}h[T]=h[T]||{},l[w]!=null&&(h[T][p]=l[w])}}return h};function fF(e){const t=[];let r="",o=!1;for(let c=0;c<e.length;c++){const h=e[c];h==="("?(o=!0,r+=h):h===")"?(o=!1,r+=h):h===","&&!o?(t.push(r),r=""):r+=h}return r=r.trim(),r&&t.push(r),t}function pF(e){return/^var\(--.+\)$/.test(e)}var mF=(e,t)=>e.startsWith("--")&&typeof t=="string"&&!pF(t),gF=(e,t)=>{var r,o;if(t==null)return t;const c=b=>{var w,T;return(T=(w=e.__cssMap)==null?void 0:w[b])==null?void 0:T.varRef},h=b=>{var w;return(w=c(b))!=null?w:b},[p,l]=fF(t);return t=(o=(r=c(p))!=null?r:h(l))!=null?o:h(t),t};function yF(e){const{configs:t={},pseudos:r={},theme:o}=e,c=(h,p=!1)=>{var l,b,w;const T=Ql(h,o),D=dF(T)(o);let P={};for(let $ in D){const q=D[$];let ee=Ql(q,o);$ in r&&($=r[$]),mF($,ee)&&(ee=gF(o,ee));let me=t[$];if(me===!0&&(me={property:$}),la(ee)){P[$]=(l=P[$])!=null?l:{},P[$]=ps({},P[$],c(ee,!0));continue}let Z=(w=(b=me==null?void 0:me.transform)==null?void 0:b.call(me,ee,o,T))!=null?w:ee;Z=me!=null&&me.processResult?c(Z,!0):Z;const j=Ql(me==null?void 0:me.property,o);if(!p&&(me!=null&&me.static)){const H=Ql(me.static,o);P=ps({},P,H)}if(j&&Array.isArray(j)){for(const H of j)P[H]=Z;continue}if(j){j==="&"&&la(Z)?P=ps({},P,Z):P[j]=Z;continue}if(la(Z)){P=ps({},P,Z);continue}P[$]=Z}return P};return c}var rP=e=>t=>yF({theme:t,pseudos:s_,configs:Xw})(e);function Wr(e){return{definePartsStyle(t){return t},defineMultiStyleConfig(t){return{parts:e,...t}}}}function _F(e,t){if(Array.isArray(e))return e;if(la(e))return t(e);if(e!=null)return[e]}function vF(e,t){for(let r=t+1;r<e.length;r++)if(e[r]!=null)return r;return-1}function xF(e){const t=e.__breakpoints;return function(o,c,h,p){var l,b;if(!t)return;const w={},T=_F(h,t.toArrayValue);if(!T)return w;const D=T.length,P=D===1,$=!!o.parts;for(let q=0;q<D;q++){const ee=t.details[q],me=t.details[vF(T,q)],Z=Sf(ee.minW,me==null?void 0:me._minW),j=Ql((l=o[c])==null?void 0:l[T[q]],p);if(j){if($){(b=o.parts)==null||b.forEach(H=>{ps(w,{[H]:P?j[H]:{[Z]:j[H]}})});continue}if(!$){P?ps(w,j):w[Z]=j;continue}w[Z]=j}}return w}}function bF(e){return t=>{var r;const{variant:o,size:c,theme:h}=t,p=xF(h);return ps({},Ql((r=e.baseStyle)!=null?r:{},t),p(e,"sizes",c,t),p(e,"variants",o,t))}}function em(e){return tF(e,["styleConfig","size","variant","colorScheme"])}var wF={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},SF=wF,kF={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},TF=kF,EF={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}},CF=EF,AF={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},PF=AF,IF={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},zF=IF,MF={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},DF={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},RF={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},LF={property:MF,easing:DF,duration:RF},BF=LF,FF={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},$F=FF,OF={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},VF=OF,NF={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},nP=NF,iP={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},UF={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},jF={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},GF={...iP,...UF,container:jF},oP=GF,ZF={breakpoints:TF,zIndices:SF,radii:PF,blur:$F,colors:CF,...nP,sizes:oP,shadows:zF,space:iP,borders:VF,transition:BF};function Tr(e,t={}){let r=!1;function o(){if(!r){r=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function c(...T){o();for(const D of T)t[D]=b(D);return Tr(e,t)}function h(...T){for(const D of T)D in t||(t[D]=b(D));return Tr(e,t)}function p(){return Object.fromEntries(Object.entries(t).map(([D,P])=>[D,P.selector]))}function l(){return Object.fromEntries(Object.entries(t).map(([D,P])=>[D,P.className]))}function b(T){const $=`chakra-${(["container","root"].includes(T??"")?[e]:[e,T]).filter(Boolean).join("__")}`;return{className:$,selector:`.${$}`,toString:()=>T}}return{parts:c,toPart:b,extend:h,selectors:p,classnames:l,get keys(){return Object.keys(t)},__type:{}}}var WF=Tr("accordion").parts("root","container","button","panel").extend("icon"),HF=Tr("alert").parts("title","description","container").extend("icon","spinner"),qF=Tr("avatar").parts("label","badge","container").extend("excessLabel","group"),XF=Tr("breadcrumb").parts("link","item","container").extend("separator");Tr("button").parts();var KF=Tr("checkbox").parts("control","icon","container").extend("label");Tr("progress").parts("track","filledTrack").extend("label");var YF=Tr("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),JF=Tr("editable").parts("preview","input","textarea"),QF=Tr("form").parts("container","requiredIndicator","helperText"),e$=Tr("formError").parts("text","icon"),t$=Tr("input").parts("addon","field","element"),r$=Tr("list").parts("container","item","icon"),n$=Tr("menu").parts("button","list","item").extend("groupTitle","command","divider"),i$=Tr("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),o$=Tr("numberinput").parts("root","field","stepperGroup","stepper");Tr("pininput").parts("field");var a$=Tr("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton"),s$=Tr("progress").parts("label","filledTrack","track"),l$=Tr("radio").parts("container","control","label"),c$=Tr("select").parts("field","icon"),u$=Tr("slider").parts("container","track","thumb","filledTrack","mark"),h$=Tr("stat").parts("container","label","helpText","number","icon"),d$=Tr("switch").parts("container","track","thumb"),f$=Tr("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),p$=Tr("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),m$=Tr("tag").parts("container","label","closeButton"),g$=Tr("card").parts("container","header","body","footer");function yu(e,t,r){return Math.min(Math.max(e,r),t)}class y$ extends Error{constructor(t){super(`Failed to parse color: "${t}"`)}}var kf=y$;function Kw(e){if(typeof e!="string")throw new kf(e);if(e.trim().toLowerCase()==="transparent")return[0,0,0,0];let t=e.trim();t=T$.test(e)?x$(e):e;const r=b$.exec(t);if(r){const p=Array.from(r).slice(1);return[...p.slice(0,3).map(l=>parseInt(Cp(l,2),16)),parseInt(Cp(p[3]||"f",2),16)/255]}const o=w$.exec(t);if(o){const p=Array.from(o).slice(1);return[...p.slice(0,3).map(l=>parseInt(l,16)),parseInt(p[3]||"ff",16)/255]}const c=S$.exec(t);if(c){const p=Array.from(c).slice(1);return[...p.slice(0,3).map(l=>parseInt(l,10)),parseFloat(p[3]||"1")]}const h=k$.exec(t);if(h){const[p,l,b,w]=Array.from(h).slice(1).map(parseFloat);if(yu(0,100,l)!==l)throw new kf(e);if(yu(0,100,b)!==b)throw new kf(e);return[...E$(p,l,b),Number.isNaN(w)?1:w]}throw new kf(e)}function _$(e){let t=5381,r=e.length;for(;r;)t=t*33^e.charCodeAt(--r);return(t>>>0)%2341}const WT=e=>parseInt(e.replace(/_/g,""),36),v$="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((e,t)=>{const r=WT(t.substring(0,3)),o=WT(t.substring(3)).toString(16);let c="";for(let h=0;h<6-o.length;h++)c+="0";return e[r]=`${c}${o}`,e},{});function x$(e){const t=e.toLowerCase().trim(),r=v$[_$(t)];if(!r)throw new kf(e);return`#${r}`}const Cp=(e,t)=>Array.from(Array(t)).map(()=>e).join(""),b$=new RegExp(`^#${Cp("([a-f0-9])",3)}([a-f0-9])?$`,"i"),w$=new RegExp(`^#${Cp("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),S$=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${Cp(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),k$=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,T$=/^[a-z]+$/i,HT=e=>Math.round(e*255),E$=(e,t,r)=>{let o=r/100;if(t===0)return[o,o,o].map(HT);const c=(e%360+360)%360/60,h=(1-Math.abs(2*o-1))*(t/100),p=h*(1-Math.abs(c%2-1));let l=0,b=0,w=0;c>=0&&c<1?(l=h,b=p):c>=1&&c<2?(l=p,b=h):c>=2&&c<3?(b=h,w=p):c>=3&&c<4?(b=p,w=h):c>=4&&c<5?(l=p,w=h):c>=5&&c<6&&(l=h,w=p);const T=o-h/2,D=l+T,P=b+T,$=w+T;return[D,P,$].map(HT)};function C$(e,t,r,o){return`rgba(${yu(0,255,e).toFixed()}, ${yu(0,255,t).toFixed()}, ${yu(0,255,r).toFixed()}, ${parseFloat(yu(0,1,o).toFixed(3))})`}function A$(e,t){const[r,o,c,h]=Kw(e);return C$(r,o,c,h-t)}function P$(e){const[t,r,o,c]=Kw(e);let h=p=>{const l=yu(0,255,p).toString(16);return l.length===1?`0${l}`:l};return`#${h(t)}${h(r)}${h(o)}${c<1?h(Math.round(c*255)):""}`}function I$(e,t,r,o,c){for(t=t.split?t.split("."):t,o=0;o<t.length;o++)e=e?e[t[o]]:c;return e===c?r:e}var z$=e=>Object.keys(e).length===0,Ni=(e,t,r)=>{const o=I$(e,`colors.${t}`,t);try{return P$(o),o}catch{return r??"#000000"}},M$=e=>{const[t,r,o]=Kw(e);return(t*299+r*587+o*114)/1e3},D$=e=>t=>{const r=Ni(t,e);return M$(r)<128?"dark":"light"},R$=e=>t=>D$(e)(t)==="dark",ad=(e,t)=>r=>{const o=Ni(r,e);return A$(o,1-t)};function qT(e="1rem",t="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${t} 25%,
    transparent 25%,
    transparent 50%,
    ${t} 50%,
    ${t} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${e} ${e}`}}var L$=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function B$(e){const t=L$();return!e||z$(e)?t:e.string&&e.colors?$$(e.string,e.colors):e.string&&!e.colors?F$(e.string):e.colors&&!e.string?O$(e.colors):t}function F$(e){let t=0;if(e.length===0)return t.toString();for(let o=0;o<e.length;o+=1)t=e.charCodeAt(o)+((t<<5)-t),t=t&t;let r="#";for(let o=0;o<3;o+=1){const c=t>>o*8&255;r+=`00${c.toString(16)}`.substr(-2)}return r}function $$(e,t){let r=0;if(e.length===0)return t[0];for(let o=0;o<e.length;o+=1)r=e.charCodeAt(o)+((r<<5)-r),r=r&r;return r=(r%t.length+t.length)%t.length,t[r]}function O$(e){return e[Math.floor(Math.random()*e.length)]}function Ct(e,t){return r=>r.colorMode==="dark"?t:e}function Yw(e){const{orientation:t,vertical:r,horizontal:o}=e;return t?t==="vertical"?r:o:{}}function aP(e){return la(e)&&e.reference?e.reference:String(e)}var l_=(e,...t)=>t.map(aP).join(` ${e} `).replace(/calc/g,""),XT=(...e)=>`calc(${l_("+",...e)})`,KT=(...e)=>`calc(${l_("-",...e)})`,Qx=(...e)=>`calc(${l_("*",...e)})`,YT=(...e)=>`calc(${l_("/",...e)})`,JT=e=>{const t=aP(e);return t!=null&&!Number.isNaN(parseFloat(t))?String(t).startsWith("-")?String(t).slice(1):`-${t}`:Qx(t,-1)},el=Object.assign(e=>({add:(...t)=>el(XT(e,...t)),subtract:(...t)=>el(KT(e,...t)),multiply:(...t)=>el(Qx(e,...t)),divide:(...t)=>el(YT(e,...t)),negate:()=>el(JT(e)),toString:()=>e.toString()}),{add:XT,subtract:KT,multiply:Qx,divide:YT,negate:JT});function V$(e){return!Number.isInteger(parseFloat(e.toString()))}function N$(e,t="-"){return e.replace(/\s+/g,t)}function sP(e){const t=N$(e.toString());return t.includes("\\.")?e:V$(e)?t.replace(".","\\."):e}function U$(e,t=""){return[t,sP(e)].filter(Boolean).join("-")}function j$(e,t){return`var(${sP(e)}${t?`, ${t}`:""})`}function G$(e,t=""){return`--${U$(e,t)}`}function Bn(e,t){const r=G$(e,t==null?void 0:t.prefix);return{variable:r,reference:j$(r,Z$(t==null?void 0:t.fallback))}}function Z$(e){return typeof e=="string"?e:e==null?void 0:e.reference}var{defineMultiStyleConfig:W$,definePartsStyle:cy}=Wr(d$.keys),jf=Bn("switch-track-width"),Eu=Bn("switch-track-height"),Y1=Bn("switch-track-diff"),H$=el.subtract(jf,Eu),eb=Bn("switch-thumb-x"),ff=Bn("switch-bg"),q$=e=>{const{colorScheme:t}=e;return{borderRadius:"full",p:"0.5",width:[jf.reference],height:[Eu.reference],transitionProperty:"common",transitionDuration:"fast",[ff.variable]:"colors.gray.300",_dark:{[ff.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[ff.variable]:`colors.${t}.500`,_dark:{[ff.variable]:`colors.${t}.200`}},bg:ff.reference}},X$={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Eu.reference],height:[Eu.reference],_checked:{transform:`translateX(${eb.reference})`}},K$=cy(e=>({container:{[Y1.variable]:H$,[eb.variable]:Y1.reference,_rtl:{[eb.variable]:el(Y1).negate().toString()}},track:q$(e),thumb:X$})),Y$={sm:cy({container:{[jf.variable]:"1.375rem",[Eu.variable]:"sizes.3"}}),md:cy({container:{[jf.variable]:"1.875rem",[Eu.variable]:"sizes.4"}}),lg:cy({container:{[jf.variable]:"2.875rem",[Eu.variable]:"sizes.6"}})},J$=W$({baseStyle:K$,sizes:Y$,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:Q$,definePartsStyle:Wh}=Wr(f$.keys),eO=Wh({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),r0={"&[data-is-numeric=true]":{textAlign:"end"}},tO=Wh(e=>{const{colorScheme:t}=e;return{th:{color:Ct("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Ct(`${t}.100`,`${t}.700`)(e),...r0},td:{borderBottom:"1px",borderColor:Ct(`${t}.100`,`${t}.700`)(e),...r0},caption:{color:Ct("gray.600","gray.100")(e)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),rO=Wh(e=>{const{colorScheme:t}=e;return{th:{color:Ct("gray.600","gray.400")(e),borderBottom:"1px",borderColor:Ct(`${t}.100`,`${t}.700`)(e),...r0},td:{borderBottom:"1px",borderColor:Ct(`${t}.100`,`${t}.700`)(e),...r0},caption:{color:Ct("gray.600","gray.100")(e)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:Ct(`${t}.100`,`${t}.700`)(e)},td:{background:Ct(`${t}.100`,`${t}.700`)(e)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),nO={simple:tO,striped:rO,unstyled:{}},iO={sm:Wh({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:Wh({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:Wh({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},oO=Q$({baseStyle:eO,variants:nO,sizes:iO,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),so=sr("tabs-color"),Ia=sr("tabs-bg"),Ag=sr("tabs-border-color"),{defineMultiStyleConfig:aO,definePartsStyle:_s}=Wr(p$.keys),sO=e=>{const{orientation:t}=e;return{display:t==="vertical"?"flex":"block"}},lO=e=>{const{isFitted:t}=e;return{flex:t?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},cO=e=>{const{align:t="start",orientation:r}=e;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[t],flexDirection:r==="vertical"?"column":"row"}},uO={p:4},hO=_s(e=>({root:sO(e),tab:lO(e),tablist:cO(e),tabpanel:uO})),dO={sm:_s({tab:{py:1,px:4,fontSize:"sm"}}),md:_s({tab:{fontSize:"md",py:2,px:4}}),lg:_s({tab:{fontSize:"lg",py:3,px:4}})},fO=_s(e=>{const{colorScheme:t,orientation:r}=e,o=r==="vertical",c=r==="vertical"?"borderStart":"borderBottom",h=o?"marginStart":"marginBottom";return{tablist:{[c]:"2px solid",borderColor:"inherit"},tab:{[c]:"2px solid",borderColor:"transparent",[h]:"-2px",_selected:{[so.variable]:`colors.${t}.600`,_dark:{[so.variable]:`colors.${t}.300`},borderColor:"currentColor"},_active:{[Ia.variable]:"colors.gray.200",_dark:{[Ia.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:so.reference,bg:Ia.reference}}}),pO=_s(e=>{const{colorScheme:t}=e;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[Ag.variable]:"transparent",_selected:{[so.variable]:`colors.${t}.600`,[Ag.variable]:"colors.white",_dark:{[so.variable]:`colors.${t}.300`,[Ag.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:Ag.reference},color:so.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),mO=_s(e=>{const{colorScheme:t}=e;return{tab:{border:"1px solid",borderColor:"inherit",[Ia.variable]:"colors.gray.50",_dark:{[Ia.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[Ia.variable]:"colors.white",[so.variable]:`colors.${t}.600`,_dark:{[Ia.variable]:"colors.gray.800",[so.variable]:`colors.${t}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:so.reference,bg:Ia.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),gO=_s(e=>{const{colorScheme:t,theme:r}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Ni(r,`${t}.700`),bg:Ni(r,`${t}.100`)}}}}),yO=_s(e=>{const{colorScheme:t}=e;return{tab:{borderRadius:"full",fontWeight:"semibold",[so.variable]:"colors.gray.600",_dark:{[so.variable]:"inherit"},_selected:{[so.variable]:"colors.white",[Ia.variable]:`colors.${t}.600`,_dark:{[so.variable]:"colors.gray.800",[Ia.variable]:`colors.${t}.300`}},color:so.reference,bg:Ia.reference}}}),_O=_s({}),vO={line:fO,enclosed:pO,"enclosed-colored":mO,"soft-rounded":gO,"solid-rounded":yO,unstyled:_O},xO=aO({baseStyle:hO,sizes:dO,variants:vO,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),xn=qB("badge",["bg","color","shadow"]),bO={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:xn.bg.reference,color:xn.color.reference,boxShadow:xn.shadow.reference},wO=e=>{const{colorScheme:t,theme:r}=e,o=ad(`${t}.500`,.6)(r);return{[xn.bg.variable]:`colors.${t}.500`,[xn.color.variable]:"colors.white",_dark:{[xn.bg.variable]:o,[xn.color.variable]:"colors.whiteAlpha.800"}}},SO=e=>{const{colorScheme:t,theme:r}=e,o=ad(`${t}.200`,.16)(r);return{[xn.bg.variable]:`colors.${t}.100`,[xn.color.variable]:`colors.${t}.800`,_dark:{[xn.bg.variable]:o,[xn.color.variable]:`colors.${t}.200`}}},kO=e=>{const{colorScheme:t,theme:r}=e,o=ad(`${t}.200`,.8)(r);return{[xn.color.variable]:`colors.${t}.500`,_dark:{[xn.color.variable]:o},[xn.shadow.variable]:`inset 0 0 0px 1px ${xn.color.reference}`}},TO={solid:wO,subtle:SO,outline:kO},Gf={baseStyle:bO,variants:TO,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:EO,definePartsStyle:Cu}=Wr(m$.keys),CO={fontWeight:"medium",lineHeight:1.2,outline:0,color:xn.color.reference,bg:xn.bg.reference,boxShadow:xn.shadow.reference,borderRadius:"md",_focusVisible:{boxShadow:"outline"}},AO={lineHeight:1.2,overflow:"visible"},PO={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},IO=Cu({container:CO,label:AO,closeButton:PO}),zO={sm:Cu({container:{minH:"5",minW:"5",fontSize:"xs",px:"2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:Cu({container:{minH:"6",minW:"6",fontSize:"sm",px:"2"}}),lg:Cu({container:{minH:"8",minW:"8",fontSize:"md",px:"3"}})},MO={subtle:Cu(e=>{var t;return{container:(t=Gf.variants)==null?void 0:t.subtle(e)}}),solid:Cu(e=>{var t;return{container:(t=Gf.variants)==null?void 0:t.solid(e)}}),outline:Cu(e=>{var t;return{container:(t=Gf.variants)==null?void 0:t.outline(e)}})},DO=EO({variants:MO,baseStyle:IO,sizes:zO,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),{definePartsStyle:il,defineMultiStyleConfig:RO}=Wr(t$.keys),LO=il({field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),$l={lg:{fontSize:"lg",px:"4",h:"12",borderRadius:"md"},md:{fontSize:"md",px:"4",h:"10",borderRadius:"md"},sm:{fontSize:"sm",px:"3",h:"8",borderRadius:"sm"},xs:{fontSize:"xs",px:"2",h:"6",borderRadius:"sm"}},BO={lg:il({field:$l.lg,addon:$l.lg}),md:il({field:$l.md,addon:$l.md}),sm:il({field:$l.sm,addon:$l.sm}),xs:il({field:$l.xs,addon:$l.xs})};function Jw(e){const{focusBorderColor:t,errorBorderColor:r}=e;return{focusBorderColor:t||Ct("blue.500","blue.300")(e),errorBorderColor:r||Ct("red.500","red.300")(e)}}var FO=il(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:o}=Jw(e);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:Ct("gray.300","whiteAlpha.400")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ni(t,o),boxShadow:`0 0 0 1px ${Ni(t,o)}`},_focusVisible:{zIndex:1,borderColor:Ni(t,r),boxShadow:`0 0 0 1px ${Ni(t,r)}`}},addon:{border:"1px solid",borderColor:Ct("inherit","whiteAlpha.50")(e),bg:Ct("gray.100","whiteAlpha.300")(e)}}}),$O=il(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:o}=Jw(e);return{field:{border:"2px solid",borderColor:"transparent",bg:Ct("gray.100","whiteAlpha.50")(e),_hover:{bg:Ct("gray.200","whiteAlpha.100")(e)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ni(t,o)},_focusVisible:{bg:"transparent",borderColor:Ni(t,r)}},addon:{border:"2px solid",borderColor:"transparent",bg:Ct("gray.100","whiteAlpha.50")(e)}}}),OO=il(e=>{const{theme:t}=e,{focusBorderColor:r,errorBorderColor:o}=Jw(e);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Ni(t,o),boxShadow:`0px 1px 0px 0px ${Ni(t,o)}`},_focusVisible:{borderColor:Ni(t,r),boxShadow:`0px 1px 0px 0px ${Ni(t,r)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),VO=il({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),NO={outline:FO,filled:$O,flushed:OO,unstyled:VO},xr=RO({baseStyle:LO,sizes:BO,variants:NO,defaultProps:{size:"md",variant:"outline"}}),QT,UO={...(QT=xr.baseStyle)==null?void 0:QT.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},eE,tE,jO={outline:e=>{var t,r;return(r=(t=xr.variants)==null?void 0:t.outline(e).field)!=null?r:{}},flushed:e=>{var t,r;return(r=(t=xr.variants)==null?void 0:t.flushed(e).field)!=null?r:{}},filled:e=>{var t,r;return(r=(t=xr.variants)==null?void 0:t.filled(e).field)!=null?r:{}},unstyled:(tE=(eE=xr.variants)==null?void 0:eE.unstyled.field)!=null?tE:{}},rE,nE,iE,oE,aE,sE,lE,cE,GO={xs:(nE=(rE=xr.sizes)==null?void 0:rE.xs.field)!=null?nE:{},sm:(oE=(iE=xr.sizes)==null?void 0:iE.sm.field)!=null?oE:{},md:(sE=(aE=xr.sizes)==null?void 0:aE.md.field)!=null?sE:{},lg:(cE=(lE=xr.sizes)==null?void 0:lE.lg.field)!=null?cE:{}},ZO={baseStyle:UO,sizes:GO,variants:jO,defaultProps:{size:"md",variant:"outline"}},Pg=Bn("tooltip-bg"),J1=Bn("tooltip-fg"),WO=Bn("popper-arrow-bg"),HO={bg:Pg.reference,color:J1.reference,[Pg.variable]:"colors.gray.700",[J1.variable]:"colors.whiteAlpha.900",_dark:{[Pg.variable]:"colors.gray.300",[J1.variable]:"colors.gray.900"},[WO.variable]:Pg.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},qO={baseStyle:HO},{defineMultiStyleConfig:XO,definePartsStyle:Tf}=Wr(s$.keys),KO=e=>{const{colorScheme:t,theme:r,isIndeterminate:o,hasStripe:c}=e,h=Ct(qT(),qT("1rem","rgba(0,0,0,0.1)"))(e),p=Ct(`${t}.500`,`${t}.200`)(e),l=`linear-gradient(
    to right,
    transparent 0%,
    ${Ni(r,p)} 50%,
    transparent 100%
  )`;return{...!o&&c&&h,...o?{bgImage:l}:{bgColor:p}}},YO={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},JO=e=>({bg:Ct("gray.100","whiteAlpha.300")(e)}),QO=e=>({transitionProperty:"common",transitionDuration:"slow",...KO(e)}),eV=Tf(e=>({label:YO,filledTrack:QO(e),track:JO(e)})),tV={xs:Tf({track:{h:"1"}}),sm:Tf({track:{h:"2"}}),md:Tf({track:{h:"3"}}),lg:Tf({track:{h:"4"}})},rV=XO({sizes:tV,baseStyle:eV,defaultProps:{size:"md",colorScheme:"blue"}}),nV=e=>typeof e=="function";function Gi(e,...t){return nV(e)?e(...t):e}var{definePartsStyle:uy,defineMultiStyleConfig:iV}=Wr(KF.keys),Zf=sr("checkbox-size"),oV=e=>{const{colorScheme:t}=e;return{w:Zf.reference,h:Zf.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:Ct(`${t}.500`,`${t}.200`)(e),borderColor:Ct(`${t}.500`,`${t}.200`)(e),color:Ct("white","gray.900")(e),_hover:{bg:Ct(`${t}.600`,`${t}.300`)(e),borderColor:Ct(`${t}.600`,`${t}.300`)(e)},_disabled:{borderColor:Ct("gray.200","transparent")(e),bg:Ct("gray.200","whiteAlpha.300")(e),color:Ct("gray.500","whiteAlpha.500")(e)}},_indeterminate:{bg:Ct(`${t}.500`,`${t}.200`)(e),borderColor:Ct(`${t}.500`,`${t}.200`)(e),color:Ct("white","gray.900")(e)},_disabled:{bg:Ct("gray.100","whiteAlpha.100")(e),borderColor:Ct("gray.100","transparent")(e)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:Ct("red.500","red.300")(e)}}},aV={_disabled:{cursor:"not-allowed"}},sV={userSelect:"none",_disabled:{opacity:.4}},lV={transitionProperty:"transform",transitionDuration:"normal"},cV=uy(e=>({icon:lV,container:aV,control:Gi(oV,e),label:sV})),uV={sm:uy({control:{[Zf.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:uy({control:{[Zf.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:uy({control:{[Zf.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},n0=iV({baseStyle:cV,sizes:uV,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:hV,definePartsStyle:hy}=Wr(l$.keys),dV=e=>{var t;const r=(t=Gi(n0.baseStyle,e))==null?void 0:t.control;return{...r,borderRadius:"full",_checked:{...r==null?void 0:r._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},fV=hy(e=>{var t,r,o,c;return{label:(r=(t=n0).baseStyle)==null?void 0:r.call(t,e).label,container:(c=(o=n0).baseStyle)==null?void 0:c.call(o,e).container,control:dV(e)}}),pV={md:hy({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:hy({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:hy({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},mV=hV({baseStyle:fV,sizes:pV,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:gV,definePartsStyle:yV}=Wr(c$.keys),Ig=sr("select-bg"),uE,_V={...(uE=xr.baseStyle)==null?void 0:uE.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:Ig.reference,[Ig.variable]:"colors.white",_dark:{[Ig.variable]:"colors.gray.700"},"> option, > optgroup":{bg:Ig.reference}},vV={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},xV=yV({field:_V,icon:vV}),zg={paddingInlineEnd:"8"},hE,dE,fE,pE,mE,gE,yE,_E,bV={lg:{...(hE=xr.sizes)==null?void 0:hE.lg,field:{...(dE=xr.sizes)==null?void 0:dE.lg.field,...zg}},md:{...(fE=xr.sizes)==null?void 0:fE.md,field:{...(pE=xr.sizes)==null?void 0:pE.md.field,...zg}},sm:{...(mE=xr.sizes)==null?void 0:mE.sm,field:{...(gE=xr.sizes)==null?void 0:gE.sm.field,...zg}},xs:{...(yE=xr.sizes)==null?void 0:yE.xs,field:{...(_E=xr.sizes)==null?void 0:_E.xs.field,...zg},icon:{insetEnd:"1"}}},wV=gV({baseStyle:xV,sizes:bV,variants:xr.variants,defaultProps:xr.defaultProps}),Q1=sr("skeleton-start-color"),ev=sr("skeleton-end-color"),SV={[Q1.variable]:"colors.gray.100",[ev.variable]:"colors.gray.400",_dark:{[Q1.variable]:"colors.gray.800",[ev.variable]:"colors.gray.600"},background:Q1.reference,borderColor:ev.reference,opacity:.7,borderRadius:"sm"},kV={baseStyle:SV},tv=sr("skip-link-bg"),TV={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[tv.variable]:"colors.white",_dark:{[tv.variable]:"colors.gray.700"},bg:tv.reference}},EV={baseStyle:TV},{defineMultiStyleConfig:CV,definePartsStyle:c_}=Wr(u$.keys),Ap=sr("slider-thumb-size"),Pp=sr("slider-track-size"),ql=sr("slider-bg"),AV=e=>{const{orientation:t}=e;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...Yw({orientation:t,vertical:{h:"100%"},horizontal:{w:"100%"}})}},PV=e=>({...Yw({orientation:e.orientation,horizontal:{h:Pp.reference},vertical:{w:Pp.reference}}),overflow:"hidden",borderRadius:"sm",[ql.variable]:"colors.gray.200",_dark:{[ql.variable]:"colors.whiteAlpha.200"},_disabled:{[ql.variable]:"colors.gray.300",_dark:{[ql.variable]:"colors.whiteAlpha.300"}},bg:ql.reference}),IV=e=>{const{orientation:t}=e;return{...Yw({orientation:t,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}}),w:Ap.reference,h:Ap.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{bg:"gray.300"}}},zV=e=>{const{colorScheme:t}=e;return{width:"inherit",height:"inherit",[ql.variable]:`colors.${t}.500`,_dark:{[ql.variable]:`colors.${t}.200`},bg:ql.reference}},MV=c_(e=>({container:AV(e),track:PV(e),thumb:IV(e),filledTrack:zV(e)})),DV=c_({container:{[Ap.variable]:"sizes.4",[Pp.variable]:"sizes.1"}}),RV=c_({container:{[Ap.variable]:"sizes.3.5",[Pp.variable]:"sizes.1"}}),LV=c_({container:{[Ap.variable]:"sizes.2.5",[Pp.variable]:"sizes.0.5"}}),BV={lg:DV,md:RV,sm:LV},FV=CV({baseStyle:MV,sizes:BV,defaultProps:{size:"md",colorScheme:"blue"}}),uu=Bn("spinner-size"),$V={width:[uu.reference],height:[uu.reference]},OV={xs:{[uu.variable]:"sizes.3"},sm:{[uu.variable]:"sizes.4"},md:{[uu.variable]:"sizes.6"},lg:{[uu.variable]:"sizes.8"},xl:{[uu.variable]:"sizes.12"}},VV={baseStyle:$V,sizes:OV,defaultProps:{size:"md"}},{defineMultiStyleConfig:NV,definePartsStyle:lP}=Wr(h$.keys),UV={fontWeight:"medium"},jV={opacity:.8,marginBottom:"2"},GV={verticalAlign:"baseline",fontWeight:"semibold"},ZV={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},WV=lP({container:{},label:UV,helpText:jV,number:GV,icon:ZV}),HV={md:lP({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},qV=NV({baseStyle:WV,sizes:HV,defaultProps:{size:"md"}}),rv=sr("kbd-bg"),XV={[rv.variable]:"colors.gray.100",_dark:{[rv.variable]:"colors.whiteAlpha.100"},bg:rv.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},KV={baseStyle:XV},YV={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},JV={baseStyle:YV},{defineMultiStyleConfig:QV,definePartsStyle:e9}=Wr(r$.keys),t9={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},r9=e9({icon:t9}),n9=QV({baseStyle:r9}),{defineMultiStyleConfig:i9,definePartsStyle:o9}=Wr(n$.keys),cs=sr("menu-bg"),nv=sr("menu-shadow"),a9={[cs.variable]:"#fff",[nv.variable]:"shadows.sm",_dark:{[cs.variable]:"colors.gray.700",[nv.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px",bg:cs.reference,boxShadow:nv.reference},s9={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[cs.variable]:"colors.gray.100",_dark:{[cs.variable]:"colors.whiteAlpha.100"}},_active:{[cs.variable]:"colors.gray.200",_dark:{[cs.variable]:"colors.whiteAlpha.200"}},_expanded:{[cs.variable]:"colors.gray.100",_dark:{[cs.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:cs.reference},l9={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},c9={opacity:.6},u9={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},h9={transitionProperty:"common",transitionDuration:"normal"},d9=o9({button:h9,list:a9,item:s9,groupTitle:l9,command:c9,divider:u9}),f9=i9({baseStyle:d9}),{defineMultiStyleConfig:p9,definePartsStyle:tb}=Wr(i$.keys),iv=sr("modal-bg"),ov=sr("modal-shadow"),m9={bg:"blackAlpha.600",zIndex:"modal"},g9=e=>{const{isCentered:t,scrollBehavior:r}=e;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:t?"center":"flex-start",overflow:r==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},y9=e=>{const{scrollBehavior:t}=e;return{borderRadius:"md",color:"inherit",my:"16",zIndex:"modal",maxH:t==="inside"?"calc(100% - 7.5rem)":void 0,[iv.variable]:"colors.white",[ov.variable]:"shadows.lg",_dark:{[iv.variable]:"colors.gray.700",[ov.variable]:"shadows.dark-lg"},bg:iv.reference,boxShadow:ov.reference}},_9={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},v9={position:"absolute",top:"2",insetEnd:"3"},x9=e=>{const{scrollBehavior:t}=e;return{px:"6",py:"2",flex:"1",overflow:t==="inside"?"auto":void 0}},b9={px:"6",py:"4"},w9=tb(e=>({overlay:m9,dialogContainer:Gi(g9,e),dialog:Gi(y9,e),header:_9,closeButton:v9,body:Gi(x9,e),footer:b9}));function Ea(e){return tb(e==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:e}})}var S9={xs:Ea("xs"),sm:Ea("sm"),md:Ea("md"),lg:Ea("lg"),xl:Ea("xl"),"2xl":Ea("2xl"),"3xl":Ea("3xl"),"4xl":Ea("4xl"),"5xl":Ea("5xl"),"6xl":Ea("6xl"),full:Ea("full")},k9=p9({baseStyle:w9,sizes:S9,defaultProps:{size:"md"}}),{defineMultiStyleConfig:T9,definePartsStyle:cP}=Wr(o$.keys),Qw=Bn("number-input-stepper-width"),uP=Bn("number-input-input-padding"),E9=el(Qw).add("0.5rem").toString(),av=Bn("number-input-bg"),sv=Bn("number-input-color"),lv=Bn("number-input-border-color"),C9={[Qw.variable]:"sizes.6",[uP.variable]:E9},A9=e=>{var t,r;return(r=(t=Gi(xr.baseStyle,e))==null?void 0:t.field)!=null?r:{}},P9={width:Qw.reference},I9={borderStart:"1px solid",borderStartColor:lv.reference,color:sv.reference,bg:av.reference,[sv.variable]:"colors.chakra-body-text",[lv.variable]:"colors.chakra-border-color",_dark:{[sv.variable]:"colors.whiteAlpha.800",[lv.variable]:"colors.whiteAlpha.300"},_active:{[av.variable]:"colors.gray.200",_dark:{[av.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},z9=cP(e=>{var t;return{root:C9,field:(t=Gi(A9,e))!=null?t:{},stepperGroup:P9,stepper:I9}});function Mg(e){var t,r,o;const c=(t=xr.sizes)==null?void 0:t[e],h={lg:"md",md:"md",sm:"sm",xs:"sm"},p=(o=(r=c.field)==null?void 0:r.fontSize)!=null?o:"md",l=nP.fontSizes[p];return cP({field:{...c.field,paddingInlineEnd:uP.reference,verticalAlign:"top"},stepper:{fontSize:el(l).multiply(.75).toString(),_first:{borderTopEndRadius:h[e]},_last:{borderBottomEndRadius:h[e],mt:"-1px",borderTopWidth:1}}})}var M9={xs:Mg("xs"),sm:Mg("sm"),md:Mg("md"),lg:Mg("lg")},D9=T9({baseStyle:z9,sizes:M9,variants:xr.variants,defaultProps:xr.defaultProps}),vE,R9={...(vE=xr.baseStyle)==null?void 0:vE.field,textAlign:"center"},L9={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},xE,bE,B9={outline:e=>{var t,r,o;return(o=(r=Gi((t=xr.variants)==null?void 0:t.outline,e))==null?void 0:r.field)!=null?o:{}},flushed:e=>{var t,r,o;return(o=(r=Gi((t=xr.variants)==null?void 0:t.flushed,e))==null?void 0:r.field)!=null?o:{}},filled:e=>{var t,r,o;return(o=(r=Gi((t=xr.variants)==null?void 0:t.filled,e))==null?void 0:r.field)!=null?o:{}},unstyled:(bE=(xE=xr.variants)==null?void 0:xE.unstyled.field)!=null?bE:{}},F9={baseStyle:R9,sizes:L9,variants:B9,defaultProps:xr.defaultProps},{defineMultiStyleConfig:$9,definePartsStyle:O9}=Wr(a$.keys),Dg=Bn("popper-bg"),V9=Bn("popper-arrow-bg"),wE=Bn("popper-arrow-shadow-color"),N9={zIndex:10},U9={[Dg.variable]:"colors.white",bg:Dg.reference,[V9.variable]:Dg.reference,[wE.variable]:"colors.gray.200",_dark:{[Dg.variable]:"colors.gray.700",[wE.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},j9={px:3,py:2,borderBottomWidth:"1px"},G9={px:3,py:2},Z9={px:3,py:2,borderTopWidth:"1px"},W9={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},H9=O9({popper:N9,content:U9,header:j9,body:G9,footer:Z9,closeButton:W9}),q9=$9({baseStyle:H9}),{definePartsStyle:rb,defineMultiStyleConfig:X9}=Wr(YF.keys),cv=sr("drawer-bg"),uv=sr("drawer-box-shadow");function vh(e){return rb(e==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:e}})}var K9={bg:"blackAlpha.600",zIndex:"overlay"},Y9={display:"flex",zIndex:"modal",justifyContent:"center"},J9=e=>{const{isFullHeight:t}=e;return{...t&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[cv.variable]:"colors.white",[uv.variable]:"shadows.lg",_dark:{[cv.variable]:"colors.gray.700",[uv.variable]:"shadows.dark-lg"},bg:cv.reference,boxShadow:uv.reference}},Q9={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},eN={position:"absolute",top:"2",insetEnd:"3"},tN={px:"6",py:"2",flex:"1",overflow:"auto"},rN={px:"6",py:"4"},nN=rb(e=>({overlay:K9,dialogContainer:Y9,dialog:Gi(J9,e),header:Q9,closeButton:eN,body:tN,footer:rN})),iN={xs:vh("xs"),sm:vh("md"),md:vh("lg"),lg:vh("2xl"),xl:vh("4xl"),full:vh("full")},oN=X9({baseStyle:nN,sizes:iN,defaultProps:{size:"xs"}}),{definePartsStyle:aN,defineMultiStyleConfig:sN}=Wr(JF.keys),lN={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},cN={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},uN={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},hN=aN({preview:lN,input:cN,textarea:uN}),dN=sN({baseStyle:hN}),{definePartsStyle:fN,defineMultiStyleConfig:pN}=Wr(QF.keys),Hh=sr("form-control-color"),mN={marginStart:"1",[Hh.variable]:"colors.red.500",_dark:{[Hh.variable]:"colors.red.300"},color:Hh.reference},gN={mt:"2",[Hh.variable]:"colors.gray.600",_dark:{[Hh.variable]:"colors.whiteAlpha.600"},color:Hh.reference,lineHeight:"normal",fontSize:"sm"},yN=fN({container:{width:"100%",position:"relative"},requiredIndicator:mN,helperText:gN}),_N=pN({baseStyle:yN}),{definePartsStyle:vN,defineMultiStyleConfig:xN}=Wr(e$.keys),qh=sr("form-error-color"),bN={[qh.variable]:"colors.red.500",_dark:{[qh.variable]:"colors.red.300"},color:qh.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},wN={marginEnd:"0.5em",[qh.variable]:"colors.red.500",_dark:{[qh.variable]:"colors.red.300"},color:qh.reference},SN=vN({text:bN,icon:wN}),kN=xN({baseStyle:SN}),TN={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},EN={baseStyle:TN},CN={fontFamily:"heading",fontWeight:"bold"},AN={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},PN={baseStyle:CN,sizes:AN,defaultProps:{size:"xl"}},{defineMultiStyleConfig:IN,definePartsStyle:zN}=Wr(XF.keys),MN={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},DN=zN({link:MN}),RN=IN({baseStyle:DN}),LN={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},hP=e=>{const{colorScheme:t,theme:r}=e;if(t==="gray")return{color:Ct("inherit","whiteAlpha.900")(e),_hover:{bg:Ct("gray.100","whiteAlpha.200")(e)},_active:{bg:Ct("gray.200","whiteAlpha.300")(e)}};const o=ad(`${t}.200`,.12)(r),c=ad(`${t}.200`,.24)(r);return{color:Ct(`${t}.600`,`${t}.200`)(e),bg:"transparent",_hover:{bg:Ct(`${t}.50`,o)(e)},_active:{bg:Ct(`${t}.100`,c)(e)}}},BN=e=>{const{colorScheme:t}=e,r=Ct("gray.200","whiteAlpha.300")(e);return{border:"1px solid",borderColor:t==="gray"?r:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...Gi(hP,e)}},FN={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},$N=e=>{var t;const{colorScheme:r}=e;if(r==="gray"){const b=Ct("gray.100","whiteAlpha.200")(e);return{bg:b,_hover:{bg:Ct("gray.200","whiteAlpha.300")(e),_disabled:{bg:b}},_active:{bg:Ct("gray.300","whiteAlpha.400")(e)}}}const{bg:o=`${r}.500`,color:c="white",hoverBg:h=`${r}.600`,activeBg:p=`${r}.700`}=(t=FN[r])!=null?t:{},l=Ct(o,`${r}.200`)(e);return{bg:l,color:Ct(c,"gray.800")(e),_hover:{bg:Ct(h,`${r}.300`)(e),_disabled:{bg:l}},_active:{bg:Ct(p,`${r}.400`)(e)}}},ON=e=>{const{colorScheme:t}=e;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:Ct(`${t}.500`,`${t}.200`)(e),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:Ct(`${t}.700`,`${t}.500`)(e)}}},VN={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},NN={ghost:hP,outline:BN,solid:$N,link:ON,unstyled:VN},UN={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},jN={baseStyle:LN,variants:NN,sizes:UN,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:Au,defineMultiStyleConfig:GN}=Wr(g$.keys),i0=sr("card-bg"),sl=sr("card-padding"),dP=sr("card-shadow"),dy=sr("card-radius"),fP=sr("card-border-width","0"),pP=sr("card-border-color"),ZN=Au({container:{[i0.variable]:"colors.chakra-body-bg",backgroundColor:i0.reference,boxShadow:dP.reference,borderRadius:dy.reference,color:"chakra-body-text",borderWidth:fP.reference,borderColor:pP.reference},body:{padding:sl.reference,flex:"1 1 0%"},header:{padding:sl.reference},footer:{padding:sl.reference}}),WN={sm:Au({container:{[dy.variable]:"radii.base",[sl.variable]:"space.3"}}),md:Au({container:{[dy.variable]:"radii.md",[sl.variable]:"space.5"}}),lg:Au({container:{[dy.variable]:"radii.xl",[sl.variable]:"space.7"}})},HN={elevated:Au({container:{[dP.variable]:"shadows.base",_dark:{[i0.variable]:"colors.gray.700"}}}),outline:Au({container:{[fP.variable]:"1px",[pP.variable]:"colors.chakra-border-color"}}),filled:Au({container:{[i0.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[sl.variable]:0},header:{[sl.variable]:0},footer:{[sl.variable]:0}}},qN=GN({baseStyle:ZN,variants:HN,sizes:WN,defaultProps:{variant:"elevated",size:"md"}}),Wf=Bn("close-button-size"),pf=Bn("close-button-bg"),XN={w:[Wf.reference],h:[Wf.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[pf.variable]:"colors.blackAlpha.100",_dark:{[pf.variable]:"colors.whiteAlpha.100"}},_active:{[pf.variable]:"colors.blackAlpha.200",_dark:{[pf.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:pf.reference},KN={lg:{[Wf.variable]:"sizes.10",fontSize:"md"},md:{[Wf.variable]:"sizes.8",fontSize:"xs"},sm:{[Wf.variable]:"sizes.6",fontSize:"2xs"}},YN={baseStyle:XN,sizes:KN,defaultProps:{size:"md"}},{variants:JN,defaultProps:QN}=Gf,e7={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:xn.bg.reference,color:xn.color.reference,boxShadow:xn.shadow.reference},t7={baseStyle:e7,variants:JN,defaultProps:QN},r7={w:"100%",mx:"auto",maxW:"prose",px:"4"},n7={baseStyle:r7},i7={opacity:.6,borderColor:"inherit"},o7={borderStyle:"solid"},a7={borderStyle:"dashed"},s7={solid:o7,dashed:a7},l7={baseStyle:i7,variants:s7,defaultProps:{variant:"solid"}},{definePartsStyle:c7,defineMultiStyleConfig:u7}=Wr(WF.keys),h7={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},d7={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},f7={pt:"2",px:"4",pb:"5"},p7={fontSize:"1.25em"},m7=c7({container:h7,button:d7,panel:f7,icon:p7}),g7=u7({baseStyle:m7}),{definePartsStyle:tm,defineMultiStyleConfig:y7}=Wr(HF.keys),Oo=sr("alert-fg"),pl=sr("alert-bg"),_7=tm({container:{bg:pl.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:Oo.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:Oo.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function e2(e){const{theme:t,colorScheme:r}=e,o=ad(`${r}.200`,.16)(t);return{light:`colors.${r}.100`,dark:o}}var v7=tm(e=>{const{colorScheme:t}=e,r=e2(e);return{container:{[Oo.variable]:`colors.${t}.500`,[pl.variable]:r.light,_dark:{[Oo.variable]:`colors.${t}.200`,[pl.variable]:r.dark}}}}),x7=tm(e=>{const{colorScheme:t}=e,r=e2(e);return{container:{[Oo.variable]:`colors.${t}.500`,[pl.variable]:r.light,_dark:{[Oo.variable]:`colors.${t}.200`,[pl.variable]:r.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:Oo.reference}}}),b7=tm(e=>{const{colorScheme:t}=e,r=e2(e);return{container:{[Oo.variable]:`colors.${t}.500`,[pl.variable]:r.light,_dark:{[Oo.variable]:`colors.${t}.200`,[pl.variable]:r.dark},pt:"2",borderTopWidth:"4px",borderTopColor:Oo.reference}}}),w7=tm(e=>{const{colorScheme:t}=e;return{container:{[Oo.variable]:"colors.white",[pl.variable]:`colors.${t}.500`,_dark:{[Oo.variable]:"colors.gray.900",[pl.variable]:`colors.${t}.200`},color:Oo.reference}}}),S7={subtle:v7,"left-accent":x7,"top-accent":b7,solid:w7},k7=y7({baseStyle:_7,variants:S7,defaultProps:{variant:"subtle",colorScheme:"blue"}}),{definePartsStyle:mP,defineMultiStyleConfig:T7}=Wr(qF.keys),Xh=sr("avatar-border-color"),hv=sr("avatar-bg"),E7={borderRadius:"full",border:"0.2em solid",[Xh.variable]:"white",_dark:{[Xh.variable]:"colors.gray.800"},borderColor:Xh.reference},C7={[hv.variable]:"colors.gray.200",_dark:{[hv.variable]:"colors.whiteAlpha.400"},bgColor:hv.reference},SE=sr("avatar-background"),A7=e=>{const{name:t,theme:r}=e,o=t?B$({string:t}):"colors.gray.400",c=R$(o)(r);let h="white";return c||(h="gray.800"),{bg:SE.reference,"&:not([data-loaded])":{[SE.variable]:o},color:h,[Xh.variable]:"colors.white",_dark:{[Xh.variable]:"colors.gray.800"},borderColor:Xh.reference,verticalAlign:"top"}},P7=mP(e=>({badge:Gi(E7,e),excessLabel:Gi(C7,e),container:Gi(A7,e)}));function Ol(e){const t=e!=="100%"?oP[e]:void 0;return mP({container:{width:e,height:e,fontSize:`calc(${t??e} / 2.5)`},excessLabel:{width:e,height:e},label:{fontSize:`calc(${t??e} / 2.5)`,lineHeight:e!=="100%"?t??e:void 0}})}var I7={"2xs":Ol(4),xs:Ol(6),sm:Ol(8),md:Ol(12),lg:Ol(16),xl:Ol(24),"2xl":Ol(32),full:Ol("100%")},z7=T7({baseStyle:P7,sizes:I7,defaultProps:{size:"md"}}),M7={Accordion:g7,Alert:k7,Avatar:z7,Badge:Gf,Breadcrumb:RN,Button:jN,Checkbox:n0,CloseButton:YN,Code:t7,Container:n7,Divider:l7,Drawer:oN,Editable:dN,Form:_N,FormError:kN,FormLabel:EN,Heading:PN,Input:xr,Kbd:KV,Link:JV,List:n9,Menu:f9,Modal:k9,NumberInput:D9,PinInput:F9,Popover:q9,Progress:rV,Radio:mV,Select:wV,Skeleton:kV,SkipLink:EV,Slider:FV,Spinner:VV,Stat:qV,Switch:J$,Table:oO,Tabs:xO,Tag:DO,Textarea:ZO,Tooltip:qO,Card:qN},D7={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},R7={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},L7="ltr",B7={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},F7={semanticTokens:D7,direction:L7,...ZF,components:M7,styles:R7,config:B7};function $7(e,t){const r={};return Object.keys(e).forEach(o=>{t.includes(o)||(r[o]=e[o])}),r}function O7(e,t,r,o){const c=typeof t=="string"?t.split("."):[t];for(o=0;o<c.length&&e;o+=1)e=e[c[o]];return e===void 0?r:e}var V7=e=>{const t=new WeakMap;return(o,c,h,p)=>{if(typeof o>"u")return e(o,c,h);t.has(o)||t.set(o,new Map);const l=t.get(o);if(l.has(c))return l.get(c);const b=e(o,c,h,p);return l.set(c,b),b}},gP=V7(O7);function yP(e,t){const r={};return Object.keys(e).forEach(o=>{const c=e[o];t(c,o,e)&&(r[o]=c)}),r}var _P=e=>yP(e,t=>t!=null);function N7(e){return typeof e=="function"}function vP(e,...t){return N7(e)?e(...t):e}var U7=typeof Element<"u",j7=typeof Map=="function",G7=typeof Set=="function",Z7=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function fy(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,c;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!fy(e[o],t[o]))return!1;return!0}var h;if(j7&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(h=e.entries();!(o=h.next()).done;)if(!t.has(o.value[0]))return!1;for(h=e.entries();!(o=h.next()).done;)if(!fy(o.value[1],t.get(o.value[0])))return!1;return!0}if(G7&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(h=e.entries();!(o=h.next()).done;)if(!t.has(o.value[0]))return!1;return!0}if(Z7&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(c=Object.keys(e),r=c.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,c[o]))return!1;if(U7&&e instanceof Element)return!1;for(o=r;o--!==0;)if(!((c[o]==="_owner"||c[o]==="__v"||c[o]==="__o")&&e.$$typeof)&&!fy(e[c[o]],t[c[o]]))return!1;return!0}return e!==e&&t!==t}var W7=function(t,r){try{return fy(t,r)}catch(o){if((o.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw o}};function xP(e,t={}){var r;const{styleConfig:o,...c}=t,{theme:h,colorMode:p}=aB(),l=e?gP(h,`components.${e}`):void 0,b=o||l,w=ps({theme:h,colorMode:p},(r=b==null?void 0:b.defaultProps)!=null?r:{},_P($7(c,["children"]))),T=Me.useRef({});if(b){const P=bF(b)(w);W7(T.current,P)||(T.current=P)}return T.current}function rm(e,t={}){return xP(e,t)}function H7(e,t={}){return xP(e,t)}var q7=new Set([...cF,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),X7=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function K7(e){return X7.has(e)||!q7.has(e)}function Y7(e){const t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function J7(e,...t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");const r={...e};for(const o of t)if(o!=null)for(const c in o)Object.prototype.hasOwnProperty.call(o,c)&&(c in r&&delete r[c],r[c]=o[c]);return r}var Q7=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,eU=L5(function(e){return Q7.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),tU=eU,rU=function(t){return t!=="theme"},kE=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?tU:rU},TE=function(t,r,o){var c;if(r){var h=r.shouldForwardProp;c=t.__emotion_forwardProp&&h?function(p){return t.__emotion_forwardProp(p)&&h(p)}:h}return typeof c!="function"&&o&&(c=t.__emotion_forwardProp),c},nU=function(t){var r=t.cache,o=t.serialized,c=t.isStringTag;return V5(r,o,c),O8(function(){return N5(r,o,c)}),null},iU=function e(t,r){var o=t.__emotion_real===t,c=o&&t.__emotion_base||t,h,p;r!==void 0&&(h=r.label,p=r.target);var l=TE(t,r,o),b=l||kE(c),w=!b("as");return function(){var T=arguments,D=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(h!==void 0&&D.push("label:"+h+";"),T[0]==null||T[0].raw===void 0)D.push.apply(D,T);else{D.push(T[0][0]);for(var P=T.length,$=1;$<P;$++)D.push(T[$],T[0][$])}var q=Z5(function(ee,me,Z){var j=w&&ee.as||c,H="",ie=[],_e=ee;if(ee.theme==null){_e={};for(var Le in ee)_e[Le]=ee[Le];_e.theme=Me.useContext(Ep)}typeof ee.className=="string"?H=M8(me.registered,ie,ee.className):ee.className!=null&&(H=ee.className+" ");var ve=jw(D.concat(ie),me.registered,_e);H+=me.key+"-"+ve.name,p!==void 0&&(H+=" "+p);var Pe=w&&l===void 0?kE(j):b,Ne={};for(var $e in ee)w&&$e==="as"||Pe($e)&&(Ne[$e]=ee[$e]);return Ne.className=H,Ne.ref=Z,Me.createElement(Me.Fragment,null,Me.createElement(nU,{cache:me,serialized:ve,isStringTag:typeof j=="string"}),Me.createElement(j,Ne))});return q.displayName=h!==void 0?h:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",q.defaultProps=t.defaultProps,q.__emotion_real=q,q.__emotion_base=c,q.__emotion_styles=D,q.__emotion_forwardProp=l,Object.defineProperty(q,"toString",{value:function(){return"."+p}}),q.withComponent=function(ee,me){return e(ee,Jy({},r,me,{shouldForwardProp:TE(q,me,!0)})).apply(void 0,D)},q}},oU=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],o0=iU.bind();oU.forEach(function(e){o0[e]=o0(e)});var EE,aU=(EE=o0.default)!=null?EE:o0,sU=({baseStyle:e})=>t=>{const{theme:r,css:o,__css:c,sx:h,...p}=t,l=yP(p,(D,P)=>hF(P)),b=vP(e,t),w=J7({},c,b,_P(l),h),T=rP(w)(t.theme);return o?[T,o]:T};function dv(e,t){const{baseStyle:r,...o}=t??{};o.shouldForwardProp||(o.shouldForwardProp=K7);const c=sU({baseStyle:r}),h=aU(e,o)(c);return Bo.forwardRef(function(b,w){const{colorMode:T,forced:D}=Ww();return Bo.createElement(h,{ref:w,"data-theme":D?T:void 0,...b})})}function lU(){const e=new Map;return new Proxy(dv,{apply(t,r,o){return dv(...o)},get(t,r){return e.has(r)||e.set(r,dv(r)),e.get(r)}})}var Zi=lU();function Ra(e){return Me.forwardRef(e)}function cU(e={}){const{strict:t=!0,errorMessage:r="useContext: `context` is undefined. Seems you forgot to wrap component within the Provider",name:o}=e,c=Me.createContext(void 0);c.displayName=o;function h(){var p;const l=Me.useContext(c);if(!l&&t){const b=new Error(r);throw b.name="ContextError",(p=Error.captureStackTrace)==null||p.call(Error,b,h),b}return l}return[c.Provider,h,c]}function uU(e){const{cssVarsRoot:t,theme:r,children:o}=e,c=Me.useMemo(()=>lF(r),[r]);return aa(U8,{theme:c,children:[je(hU,{root:t}),o]})}function hU({root:e=":host, :root"}){const t=[e,"[data-theme]"].join(",");return je(i_,{styles:r=>({[t]:r.__cssVars})})}cU({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function dU(){const{colorMode:e}=Ww();return je(i_,{styles:t=>{const r=gP(t,"styles.global"),o=vP(r,{theme:t,colorMode:e});return o?rP(o)(t):void 0}})}var bP=Me.createContext({getDocument(){return document},getWindow(){return window}});bP.displayName="EnvironmentContext";function wP(e){const{children:t,environment:r,disabled:o}=e,c=Me.useRef(null),h=Me.useMemo(()=>r||{getDocument:()=>{var l,b;return(b=(l=c.current)==null?void 0:l.ownerDocument)!=null?b:document},getWindow:()=>{var l,b;return(b=(l=c.current)==null?void 0:l.ownerDocument.defaultView)!=null?b:window}},[r]),p=!o||!r;return aa(bP.Provider,{value:h,children:[t,p&&je("span",{id:"__chakra_env",hidden:!0,ref:c})]})}wP.displayName="EnvironmentProvider";var fU=e=>{const{children:t,colorModeManager:r,portalZIndex:o,resetScope:c,resetCSS:h=!0,theme:p={},environment:l,cssVarsRoot:b,disableEnvironment:w}=e,T=je(wP,{environment:l,disabled:w,children:t});return je(uU,{theme:p,cssVarsRoot:b,children:aa(K5,{colorModeManager:r,options:p.config,children:[h?je(W8,{scope:c}):je(Z8,{}),je(dU,{}),o?je(q5,{zIndex:o,children:T}):T]})})},pU=(e,t)=>e.find(r=>r.id===t);function CE(e,t){const r=SP(e,t),o=r?e[r].findIndex(c=>c.id===t):-1;return{position:r,index:o}}function SP(e,t){for(const[r,o]of Object.entries(e))if(pU(o,t))return r}function mU(e){const t=e.includes("right"),r=e.includes("left");let o="center";return t&&(o="flex-end"),r&&(o="flex-start"),{display:"flex",flexDirection:"column",alignItems:o}}function gU(e){const r=e==="top"||e==="bottom"?"0 auto":void 0,o=e.includes("top")?"env(safe-area-inset-top, 0px)":void 0,c=e.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,h=e.includes("left")?void 0:"env(safe-area-inset-right, 0px)",p=e.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:r,top:o,bottom:c,right:h,left:p}}function yU(e,t=[]){const r=Me.useRef(e);return Me.useEffect(()=>{r.current=e}),Me.useCallback((...o)=>{var c;return(c=r.current)==null?void 0:c.call(r,...o)},t)}function _U(e,t){const r=yU(e);Me.useEffect(()=>{if(t==null)return;let o=null;return o=window.setTimeout(()=>{r()},t),()=>{o&&window.clearTimeout(o)}},[t,r])}function AE(e,t){const r=Me.useRef(!1),o=Me.useRef(!1);Me.useEffect(()=>{if(r.current&&o.current)return e();o.current=!0},t),Me.useEffect(()=>(r.current=!0,()=>{r.current=!1}),[])}const kP=Me.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),u_=Me.createContext({}),nm=Me.createContext(null),h_=typeof document<"u",a0=h_?Me.useLayoutEffect:Me.useEffect,TP=Me.createContext({strict:!1});function vU(e,t,r,o){const{visualElement:c}=Me.useContext(u_),h=Me.useContext(TP),p=Me.useContext(nm),l=Me.useContext(kP).reducedMotion,b=Me.useRef();o=o||h.renderer,!b.current&&o&&(b.current=o(e,{visualState:t,parent:c,props:r,presenceContext:p,blockInitialAnimation:p?p.initial===!1:!1,reducedMotionConfig:l}));const w=b.current;return Me.useInsertionEffect(()=>{w&&w.update(r,p)}),a0(()=>{w&&w.render()}),Me.useEffect(()=>{w&&w.updateFeatures()}),(window.HandoffAppearAnimations?a0:Me.useEffect)(()=>{w&&w.animationState&&w.animationState.animateChanges()}),w}function Bh(e){return typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function xU(e,t,r){return Me.useCallback(o=>{o&&e.mount&&e.mount(o),t&&(o?t.mount(o):t.unmount()),r&&(typeof r=="function"?r(o):Bh(r)&&(r.current=o))},[t])}function Ip(e){return typeof e=="string"||Array.isArray(e)}function d_(e){return typeof e=="object"&&typeof e.start=="function"}const t2=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],r2=["initial",...t2];function f_(e){return d_(e.animate)||r2.some(t=>Ip(e[t]))}function EP(e){return!!(f_(e)||e.variants)}function bU(e,t){if(f_(e)){const{initial:r,animate:o}=e;return{initial:r===!1||Ip(r)?r:void 0,animate:Ip(o)?o:void 0}}return e.inherit!==!1?t:{}}function wU(e){const{initial:t,animate:r}=bU(e,Me.useContext(u_));return Me.useMemo(()=>({initial:t,animate:r}),[PE(t),PE(r)])}function PE(e){return Array.isArray(e)?e.join(" "):e}const IE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},zp={};for(const e in IE)zp[e]={isEnabled:t=>IE[e].some(r=>!!t[r])};function SU(e){for(const t in e)zp[t]={...zp[t],...e[t]}}function n2(e){const t=Me.useRef(null);return t.current===null&&(t.current=e()),t.current}const Hf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let kU=1;function TU(){return n2(()=>{if(Hf.hasEverUpdated)return kU++})}const i2=Me.createContext({}),CP=Me.createContext({}),EU=Symbol.for("motionComponentSymbol");function CU({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:o,Component:c}){e&&SU(e);function h(l,b){let w;const T={...Me.useContext(kP),...l,layoutId:AU(l)},{isStatic:D}=T,P=wU(l),$=D?void 0:TU(),q=o(l,D);if(!D&&h_){P.visualElement=vU(c,q,T,t);const ee=Me.useContext(CP),me=Me.useContext(TP).strict;P.visualElement&&(w=P.visualElement.loadFeatures(T,me,e,$,ee))}return Me.createElement(u_.Provider,{value:P},w&&P.visualElement?Me.createElement(w,{visualElement:P.visualElement,...T}):null,r(c,l,$,xU(q,P.visualElement,b),q,D,P.visualElement))}const p=Me.forwardRef(h);return p[EU]=c,p}function AU({layoutId:e}){const t=Me.useContext(i2).id;return t&&e!==void 0?t+"-"+e:e}function PU(e){function t(o,c={}){return CU(e(o,c))}if(typeof Proxy>"u")return t;const r=new Map;return new Proxy(t,{get:(o,c)=>(r.has(c)||r.set(c,t(c)),r.get(c))})}const IU=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function o2(e){return typeof e!="string"||e.includes("-")?!1:!!(IU.indexOf(e)>-1||/[A-Z]/.test(e))}const s0={};function zU(e){Object.assign(s0,e)}const im=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ou=new Set(im);function AP(e,{layout:t,layoutId:r}){return Ou.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!s0[e]||e==="opacity")}const mo=e=>!!(e&&e.getVelocity),MU={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},DU=im.length;function RU(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},o,c){let h="";for(let p=0;p<DU;p++){const l=im[p];if(e[l]!==void 0){const b=MU[l]||l;h+=`${b}(${e[l]}) `}}return t&&!e.z&&(h+="translateZ(0)"),h=h.trim(),c?h=c(e,o?"":h):r&&o&&(h="none"),h}const PP=e=>t=>typeof t=="string"&&t.startsWith(e),IP=PP("--"),nb=PP("var(--"),LU=(e,t)=>t&&typeof e=="number"?t.transform(e):e,Ru=(e,t,r)=>Math.min(Math.max(r,e),t),Vu={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},qf={...Vu,transform:e=>Ru(0,1,e)},Rg={...Vu,default:1},Xf=e=>Math.round(e*1e5)/1e5,Mp=/(-)?([\d]*\.?[\d])+/g,ib=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,BU=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function om(e){return typeof e=="string"}const am=e=>({test:t=>om(t)&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Vl=am("deg"),vs=am("%"),Pt=am("px"),FU=am("vh"),$U=am("vw"),zE={...vs,parse:e=>vs.parse(e)/100,transform:e=>vs.transform(e*100)},ME={...Vu,transform:Math.round},zP={borderWidth:Pt,borderTopWidth:Pt,borderRightWidth:Pt,borderBottomWidth:Pt,borderLeftWidth:Pt,borderRadius:Pt,radius:Pt,borderTopLeftRadius:Pt,borderTopRightRadius:Pt,borderBottomRightRadius:Pt,borderBottomLeftRadius:Pt,width:Pt,maxWidth:Pt,height:Pt,maxHeight:Pt,size:Pt,top:Pt,right:Pt,bottom:Pt,left:Pt,padding:Pt,paddingTop:Pt,paddingRight:Pt,paddingBottom:Pt,paddingLeft:Pt,margin:Pt,marginTop:Pt,marginRight:Pt,marginBottom:Pt,marginLeft:Pt,rotate:Vl,rotateX:Vl,rotateY:Vl,rotateZ:Vl,scale:Rg,scaleX:Rg,scaleY:Rg,scaleZ:Rg,skew:Vl,skewX:Vl,skewY:Vl,distance:Pt,translateX:Pt,translateY:Pt,translateZ:Pt,x:Pt,y:Pt,z:Pt,perspective:Pt,transformPerspective:Pt,opacity:qf,originX:zE,originY:zE,originZ:Pt,zIndex:ME,fillOpacity:qf,strokeOpacity:qf,numOctaves:ME};function a2(e,t,r,o){const{style:c,vars:h,transform:p,transformOrigin:l}=e;let b=!1,w=!1,T=!0;for(const D in t){const P=t[D];if(IP(D)){h[D]=P;continue}const $=zP[D],q=LU(P,$);if(Ou.has(D)){if(b=!0,p[D]=q,!T)continue;P!==($.default||0)&&(T=!1)}else D.startsWith("origin")?(w=!0,l[D]=q):c[D]=q}if(t.transform||(b||o?c.transform=RU(e.transform,r,T,o):c.transform&&(c.transform="none")),w){const{originX:D="50%",originY:P="50%",originZ:$=0}=l;c.transformOrigin=`${D} ${P} ${$}`}}const s2=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function MP(e,t,r){for(const o in t)!mo(t[o])&&!AP(o,r)&&(e[o]=t[o])}function OU({transformTemplate:e},t,r){return Me.useMemo(()=>{const o=s2();return a2(o,t,{enableHardwareAcceleration:!r},e),Object.assign({},o.vars,o.style)},[t])}function VU(e,t,r){const o=e.style||{},c={};return MP(c,o,e),Object.assign(c,OU(e,t,r)),e.transformValues?e.transformValues(c):c}function NU(e,t,r){const o={},c=VU(e,t,r);return e.drag&&e.dragListener!==!1&&(o.draggable=!1,c.userSelect=c.WebkitUserSelect=c.WebkitTouchCallout="none",c.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(o.tabIndex=0),o.style=c,o}const UU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function l0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||UU.has(e)}let DP=e=>!l0(e);function jU(e){e&&(DP=t=>t.startsWith("on")?!l0(t):e(t))}try{jU(require("@emotion/is-prop-valid").default)}catch{}function GU(e,t,r){const o={};for(const c in e)c==="values"&&typeof e.values=="object"||(DP(c)||r===!0&&l0(c)||!t&&!l0(c)||e.draggable&&c.startsWith("onDrag"))&&(o[c]=e[c]);return o}function DE(e,t,r){return typeof e=="string"?e:Pt.transform(t+r*e)}function ZU(e,t,r){const o=DE(t,e.x,e.width),c=DE(r,e.y,e.height);return`${o} ${c}`}const WU={offset:"stroke-dashoffset",array:"stroke-dasharray"},HU={offset:"strokeDashoffset",array:"strokeDasharray"};function qU(e,t,r=1,o=0,c=!0){e.pathLength=1;const h=c?WU:HU;e[h.offset]=Pt.transform(-o);const p=Pt.transform(t),l=Pt.transform(r);e[h.array]=`${p} ${l}`}function l2(e,{attrX:t,attrY:r,attrScale:o,originX:c,originY:h,pathLength:p,pathSpacing:l=1,pathOffset:b=0,...w},T,D,P){if(a2(e,w,T,P),D){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:$,style:q,dimensions:ee}=e;$.transform&&(ee&&(q.transform=$.transform),delete $.transform),ee&&(c!==void 0||h!==void 0||q.transform)&&(q.transformOrigin=ZU(ee,c!==void 0?c:.5,h!==void 0?h:.5)),t!==void 0&&($.x=t),r!==void 0&&($.y=r),o!==void 0&&($.scale=o),p!==void 0&&qU($,p,l,b,!1)}const RP=()=>({...s2(),attrs:{}}),c2=e=>typeof e=="string"&&e.toLowerCase()==="svg";function XU(e,t,r,o){const c=Me.useMemo(()=>{const h=RP();return l2(h,t,{enableHardwareAcceleration:!1},c2(o),e.transformTemplate),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};MP(h,e.style,e),c.style={...h,...c.style}}return c}function KU(e=!1){return(r,o,c,h,{latestValues:p},l)=>{const w=(o2(r)?XU:NU)(o,p,l,r),D={...GU(o,typeof r=="string",e),...w,ref:h},{children:P}=o,$=Me.useMemo(()=>mo(P)?P.get():P,[P]);return c&&(D["data-projection-id"]=c),Me.createElement(r,{...D,children:$})}}const u2=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function LP(e,{style:t,vars:r},o,c){Object.assign(e.style,t,c&&c.getProjectionStyles(o));for(const h in r)e.style.setProperty(h,r[h])}const BP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function FP(e,t,r,o){LP(e,t,void 0,o);for(const c in t.attrs)e.setAttribute(BP.has(c)?c:u2(c),t.attrs[c])}function h2(e,t){const{style:r}=e,o={};for(const c in r)(mo(r[c])||t.style&&mo(t.style[c])||AP(c,e))&&(o[c]=r[c]);return o}function $P(e,t){const r=h2(e,t);for(const o in e)if(mo(e[o])||mo(t[o])){const c=im.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[c]=e[o]}return r}function d2(e,t,r,o={},c={}){return typeof t=="function"&&(t=t(r!==void 0?r:e.custom,o,c)),typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"&&(t=t(r!==void 0?r:e.custom,o,c)),t}const c0=e=>Array.isArray(e),YU=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),JU=e=>c0(e)?e[e.length-1]||0:e;function py(e){const t=mo(e)?e.get():e;return YU(t)?t.toValue():t}function QU({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},o,c,h){const p={latestValues:ej(o,c,h,e),renderState:t()};return r&&(p.mount=l=>r(o,l,p)),p}const OP=e=>(t,r)=>{const o=Me.useContext(u_),c=Me.useContext(nm),h=()=>QU(e,t,o,c);return r?h():n2(h)};function ej(e,t,r,o){const c={},h=o(e,{});for(const P in h)c[P]=py(h[P]);let{initial:p,animate:l}=e;const b=f_(e),w=EP(e);t&&w&&!b&&e.inherit!==!1&&(p===void 0&&(p=t.initial),l===void 0&&(l=t.animate));let T=r?r.initial===!1:!1;T=T||p===!1;const D=T?l:p;return D&&typeof D!="boolean"&&!d_(D)&&(Array.isArray(D)?D:[D]).forEach($=>{const q=d2(e,$);if(!q)return;const{transitionEnd:ee,transition:me,...Z}=q;for(const j in Z){let H=Z[j];if(Array.isArray(H)){const ie=T?H.length-1:0;H=H[ie]}H!==null&&(c[j]=H)}for(const j in ee)c[j]=ee[j]}),c}const tj={useVisualState:OP({scrapeMotionValuesFromProps:$P,createRenderState:RP,onMount:(e,t,{renderState:r,latestValues:o})=>{try{r.dimensions=typeof t.getBBox=="function"?t.getBBox():t.getBoundingClientRect()}catch{r.dimensions={x:0,y:0,width:0,height:0}}l2(r,o,{enableHardwareAcceleration:!1},c2(t.tagName),e.transformTemplate),FP(t,r)}})},rj={useVisualState:OP({scrapeMotionValuesFromProps:h2,createRenderState:s2})};function nj(e,{forwardMotionProps:t=!1},r,o){return{...o2(e)?tj:rj,preloadedFeatures:r,useRender:KU(t),createVisualElement:o,Component:e}}function ol(e,t,r,o={passive:!0}){return e.addEventListener(t,r,o),()=>e.removeEventListener(t,r)}const VP=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1;function p_(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}const ij=e=>t=>VP(t)&&e(t,p_(t));function ll(e,t,r,o){return ol(e,t,ij(r),o)}const oj=(e,t)=>r=>t(e(r)),hc=(...e)=>e.reduce(oj);function NP(e){let t=null;return()=>{const r=()=>{t=null};return t===null?(t=e,r):!1}}const RE=NP("dragHorizontal"),LE=NP("dragVertical");function UP(e){let t=!1;if(e==="y")t=LE();else if(e==="x")t=RE();else{const r=RE(),o=LE();r&&o?t=()=>{r(),o()}:(r&&r(),o&&o())}return t}function jP(){const e=UP(!0);return e?(e(),!1):!0}class kc{constructor(t){this.isMounted=!1,this.node=t}update(){}}function aj(e){let t=[],r=[],o=0,c=!1,h=!1;const p=new WeakSet,l={schedule:(b,w=!1,T=!1)=>{const D=T&&c,P=D?t:r;return w&&p.add(b),P.indexOf(b)===-1&&(P.push(b),D&&c&&(o=t.length)),b},cancel:b=>{const w=r.indexOf(b);w!==-1&&r.splice(w,1),p.delete(b)},process:b=>{if(c){h=!0;return}if(c=!0,[t,r]=[r,t],r.length=0,o=t.length,o)for(let w=0;w<o;w++){const T=t[w];T(b),p.has(T)&&(l.schedule(T),e())}c=!1,h&&(h=!1,l.process(b))}};return l}const Hn={delta:0,timestamp:0,isProcessing:!1},sj=40;let ob=!0,Dp=!1;const m_=["read","update","preRender","render","postRender"],Kh=m_.reduce((e,t)=>(e[t]=aj(()=>Dp=!0),e),{}),lj=e=>Kh[e].process(Hn),GP=e=>{Dp=!1,Hn.delta=ob?1e3/60:Math.max(Math.min(e-Hn.timestamp,sj),1),Hn.timestamp=e,Hn.isProcessing=!0,m_.forEach(lj),Hn.isProcessing=!1,Dp&&(ob=!1,requestAnimationFrame(GP))},cj=()=>{Dp=!0,ob=!0,Hn.isProcessing||requestAnimationFrame(GP)},Jr=m_.reduce((e,t)=>{const r=Kh[t];return e[t]=(o,c=!1,h=!1)=>(Dp||cj(),r.schedule(o,c,h)),e},{});function ml(e){m_.forEach(t=>Kh[t].cancel(e))}function BE(e,t){const r="pointer"+(t?"enter":"leave"),o="onHover"+(t?"Start":"End"),c=(h,p)=>{if(h.type==="touch"||jP())return;const l=e.getProps();e.animationState&&l.whileHover&&e.animationState.setActive("whileHover",t),l[o]&&Jr.update(()=>l[o](h,p))};return ll(e.current,r,c,{passive:!e.getProps()[o]})}class uj extends kc{mount(){this.unmount=hc(BE(this.node,!0),BE(this.node,!1))}unmount(){}}class hj extends kc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=hc(ol(this.node.current,"focus",()=>this.onFocus()),ol(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const ZP=(e,t)=>t?e===t?!0:ZP(e,t.parentElement):!1,qn=e=>e;function fv(e,t){if(!t)return;const r=new PointerEvent("pointer"+e);t(r,p_(r))}class dj extends kc{constructor(){super(...arguments),this.removeStartListeners=qn,this.removeEndListeners=qn,this.removeAccessibleListeners=qn,this.startPointerPress=(t,r)=>{if(this.removeEndListeners(),this.isPressing)return;const o=this.node.getProps(),h=ll(window,"pointerup",(l,b)=>{if(!this.checkPressEnd())return;const{onTap:w,onTapCancel:T}=this.node.getProps();Jr.update(()=>{ZP(this.node.current,l.target)?w&&w(l,b):T&&T(l,b)})},{passive:!(o.onTap||o.onPointerUp)}),p=ll(window,"pointercancel",(l,b)=>this.cancelPress(l,b),{passive:!(o.onTapCancel||o.onPointerCancel)});this.removeEndListeners=hc(h,p),this.startPress(t,r)},this.startAccessiblePress=()=>{const t=h=>{if(h.key!=="Enter"||this.isPressing)return;const p=l=>{l.key!=="Enter"||!this.checkPressEnd()||fv("up",(b,w)=>{const{onTap:T}=this.node.getProps();T&&Jr.update(()=>T(b,w))})};this.removeEndListeners(),this.removeEndListeners=ol(this.node.current,"keyup",p),fv("down",(l,b)=>{this.startPress(l,b)})},r=ol(this.node.current,"keydown",t),o=()=>{this.isPressing&&fv("cancel",(h,p)=>this.cancelPress(h,p))},c=ol(this.node.current,"blur",o);this.removeAccessibleListeners=hc(r,c)}}startPress(t,r){this.isPressing=!0;const{onTapStart:o,whileTap:c}=this.node.getProps();c&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),o&&Jr.update(()=>o(t,r))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!jP()}cancelPress(t,r){if(!this.checkPressEnd())return;const{onTapCancel:o}=this.node.getProps();o&&Jr.update(()=>o(t,r))}mount(){const t=this.node.getProps(),r=ll(this.node.current,"pointerdown",this.startPointerPress,{passive:!(t.onTapStart||t.onPointerStart)}),o=ol(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=hc(r,o)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const ab=new WeakMap,pv=new WeakMap,fj=e=>{const t=ab.get(e.target);t&&t(e)},pj=e=>{e.forEach(fj)};function mj({root:e,...t}){const r=e||document;pv.has(r)||pv.set(r,{});const o=pv.get(r),c=JSON.stringify(t);return o[c]||(o[c]=new IntersectionObserver(pj,{root:e,...t})),o[c]}function gj(e,t,r){const o=mj(t);return ab.set(e,r),o.observe(e),()=>{ab.delete(e),o.unobserve(e)}}const yj={some:0,all:1};class _j extends kc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:o,amount:c="some",once:h}=t,p={root:r?r.current:void 0,rootMargin:o,threshold:typeof c=="number"?c:yj[c]},l=b=>{const{isIntersecting:w}=b;if(this.isInView===w||(this.isInView=w,h&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:T,onViewportLeave:D}=this.node.getProps(),P=w?T:D;P&&P(b)};return gj(this.node.current,p,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(vj(t,r))&&this.startObserver()}unmount(){}}function vj({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const xj={inView:{Feature:_j},tap:{Feature:dj},focus:{Feature:hj},hover:{Feature:uj}};function WP(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let o=0;o<r;o++)if(t[o]!==e[o])return!1;return!0}function bj(e){const t={};return e.values.forEach((r,o)=>t[o]=r.get()),t}function wj(e){const t={};return e.values.forEach((r,o)=>t[o]=r.getVelocity()),t}function g_(e,t,r){const o=e.getProps();return d2(o,t,r!==void 0?r:o.custom,bj(e),wj(e))}const Sj="framerAppearId",kj="data-"+u2(Sj);let Tj=qn,f2=qn;const dc=e=>e*1e3,cl=e=>e/1e3,Ej={current:!1},HP=e=>Array.isArray(e)&&typeof e[0]=="number";function qP(e){return!!(!e||typeof e=="string"&&XP[e]||HP(e)||Array.isArray(e)&&e.every(qP))}const Ef=([e,t,r,o])=>`cubic-bezier(${e}, ${t}, ${r}, ${o})`,XP={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ef([0,.65,.55,1]),circOut:Ef([.55,0,1,.45]),backIn:Ef([.31,.01,.66,-.59]),backOut:Ef([.33,1.53,.69,.99])};function KP(e){if(e)return HP(e)?Ef(e):Array.isArray(e)?e.map(KP):XP[e]}function Cj(e,t,r,{delay:o=0,duration:c,repeat:h=0,repeatType:p="loop",ease:l,times:b}={}){const w={[t]:r};b&&(w.offset=b);const T=KP(l);return Array.isArray(T)&&(w.easing=T),e.animate(w,{delay:o,duration:c,easing:Array.isArray(T)?"linear":T,fill:"both",iterations:h+1,direction:p==="reverse"?"alternate":"normal"})}const FE={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},mv={},YP={};for(const e in FE)YP[e]=()=>(mv[e]===void 0&&(mv[e]=FE[e]()),mv[e]);function Aj(e,{repeat:t,repeatType:r="loop"}){const o=t&&r!=="loop"&&t%2===1?0:e.length-1;return e[o]}const JP=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,Pj=1e-7,Ij=12;function zj(e,t,r,o,c){let h,p,l=0;do p=t+(r-t)/2,h=JP(p,o,c)-e,h>0?r=p:t=p;while(Math.abs(h)>Pj&&++l<Ij);return p}function sm(e,t,r,o){if(e===t&&r===o)return qn;const c=h=>zj(h,0,1,e,r);return h=>h===0||h===1?h:JP(c(h),t,o)}const Mj=sm(.42,0,1,1),Dj=sm(0,0,.58,1),QP=sm(.42,0,.58,1),Rj=e=>Array.isArray(e)&&typeof e[0]!="number",eI=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tI=e=>t=>1-e(1-t),rI=e=>1-Math.sin(Math.acos(e)),p2=tI(rI),Lj=eI(p2),nI=sm(.33,1.53,.69,.99),m2=tI(nI),Bj=eI(m2),Fj=e=>(e*=2)<1?.5*m2(e):.5*(2-Math.pow(2,-10*(e-1))),$j={linear:qn,easeIn:Mj,easeInOut:QP,easeOut:Dj,circIn:rI,circInOut:Lj,circOut:p2,backIn:m2,backInOut:Bj,backOut:nI,anticipate:Fj},$E=e=>{if(Array.isArray(e)){f2(e.length===4);const[t,r,o,c]=e;return sm(t,r,o,c)}else if(typeof e=="string")return $j[e];return e},g2=(e,t)=>r=>!!(om(r)&&BU.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),iI=(e,t,r)=>o=>{if(!om(o))return o;const[c,h,p,l]=o.match(Mp);return{[e]:parseFloat(c),[t]:parseFloat(h),[r]:parseFloat(p),alpha:l!==void 0?parseFloat(l):1}},Oj=e=>Ru(0,255,e),gv={...Vu,transform:e=>Math.round(Oj(e))},_u={test:g2("rgb","red"),parse:iI("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:o=1})=>"rgba("+gv.transform(e)+", "+gv.transform(t)+", "+gv.transform(r)+", "+Xf(qf.transform(o))+")"};function Vj(e){let t="",r="",o="",c="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),o=e.substring(5,7),c=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),o=e.substring(3,4),c=e.substring(4,5),t+=t,r+=r,o+=o,c+=c),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(o,16),alpha:c?parseInt(c,16)/255:1}}const sb={test:g2("#"),parse:Vj,transform:_u.transform},Fh={test:g2("hsl","hue"),parse:iI("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:o=1})=>"hsla("+Math.round(e)+", "+vs.transform(Xf(t))+", "+vs.transform(Xf(r))+", "+Xf(qf.transform(o))+")"},$i={test:e=>_u.test(e)||sb.test(e)||Fh.test(e),parse:e=>_u.test(e)?_u.parse(e):Fh.test(e)?Fh.parse(e):sb.parse(e),transform:e=>om(e)?e:e.hasOwnProperty("red")?_u.transform(e):Fh.transform(e)},rn=(e,t,r)=>-r*e+r*t+e;function yv(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Nj({hue:e,saturation:t,lightness:r,alpha:o}){e/=360,t/=100,r/=100;let c=0,h=0,p=0;if(!t)c=h=p=r;else{const l=r<.5?r*(1+t):r+t-r*t,b=2*r-l;c=yv(b,l,e+1/3),h=yv(b,l,e),p=yv(b,l,e-1/3)}return{red:Math.round(c*255),green:Math.round(h*255),blue:Math.round(p*255),alpha:o}}const _v=(e,t,r)=>{const o=e*e;return Math.sqrt(Math.max(0,r*(t*t-o)+o))},Uj=[sb,_u,Fh],jj=e=>Uj.find(t=>t.test(e));function OE(e){const t=jj(e);let r=t.parse(e);return t===Fh&&(r=Nj(r)),r}const oI=(e,t)=>{const r=OE(e),o=OE(t),c={...r};return h=>(c.red=_v(r.red,o.red,h),c.green=_v(r.green,o.green,h),c.blue=_v(r.blue,o.blue,h),c.alpha=rn(r.alpha,o.alpha,h),_u.transform(c))},aI="${c}",sI="${n}";function Gj(e){var t,r;return isNaN(e)&&om(e)&&(((t=e.match(Mp))===null||t===void 0?void 0:t.length)||0)+(((r=e.match(ib))===null||r===void 0?void 0:r.length)||0)>0}function u0(e){typeof e=="number"&&(e=`${e}`);const t=[];let r=0,o=0;const c=e.match(ib);c&&(r=c.length,e=e.replace(ib,aI),t.push(...c.map($i.parse)));const h=e.match(Mp);return h&&(o=h.length,e=e.replace(Mp,sI),t.push(...h.map(Vu.parse))),{values:t,numColors:r,numNumbers:o,tokenised:e}}function lI(e){return u0(e).values}function cI(e){const{values:t,numColors:r,tokenised:o}=u0(e),c=t.length;return h=>{let p=o;for(let l=0;l<c;l++)p=p.replace(l<r?aI:sI,l<r?$i.transform(h[l]):Xf(h[l]));return p}}const Zj=e=>typeof e=="number"?0:e;function Wj(e){const t=lI(e);return cI(e)(t.map(Zj))}const vc={test:Gj,parse:lI,createTransformer:cI,getAnimatableNone:Wj};function uI(e,t){return typeof e=="number"?r=>rn(e,t,r):$i.test(e)?oI(e,t):dI(e,t)}const hI=(e,t)=>{const r=[...e],o=r.length,c=e.map((h,p)=>uI(h,t[p]));return h=>{for(let p=0;p<o;p++)r[p]=c[p](h);return r}},Hj=(e,t)=>{const r={...e,...t},o={};for(const c in r)e[c]!==void 0&&t[c]!==void 0&&(o[c]=uI(e[c],t[c]));return c=>{for(const h in o)r[h]=o[h](c);return r}},dI=(e,t)=>{const r=vc.createTransformer(t),o=u0(e),c=u0(t);return o.numColors===c.numColors&&o.numNumbers>=c.numNumbers?hc(hI(o.values,c.values),r):p=>`${p>0?t:e}`},Rp=(e,t,r)=>{const o=t-e;return o===0?1:(r-e)/o},VE=(e,t)=>r=>rn(e,t,r);function qj(e){return typeof e=="number"?VE:typeof e=="string"?$i.test(e)?oI:dI:Array.isArray(e)?hI:typeof e=="object"?Hj:VE}function Xj(e,t,r){const o=[],c=r||qj(e[0]),h=e.length-1;for(let p=0;p<h;p++){let l=c(e[p],e[p+1]);if(t){const b=Array.isArray(t)?t[p]||qn:t;l=hc(b,l)}o.push(l)}return o}function fI(e,t,{clamp:r=!0,ease:o,mixer:c}={}){const h=e.length;if(f2(h===t.length),h===1)return()=>t[0];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const p=Xj(t,o,c),l=p.length,b=w=>{let T=0;if(l>1)for(;T<e.length-2&&!(w<e[T+1]);T++);const D=Rp(e[T],e[T+1],w);return p[T](D)};return r?w=>b(Ru(e[0],e[h-1],w)):b}function Kj(e,t){const r=e[e.length-1];for(let o=1;o<=t;o++){const c=Rp(0,t,o);e.push(rn(r,1,c))}}function Yj(e){const t=[0];return Kj(t,e.length-1),t}function Jj(e,t){return e.map(r=>r*t)}function Qj(e,t){return e.map(()=>t||QP).splice(0,e.length-1)}function h0({duration:e=300,keyframes:t,times:r,ease:o="easeInOut"}){const c=Rj(o)?o.map($E):$E(o),h={done:!1,value:t[0]},p=Jj(r&&r.length===t.length?r:Yj(t),e),l=fI(p,t,{ease:Array.isArray(c)?c:Qj(t,c)});return{calculatedDuration:e,next:b=>(h.value=l(b),h.done=b>=e,h)}}function pI(e,t){return t?e*(1e3/t):0}const eG=5;function mI(e,t,r){const o=Math.max(t-eG,0);return pI(r-e(o),t-o)}const vv=.001,tG=.01,NE=10,rG=.05,nG=1;function iG({duration:e=800,bounce:t=.25,velocity:r=0,mass:o=1}){let c,h;Tj(e<=dc(NE));let p=1-t;p=Ru(rG,nG,p),e=Ru(tG,NE,cl(e)),p<1?(c=w=>{const T=w*p,D=T*e,P=T-r,$=lb(w,p),q=Math.exp(-D);return vv-P/$*q},h=w=>{const D=w*p*e,P=D*r+r,$=Math.pow(p,2)*Math.pow(w,2)*e,q=Math.exp(-D),ee=lb(Math.pow(w,2),p);return(-c(w)+vv>0?-1:1)*((P-$)*q)/ee}):(c=w=>{const T=Math.exp(-w*e),D=(w-r)*e+1;return-vv+T*D},h=w=>{const T=Math.exp(-w*e),D=(r-w)*(e*e);return T*D});const l=5/e,b=aG(c,h,l);if(e=dc(e),isNaN(b))return{stiffness:100,damping:10,duration:e};{const w=Math.pow(b,2)*o;return{stiffness:w,damping:p*2*Math.sqrt(o*w),duration:e}}}const oG=12;function aG(e,t,r){let o=r;for(let c=1;c<oG;c++)o=o-e(o)/t(o);return o}function lb(e,t){return e*Math.sqrt(1-t*t)}const sG=["duration","bounce"],lG=["stiffness","damping","mass"];function UE(e,t){return t.some(r=>e[r]!==void 0)}function cG(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!UE(e,lG)&&UE(e,sG)){const r=iG(e);t={...t,...r,velocity:0,mass:1},t.isResolvedFromDuration=!0}return t}function gI({keyframes:e,restDelta:t,restSpeed:r,...o}){const c=e[0],h=e[e.length-1],p={done:!1,value:c},{stiffness:l,damping:b,mass:w,velocity:T,duration:D,isResolvedFromDuration:P}=cG(o),$=T?-cl(T):0,q=b/(2*Math.sqrt(l*w)),ee=h-c,me=cl(Math.sqrt(l/w)),Z=Math.abs(ee)<5;r||(r=Z?.01:2),t||(t=Z?.005:.5);let j;if(q<1){const H=lb(me,q);j=ie=>{const _e=Math.exp(-q*me*ie);return h-_e*(($+q*me*ee)/H*Math.sin(H*ie)+ee*Math.cos(H*ie))}}else if(q===1)j=H=>h-Math.exp(-me*H)*(ee+($+me*ee)*H);else{const H=me*Math.sqrt(q*q-1);j=ie=>{const _e=Math.exp(-q*me*ie),Le=Math.min(H*ie,300);return h-_e*(($+q*me*ee)*Math.sinh(Le)+H*ee*Math.cosh(Le))/H}}return{calculatedDuration:P&&D||null,next:H=>{const ie=j(H);if(P)p.done=H>=D;else{let _e=$;H!==0&&(q<1?_e=mI(j,H,ie):_e=0);const Le=Math.abs(_e)<=r,ve=Math.abs(h-ie)<=t;p.done=Le&&ve}return p.value=p.done?h:ie,p}}}function jE({keyframes:e,velocity:t=0,power:r=.8,timeConstant:o=325,bounceDamping:c=10,bounceStiffness:h=500,modifyTarget:p,min:l,max:b,restDelta:w=.5,restSpeed:T}){const D=e[0],P={done:!1,value:D},$=Pe=>l!==void 0&&Pe<l||b!==void 0&&Pe>b,q=Pe=>l===void 0?b:b===void 0||Math.abs(l-Pe)<Math.abs(b-Pe)?l:b;let ee=r*t;const me=D+ee,Z=p===void 0?me:p(me);Z!==me&&(ee=Z-D);const j=Pe=>-ee*Math.exp(-Pe/o),H=Pe=>Z+j(Pe),ie=Pe=>{const Ne=j(Pe),$e=H(Pe);P.done=Math.abs(Ne)<=w,P.value=P.done?Z:$e};let _e,Le;const ve=Pe=>{$(P.value)&&(_e=Pe,Le=gI({keyframes:[P.value,q(P.value)],velocity:mI(H,Pe,P.value),damping:c,stiffness:h,restDelta:w,restSpeed:T}))};return ve(0),{calculatedDuration:null,next:Pe=>{let Ne=!1;return!Le&&_e===void 0&&(Ne=!0,ie(Pe),ve(Pe)),_e!==void 0&&Pe>_e?Le.next(Pe-_e):(!Ne&&ie(Pe),P)}}}const uG=e=>{const t=({timestamp:r})=>e(r);return{start:()=>Jr.update(t,!0),stop:()=>ml(t),now:()=>Hn.isProcessing?Hn.timestamp:performance.now()}},GE=2e4;function ZE(e){let t=0;const r=50;let o=e.next(t);for(;!o.done&&t<GE;)t+=r,o=e.next(t);return t>=GE?1/0:t}const hG={decay:jE,inertia:jE,tween:h0,keyframes:h0,spring:gI};function d0({autoplay:e=!0,delay:t=0,driver:r=uG,keyframes:o,type:c="keyframes",repeat:h=0,repeatDelay:p=0,repeatType:l="loop",onPlay:b,onStop:w,onComplete:T,onUpdate:D,...P}){let $=1,q=!1,ee,me;const Z=()=>{ee&&ee(),me=new Promise(Tt=>{ee=Tt})};Z();let j;const H=hG[c]||h0;let ie;H!==h0&&typeof o[0]!="number"&&(ie=fI([0,100],o,{clamp:!1}),o=[0,100]);const _e=H({...P,keyframes:o});let Le;l==="mirror"&&(Le=H({...P,keyframes:[...o].reverse(),velocity:-(P.velocity||0)}));let ve="idle",Pe=null,Ne=null,$e=null;_e.calculatedDuration===null&&h&&(_e.calculatedDuration=ZE(_e));const{calculatedDuration:ct}=_e;let qt=1/0,Er=1/0;ct!==null&&(qt=ct+p,Er=qt*(h+1)-p);let Bt=0;const Ft=Tt=>{if(Ne===null)return;$>0&&(Ne=Math.min(Ne,Tt)),Pe!==null?Bt=Pe:Bt=(Tt-Ne)*$;const nr=Bt-t,$t=nr<0;Bt=Math.max(nr,0),ve==="finished"&&Pe===null&&(Bt=Er);let an=Bt,fn=_e;if(h){const Qr=Bt/qt;let Jn=Math.floor(Qr),$n=Qr%1;!$n&&Qr>=1&&($n=1),$n===1&&Jn--,Jn=Math.min(Jn,h+1);const Qn=!!(Jn%2);Qn&&(l==="reverse"?($n=1-$n,p&&($n-=p/qt)):l==="mirror"&&(fn=Le));let bn=Ru(0,1,$n);Bt>Er&&(bn=l==="reverse"&&Qn?1:0),an=bn*qt}const br=$t?{done:!1,value:o[0]}:fn.next(an);ie&&(br.value=ie(br.value));let{done:pn}=br;!$t&&ct!==null&&(pn=Bt>=Er);const Fn=Pe===null&&(ve==="finished"||ve==="running"&&pn||$<0&&Bt<=0);return D&&D(br.value),Fn&&tt(),br},ut=()=>{j&&j.stop(),j=void 0},It=()=>{ve="idle",ut(),Z(),Ne=$e=null},tt=()=>{ve="finished",T&&T(),ut(),Z()},_t=()=>{if(q)return;j||(j=r(Ft));const Tt=j.now();b&&b(),Pe!==null?Ne=Tt-Pe:(!Ne||ve==="finished")&&(Ne=Tt),$e=Ne,Pe=null,ve="running",j.start()};e&&_t();const wt={then(Tt,nr){return me.then(Tt,nr)},get time(){return cl(Bt)},set time(Tt){Tt=dc(Tt),Bt=Tt,Pe!==null||!j||$===0?Pe=Tt:Ne=j.now()-Tt/$},get duration(){const Tt=_e.calculatedDuration===null?ZE(_e):_e.calculatedDuration;return cl(Tt)},get speed(){return $},set speed(Tt){Tt===$||!j||($=Tt,wt.time=cl(Bt))},get state(){return ve},play:_t,pause:()=>{ve="paused",Pe=Bt},stop:()=>{q=!0,ve!=="idle"&&(ve="idle",w&&w(),It())},cancel:()=>{$e!==null&&Ft($e),It()},complete:()=>{ve="finished"},sample:Tt=>(Ne=0,Ft(Tt))};return wt}const dG=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Lg=10,fG=2e4,pG=(e,t)=>t.type==="spring"||e==="backgroundColor"||!qP(t.ease);function mG(e,t,{onUpdate:r,onComplete:o,...c}){if(!(YP.waapi()&&dG.has(t)&&!c.repeatDelay&&c.repeatType!=="mirror"&&c.damping!==0&&c.type!=="inertia"))return!1;let p=!1,l,b;const w=()=>{b=new Promise(Z=>{l=Z})};w();let{keyframes:T,duration:D=300,ease:P,times:$}=c;if(pG(t,c)){const Z=d0({...c,repeat:0,delay:0});let j={done:!1,value:T[0]};const H=[];let ie=0;for(;!j.done&&ie<fG;)j=Z.sample(ie),H.push(j.value),ie+=Lg;$=void 0,T=H,D=ie-Lg,P="linear"}const q=Cj(e.owner.current,t,T,{...c,duration:D,ease:P,times:$}),ee=()=>q.cancel(),me=()=>{Jr.update(ee),l(),w()};return q.onfinish=()=>{e.set(Aj(T,c)),o&&o(),me()},{then(Z,j){return b.then(Z,j)},get time(){return cl(q.currentTime||0)},set time(Z){q.currentTime=dc(Z)},get speed(){return q.playbackRate},set speed(Z){q.playbackRate=Z},get duration(){return cl(D)},play:()=>{p||(q.play(),ml(ee))},pause:()=>q.pause(),stop:()=>{if(p=!0,q.playState==="idle")return;const{currentTime:Z}=q;if(Z){const j=d0({...c,autoplay:!1});e.setWithVelocity(j.sample(Z-Lg).value,j.sample(Z).value,Lg)}me()},complete:()=>q.finish(),cancel:me}}function gG({keyframes:e,delay:t,onUpdate:r,onComplete:o}){const c=()=>(r&&r(e[e.length-1]),o&&o(),{time:0,speed:1,duration:0,play:qn,pause:qn,stop:qn,then:h=>(h(),Promise.resolve()),cancel:qn,complete:qn});return t?d0({keyframes:[0,1],duration:0,delay:t,onComplete:c}):c()}const yG={type:"spring",stiffness:500,damping:25,restSpeed:10},_G=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),vG={type:"keyframes",duration:.8},xG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bG=(e,{keyframes:t})=>t.length>2?vG:Ou.has(e)?e.startsWith("scale")?_G(t[1]):yG:xG,cb=(e,t)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&vc.test(t)&&!t.startsWith("url(")),wG=new Set(["brightness","contrast","saturate","opacity"]);function SG(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[o]=r.match(Mp)||[];if(!o)return e;const c=r.replace(o,"");let h=wG.has(t)?1:0;return o!==r&&(h*=100),t+"("+h+c+")"}const kG=/([a-z-]*)\(.*?\)/g,ub={...vc,getAnimatableNone:e=>{const t=e.match(kG);return t?t.map(SG).join(" "):e}},TG={...zP,color:$i,backgroundColor:$i,outlineColor:$i,fill:$i,stroke:$i,borderColor:$i,borderTopColor:$i,borderRightColor:$i,borderBottomColor:$i,borderLeftColor:$i,filter:ub,WebkitFilter:ub},y2=e=>TG[e];function _2(e,t){let r=y2(e);return r!==ub&&(r=vc),r.getAnimatableNone?r.getAnimatableNone(t):void 0}function EG({when:e,delay:t,delayChildren:r,staggerChildren:o,staggerDirection:c,repeat:h,repeatType:p,repeatDelay:l,from:b,elapsed:w,...T}){return!!Object.keys(T).length}function WE(e){return e===0||typeof e=="string"&&parseFloat(e)===0&&e.indexOf(" ")===-1}function HE(e){return typeof e=="number"?0:_2("",e)}function yI(e,t){return e[t]||e.default||e}function CG(e,[...t]){for(let r=0;r<t.length;r++)t[r]===null&&(t[r]=r===0?e:t[r-1]);return t}function AG(e,t,r,o){const c=cb(t,r);let h=o.from!==void 0?o.from:e.get();return h==="none"&&c&&typeof r=="string"?h=_2(t,r):WE(h)&&typeof r=="string"?h=HE(r):!Array.isArray(r)&&WE(r)&&typeof h=="string"&&(r=HE(h)),Array.isArray(r)?CG(h,r):[h,r]}const v2=(e,t,r,o={})=>c=>{const h=yI(o,e)||{},p=h.delay||o.delay||0;let{elapsed:l=0}=o;l=l-dc(p);const b=AG(t,e,r,h),w=b[0],T=b[b.length-1],D=cb(e,w),P=cb(e,T);let $={keyframes:b,velocity:t.getVelocity(),ease:"easeOut",...h,delay:-l,onUpdate:q=>{t.set(q),h.onUpdate&&h.onUpdate(q)},onComplete:()=>{c(),h.onComplete&&h.onComplete()}};if(EG(h)||($={...$,...bG(e,$)}),$.duration&&($.duration=dc($.duration)),$.repeatDelay&&($.repeatDelay=dc($.repeatDelay)),!D||!P||Ej.current||h.type===!1)return gG($);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const q=mG(t,e,$);if(q)return q}return d0($)};function f0(e){return!!(mo(e)&&e.add)}const PG=e=>/^\-?\d*\.?\d+$/.test(e),IG=e=>/^0[^.\s]+$/.test(e);function x2(e,t){e.indexOf(t)===-1&&e.push(t)}function b2(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}class w2{constructor(){this.subscriptions=[]}add(t){return x2(this.subscriptions,t),()=>b2(this.subscriptions,t)}notify(t,r,o){const c=this.subscriptions.length;if(c)if(c===1)this.subscriptions[0](t,r,o);else for(let h=0;h<c;h++){const p=this.subscriptions[h];p&&p(t,r,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zG=e=>!isNaN(parseFloat(e));class MG{constructor(t,r={}){this.version="10.12.2",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(o,c=!0)=>{this.prev=this.current,this.current=o;const{delta:h,timestamp:p}=Hn;this.lastUpdated!==p&&(this.timeDelta=h,this.lastUpdated=p,Jr.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),c&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Jr.postRender(this.velocityCheck),this.velocityCheck=({timestamp:o})=>{o!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=zG(this.current),this.owner=r.owner}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new w2);const o=this.events[t].add(r);return t==="change"?()=>{o(),Jr.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t,r=!0){!r||!this.passiveEffect?this.updateAndNotify(t,r):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,r,o){this.set(r),this.prev=t,this.timeDelta=o}jump(t){this.updateAndNotify(t),this.prev=t,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?pI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function sd(e,t){return new MG(e,t)}const _I=e=>t=>t.test(e),DG={test:e=>e==="auto",parse:e=>e},vI=[Vu,Pt,vs,Vl,$U,FU,DG],mf=e=>vI.find(_I(e)),RG=[...vI,$i,vc],LG=e=>RG.find(_I(e));function BG(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,sd(r))}function FG(e,t){const r=g_(e,t);let{transitionEnd:o={},transition:c={},...h}=r?e.makeTargetAnimatable(r,!1):{};h={...h,...o};for(const p in h){const l=JU(h[p]);BG(e,p,l)}}function $G(e,t,r){var o,c;const h=Object.keys(t).filter(l=>!e.hasValue(l)),p=h.length;if(p)for(let l=0;l<p;l++){const b=h[l],w=t[b];let T=null;Array.isArray(w)&&(T=w[0]),T===null&&(T=(c=(o=r[b])!==null&&o!==void 0?o:e.readValue(b))!==null&&c!==void 0?c:t[b]),T!=null&&(typeof T=="string"&&(PG(T)||IG(T))?T=parseFloat(T):!LG(T)&&vc.test(w)&&(T=_2(b,w)),e.addValue(b,sd(T,{owner:e})),r[b]===void 0&&(r[b]=T),T!==null&&e.setBaseTarget(b,T))}}function OG(e,t){return t?(t[e]||t.default||t).from:void 0}function VG(e,t,r){const o={};for(const c in e){const h=OG(c,t);if(h!==void 0)o[c]=h;else{const p=r.getValue(c);p&&(o[c]=p.get())}}return o}function NG({protectedKeys:e,needsAnimating:t},r){const o=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,o}function xI(e,t,{delay:r=0,transitionOverride:o,type:c}={}){let{transition:h=e.getDefaultTransition(),transitionEnd:p,...l}=e.makeTargetAnimatable(t);const b=e.getValue("willChange");o&&(h=o);const w=[],T=c&&e.animationState&&e.animationState.getState()[c];for(const D in l){const P=e.getValue(D),$=l[D];if(!P||$===void 0||T&&NG(T,D))continue;const q={delay:r,elapsed:0,...h};if(window.HandoffAppearAnimations&&!P.hasAnimated){const me=e.getProps()[kj];me&&(q.elapsed=window.HandoffAppearAnimations(me,D,P,Jr))}P.start(v2(D,P,$,e.shouldReduceMotion&&Ou.has(D)?{type:!1}:q));const ee=P.animation;f0(b)&&(b.add(D),ee.then(()=>b.remove(D))),w.push(ee)}return p&&Promise.all(w).then(()=>{p&&FG(e,p)}),w}function hb(e,t,r={}){const o=g_(e,t,r.custom);let{transition:c=e.getDefaultTransition()||{}}=o||{};r.transitionOverride&&(c=r.transitionOverride);const h=o?()=>Promise.all(xI(e,o,r)):()=>Promise.resolve(),p=e.variantChildren&&e.variantChildren.size?(b=0)=>{const{delayChildren:w=0,staggerChildren:T,staggerDirection:D}=c;return UG(e,t,w+b,T,D,r)}:()=>Promise.resolve(),{when:l}=c;if(l){const[b,w]=l==="beforeChildren"?[h,p]:[p,h];return b().then(()=>w())}else return Promise.all([h(),p(r.delay)])}function UG(e,t,r=0,o=0,c=1,h){const p=[],l=(e.variantChildren.size-1)*o,b=c===1?(w=0)=>w*o:(w=0)=>l-w*o;return Array.from(e.variantChildren).sort(jG).forEach((w,T)=>{w.notify("AnimationStart",t),p.push(hb(w,t,{...h,delay:r+b(T)}).then(()=>w.notify("AnimationComplete",t)))}),Promise.all(p)}function jG(e,t){return e.sortNodePosition(t)}function GG(e,t,r={}){e.notify("AnimationStart",t);let o;if(Array.isArray(t)){const c=t.map(h=>hb(e,h,r));o=Promise.all(c)}else if(typeof t=="string")o=hb(e,t,r);else{const c=typeof t=="function"?g_(e,t,r.custom):t;o=Promise.all(xI(e,c,r))}return o.then(()=>e.notify("AnimationComplete",t))}const ZG=[...t2].reverse(),WG=t2.length;function HG(e){return t=>Promise.all(t.map(({animation:r,options:o})=>GG(e,r,o)))}function qG(e){let t=HG(e);const r=KG();let o=!0;const c=(b,w)=>{const T=g_(e,w);if(T){const{transition:D,transitionEnd:P,...$}=T;b={...b,...$,...P}}return b};function h(b){t=b(e)}function p(b,w){const T=e.getProps(),D=e.getVariantContext(!0)||{},P=[],$=new Set;let q={},ee=1/0;for(let Z=0;Z<WG;Z++){const j=ZG[Z],H=r[j],ie=T[j]!==void 0?T[j]:D[j],_e=Ip(ie),Le=j===w?H.isActive:null;Le===!1&&(ee=Z);let ve=ie===D[j]&&ie!==T[j]&&_e;if(ve&&o&&e.manuallyAnimateOnMount&&(ve=!1),H.protectedKeys={...q},!H.isActive&&Le===null||!ie&&!H.prevProp||d_(ie)||typeof ie=="boolean")continue;const Pe=XG(H.prevProp,ie);let Ne=Pe||j===w&&H.isActive&&!ve&&_e||Z>ee&&_e;const $e=Array.isArray(ie)?ie:[ie];let ct=$e.reduce(c,{});Le===!1&&(ct={});const{prevResolvedValues:qt={}}=H,Er={...qt,...ct},Bt=Ft=>{Ne=!0,$.delete(Ft),H.needsAnimating[Ft]=!0};for(const Ft in Er){const ut=ct[Ft],It=qt[Ft];q.hasOwnProperty(Ft)||(ut!==It?c0(ut)&&c0(It)?!WP(ut,It)||Pe?Bt(Ft):H.protectedKeys[Ft]=!0:ut!==void 0?Bt(Ft):$.add(Ft):ut!==void 0&&$.has(Ft)?Bt(Ft):H.protectedKeys[Ft]=!0)}H.prevProp=ie,H.prevResolvedValues=ct,H.isActive&&(q={...q,...ct}),o&&e.blockInitialAnimation&&(Ne=!1),Ne&&!ve&&P.push(...$e.map(Ft=>({animation:Ft,options:{type:j,...b}})))}if($.size){const Z={};$.forEach(j=>{const H=e.getBaseTarget(j);H!==void 0&&(Z[j]=H)}),P.push({animation:Z})}let me=!!P.length;return o&&T.initial===!1&&!e.manuallyAnimateOnMount&&(me=!1),o=!1,me?t(P):Promise.resolve()}function l(b,w,T){var D;if(r[b].isActive===w)return Promise.resolve();(D=e.variantChildren)===null||D===void 0||D.forEach($=>{var q;return(q=$.animationState)===null||q===void 0?void 0:q.setActive(b,w)}),r[b].isActive=w;const P=p(T,b);for(const $ in r)r[$].protectedKeys={};return P}return{animateChanges:p,setActive:l,setAnimateFunction:h,getState:()=>r}}function XG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!WP(t,e):!1}function iu(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function KG(){return{animate:iu(!0),whileInView:iu(),whileHover:iu(),whileTap:iu(),whileDrag:iu(),whileFocus:iu(),exit:iu()}}class YG extends kc{constructor(t){super(t),t.animationState||(t.animationState=qG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();this.unmount(),d_(t)&&(this.unmount=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){}}let JG=0;class QG extends kc{constructor(){super(...arguments),this.id=JG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r,custom:o}=this.node.presenceContext,{isPresent:c}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===c)return;const h=this.node.animationState.setActive("exit",!t,{custom:o??this.node.getProps().custom});r&&!t&&h.then(()=>r(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const eZ={animation:{Feature:YG},exit:{Feature:QG}},qE=(e,t)=>Math.abs(e-t);function tZ(e,t){const r=qE(e.x,t.x),o=qE(e.y,t.y);return Math.sqrt(r**2+o**2)}class bI{constructor(t,r,{transformPagePoint:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=bv(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,D=tZ(w.offset,{x:0,y:0})>=3;if(!T&&!D)return;const{point:P}=w,{timestamp:$}=Hn;this.history.push({...P,timestamp:$});const{onStart:q,onMove:ee}=this.handlers;T||(q&&q(this.lastMoveEvent,w),this.startEvent=this.lastMoveEvent),ee&&ee(this.lastMoveEvent,w)},this.handlePointerMove=(w,T)=>{this.lastMoveEvent=w,this.lastMoveEventInfo=xv(T,this.transformPagePoint),Jr.update(this.updatePoint,!0)},this.handlePointerUp=(w,T)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const{onEnd:D,onSessionEnd:P}=this.handlers,$=bv(w.type==="pointercancel"?this.lastMoveEventInfo:xv(T,this.transformPagePoint),this.history);this.startEvent&&D&&D(w,$),P&&P(w,$)},!VP(t))return;this.handlers=r,this.transformPagePoint=o;const c=p_(t),h=xv(c,this.transformPagePoint),{point:p}=h,{timestamp:l}=Hn;this.history=[{...p,timestamp:l}];const{onSessionStart:b}=r;b&&b(t,bv(h,this.history)),this.removeListeners=hc(ll(window,"pointermove",this.handlePointerMove),ll(window,"pointerup",this.handlePointerUp),ll(window,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ml(this.updatePoint)}}function xv(e,t){return t?{point:t(e.point)}:e}function XE(e,t){return{x:e.x-t.x,y:e.y-t.y}}function bv({point:e},t){return{point:e,delta:XE(e,wI(t)),offset:XE(e,rZ(t)),velocity:nZ(t,.1)}}function rZ(e){return e[0]}function wI(e){return e[e.length-1]}function nZ(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,o=null;const c=wI(e);for(;r>=0&&(o=e[r],!(c.timestamp-o.timestamp>dc(t)));)r--;if(!o)return{x:0,y:0};const h=cl(c.timestamp-o.timestamp);if(h===0)return{x:0,y:0};const p={x:(c.x-o.x)/h,y:(c.y-o.y)/h};return p.x===1/0&&(p.x=0),p.y===1/0&&(p.y=0),p}function No(e){return e.max-e.min}function db(e,t=0,r=.01){return Math.abs(e-t)<=r}function KE(e,t,r,o=.5){e.origin=o,e.originPoint=rn(t.min,t.max,e.origin),e.scale=No(r)/No(t),(db(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=rn(r.min,r.max,e.origin)-e.originPoint,(db(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Kf(e,t,r,o){KE(e.x,t.x,r.x,o?o.originX:void 0),KE(e.y,t.y,r.y,o?o.originY:void 0)}function YE(e,t,r){e.min=r.min+t.min,e.max=e.min+No(t)}function iZ(e,t,r){YE(e.x,t.x,r.x),YE(e.y,t.y,r.y)}function JE(e,t,r){e.min=t.min-r.min,e.max=e.min+No(t)}function Yf(e,t,r){JE(e.x,t.x,r.x),JE(e.y,t.y,r.y)}function oZ(e,{min:t,max:r},o){return t!==void 0&&e<t?e=o?rn(t,e,o.min):Math.max(e,t):r!==void 0&&e>r&&(e=o?rn(r,e,o.max):Math.min(e,r)),e}function QE(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function aZ(e,{top:t,left:r,bottom:o,right:c}){return{x:QE(e.x,r,c),y:QE(e.y,t,o)}}function eC(e,t){let r=t.min-e.min,o=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,o]=[o,r]),{min:r,max:o}}function sZ(e,t){return{x:eC(e.x,t.x),y:eC(e.y,t.y)}}function lZ(e,t){let r=.5;const o=No(e),c=No(t);return c>o?r=Rp(t.min,t.max-o,e.min):o>c&&(r=Rp(e.min,e.max-c,t.min)),Ru(0,1,r)}function cZ(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const fb=.35;function uZ(e=fb){return e===!1?e=0:e===!0&&(e=fb),{x:tC(e,"left","right"),y:tC(e,"top","bottom")}}function tC(e,t,r){return{min:rC(e,t),max:rC(e,r)}}function rC(e,t){return typeof e=="number"?e:e[t]||0}const nC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Jf=()=>({x:nC(),y:nC()}),iC=()=>({min:0,max:0}),An=()=>({x:iC(),y:iC()});function ls(e){return[e("x"),e("y")]}function SI({top:e,left:t,right:r,bottom:o}){return{x:{min:t,max:r},y:{min:e,max:o}}}function hZ({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function dZ(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),o=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:o.y,right:o.x}}function wv(e){return e===void 0||e===1}function pb({scale:e,scaleX:t,scaleY:r}){return!wv(e)||!wv(t)||!wv(r)}function su(e){return pb(e)||kI(e)||e.z||e.rotate||e.rotateX||e.rotateY}function kI(e){return oC(e.x)||oC(e.y)}function oC(e){return e&&e!=="0%"}function p0(e,t,r){const o=e-r,c=t*o;return r+c}function aC(e,t,r,o,c){return c!==void 0&&(e=p0(e,c,o)),p0(e,r,o)+t}function mb(e,t=0,r=1,o,c){e.min=aC(e.min,t,r,o,c),e.max=aC(e.max,t,r,o,c)}function TI(e,{x:t,y:r}){mb(e.x,t.translate,t.scale,t.originPoint),mb(e.y,r.translate,r.scale,r.originPoint)}function fZ(e,t,r,o=!1){const c=r.length;if(!c)return;t.x=t.y=1;let h,p;for(let l=0;l<c;l++){h=r[l],p=h.projectionDelta;const b=h.instance;b&&b.style&&b.style.display==="contents"||(o&&h.options.layoutScroll&&h.scroll&&h!==h.root&&$h(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),p&&(t.x*=p.x.scale,t.y*=p.y.scale,TI(e,p)),o&&su(h.latestValues)&&$h(e,h.latestValues))}t.x=sC(t.x),t.y=sC(t.y)}function sC(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Zl(e,t){e.min=e.min+t,e.max=e.max+t}function lC(e,t,[r,o,c]){const h=t[c]!==void 0?t[c]:.5,p=rn(e.min,e.max,h);mb(e,t[r],t[o],p,t.scale)}const pZ=["x","scaleX","originX"],mZ=["y","scaleY","originY"];function $h(e,t){lC(e.x,t,pZ),lC(e.y,t,mZ)}function EI(e,t){return SI(dZ(e.getBoundingClientRect(),t))}function gZ(e,t,r){const o=EI(e,r),{scroll:c}=t;return c&&(Zl(o.x,c.offset.x),Zl(o.y,c.offset.y)),o}const yZ=new WeakMap;class _Z{constructor(t){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=An(),this.visualElement=t}start(t,{snapToCursor:r=!1}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const c=b=>{this.stopAnimation(),r&&this.snapToCursor(p_(b,"page").point)},h=(b,w)=>{const{drag:T,dragPropagation:D,onDragStart:P}=this.getProps();if(T&&!D&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=UP(T),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ls(q=>{let ee=this.getAxisMotionValue(q).get()||0;if(vs.test(ee)){const{projection:me}=this.visualElement;if(me&&me.layout){const Z=me.layout.layoutBox[q];Z&&(ee=No(Z)*(parseFloat(ee)/100))}}this.originPoint[q]=ee}),P&&Jr.update(()=>P(b,w),!1,!0);const{animationState:$}=this.visualElement;$&&$.setActive("whileDrag",!0)},p=(b,w)=>{const{dragPropagation:T,dragDirectionLock:D,onDirectionLock:P,onDrag:$}=this.getProps();if(!T&&!this.openGlobalLock)return;const{offset:q}=w;if(D&&this.currentDirection===null){this.currentDirection=vZ(q),this.currentDirection!==null&&P&&P(this.currentDirection);return}this.updateAxis("x",w.point,q),this.updateAxis("y",w.point,q),this.visualElement.render(),$&&$(b,w)},l=(b,w)=>this.stop(b,w);this.panSession=new bI(t,{onSessionStart:c,onStart:h,onMove:p,onSessionEnd:l},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(t,r){const o=this.isDragging;if(this.cancel(),!o)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&Jr.update(()=>h(t,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(t,r,o){const{drag:c}=this.getProps();if(!o||!Bg(t,c,this.currentDirection))return;const h=this.getAxisMotionValue(t);let p=this.originPoint[t]+o[t];this.constraints&&this.constraints[t]&&(p=oZ(p,this.constraints[t],this.elastic[t])),h.set(p)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),{layout:o}=this.visualElement.projection||{},c=this.constraints;t&&Bh(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&o?this.constraints=aZ(o.layoutBox,t):this.constraints=!1,this.elastic=uZ(r),c!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&ls(h=>{this.getAxisMotionValue(h)&&(this.constraints[h]=cZ(o.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Bh(t))return!1;const o=t.current,{projection:c}=this.visualElement;if(!c||!c.layout)return!1;const h=gZ(o,c.root,this.visualElement.getTransformPagePoint());let p=sZ(c.layout.layoutBox,h);if(r){const l=r(hZ(p));this.hasMutatedConstraints=!!l,l&&(p=SI(l))}return p}startAnimation(t){const{drag:r,dragMomentum:o,dragElastic:c,dragTransition:h,dragSnapToOrigin:p,onDragTransitionEnd:l}=this.getProps(),b=this.constraints||{},w=ls(T=>{if(!Bg(T,r,this.currentDirection))return;let D=b&&b[T]||{};p&&(D={min:0,max:0});const P=c?200:1e6,$=c?40:1e7,q={type:"inertia",velocity:o?t[T]:0,bounceStiffness:P,bounceDamping:$,timeConstant:750,restDelta:1,restSpeed:10,...h,...D};return this.startAxisValueAnimation(T,q)});return Promise.all(w).then(l)}startAxisValueAnimation(t,r){const o=this.getAxisMotionValue(t);return o.start(v2(t,o,0,r))}stopAnimation(){ls(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const r="_drag"+t.toUpperCase(),o=this.visualElement.getProps(),c=o[r];return c||this.visualElement.getValue(t,(o.initial?o.initial[t]:void 0)||0)}snapToCursor(t){ls(r=>{const{drag:o}=this.getProps();if(!Bg(r,o,this.currentDirection))return;const{projection:c}=this.visualElement,h=this.getAxisMotionValue(r);if(c&&c.layout){const{min:p,max:l}=c.layout.layoutBox[r];h.set(t[r]-rn(p,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:o}=this.visualElement;if(!Bh(r)||!o||!this.constraints)return;this.stopAnimation();const c={x:0,y:0};ls(p=>{const l=this.getAxisMotionValue(p);if(l){const b=l.get();c[p]=lZ({min:b,max:b},this.constraints[p])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),ls(p=>{if(!Bg(p,t,null))return;const l=this.getAxisMotionValue(p),{min:b,max:w}=this.constraints[p];l.set(rn(b,w,c[p]))})}addListeners(){if(!this.visualElement.current)return;yZ.set(this.visualElement,this);const t=this.visualElement.current,r=ll(t,"pointerdown",b=>{const{drag:w,dragListener:T=!0}=this.getProps();w&&T&&this.start(b)}),o=()=>{const{dragConstraints:b}=this.getProps();Bh(b)&&(this.constraints=this.resolveRefConstraints())},{projection:c}=this.visualElement,h=c.addEventListener("measure",o);c&&!c.layout&&(c.root&&c.root.updateScroll(),c.updateLayout()),o();const p=ol(window,"resize",()=>this.scalePositionWithinConstraints()),l=c.addEventListener("didUpdate",({delta:b,hasLayoutChanged:w})=>{this.isDragging&&w&&(ls(T=>{const D=this.getAxisMotionValue(T);D&&(this.originPoint[T]+=b[T].translate,D.set(D.get()+b[T].translate))}),this.visualElement.render())});return()=>{p(),r(),h(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:o=!1,dragPropagation:c=!1,dragConstraints:h=!1,dragElastic:p=fb,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:o,dragPropagation:c,dragConstraints:h,dragElastic:p,dragMomentum:l}}}function Bg(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function vZ(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class xZ extends kc{constructor(t){super(t),this.removeGroupControls=qn,this.removeListeners=qn,this.controls=new _Z(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||qn}unmount(){this.removeGroupControls(),this.removeListeners()}}const cC=e=>(t,r)=>{e&&Jr.update(()=>e(t,r))};class bZ extends kc{constructor(){super(...arguments),this.removePointerDownListener=qn}onPointerDown(t){this.session=new bI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:o,onPanEnd:c}=this.node.getProps();return{onSessionStart:cC(t),onStart:cC(r),onMove:o,onEnd:(h,p)=>{delete this.session,c&&Jr.update(()=>c(h,p))}}}mount(){this.removePointerDownListener=ll(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function wZ(){const e=Me.useContext(nm);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:o}=e,c=Me.useId();return Me.useEffect(()=>o(c),[]),!t&&r?[!1,()=>r&&r(c)]:[!0]}function SZ(){return kZ(Me.useContext(nm))}function kZ(e){return e===null?!0:e.isPresent}function uC(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const gf={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Pt.test(e))e=parseFloat(e);else return e;const r=uC(e,t.target.x),o=uC(e,t.target.y);return`${r}% ${o}%`}},CI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function TZ(e){const t=CI.exec(e);if(!t)return[,];const[,r,o]=t;return[r,o]}function gb(e,t,r=1){const[o,c]=TZ(e);if(!o)return;const h=window.getComputedStyle(t).getPropertyValue(o);return h?h.trim():nb(c)?gb(c,t,r+1):c}function EZ(e,{...t},r){const o=e.current;if(!(o instanceof Element))return{target:t,transitionEnd:r};r&&(r={...r}),e.values.forEach(c=>{const h=c.get();if(!nb(h))return;const p=gb(h,o);p&&c.set(p)});for(const c in t){const h=t[c];if(!nb(h))continue;const p=gb(h,o);p&&(t[c]=p,r||(r={}),r[c]===void 0&&(r[c]=h))}return{target:t,transitionEnd:r}}const hC="_$css",CZ={correct:(e,{treeScale:t,projectionDelta:r})=>{const o=e,c=e.includes("var("),h=[];c&&(e=e.replace(CI,$=>(h.push($),hC)));const p=vc.parse(e);if(p.length>5)return o;const l=vc.createTransformer(e),b=typeof p[0]!="number"?1:0,w=r.x.scale*t.x,T=r.y.scale*t.y;p[0+b]/=w,p[1+b]/=T;const D=rn(w,T,.5);typeof p[2+b]=="number"&&(p[2+b]/=D),typeof p[3+b]=="number"&&(p[3+b]/=D);let P=l(p);if(c){let $=0;P=P.replace(hC,()=>{const q=h[$];return $++,q})}return P}};class AZ extends Bo.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:o,layoutId:c}=this.props,{projection:h}=t;zU(PZ),h&&(r.group&&r.group.add(h),o&&o.register&&c&&o.register(h),h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,onExitComplete:()=>this.safeToRemove()})),Hf.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:o,drag:c,isPresent:h}=this.props,p=o.projection;return p&&(p.isPresent=h,c||t.layoutDependency!==r||r===void 0?p.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?p.promote():p.relegate()||Jr.postRender(()=>{const l=p.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),!t.currentAnimation&&t.isLead()&&this.safeToRemove())}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:o}=this.props,{projection:c}=t;c&&(c.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(c),o&&o.deregister&&o.deregister(c))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function AI(e){const[t,r]=wZ(),o=Me.useContext(i2);return Bo.createElement(AZ,{...e,layoutGroup:o,switchLayoutGroup:Me.useContext(CP),isPresent:t,safeToRemove:r})}const PZ={borderRadius:{...gf,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:gf,borderTopRightRadius:gf,borderBottomLeftRadius:gf,borderBottomRightRadius:gf,boxShadow:CZ},PI=["TopLeft","TopRight","BottomLeft","BottomRight"],IZ=PI.length,dC=e=>typeof e=="string"?parseFloat(e):e,fC=e=>typeof e=="number"||Pt.test(e);function zZ(e,t,r,o,c,h){c?(e.opacity=rn(0,r.opacity!==void 0?r.opacity:1,MZ(o)),e.opacityExit=rn(t.opacity!==void 0?t.opacity:1,0,DZ(o))):h&&(e.opacity=rn(t.opacity!==void 0?t.opacity:1,r.opacity!==void 0?r.opacity:1,o));for(let p=0;p<IZ;p++){const l=`border${PI[p]}Radius`;let b=pC(t,l),w=pC(r,l);if(b===void 0&&w===void 0)continue;b||(b=0),w||(w=0),b===0||w===0||fC(b)===fC(w)?(e[l]=Math.max(rn(dC(b),dC(w),o),0),(vs.test(w)||vs.test(b))&&(e[l]+="%")):e[l]=w}(t.rotate||r.rotate)&&(e.rotate=rn(t.rotate||0,r.rotate||0,o))}function pC(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const MZ=II(0,.5,p2),DZ=II(.5,.95,qn);function II(e,t,r){return o=>o<e?0:o>t?1:r(Rp(e,t,o))}function mC(e,t){e.min=t.min,e.max=t.max}function ea(e,t){mC(e.x,t.x),mC(e.y,t.y)}function gC(e,t,r,o,c){return e-=t,e=p0(e,1/r,o),c!==void 0&&(e=p0(e,1/c,o)),e}function RZ(e,t=0,r=1,o=.5,c,h=e,p=e){if(vs.test(t)&&(t=parseFloat(t),t=rn(p.min,p.max,t/100)-p.min),typeof t!="number")return;let l=rn(h.min,h.max,o);e===h&&(l-=t),e.min=gC(e.min,t,r,l,c),e.max=gC(e.max,t,r,l,c)}function yC(e,t,[r,o,c],h,p){RZ(e,t[r],t[o],t[c],t.scale,h,p)}const LZ=["x","scaleX","originX"],BZ=["y","scaleY","originY"];function _C(e,t,r,o){yC(e.x,t,LZ,r?r.x:void 0,o?o.x:void 0),yC(e.y,t,BZ,r?r.y:void 0,o?o.y:void 0)}function vC(e){return e.translate===0&&e.scale===1}function zI(e){return vC(e.x)&&vC(e.y)}function yb(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function xC(e){return No(e.x)/No(e.y)}class FZ{constructor(){this.members=[]}add(t){x2(this.members,t),t.scheduleRender()}remove(t){if(b2(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(c=>t===c);if(r===0)return!1;let o;for(let c=r;c>=0;c--){const h=this.members[c];if(h.isPresent!==!1){o=h;break}}return o?(this.promote(o),!0):!1}promote(t,r){const o=this.lead;if(t!==o&&(this.prevLead=o,this.lead=t,t.show(),o)){o.instance&&o.scheduleRender(),t.scheduleRender(),t.resumeFrom=o,r&&(t.resumeFrom.preserveOpacity=!0),o.snapshot&&(t.snapshot=o.snapshot,t.snapshot.latestValues=o.animationValues||o.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:c}=t.options;c===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:o}=t;r.onExitComplete&&r.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function bC(e,t,r){let o="";const c=e.x.translate/t.x,h=e.y.translate/t.y;if((c||h)&&(o=`translate3d(${c}px, ${h}px, 0) `),(t.x!==1||t.y!==1)&&(o+=`scale(${1/t.x}, ${1/t.y}) `),r){const{rotate:b,rotateX:w,rotateY:T}=r;b&&(o+=`rotate(${b}deg) `),w&&(o+=`rotateX(${w}deg) `),T&&(o+=`rotateY(${T}deg) `)}const p=e.x.scale*t.x,l=e.y.scale*t.y;return(p!==1||l!==1)&&(o+=`scale(${p}, ${l})`),o||"none"}const $Z=(e,t)=>e.depth-t.depth;class OZ{constructor(){this.children=[],this.isDirty=!1}add(t){x2(this.children,t),this.isDirty=!0}remove(t){b2(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort($Z),this.isDirty=!1,this.children.forEach(t)}}function VZ(e,t){const r=performance.now(),o=({timestamp:c})=>{const h=c-r;h>=t&&(ml(o),e(h-t))};return Jr.read(o,!0),()=>ml(o)}function NZ(e){window.MotionDebug&&window.MotionDebug.record(e)}function UZ(e){return e instanceof SVGElement&&e.tagName!=="svg"}function jZ(e,t,r){const o=mo(e)?e:sd(e);return o.start(v2("",o,t,r)),o.animation}const wC=["","X","Y","Z"],SC=1e3;let GZ=0;const lu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function MI({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:o,resetTransform:c}){return class{constructor(p,l={},b=t==null?void 0:t()){this.id=GZ++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{lu.totalNodes=lu.resolvedTargetDeltas=lu.recalculatedProjection=0,this.nodes.forEach(HZ),this.nodes.forEach(YZ),this.nodes.forEach(JZ),this.nodes.forEach(qZ),NZ(lu)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=p,this.latestValues=l,this.root=b?b.root||b:this,this.path=b?[...b.path,b]:[],this.parent=b,this.depth=b?b.depth+1:0,p&&this.root.registerPotentialNode(p,this);for(let w=0;w<this.path.length;w++)this.path[w].shouldResetTransform=!0;this.root===this&&(this.nodes=new OZ)}addEventListener(p,l){return this.eventHandlers.has(p)||this.eventHandlers.set(p,new w2),this.eventHandlers.get(p).add(l)}notifyListeners(p,...l){const b=this.eventHandlers.get(p);b&&b.notify(...l)}hasListeners(p){return this.eventHandlers.has(p)}registerPotentialNode(p,l){this.potentialNodes.set(p,l)}mount(p,l=!1){if(this.instance)return;this.isSVG=UZ(p),this.instance=p;const{layoutId:b,layout:w,visualElement:T}=this.options;if(T&&!T.current&&T.mount(p),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),l&&(w||b)&&(this.isLayoutDirty=!0),e){let D;const P=()=>this.root.updateBlockedByResize=!1;e(p,()=>{this.root.updateBlockedByResize=!0,D&&D(),D=VZ(P,250),Hf.hasAnimatedSinceResize&&(Hf.hasAnimatedSinceResize=!1,this.nodes.forEach(TC))})}b&&this.root.registerSharedNode(b,this),this.options.animate!==!1&&T&&(b||w)&&this.addEventListener("didUpdate",({delta:D,hasLayoutChanged:P,hasRelativeTargetChanged:$,layout:q})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const ee=this.options.transition||T.getDefaultTransition()||nW,{onLayoutAnimationStart:me,onLayoutAnimationComplete:Z}=T.getProps(),j=!this.targetLayout||!yb(this.targetLayout,q)||$,H=!P&&$;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||H||P&&(j||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(D,H);const ie={...yI(ee,"layout"),onPlay:me,onComplete:Z};(T.shouldReduceMotion||this.options.layoutRoot)&&(ie.delay=0,ie.type=!1),this.startAnimation(ie)}else!P&&this.animationProgress===0&&TC(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=q})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const p=this.getStack();p&&p.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ml(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(QZ),this.animationId++)}getTransformTemplate(){const{visualElement:p}=this.options;return p&&p.getProps().transformTemplate}willUpdate(p=!0){if(this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let T=0;T<this.path.length;T++){const D=this.path[T];D.shouldResetTransform=!0,D.updateScroll("snapshot"),D.options.layoutRoot&&D.willUpdate(!1)}const{layoutId:l,layout:b}=this.options;if(l===void 0&&!b)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),p&&this.notifyListeners("willUpdate")}didUpdate(){if(this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(kC);return}this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(iW),this.potentialNodes.clear()),this.nodes.forEach(KZ),this.nodes.forEach(ZZ),this.nodes.forEach(WZ),this.clearAllSnapshots(),Kh.update.process(Hn),Kh.preRender.process(Hn),Kh.render.process(Hn))}clearAllSnapshots(){this.nodes.forEach(XZ),this.sharedNodes.forEach(eW)}scheduleUpdateProjection(){Jr.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){Jr.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let b=0;b<this.path.length;b++)this.path[b].updateScroll();const p=this.layout;this.layout=this.measure(!1),this.layoutCorrected=An(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,p?p.layoutBox:void 0)}updateScroll(p="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===p&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:p,isRoot:o(this.instance),offset:r(this.instance)})}resetTransform(){if(!c)return;const p=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!zI(this.projectionDelta),b=this.getTransformTemplate(),w=b?b(this.latestValues,""):void 0,T=w!==this.prevTransformTemplateValue;p&&(l||su(this.latestValues)||T)&&(c(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(p=!0){const l=this.measurePageBox();let b=this.removeElementScroll(l);return p&&(b=this.removeTransform(b)),oW(b),{animationId:this.root.animationId,measuredBox:l,layoutBox:b,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:p}=this.options;if(!p)return An();const l=p.measureViewportBox(),{scroll:b}=this.root;return b&&(Zl(l.x,b.offset.x),Zl(l.y,b.offset.y)),l}removeElementScroll(p){const l=An();ea(l,p);for(let b=0;b<this.path.length;b++){const w=this.path[b],{scroll:T,options:D}=w;if(w!==this.root&&T&&D.layoutScroll){if(T.isRoot){ea(l,p);const{scroll:P}=this.root;P&&(Zl(l.x,-P.offset.x),Zl(l.y,-P.offset.y))}Zl(l.x,T.offset.x),Zl(l.y,T.offset.y)}}return l}applyTransform(p,l=!1){const b=An();ea(b,p);for(let w=0;w<this.path.length;w++){const T=this.path[w];!l&&T.options.layoutScroll&&T.scroll&&T!==T.root&&$h(b,{x:-T.scroll.offset.x,y:-T.scroll.offset.y}),su(T.latestValues)&&$h(b,T.latestValues)}return su(this.latestValues)&&$h(b,this.latestValues),b}removeTransform(p){const l=An();ea(l,p);for(let b=0;b<this.path.length;b++){const w=this.path[b];if(!w.instance||!su(w.latestValues))continue;pb(w.latestValues)&&w.updateSnapshot();const T=An(),D=w.measurePageBox();ea(T,D),_C(l,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,T)}return su(this.latestValues)&&_C(l,this.latestValues),l}setTargetDelta(p){this.targetDelta=p,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(p){this.options={...this.options,...p,crossfade:p.crossfade!==void 0?p.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Hn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(p=!1){var l;const b=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=b.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=b.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=b.isSharedProjectionDirty);const w=!!this.resumingFrom||this!==b;if(!(p||w&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:D,layoutId:P}=this.options;if(!(!this.layout||!(D||P))){if(this.resolvedRelativeTargetAt=Hn.timestamp,!this.targetDelta&&!this.relativeTarget){const $=this.getClosestProjectingParent();$&&$.layout?(this.relativeParent=$,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Yf(this.relativeTargetOrigin,this.layout.layoutBox,$.layout.layoutBox),ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=An(),this.targetWithTransforms=An()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iZ(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ea(this.target,this.layout.layoutBox),TI(this.target,this.targetDelta)):ea(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const $=this.getClosestProjectingParent();$&&!!$.resumingFrom==!!this.resumingFrom&&!$.options.layoutScroll&&$.target?(this.relativeParent=$,this.forceRelativeParentToResolveTarget(),this.relativeTarget=An(),this.relativeTargetOrigin=An(),Yf(this.relativeTargetOrigin,this.target,$.target),ea(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}lu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||pb(this.parent.latestValues)||kI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var p;const l=this.getLead(),b=!!this.resumingFrom||this!==l;let w=!0;if((this.isProjectionDirty||!((p=this.parent)===null||p===void 0)&&p.isProjectionDirty)&&(w=!1),b&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(w=!1),this.resolvedRelativeTargetAt===Hn.timestamp&&(w=!1),w)return;const{layout:T,layoutId:D}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(T||D))return;ea(this.layoutCorrected,this.layout.layoutBox),fZ(this.layoutCorrected,this.treeScale,this.path,b);const{target:P}=l;if(!P)return;this.projectionDelta||(this.projectionDelta=Jf(),this.projectionDeltaWithTransform=Jf());const $=this.treeScale.x,q=this.treeScale.y,ee=this.projectionTransform;Kf(this.projectionDelta,this.layoutCorrected,P,this.latestValues),this.projectionTransform=bC(this.projectionDelta,this.treeScale),(this.projectionTransform!==ee||this.treeScale.x!==$||this.treeScale.y!==q)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",P)),lu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(p=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),p){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(p,l=!1){const b=this.snapshot,w=b?b.latestValues:{},T={...this.latestValues},D=Jf();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const P=An(),$=b?b.source:void 0,q=this.layout?this.layout.source:void 0,ee=$!==q,me=this.getStack(),Z=!me||me.members.length<=1,j=!!(ee&&!Z&&this.options.crossfade===!0&&!this.path.some(rW));this.animationProgress=0;let H;this.mixTargetDelta=ie=>{const _e=ie/1e3;EC(D.x,p.x,_e),EC(D.y,p.y,_e),this.setTargetDelta(D),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Yf(P,this.layout.layoutBox,this.relativeParent.layout.layoutBox),tW(this.relativeTarget,this.relativeTargetOrigin,P,_e),H&&yb(this.relativeTarget,H)&&(this.isProjectionDirty=!1),H||(H=An()),ea(H,this.relativeTarget)),ee&&(this.animationValues=T,zZ(T,w,this.latestValues,_e,j,Z)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_e},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(p){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ml(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Jr.update(()=>{Hf.hasAnimatedSinceResize=!0,this.currentAnimation=jZ(0,SC,{...p,onUpdate:l=>{this.mixTargetDelta(l),p.onUpdate&&p.onUpdate(l)},onComplete:()=>{p.onComplete&&p.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const p=this.getStack();p&&p.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(SC),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const p=this.getLead();let{targetWithTransforms:l,target:b,layout:w,latestValues:T}=p;if(!(!l||!b||!w)){if(this!==p&&this.layout&&w&&DI(this.options.animationType,this.layout.layoutBox,w.layoutBox)){b=this.target||An();const D=No(this.layout.layoutBox.x);b.x.min=p.target.x.min,b.x.max=b.x.min+D;const P=No(this.layout.layoutBox.y);b.y.min=p.target.y.min,b.y.max=b.y.min+P}ea(l,b),$h(l,T),Kf(this.projectionDeltaWithTransform,this.layoutCorrected,l,T)}}registerSharedNode(p,l){this.sharedNodes.has(p)||this.sharedNodes.set(p,new FZ),this.sharedNodes.get(p).add(l);const w=l.options.initialPromotionConfig;l.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(l):void 0})}isLead(){const p=this.getStack();return p?p.lead===this:!0}getLead(){var p;const{layoutId:l}=this.options;return l?((p=this.getStack())===null||p===void 0?void 0:p.lead)||this:this}getPrevLead(){var p;const{layoutId:l}=this.options;return l?(p=this.getStack())===null||p===void 0?void 0:p.prevLead:void 0}getStack(){const{layoutId:p}=this.options;if(p)return this.root.sharedNodes.get(p)}promote({needsReset:p,transition:l,preserveFollowOpacity:b}={}){const w=this.getStack();w&&w.promote(this,b),p&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const p=this.getStack();return p?p.relegate(this):!1}resetRotation(){const{visualElement:p}=this.options;if(!p)return;let l=!1;const{latestValues:b}=p;if((b.rotate||b.rotateX||b.rotateY||b.rotateZ)&&(l=!0),!l)return;const w={};for(let T=0;T<wC.length;T++){const D="rotate"+wC[T];b[D]&&(w[D]=b[D],p.setStaticValue(D,0))}p.render();for(const T in w)p.setStaticValue(T,w[T]);p.scheduleRender()}getProjectionStyles(p={}){var l,b;const w={};if(!this.instance||this.isSVG)return w;if(this.isVisible)w.visibility="";else return{visibility:"hidden"};const T=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,w.opacity="",w.pointerEvents=py(p.pointerEvents)||"",w.transform=T?T(this.latestValues,""):"none",w;const D=this.getLead();if(!this.projectionDelta||!this.layout||!D.target){const ee={};return this.options.layoutId&&(ee.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,ee.pointerEvents=py(p.pointerEvents)||""),this.hasProjected&&!su(this.latestValues)&&(ee.transform=T?T({},""):"none",this.hasProjected=!1),ee}const P=D.animationValues||D.latestValues;this.applyTransformsToTarget(),w.transform=bC(this.projectionDeltaWithTransform,this.treeScale,P),T&&(w.transform=T(P,w.transform));const{x:$,y:q}=this.projectionDelta;w.transformOrigin=`${$.origin*100}% ${q.origin*100}% 0`,D.animationValues?w.opacity=D===this?(b=(l=P.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&b!==void 0?b:1:this.preserveOpacity?this.latestValues.opacity:P.opacityExit:w.opacity=D===this?P.opacity!==void 0?P.opacity:"":P.opacityExit!==void 0?P.opacityExit:0;for(const ee in s0){if(P[ee]===void 0)continue;const{correct:me,applyTo:Z}=s0[ee],j=w.transform==="none"?P[ee]:me(P[ee],D);if(Z){const H=Z.length;for(let ie=0;ie<H;ie++)w[Z[ie]]=j}else w[ee]=j}return this.options.layoutId&&(w.pointerEvents=D===this?py(p.pointerEvents)||"":"none"),w}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(p=>{var l;return(l=p.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(kC),this.root.sharedNodes.clear()}}}function ZZ(e){e.updateLayout()}function WZ(e){var t;const r=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){const{layoutBox:o,measuredBox:c}=e.layout,{animationType:h}=e.options,p=r.source!==e.layout.source;h==="size"?ls(D=>{const P=p?r.measuredBox[D]:r.layoutBox[D],$=No(P);P.min=o[D].min,P.max=P.min+$}):DI(h,r.layoutBox,o)&&ls(D=>{const P=p?r.measuredBox[D]:r.layoutBox[D],$=No(o[D]);P.max=P.min+$,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[D].max=e.relativeTarget[D].min+$)});const l=Jf();Kf(l,o,r.layoutBox);const b=Jf();p?Kf(b,e.applyTransform(c,!0),r.measuredBox):Kf(b,o,r.layoutBox);const w=!zI(l);let T=!1;if(!e.resumeFrom){const D=e.getClosestProjectingParent();if(D&&!D.resumeFrom){const{snapshot:P,layout:$}=D;if(P&&$){const q=An();Yf(q,r.layoutBox,P.layoutBox);const ee=An();Yf(ee,o,$.layoutBox),yb(q,ee)||(T=!0),D.options.layoutRoot&&(e.relativeTarget=ee,e.relativeTargetOrigin=q,e.relativeParent=D)}}}e.notifyListeners("didUpdate",{layout:o,snapshot:r,delta:b,layoutDelta:l,hasLayoutChanged:w,hasRelativeTargetChanged:T})}else if(e.isLead()){const{onExitComplete:o}=e.options;o&&o()}e.options.transition=void 0}function HZ(e){lu.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function qZ(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function XZ(e){e.clearSnapshot()}function kC(e){e.clearMeasurements()}function KZ(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function TC(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function YZ(e){e.resolveTargetDelta()}function JZ(e){e.calcProjection()}function QZ(e){e.resetRotation()}function eW(e){e.removeLeadSnapshot()}function EC(e,t,r){e.translate=rn(t.translate,0,r),e.scale=rn(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function CC(e,t,r,o){e.min=rn(t.min,r.min,o),e.max=rn(t.max,r.max,o)}function tW(e,t,r,o){CC(e.x,t.x,r.x,o),CC(e.y,t.y,r.y,o)}function rW(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const nW={duration:.45,ease:[.4,0,.1,1]};function iW(e,t){let r=e.root;for(let h=e.path.length-1;h>=0;h--)if(e.path[h].instance){r=e.path[h];break}const c=(r&&r!==e.root?r.instance:document).querySelector(`[data-projection-id="${t}"]`);c&&e.mount(c,!0)}function AC(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function oW(e){AC(e.x),AC(e.y)}function DI(e,t,r){return e==="position"||e==="preserve-aspect"&&!db(xC(t),xC(r),.2)}const aW=MI({attachResizeListener:(e,t)=>ol(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Sv={current:void 0},RI=MI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Sv.current){const e=new aW(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),Sv.current=e}return Sv.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),sW={pan:{Feature:bZ},drag:{Feature:xZ,ProjectionNode:RI,MeasureLayout:AI}},lW=new Set(["width","height","top","left","right","bottom","x","y"]),LI=e=>lW.has(e),cW=e=>Object.keys(e).some(LI),PC=e=>e===Vu||e===Pt,IC=(e,t)=>parseFloat(e.split(", ")[t]),zC=(e,t)=>(r,{transform:o})=>{if(o==="none"||!o)return 0;const c=o.match(/^matrix3d\((.+)\)$/);if(c)return IC(c[1],t);{const h=o.match(/^matrix\((.+)\)$/);return h?IC(h[1],e):0}},uW=new Set(["x","y","z"]),hW=im.filter(e=>!uW.has(e));function dW(e){const t=[];return hW.forEach(r=>{const o=e.getValue(r);o!==void 0&&(t.push([r,o.get()]),o.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}const MC={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:zC(4,13),y:zC(5,14)},fW=(e,t,r)=>{const o=t.measureViewportBox(),c=t.current,h=getComputedStyle(c),{display:p}=h,l={};p==="none"&&t.setStaticValue("display",e.display||"block"),r.forEach(w=>{l[w]=MC[w](o,h)}),t.render();const b=t.measureViewportBox();return r.forEach(w=>{const T=t.getValue(w);T&&T.jump(l[w]),e[w]=MC[w](b,h)}),e},pW=(e,t,r={},o={})=>{t={...t},o={...o};const c=Object.keys(t).filter(LI);let h=[],p=!1;const l=[];if(c.forEach(b=>{const w=e.getValue(b);if(!e.hasValue(b))return;let T=r[b],D=mf(T);const P=t[b];let $;if(c0(P)){const q=P.length,ee=P[0]===null?1:0;T=P[ee],D=mf(T);for(let me=ee;me<q&&P[me]!==null;me++)$?f2(mf(P[me])===$):$=mf(P[me])}else $=mf(P);if(D!==$)if(PC(D)&&PC($)){const q=w.get();typeof q=="string"&&w.set(parseFloat(q)),typeof P=="string"?t[b]=parseFloat(P):Array.isArray(P)&&$===Pt&&(t[b]=P.map(parseFloat))}else D!=null&&D.transform&&($!=null&&$.transform)&&(T===0||P===0)?T===0?w.set($.transform(T)):t[b]=D.transform(P):(p||(h=dW(e),p=!0),l.push(b),o[b]=o[b]!==void 0?o[b]:t[b],w.jump(P))}),l.length){const b=l.indexOf("height")>=0?window.pageYOffset:null,w=fW(t,e,l);return h.length&&h.forEach(([T,D])=>{e.getValue(T).set(D)}),e.render(),h_&&b!==null&&window.scrollTo({top:b}),{target:w,transitionEnd:o}}else return{target:t,transitionEnd:o}};function mW(e,t,r,o){return cW(t)?pW(e,t,r,o):{target:t,transitionEnd:o}}const gW=(e,t,r,o)=>{const c=EZ(e,t,o);return t=c.target,o=c.transitionEnd,mW(e,t,r,o)},_b={current:null},BI={current:!1};function yW(){if(BI.current=!0,!!h_)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_b.current=e.matches;e.addListener(t),t()}else _b.current=!1}function _W(e,t,r){const{willChange:o}=t;for(const c in t){const h=t[c],p=r[c];if(mo(h))e.addValue(c,h),f0(o)&&o.add(c);else if(mo(p))e.addValue(c,sd(h,{owner:e})),f0(o)&&o.remove(c);else if(p!==h)if(e.hasValue(c)){const l=e.getValue(c);!l.hasAnimated&&l.set(h)}else{const l=e.getStaticValue(c);e.addValue(c,sd(l!==void 0?l:h,{owner:e}))}}for(const c in r)t[c]===void 0&&e.removeValue(c);return t}const DC=new WeakMap,FI=Object.keys(zp),vW=FI.length,RC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],xW=r2.length;class bW{constructor({parent:t,props:r,presenceContext:o,reducedMotionConfig:c,visualState:h},p={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Jr.render(this.render,!1,!0);const{latestValues:l,renderState:b}=h;this.latestValues=l,this.baseTarget={...l},this.initialValues=r.initial?{...l}:{},this.renderState=b,this.parent=t,this.props=r,this.presenceContext=o,this.depth=t?t.depth+1:0,this.reducedMotionConfig=c,this.options=p,this.isControllingVariants=f_(r),this.isVariantNode=EP(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:w,...T}=this.scrapeMotionValuesFromProps(r,{});for(const D in T){const P=T[D];l[D]!==void 0&&mo(P)&&(P.set(l[D],!1),f0(w)&&w.add(D))}}scrapeMotionValuesFromProps(t,r){return{}}mount(t){this.current=t,DC.set(t,this),this.projection&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,o)=>this.bindToMotionValue(o,r)),BI.current||yW(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_b.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){DC.delete(this.current),this.projection&&this.projection.unmount(),ml(this.notifyUpdate),ml(this.render),this.valueSubscriptions.forEach(t=>t()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(t,r){const o=Ou.has(t),c=r.on("change",p=>{this.latestValues[t]=p,this.props.onUpdate&&Jr.update(this.notifyUpdate,!1,!0),o&&this.projection&&(this.projection.isTransformDirty=!0)}),h=r.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(t,()=>{c(),h()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}loadFeatures({children:t,...r},o,c,h,p){let l,b;for(let w=0;w<vW;w++){const T=FI[w],{isEnabled:D,Feature:P,ProjectionNode:$,MeasureLayout:q}=zp[T];$&&(l=$),D(r)&&(!this.features[T]&&P&&(this.features[T]=new P(this)),q&&(b=q))}if(!this.projection&&l){this.projection=new l(h,this.latestValues,this.parent&&this.parent.projection);const{layoutId:w,layout:T,drag:D,dragConstraints:P,layoutScroll:$,layoutRoot:q}=r;this.projection.setOptions({layoutId:w,layout:T,alwaysMeasureLayout:!!D||P&&Bh(P),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof T=="string"?T:"both",initialPromotionConfig:p,layoutScroll:$,layoutRoot:q})}return b}updateFeatures(){for(const t in this.features){const r=this.features[t];r.isMounted?r.update(this.props,this.prevProps):(r.mount(),r.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):An()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}makeTargetAnimatable(t,r=!0){return this.makeTargetAnimatableFromInstance(t,this.props,r)}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let o=0;o<RC.length;o++){const c=RC[o];this.propEventSubscriptions[c]&&(this.propEventSubscriptions[c](),delete this.propEventSubscriptions[c]);const h=t["on"+c];h&&(this.propEventSubscriptions[c]=this.on(c,h))}this.prevMotionValues=_W(this,this.scrapeMotionValuesFromProps(t,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(t=!1){if(t)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const o=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(o.initial=this.props.initial),o}const r={};for(let o=0;o<xW;o++){const c=r2[o],h=this.props[c];(Ip(h)||h===!1)&&(r[c]=h)}return r}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){r!==this.values.get(t)&&(this.removeValue(t),this.bindToMotionValue(t,r)),this.values.set(t,r),this.latestValues[t]=r.get()}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let o=this.values.get(t);return o===void 0&&r!==void 0&&(o=sd(r,{owner:this}),this.addValue(t,o)),o}readValue(t){return this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.readValueFromInstance(this.current,t,this.options)}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){var r;const{initial:o}=this.props,c=typeof o=="string"||typeof o=="object"?(r=d2(this.props,o))===null||r===void 0?void 0:r[t]:void 0;if(o&&c!==void 0)return c;const h=this.getBaseTargetFromProps(this.props,t);return h!==void 0&&!mo(h)?h:this.initialValues[t]!==void 0&&c===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new w2),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}}class $I extends bW{sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){return t.style?t.style[r]:void 0}removeValueFromRenderState(t,{vars:r,style:o}){delete r[t],delete o[t]}makeTargetAnimatableFromInstance({transition:t,transitionEnd:r,...o},{transformValues:c},h){let p=VG(o,t||{},this);if(c&&(r&&(r=c(r)),o&&(o=c(o)),p&&(p=c(p))),h){$G(this,o,p);const l=gW(this,o,p,r);r=l.transitionEnd,o=l.target}return{transition:t,transitionEnd:r,...o}}}function wW(e){return window.getComputedStyle(e)}class SW extends $I{readValueFromInstance(t,r){if(Ou.has(r)){const o=y2(r);return o&&o.default||0}else{const o=wW(t),c=(IP(r)?o.getPropertyValue(r):o[r])||0;return typeof c=="string"?c.trim():c}}measureInstanceViewportBox(t,{transformPagePoint:r}){return EI(t,r)}build(t,r,o,c){a2(t,r,o,c.transformTemplate)}scrapeMotionValuesFromProps(t,r){return h2(t,r)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mo(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}renderInstance(t,r,o,c){LP(t,r,o,c)}}class kW extends $I{constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(Ou.has(r)){const o=y2(r);return o&&o.default||0}return r=BP.has(r)?r:u2(r),t.getAttribute(r)}measureInstanceViewportBox(){return An()}scrapeMotionValuesFromProps(t,r){return $P(t,r)}build(t,r,o,c){l2(t,r,o,this.isSVGTag,c.transformTemplate)}renderInstance(t,r,o,c){FP(t,r,o,c)}mount(t){this.isSVGTag=c2(t.tagName),super.mount(t)}}const TW=(e,t)=>o2(e)?new kW(t,{enableHardwareAcceleration:!1}):new SW(t,{enableHardwareAcceleration:!0}),EW={layout:{ProjectionNode:RI,MeasureLayout:AI}},CW={...eZ,...xj,...sW,...EW},AW=PU((e,t)=>nj(e,t,CW,TW));function OI(){const e=Me.useRef(!1);return a0(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function PW(){const e=OI(),[t,r]=Me.useState(0),o=Me.useCallback(()=>{e.current&&r(t+1)},[t]);return[Me.useCallback(()=>Jr.postRender(o),[o]),t]}class IW extends Me.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function zW({children:e,isPresent:t}){const r=Me.useId(),o=Me.useRef(null),c=Me.useRef({width:0,height:0,top:0,left:0});return Me.useInsertionEffect(()=>{const{width:h,height:p,top:l,left:b}=c.current;if(t||!o.current||!h||!p)return;o.current.dataset.motionPopId=r;const w=document.createElement("style");return document.head.appendChild(w),w.sheet&&w.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${p}px !important;
            top: ${l}px !important;
            left: ${b}px !important;
          }
        `),()=>{document.head.removeChild(w)}},[t]),Me.createElement(IW,{isPresent:t,childRef:o,sizeRef:c},Me.cloneElement(e,{ref:o}))}const kv=({children:e,initial:t,isPresent:r,onExitComplete:o,custom:c,presenceAffectsLayout:h,mode:p})=>{const l=n2(MW),b=Me.useId(),w=Me.useMemo(()=>({id:b,initial:t,isPresent:r,custom:c,onExitComplete:T=>{l.set(T,!0);for(const D of l.values())if(!D)return;o&&o()},register:T=>(l.set(T,!1),()=>l.delete(T))}),h?void 0:[r]);return Me.useMemo(()=>{l.forEach((T,D)=>l.set(D,!1))},[r]),Me.useEffect(()=>{!r&&!l.size&&o&&o()},[r]),p==="popLayout"&&(e=Me.createElement(zW,{isPresent:r},e)),Me.createElement(nm.Provider,{value:w},e)};function MW(){return new Map}function DW(e){return Me.useEffect(()=>()=>e(),[])}const wh=e=>e.key||"";function RW(e,t){e.forEach(r=>{const o=wh(r);t.set(o,r)})}function LW(e){const t=[];return Me.Children.forEach(e,r=>{Me.isValidElement(r)&&t.push(r)}),t}const BW=({children:e,custom:t,initial:r=!0,onExitComplete:o,exitBeforeEnter:c,presenceAffectsLayout:h=!0,mode:p="sync"})=>{let[l]=PW();const b=Me.useContext(i2).forceRender;b&&(l=b);const w=OI(),T=LW(e);let D=T;const P=new Set,$=Me.useRef(D),q=Me.useRef(new Map).current,ee=Me.useRef(!0);if(a0(()=>{ee.current=!1,RW(T,q),$.current=D}),DW(()=>{ee.current=!0,q.clear(),P.clear()}),ee.current)return Me.createElement(Me.Fragment,null,D.map(H=>Me.createElement(kv,{key:wh(H),isPresent:!0,initial:r?void 0:!1,presenceAffectsLayout:h,mode:p},H)));D=[...D];const me=$.current.map(wh),Z=T.map(wh),j=me.length;for(let H=0;H<j;H++){const ie=me[H];Z.indexOf(ie)===-1&&P.add(ie)}return p==="wait"&&P.size&&(D=[]),P.forEach(H=>{if(Z.indexOf(H)!==-1)return;const ie=q.get(H);if(!ie)return;const _e=me.indexOf(H),Le=()=>{q.delete(H),P.delete(H);const ve=$.current.findIndex(Pe=>Pe.key===H);if($.current.splice(ve,1),!P.size){if($.current=T,w.current===!1)return;l(),o&&o()}};D.splice(_e,0,Me.createElement(kv,{key:wh(ie),isPresent:!1,onExitComplete:Le,custom:t,presenceAffectsLayout:h,mode:p},ie))}),D=D.map(H=>{const ie=H.key;return P.has(ie)?H:Me.createElement(kv,{key:wh(H),isPresent:!0,presenceAffectsLayout:h,mode:p},H)}),Me.createElement(Me.Fragment,null,P.size?D:D.map(H=>Me.cloneElement(H)))};var FW={initial:e=>{const{position:t}=e,r=["top","bottom"].includes(t)?"y":"x";let o=["top-right","bottom-right"].includes(t)?1:-1;return t==="bottom"&&(o=1),{opacity:0,[r]:o*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},VI=Me.memo(e=>{const{id:t,message:r,onCloseComplete:o,onRequestRemove:c,requestClose:h=!1,position:p="bottom",duration:l=5e3,containerStyle:b,motionVariants:w=FW,toastSpacing:T="0.5rem"}=e,[D,P]=Me.useState(l),$=SZ();AE(()=>{$||o==null||o()},[$]),AE(()=>{P(l)},[l]);const q=()=>P(null),ee=()=>P(l),me=()=>{$&&c()};Me.useEffect(()=>{$&&h&&c()},[$,h,c]),_U(me,D);const Z=Me.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:T,...b}),[b,T]),j=Me.useMemo(()=>mU(p),[p]);return je(AW.li,{layout:!0,className:"chakra-toast",variants:w,initial:"initial",animate:"animate",exit:"exit",onHoverStart:q,onHoverEnd:ee,custom:{position:p},style:j,children:je(Zi.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:Z,children:Ql(r,{id:t,onClose:me})})})});VI.displayName="ToastComponent";var LC={path:aa("g",{stroke:"currentColor",strokeWidth:"1.5",children:[je("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),je("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),je("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},lm=Ra((e,t)=>{const{as:r,viewBox:o,color:c="currentColor",focusable:h=!1,children:p,className:l,__css:b,...w}=e,T=Sc("chakra-icon",l),D=rm("Icon",e),P={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:c,...b,...D},$={ref:t,focusable:h,className:T,__css:P},q=o??LC.viewBox;if(r&&typeof r!="string")return je(Zi.svg,{as:r,...$,...w});const ee=p??LC.path;return je(Zi.svg,{verticalAlign:"middle",viewBox:q,...$,...w,children:ee})});lm.displayName="Icon";function $W(e){return je(lm,{viewBox:"0 0 24 24",...e,children:je("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function OW(e){return je(lm,{viewBox:"0 0 24 24",...e,children:je("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function BC(e){return je(lm,{viewBox:"0 0 24 24",...e,children:je("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}var VW=G8({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),NI=Ra((e,t)=>{const r=rm("Spinner",e),{label:o="Loading...",thickness:c="2px",speed:h="0.45s",emptyColor:p="transparent",className:l,...b}=em(e),w=Sc("chakra-spinner",l),T={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:c,borderBottomColor:p,borderLeftColor:p,animation:`${VW} ${h} linear infinite`,...r};return je(Zi.div,{ref:t,__css:T,className:w,...b,children:o&&je(Zi.span,{srOnly:!0,children:o})})});NI.displayName="Spinner";var[NW,S2]=Qp({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[UW,k2]=Qp({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),UI={info:{icon:OW,colorScheme:"blue"},warning:{icon:BC,colorScheme:"orange"},success:{icon:$W,colorScheme:"green"},error:{icon:BC,colorScheme:"red"},loading:{icon:NI,colorScheme:"blue"}};function jW(e){return UI[e].colorScheme}function GW(e){return UI[e].icon}var jI=Ra(function(t,r){const o=k2(),{status:c}=S2(),h={display:"inline",...o.description};return je(Zi.div,{ref:r,"data-status":c,...t,className:Sc("chakra-alert__desc",t.className),__css:h})});jI.displayName="AlertDescription";function GI(e){const{status:t}=S2(),r=GW(t),o=k2(),c=t==="loading"?o.spinner:o.icon;return je(Zi.span,{display:"inherit","data-status":t,...e,className:Sc("chakra-alert__icon",e.className),__css:c,children:e.children||je(r,{h:"100%",w:"100%"})})}GI.displayName="AlertIcon";var ZI=Ra(function(t,r){const o=k2(),{status:c}=S2();return je(Zi.div,{ref:r,"data-status":c,...t,className:Sc("chakra-alert__title",t.className),__css:o.title})});ZI.displayName="AlertTitle";var WI=Ra(function(t,r){var o;const{status:c="info",addRole:h=!0,...p}=em(t),l=(o=t.colorScheme)!=null?o:jW(c),b=H7("Alert",{...t,colorScheme:l}),w={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...b.container};return je(NW,{value:{status:c},children:je(UW,{value:b,children:je(Zi.div,{"data-status":c,role:h?"alert":void 0,ref:r,...p,className:Sc("chakra-alert",t.className),__css:w})})})});WI.displayName="Alert";function ZW(e){return je(lm,{focusable:"false","aria-hidden":!0,...e,children:je("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}var HI=Ra(function(t,r){const o=rm("CloseButton",t),{children:c,isDisabled:h,__css:p,...l}=em(t),b={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return je(Zi.button,{type:"button","aria-label":"Close",ref:r,disabled:h,__css:{...b,...o,...p},...l,children:c||je(ZW,{width:"1em",height:"1em"})})});HI.displayName="CloseButton";var WW={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},Qf=HW(WW);function HW(e){let t=e;const r=new Set,o=c=>{t=c(t),r.forEach(h=>h())};return{getState:()=>t,subscribe:c=>(r.add(c),()=>{o(()=>e),r.delete(c)}),removeToast:(c,h)=>{o(p=>({...p,[h]:p[h].filter(l=>l.id!=c)}))},notify:(c,h)=>{const p=qW(c,h),{position:l,id:b}=p;return o(w=>{var T,D;const $=l.includes("top")?[p,...(T=w[l])!=null?T:[]]:[...(D=w[l])!=null?D:[],p];return{...w,[l]:$}}),b},update:(c,h)=>{c&&o(p=>{const l={...p},{position:b,index:w}=CE(l,c);return b&&w!==-1&&(l[b][w]={...l[b][w],...h,message:KW(h)}),l})},closeAll:({positions:c}={})=>{o(h=>(c??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((b,w)=>(b[w]=h[w].map(T=>({...T,requestClose:!0})),b),{...h}))},close:c=>{o(h=>{const p=SP(h,c);return p?{...h,[p]:h[p].map(l=>l.id==c?{...l,requestClose:!0}:l)}:h})},isActive:c=>!!CE(Qf.getState(),c).position}}var FC=0;function qW(e,t={}){var r,o;FC+=1;const c=(r=t.id)!=null?r:FC,h=(o=t.position)!=null?o:"bottom";return{id:c,message:e,position:h,duration:t.duration,onCloseComplete:t.onCloseComplete,onRequestRemove:()=>Qf.removeToast(String(c),h),status:t.status,requestClose:!1,containerStyle:t.containerStyle}}var XW=e=>{const{status:t,variant:r="solid",id:o,title:c,isClosable:h,onClose:p,description:l,colorScheme:b,icon:w}=e,T=o?{root:`toast-${o}`,title:`toast-${o}-title`,description:`toast-${o}-description`}:void 0;return aa(WI,{addRole:!1,status:t,variant:r,id:T==null?void 0:T.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:b,children:[je(GI,{children:w}),aa(Zi.div,{flex:"1",maxWidth:"100%",children:[c&&je(ZI,{id:T==null?void 0:T.title,children:c}),l&&je(jI,{id:T==null?void 0:T.description,display:"block",children:l})]}),h&&je(HI,{size:"sm",onClick:p,position:"absolute",insetEnd:1,top:1})]})};function KW(e={}){const{render:t,toastComponent:r=XW}=e;return c=>typeof t=="function"?t({...c,...e}):je(r,{...c,...e})}var[YW,AJ]=Qp({name:"ToastOptionsContext",strict:!1}),JW=e=>{const t=Me.useSyncExternalStore(Qf.subscribe,Qf.getState,Qf.getState),{motionVariants:r,component:o=VI,portalProps:c}=e,p=Object.keys(t).map(l=>{const b=t[l];return je("ul",{role:"region","aria-live":"polite",id:`chakra-toast-manager-${l}`,style:gU(l),children:je(BW,{initial:!1,children:b.map(w=>je(o,{motionVariants:r,...w},w.id))})},l)});return je(o_,{...c,children:p})},QW=e=>function({children:r,theme:o=e,toastOptions:c,...h}){return aa(fU,{theme:o,...h,children:[je(YW,{value:c==null?void 0:c.defaultOptions,children:r}),je(JW,{...c})]})},eH=QW(F7),vb=Ra(function(t,r){const o=rm("Text",t),{className:c,align:h,decoration:p,casing:l,...b}=em(t),w=Y7({textAlign:t.align,textDecoration:t.decoration,textTransform:t.casing});return je(Zi.p,{ref:r,className:Sc("chakra-text",t.className),...w,...b,__css:o})});vb.displayName="Text";var qI=Ra(function(t,r){const o=rm("Heading",t),{className:c,...h}=em(t);return je(Zi.h2,{ref:r,className:Sc("chakra-heading",t.className),...h,__css:o})});qI.displayName="Heading";var tl=Zi("div");tl.displayName="Box";var XI=Ra(function(t,r){const{size:o,centerContent:c=!0,...h}=t;return je(tl,{ref:r,boxSize:o,__css:{...c?{display:"flex",alignItems:"center",justifyContent:"center"}:{},flexShrink:0,flexGrow:0},...h})});XI.displayName="Square";var tH=Ra(function(t,r){const{size:o,...c}=t;return je(XI,{size:o,ref:r,borderRadius:"9999px",...c})});tH.displayName="Circle";var KI=Ra(function(t,r){const{direction:o,align:c,justify:h,wrap:p,basis:l,grow:b,shrink:w,...T}=t,D={display:"flex",flexDirection:o,alignItems:c,justifyContent:h,flexWrap:p,flexBasis:l,flexGrow:b,flexShrink:w};return je(Zi.div,{ref:r,__css:D,...T})});KI.displayName="Flex";const rH=()=>aa(tl,{position:"absolute",top:"10px",right:"10px",backgroundColor:"white",borderRadius:"md",boxShadow:"md",padding:"4",children:[aa(tl,{display:"flex",alignItems:"center",marginBottom:"1",children:[je(tl,{width:"14px",height:"14px",backgroundColor:"orange",marginRight:"2",borderRadius:"50%"}),je(vb,{fontSize:"xs",children:""})]}),aa(tl,{display:"flex",alignItems:"center",children:[je(tl,{width:"14px",height:"14px",backgroundColor:"red",marginRight:"2",borderRadius:"50%"}),je(vb,{fontSize:"xs",children:""})]})]});var xb={},nH={get exports(){return xb},set exports(e){xb=e}};(function(e,t){(function(r,o){e.exports=o()})(_f,function(){var r,o,c;function h(l,b){if(!r)r=b;else if(!o)o=b;else{var w="var sharedChunk = {}; ("+r+")(sharedChunk); ("+o+")(sharedChunk);",T={};r(T),c=b(T),typeof window<"u"&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}h(["exports"],function(l){var b=w;function w(a,n,s,d){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(d-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=d}function T(a,n,s,d){const g=new b(a,n,s,d);return function(_){return g.solve(_)}}w.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,d=0;d<8;d++){var g=this.sampleCurveX(s)-a;if(Math.abs(g)<n)return s;var _=this.sampleCurveDerivativeX(s);if(Math.abs(_)<1e-6)break;s-=g/_}var x=0,k=1;for(s=a,d=0;d<20&&(g=this.sampleCurveX(s),!(Math.abs(g-a)<n));d++)a>g?x=s:k=s,s=.5*(k-x)+x;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};const D=T(.25,.1,.25,1);function P(a,n,s){return Math.min(s,Math.max(n,a))}function $(a,n,s){const d=s-n,g=((a-n)%d+d)%d+n;return g===n?s:g}function q(a,...n){for(const s of n)for(const d in s)a[d]=s[d];return a}let ee=1;function me(a,n){a.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function Z(a,n,s){const d={};for(const g in a)d[g]=n.call(s||this,a[g],g,a);return d}function j(a,n,s){const d={};for(const g in a)n.call(s||this,a[g],g,a)&&(d[g]=a[g]);return d}function H(a){return Array.isArray(a)?a.map(H):typeof a=="object"&&a?Z(a,H):a}const ie={};function _e(a){ie[a]||(typeof console<"u"&&console.warn(a),ie[a]=!0)}function Le(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function ve(a){let n=0;for(let s,d,g=0,_=a.length,x=_-1;g<_;x=g++)s=a[g],d=a[x],n+=(d.x-s.x)*(s.y+d.y);return n}function Pe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ne(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,d,g,_)=>{const x=g||_;return n[d]=!x||x.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n}let $e,ct,qt=null;function Er(a){if(qt==null){const n=a.navigator?a.navigator.userAgent:null;qt=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return qt}function Bt(a){return typeof ImageBitmap<"u"&&a instanceof ImageBitmap}const Ft={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(a){const n=requestAnimationFrame(a);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(a,n=0){const s=window.document.createElement("canvas"),d=s.getContext("2d");if(!d)throw new Error("failed to create canvas 2d context");return s.width=a.width,s.height=a.height,d.drawImage(a,0,0,a.width,a.height),d.getImageData(-n,-n,a.width+2*n,a.height+2*n)},resolveURL:a=>($e||($e=document.createElement("a")),$e.href=a,$e.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ct==null&&(ct=matchMedia("(prefers-reduced-motion: reduce)")),ct.matches)}};var ut=It;function It(a,n){this.x=a,this.y=n}It.prototype={clone:function(){return new It(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),d=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=d,this},_rotateAround:function(a,n){var s=Math.cos(a),d=Math.sin(a),g=n.y+d*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-d*(this.y-n.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},It.convert=function(a){return a instanceof It?a:Array.isArray(a)?new It(a[0],a[1]):a};const tt={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},_t="mapbox-tiles";let wt,Tt,nr=500,$t=50;function an(){typeof caches>"u"||wt||(wt=caches.open(_t))}let fn=1/0;const br={supported:!1,testSupport:function(a){!Qr&&Fn&&(Jn?$n(a):pn=a)}};let pn,Fn,Qr=!1,Jn=!1;function $n(a){const n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,Fn),a.isContextLost())return;br.supported=!0}catch{}a.deleteTexture(n),Qr=!0}typeof document<"u"&&(Fn=document.createElement("img"),Fn.onload=function(){pn&&$n(pn),pn=null,Jn=!0},Fn.onerror=function(){Qr=!0,pn=null},Fn.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Qn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Qn);class bn extends Error{constructor(n,s,d,g){super(`AJAXError: ${s} (${n}): ${d}`),this.status=n,this.statusText=s,this.url=d,this.body=g}}const ws=Pe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Zo(a,n){const s=new AbortController,d=new Request(a.url,{method:a.method||"GET",body:a.body,credentials:a.credentials,headers:a.headers,referrer:ws(),signal:s.signal});let g=!1,_=!1;return a.type==="json"&&d.headers.set("Accept","application/json"),((x,k,E)=>{if(_)return;const I=Date.now();fetch(d).then(R=>R.ok?((B,V,U)=>{(a.type==="arrayBuffer"?B.arrayBuffer():a.type==="json"?B.json():B.text()).then(G=>{_||(V&&U&&function(oe,ne,ye){if(an(),!wt)return;const ke={status:ne.status,statusText:ne.statusText,headers:new Headers};ne.headers.forEach((we,Be)=>ke.headers.set(Be,we));const pe=Ne(ne.headers.get("Cache-Control")||"");pe["no-store"]||(pe["max-age"]&&ke.headers.set("Expires",new Date(ye+1e3*pe["max-age"]).toUTCString()),new Date(ke.headers.get("Expires")).getTime()-ye<42e4||function(we,Be){if(Tt===void 0)try{new Response(new ReadableStream),Tt=!0}catch{Tt=!1}Tt?Be(we.body):we.blob().then(Be)}(ne,we=>{const Be=new Response(we,ke);an(),wt&&wt.then(Re=>Re.put(function(nt){const ht=nt.indexOf("?");return ht<0?nt:nt.slice(0,ht)}(oe.url),Be)).catch(Re=>_e(Re.message))}))}(d,V,U),g=!0,n(null,G,B.headers.get("Cache-Control"),B.headers.get("Expires")))}).catch(G=>{_||n(new Error(G.message))})})(R,null,I):R.blob().then(B=>n(new bn(R.status,R.statusText,a.url,B)))).catch(R=>{R.code!==20&&n(new Error(R.message))})})(),{cancel:()=>{_=!0,g||s.abort()}}}const La=function(a,n){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){if(Pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n);if(!Pe()){const d=a.url.substring(0,a.url.indexOf("://"));return(tt.REGISTERED_PROTOCOLS[d]||Zo)(a,n)}}if(!(/^file:/.test(s=a.url)||/^file:/.test(ws())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Zo(a,n);if(Pe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(d,g){const _=new XMLHttpRequest;_.open(d.method||"GET",d.url,!0),d.type==="arrayBuffer"&&(_.responseType="arraybuffer");for(const x in d.headers)_.setRequestHeader(x,d.headers[x]);return d.type==="json"&&(_.responseType="text",_.setRequestHeader("Accept","application/json")),_.withCredentials=d.credentials==="include",_.onerror=()=>{g(new Error(_.statusText))},_.onload=()=>{if((_.status>=200&&_.status<300||_.status===0)&&_.response!==null){let x=_.response;if(d.type==="json")try{x=JSON.parse(_.response)}catch(k){return g(k)}g(null,x,_.getResponseHeader("Cache-Control"),_.getResponseHeader("Expires"))}else{const x=new Blob([_.response],{type:_.getResponseHeader("Content-Type")});g(new bn(_.status,_.statusText,d.url,x))}},_.send(d.body),{cancel:()=>_.abort()}}(a,n)},Ba=function(a,n){return La(q(a,{type:"arrayBuffer"}),n)};function Ss(a){const n=window.document.createElement("a");return n.href=a,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Gt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let ei,Ki;ei=[],Ki=0;const Ii=function(a,n){if(br.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Ki>=tt.MAX_PARALLEL_IMAGE_REQUESTS){const _={requestParameters:a,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return ei.push(_),_}Ki++;let s=!1;const d=()=>{if(!s)for(s=!0,Ki--;ei.length&&Ki<tt.MAX_PARALLEL_IMAGE_REQUESTS;){const _=ei.shift(),{requestParameters:x,callback:k,cancelled:E}=_;E||(_.cancel=Ii(x,k).cancel)}},g=Ba(a,(_,x,k,E)=>{d(),_?n(_):x&&function(I,R){typeof createImageBitmap=="function"?function(B,V){const U=new Blob([new Uint8Array(B)],{type:"image/png"});createImageBitmap(U).then(G=>{V(null,G)}).catch(G=>{V(new Error(`Could not load image because of ${G.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(I,R):function(B,V){const U=new Image;U.onload=()=>{V(null,U),URL.revokeObjectURL(U.src),U.onload=null,window.requestAnimationFrame(()=>{U.src=Gt})},U.onerror=()=>V(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const G=new Blob([new Uint8Array(B)],{type:"image/png"});U.src=B.byteLength?URL.createObjectURL(G):Gt}(I,R)}(x,(I,R)=>{I!=null?n(I):R!=null&&n(null,R,{cacheControl:k,expires:E})})});return{cancel:()=>{g.cancel(),d()}}};function ti(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function Yi(a,n,s){if(s&&s[a]){const d=s[a].indexOf(n);d!==-1&&s[a].splice(d,1)}}class Ji{constructor(n,s={}){q(this,s),this.type=n}}class Fa extends Ji{constructor(n,s={}){super("error",q({error:n},s))}}class go{on(n,s){return this._listeners=this._listeners||{},ti(n,s,this._listeners),this}off(n,s){return Yi(n,s,this._listeners),Yi(n,s,this._oneTimeListeners),this}once(n,s){return this._oneTimeListeners=this._oneTimeListeners||{},ti(n,s,this._oneTimeListeners),this}fire(n,s){typeof n=="string"&&(n=new Ji(n,s||{}));const d=n.type;if(this.listens(d)){n.target=this;const g=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const k of g)k.call(this,n);const _=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const k of _)Yi(d,k,this._oneTimeListeners),k.call(this,n);const x=this._eventedParent;x&&(q(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),x.fire(n))}else n instanceof Fa&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Ie={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class We{constructor(n,s,d,g){this.message=(n?`${n}: `:"")+d,g&&(this.identifier=g),s!=null&&s.__line__&&(this.line=s.__line__)}}function Wo(a){const n=a.value;return n?[new We(a.key,n,"constants have been deprecated as of v8")]:[]}function vi(a,...n){for(const s of n)for(const d in s)a[d]=s[d];return a}function Nt(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function ri(a){if(Array.isArray(a))return a.map(ri);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=ri(a[s]);return n}return Nt(a)}class ni extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}class ii{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[d,g]of s)this.bindings[d]=g}concat(n){return new ii(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const On={kind:"null"},Ue={kind:"number"},Mt={kind:"string"},Et={kind:"boolean"},mn={kind:"color"},yo={kind:"object"},St={kind:"value"},_o={kind:"collator"},zr={kind:"formatted"},$a={kind:"padding"},Hr={kind:"resolvedImage"};function zn(a,n){return{kind:"array",itemType:a,N:n}}function ir(a){if(a.kind==="array"){const n=ir(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const Oa=[On,Ue,Mt,Et,mn,zr,yo,zn(St),$a,Hr];function sn(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!sn(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of Oa)if(!sn(s,n))return null}}return`Expected ${ir(a)} but found ${ir(n)} instead.`}function da(a,n){return n.some(s=>s.kind===a.kind)}function fa(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}var Va,pa={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function K(a){return(a=Math.round(a))<0?0:a>255?255:a}function M(a){return K(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function F(a){return(n=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:n>1?1:n;var n}function W(a,n,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?a+(n-a)*s*6:2*s<1?n:3*s<2?a+(n-a)*(2/3-s)*6:a}try{Va={}.parseCSSColor=function(a){var n,s=a.replace(/ /g,"").toLowerCase();if(s in pa)return pa[s].slice();if(s[0]==="#")return s.length===4?(n=parseInt(s.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:s.length===7&&(n=parseInt(s.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var d=s.indexOf("("),g=s.indexOf(")");if(d!==-1&&g+1===s.length){var _=s.substr(0,d),x=s.substr(d+1,g-(d+1)).split(","),k=1;switch(_){case"rgba":if(x.length!==4)return null;k=F(x.pop());case"rgb":return x.length!==3?null:[M(x[0]),M(x[1]),M(x[2]),k];case"hsla":if(x.length!==4)return null;k=F(x.pop());case"hsl":if(x.length!==3)return null;var E=(parseFloat(x[0])%360+360)%360/360,I=F(x[1]),R=F(x[2]),B=R<=.5?R*(I+1):R+I-R*I,V=2*R-B;return[K(255*W(V,B,E+1/3)),K(255*W(V,B,E)),K(255*W(V,B,E-1/3)),k];default:return null}}return null}}catch{}class X{constructor(n,s,d,g=1){this.r=n,this.g=s,this.b=d,this.a=g}static parse(n){if(!n)return;if(n instanceof X)return n;if(typeof n!="string")return;const s=Va(n);return s?new X(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[n,s,d,g]=this.toArray();return`rgba(${Math.round(n)},${Math.round(s)},${Math.round(d)},${g})`}toArray(){const{r:n,g:s,b:d,a:g}=this;return g===0?[0,0,0,0]:[255*n/g,255*s/g,255*d/g,g]}}X.black=new X(0,0,0,1),X.white=new X(1,1,1,1),X.transparent=new X(0,0,0,0),X.red=new X(1,0,0,1);class ae{constructor(n,s,d){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ue{constructor(n,s,d,g,_){this.text=n,this.image=s,this.scale=d,this.fontStack=g,this.textColor=_}}class le{constructor(n){this.sections=n}static fromString(n){return new le([new ue(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof le?n:le.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class se{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof se)return n;if(typeof n=="number")return new se([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const s of n)if(typeof s!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new se(n)}}toString(){return JSON.stringify(this.values)}}class he{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new he({name:n,available:!1}):null}}function Ce(a,n,s,d){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[a,n,s,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[a,n,s,d]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Fe(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof X||a instanceof ae||a instanceof le||a instanceof se||a instanceof he)return!0;if(Array.isArray(a)){for(const n of a)if(!Fe(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!Fe(a[n]))return!1;return!0}return!1}function Ee(a){if(a===null)return On;if(typeof a=="string")return Mt;if(typeof a=="boolean")return Et;if(typeof a=="number")return Ue;if(a instanceof X)return mn;if(a instanceof ae)return _o;if(a instanceof le)return zr;if(a instanceof se)return $a;if(a instanceof he)return Hr;if(Array.isArray(a)){const n=a.length;let s;for(const d of a){const g=Ee(d);if(s){if(s===g)continue;s=St;break}s=g}return zn(s||St,n)}return yo}function ot(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof X||a instanceof le||a instanceof se||a instanceof he?a.toString():JSON.stringify(a)}class at{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!Fe(n[1]))return s.error("invalid value");const d=n[1];let g=Ee(d);const _=s.expectedType;return g.kind!=="array"||g.N!==0||!_||_.kind!=="array"||typeof _.N=="number"&&_.N!==0||(g=_),new at(g,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ke{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const mt={string:Mt,number:Ue,boolean:Et,object:yo};class xt{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let d,g=1;const _=n[0];if(_==="array"){let k,E;if(n.length>2){const I=n[1];if(typeof I!="string"||!(I in mt)||I==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);k=mt[I],g++}else k=St;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=n[2],g++}d=zn(k,E)}else{if(!mt[_])throw new Error(`Types doesn't contain name = ${_}`);d=mt[_]}const x=[];for(;g<n.length;g++){const k=s.parse(n[g],g,St);if(!k)return null;x.push(k)}return new xt(d,x)}evaluate(n){for(let s=0;s<this.args.length;s++){const d=this.args[s].evaluate(n);if(!sn(this.type,Ee(d)))return d;if(s===this.args.length-1)throw new Ke(`Expected value to be of type ${ir(this.type)}, but found ${ir(Ee(d))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Zt={"to-boolean":Et,"to-color":mn,"to-number":Ue,"to-string":Mt};class kt{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[0];if(!Zt[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&n.length!==2)return s.error("Expected one argument.");const g=Zt[d],_=[];for(let x=1;x<n.length;x++){const k=s.parse(n[x],x,St);if(!k)return null;_.push(k)}return new kt(g,_)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,d;for(const g of this.args){if(s=g.evaluate(n),d=null,s instanceof X)return s;if(typeof s=="string"){const _=n.parseColor(s);if(_)return _}else if(Array.isArray(s)&&(d=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ce(s[0],s[1],s[2],s[3]),!d))return new X(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Ke(d||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="padding"){let s;for(const d of this.args){s=d.evaluate(n);const g=se.parse(s);if(g)return g}throw new Ke(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}if(this.type.kind==="number"){let s=null;for(const d of this.args){if(s=d.evaluate(n),s===null)return 0;const g=Number(s);if(!isNaN(g))return g}throw new Ke(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?le.fromString(ot(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?he.fromString(ot(this.args[0].evaluate(n))):ot(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const zt=["Unknown","Point","LineString","Polygon"];class Wt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?zt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let s=this._parseColorCache[n];return s||(s=this._parseColorCache[n]=X.parse(n)),s}}class lr{constructor(n,s,d,g){this.name=n,this.type=s,this._evaluate=d,this.args=g}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,s){const d=n[0],g=lr.definitions[d];if(!g)return s.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const _=Array.isArray(g)?g[0]:g.type,x=Array.isArray(g)?[[g[1],g[2]]]:g.overloads,k=x.filter(([I])=>!Array.isArray(I)||I.length===n.length-1);let E=null;for(const[I,R]of k){E=new ja(s.registry,s.path,null,s.scope);const B=[];let V=!1;for(let U=1;U<n.length;U++){const G=n[U],oe=Array.isArray(I)?I[U-1]:I.type,ne=E.parse(G,1+B.length,oe);if(!ne){V=!0;break}B.push(ne)}if(!V)if(Array.isArray(I)&&I.length!==B.length)E.error(`Expected ${I.length} arguments, but found ${B.length} instead.`);else{for(let U=0;U<B.length;U++){const G=Array.isArray(I)?I[U]:I.type,oe=B[U];E.concat(U+1).checkSubtype(G,oe.type)}if(E.errors.length===0)return new lr(d,_,R,B)}}if(k.length===1)s.errors.push(...E.errors);else{const I=(k.length?k:x).map(([B])=>{return V=B,Array.isArray(V)?`(${V.map(ir).join(", ")})`:`(${ir(V.type)}...)`;var V}).join(" | "),R=[];for(let B=1;B<n.length;B++){const V=s.parse(n[B],1+R.length);if(!V)return null;R.push(ir(V.type))}s.error(`Expected arguments of type ${I}, but found (${R.join(", ")}) instead.`)}return null}static register(n,s){lr.definitions=s;for(const d in s)n[d]=lr}}class ln{constructor(n,s,d){this.type=_o,this.locale=d,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const d=n[1];if(typeof d!="object"||Array.isArray(d))return s.error("Collator options argument must be an object.");const g=s.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,Et);if(!g)return null;const _=s.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,Et);if(!_)return null;let x=null;return d.locale&&(x=s.parse(d.locale,1,Mt),!x)?null:new ln(g,_,x)}evaluate(n){return new ae(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const wr=8192;function wn(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function Na(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function ks(a,n){const s=(180+a[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,g=Math.pow(2,n.z);return[Math.round(s*g*wr),Math.round(d*g*wr)]}function cr(a,n,s){const d=a[0]-n[0],g=a[1]-n[1],_=a[0]-s[0],x=a[1]-s[1];return d*x-_*g==0&&d*_<=0&&g*x<=0}function Tc(a,n){let s=!1;for(let x=0,k=n.length;x<k;x++){const E=n[x];for(let I=0,R=E.length;I<R-1;I++){if(cr(a,E[I],E[I+1]))return!1;(g=E[I])[1]>(d=a)[1]!=(_=E[I+1])[1]>d[1]&&d[0]<(_[0]-g[0])*(d[1]-g[1])/(_[1]-g[1])+g[0]&&(s=!s)}}var d,g,_;return s}function Ec(a,n){for(let s=0;s<n.length;s++)if(Tc(a,n[s]))return!0;return!1}function Uu(a,n,s,d){const g=d[0]-s[0],_=d[1]-s[1],x=(a[0]-s[0])*_-g*(a[1]-s[1]),k=(n[0]-s[0])*_-g*(n[1]-s[1]);return x>0&&k<0||x<0&&k>0}function ju(a,n,s){for(const I of s)for(let R=0;R<I.length-1;++R)if((k=[(x=I[R+1])[0]-(_=I[R])[0],x[1]-_[1]])[0]*(E=[(g=n)[0]-(d=a)[0],g[1]-d[1]])[1]-k[1]*E[0]!=0&&Uu(d,g,_,x)&&Uu(_,x,d,g))return!0;var d,g,_,x,k,E;return!1}function Cc(a,n){for(let s=0;s<a.length;++s)if(!Tc(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(ju(a[s],a[s+1],n))return!1;return!0}function xd(a,n){for(let s=0;s<n.length;s++)if(Cc(a,n[s]))return!0;return!1}function ma(a,n,s){const d=[];for(let g=0;g<a.length;g++){const _=[];for(let x=0;x<a[g].length;x++){const k=ks(a[g][x],s);wn(n,k),_.push(k)}d.push(_)}return d}function Ts(a,n,s){const d=[];for(let g=0;g<a.length;g++){const _=ma(a[g],n,s);d.push(_)}return d}function Gu(a,n,s,d){if(a[0]<s[0]||a[0]>s[2]){const g=.5*d;let _=a[0]-s[0]>g?-d:s[0]-a[0]>g?d:0;_===0&&(_=a[0]-s[2]>g?-d:s[2]-a[0]>g?d:0),a[0]+=_}wn(n,a)}function Zu(a,n,s,d){const g=Math.pow(2,d.z)*wr,_=[d.x*wr,d.y*wr],x=[];for(const k of a)for(const E of k){const I=[E.x+_[0],E.y+_[1]];Gu(I,n,s,g),x.push(I)}return x}function Ac(a,n,s,d){const g=Math.pow(2,d.z)*wr,_=[d.x*wr,d.y*wr],x=[];for(const E of a){const I=[];for(const R of E){const B=[R.x+_[0],R.y+_[1]];wn(n,B),I.push(B)}x.push(I)}if(n[2]-n[0]<=g/2){(k=n)[0]=k[1]=1/0,k[2]=k[3]=-1/0;for(const E of x)for(const I of E)Gu(I,n,s,g)}var k;return x}class ga{constructor(n,s){this.type=Et,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(Fe(n[1])){const d=n[1];if(d.type==="FeatureCollection")for(let g=0;g<d.features.length;++g){const _=d.features[g].geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new ga(d,d.features[g].geometry)}else if(d.type==="Feature"){const g=d.geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new ga(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new ga(d,d)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,d){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const k=ma(d.coordinates,_,x),E=Zu(s.geometry(),g,_,x);if(!Na(g,_))return!1;for(const I of E)if(!Tc(I,k))return!1}if(d.type==="MultiPolygon"){const k=Ts(d.coordinates,_,x),E=Zu(s.geometry(),g,_,x);if(!Na(g,_))return!1;for(const I of E)if(!Ec(I,k))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,d){const g=[1/0,1/0,-1/0,-1/0],_=[1/0,1/0,-1/0,-1/0],x=s.canonicalID();if(d.type==="Polygon"){const k=ma(d.coordinates,_,x),E=Ac(s.geometry(),g,_,x);if(!Na(g,_))return!1;for(const I of E)if(!Cc(I,k))return!1}if(d.type==="MultiPolygon"){const k=Ts(d.coordinates,_,x),E=Ac(s.geometry(),g,_,x);if(!Na(g,_))return!1;for(const I of E)if(!xd(I,k))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function Es(a){if(a instanceof lr&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof ga)return!1;let n=!0;return a.eachChild(s=>{n&&!Es(s)&&(n=!1)}),n}function Ua(a){if(a instanceof lr&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!Ua(s)&&(n=!1)}),n}function Cs(a,n){if(a instanceof lr&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(d=>{s&&!Cs(d,n)&&(s=!1)}),s}class vl{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const d=n[1];return s.scope.has(d)?new vl(d,s.scope.get(d)):s.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ja{constructor(n,s=[],d,g=new ii,_=[]){this.registry=n,this.path=s,this.key=s.map(x=>`[${x}]`).join(""),this.scope=g,this.errors=_,this.expectedType=d}parse(n,s,d,g,_={}){return s?this.concat(s,d,g)._parse(n,_):this._parse(n,_)}_parse(n,s){function d(g,_,x){return x==="assert"?new xt(_,[g]):x==="coerce"?new kt(_,[g]):g}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const g=n[0];if(typeof g!="string")return this.error(`Expression name must be a string, but found ${typeof g} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const _=this.registry[g];if(_){let x=_.parse(n,this);if(!x)return null;if(this.expectedType){const k=this.expectedType,E=x.type;if(k.kind!=="string"&&k.kind!=="number"&&k.kind!=="boolean"&&k.kind!=="object"&&k.kind!=="array"||E.kind!=="value")if(k.kind!=="color"&&k.kind!=="formatted"&&k.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string")if(k.kind!=="padding"||E.kind!=="value"&&E.kind!=="number"&&E.kind!=="array"){if(this.checkSubtype(k,E))return null}else x=d(x,k,s.typeAnnotation||"coerce");else x=d(x,k,s.typeAnnotation||"coerce");else x=d(x,k,s.typeAnnotation||"assert")}if(!(x instanceof at)&&x.type.kind!=="resolvedImage"&&Pc(x)){const k=new Wt;try{x=new at(x.type,x.evaluate(k))}catch(E){return this.error(E.message),null}}return x}return this.error(`Unknown expression "${g}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,d){const g=typeof n=="number"?this.path.concat(n):this.path,_=d?this.scope.concat(d):this.scope;return new ja(this.registry,g,s||null,_,this.errors)}error(n,...s){const d=`${this.key}${s.map(g=>`[${g}]`).join("")}`;this.errors.push(new ni(d,n))}checkSubtype(n,s){const d=sn(n,s);return d&&this.error(d),d}}function Pc(a){if(a instanceof vl)return Pc(a.boundExpression);if(a instanceof lr&&a.name==="error"||a instanceof ln||a instanceof ga)return!1;const n=a instanceof kt||a instanceof xt;let s=!0;return a.eachChild(d=>{s=n?s&&Pc(d):s&&d instanceof at}),!!s&&Es(a)&&Cs(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ga(a,n){const s=a.length-1;let d,g,_=0,x=s,k=0;for(;_<=x;)if(k=Math.floor((_+x)/2),d=a[k],g=a[k+1],d<=n){if(k===s||n<g)return k;_=k+1}else{if(!(d>n))throw new Ke("Input is not a number.");x=k-1}return 0}class As{constructor(n,s,d){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[g,_]of d)this.labels.push(g),this.outputs.push(_)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const d=s.parse(n[1],1,Ue);if(!d)return null;const g=[];let _=null;s.expectedType&&s.expectedType.kind!=="value"&&(_=s.expectedType);for(let x=1;x<n.length;x+=2){const k=x===1?-1/0:n[x],E=n[x+1],I=x,R=x+1;if(typeof k!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',I);if(g.length&&g[g.length-1][0]>=k)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',I);const B=s.parse(E,R,_);if(!B)return null;_=_||B.type,g.push([k,B])}return new As(_,d,g)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return d[0].evaluate(n);const _=s.length;return g>=s[_-1]?d[_-1].evaluate(n):d[Ga(s,g)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Cr(a,n,s){return a*(1-s)+n*s}var Ps=Object.freeze({__proto__:null,number:Cr,color:function(a,n,s){return new X(Cr(a.r,n.r,s),Cr(a.g,n.g,s),Cr(a.b,n.b,s),Cr(a.a,n.a,s))},array:function(a,n,s){return a.map((d,g)=>Cr(d,n[g],s))},padding:function(a,n,s){const d=a.values,g=n.values;return new se([Cr(d[0],g[0],s),Cr(d[1],g[1],s),Cr(d[2],g[2],s),Cr(d[3],g[3],s)])}});const Is=.95047,xl=1.08883,zs=4/29,Za=6/29,Wu=3*Za*Za,Hu=Math.PI/180,Ic=180/Math.PI;function bl(a){return a>.008856451679035631?Math.pow(a,1/3):a/Wu+zs}function vo(a){return a>Za?a*a*a:Wu*(a-zs)}function ya(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function zc(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Yt(a){const n=zc(a.r),s=zc(a.g),d=zc(a.b),g=bl((.4124564*n+.3575761*s+.1804375*d)/Is),_=bl((.2126729*n+.7151522*s+.072175*d)/1);return{l:116*_-16,a:500*(g-_),b:200*(_-bl((.0193339*n+.119192*s+.9503041*d)/xl)),alpha:a.a}}function qu(a){let n=(a.l+16)/116,s=isNaN(a.a)?n:n+a.a/500,d=isNaN(a.b)?n:n-a.b/200;return n=1*vo(n),s=Is*vo(s),d=xl*vo(d),new X(ya(3.2404542*s-1.5371385*n-.4985314*d),ya(-.969266*s+1.8760108*n+.041556*d),ya(.0556434*s-.2040259*n+1.0572252*d),a.alpha)}function Xu(a,n,s){const d=n-a;return a+s*(d>180||d<-180?d-360*Math.round(d/360):d)}const Ms={forward:Yt,reverse:qu,interpolate:function(a,n,s){return{l:Cr(a.l,n.l,s),a:Cr(a.a,n.a,s),b:Cr(a.b,n.b,s),alpha:Cr(a.alpha,n.alpha,s)}}},Ds={forward:function(a){const{l:n,a:s,b:d}=Yt(a),g=Math.atan2(d,s)*Ic;return{h:g<0?g+360:g,c:Math.sqrt(s*s+d*d),l:n,alpha:a.a}},reverse:function(a){const n=a.h*Hu,s=a.c;return qu({l:a.l,a:Math.cos(n)*s,b:Math.sin(n)*s,alpha:a.alpha})},interpolate:function(a,n,s){return{h:Xu(a.h,n.h,s),c:Cr(a.c,n.c,s),l:Cr(a.l,n.l,s),alpha:Cr(a.alpha,n.alpha,s)}}};var Mc=Object.freeze({__proto__:null,lab:Ms,hcl:Ds});class oi{constructor(n,s,d,g,_){this.type=n,this.operator=s,this.interpolation=d,this.input=g,this.labels=[],this.outputs=[];for(const[x,k]of _)this.labels.push(x),this.outputs.push(k)}static interpolationFactor(n,s,d,g){let _=0;if(n.name==="exponential")_=Q(s,n.base,d,g);else if(n.name==="linear")_=Q(s,1,d,g);else if(n.name==="cubic-bezier"){const x=n.controlPoints;_=new b(x[0],x[1],x[2],x[3]).solve(Q(s,1,d,g))}return _}static parse(n,s){let[d,g,_,...x]=n;if(!Array.isArray(g)||g.length===0)return s.error("Expected an interpolation type expression.",1);if(g[0]==="linear")g={name:"linear"};else if(g[0]==="exponential"){const I=g[1];if(typeof I!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);g={name:"exponential",base:I}}else{if(g[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(g[0])}`,1,0);{const I=g.slice(1);if(I.length!==4||I.some(R=>typeof R!="number"||R<0||R>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);g={name:"cubic-bezier",controlPoints:I}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(_=s.parse(_,2,Ue),!_)return null;const k=[];let E=null;d==="interpolate-hcl"||d==="interpolate-lab"?E=mn:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let I=0;I<x.length;I+=2){const R=x[I],B=x[I+1],V=I+3,U=I+4;if(typeof R!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(k.length&&k[k.length-1][0]>=R)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',V);const G=s.parse(B,U,E);if(!G)return null;E=E||G.type,k.push([R,G])}return E.kind==="number"||E.kind==="color"||E.kind==="padding"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new oi(E,d,g,_,k):s.error(`Type ${ir(E)} is not interpolatable.`)}evaluate(n){const s=this.labels,d=this.outputs;if(s.length===1)return d[0].evaluate(n);const g=this.input.evaluate(n);if(g<=s[0])return d[0].evaluate(n);const _=s.length;if(g>=s[_-1])return d[_-1].evaluate(n);const x=Ga(s,g),k=oi.interpolationFactor(this.interpolation,g,s[x],s[x+1]),E=d[x].evaluate(n),I=d[x+1].evaluate(n);return this.operator==="interpolate"?Ps[this.type.kind.toLowerCase()](E,I,k):this.operator==="interpolate-hcl"?Ds.reverse(Ds.interpolate(Ds.forward(E),Ds.forward(I),k)):Ms.reverse(Ms.interpolate(Ms.forward(E),Ms.forward(I),k))}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Q(a,n,s,d){const g=d-s,_=a-s;return g===0?0:n===1?_/g:(Math.pow(n,_)-1)/(Math.pow(n,g)-1)}class de{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let d=null;const g=s.expectedType;g&&g.kind!=="value"&&(d=g);const _=[];for(const k of n.slice(1)){const E=s.parse(k,1+_.length,d,void 0,{typeAnnotation:"omit"});if(!E)return null;d=d||E.type,_.push(E)}if(!d)throw new Error("No output type");const x=g&&_.some(k=>sn(g,k.type));return new de(x?St:d,_)}evaluate(n){let s,d=null,g=0;for(const _ of this.args)if(g++,d=_.evaluate(n),d&&d instanceof he&&!d.available&&(s||(s=d.name),d=null,g===this.args.length&&(d=s)),d!==null)break;return d}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class Te{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const d=[];for(let _=1;_<n.length-1;_+=2){const x=n[_];if(typeof x!="string")return s.error(`Expected string, but found ${typeof x} instead.`,_);if(/[^a-zA-Z0-9_]/.test(x))return s.error("Variable names must contain only alphanumeric characters or '_'.",_);const k=s.parse(n[_+1],_+1);if(!k)return null;d.push([x,k])}const g=s.parse(n[n.length-1],n.length-1,s.expectedType,d);return g?new Te(d,g):null}outputDefined(){return this.result.outputDefined()}}class st{constructor(n,s,d){this.type=n,this.index=s,this.input=d}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,Ue),g=s.parse(n[2],2,zn(s.expectedType||St));return d&&g?new st(g.type.itemType,d,g):null}evaluate(n){const s=this.index.evaluate(n),d=this.input.evaluate(n);if(s<0)throw new Ke(`Array index out of bounds: ${s} < 0.`);if(s>=d.length)throw new Ke(`Array index out of bounds: ${s} > ${d.length-1}.`);if(s!==Math.floor(s))throw new Ke(`Array index must be an integer, but found ${s} instead.`);return d[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class Ht{constructor(n,s){this.type=Et,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,St),g=s.parse(n[2],2,St);return d&&g?da(d.type,[Et,Mt,Ue,On,St])?new Ht(d,g):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ir(d.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!d)return!1;if(!fa(s,["boolean","string","number","null"]))throw new Ke(`Expected first argument to be of type boolean, string, number or null, but found ${ir(Ee(s))} instead.`);if(!fa(d,["string","array"]))throw new Ke(`Expected second argument to be of type array or string, but found ${ir(Ee(d))} instead.`);return d.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class or{constructor(n,s,d){this.type=Ue,this.needle=n,this.haystack=s,this.fromIndex=d}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,St),g=s.parse(n[2],2,St);if(!d||!g)return null;if(!da(d.type,[Et,Mt,Ue,On,St]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${ir(d.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Ue);return _?new or(d,g,_):null}return new or(d,g)}evaluate(n){const s=this.needle.evaluate(n),d=this.haystack.evaluate(n);if(!fa(s,["boolean","string","number","null"]))throw new Ke(`Expected first argument to be of type boolean, string, number or null, but found ${ir(Ee(s))} instead.`);if(!fa(d,["string","array"]))throw new Ke(`Expected second argument to be of type array or string, but found ${ir(Ee(d))} instead.`);if(this.fromIndex){const g=this.fromIndex.evaluate(n);return d.indexOf(s,g)}return d.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class Sr{constructor(n,s,d,g,_,x){this.inputType=n,this.type=s,this.input=d,this.cases=g,this.outputs=_,this.otherwise=x}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let d,g;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);const _={},x=[];for(let I=2;I<n.length-1;I+=2){let R=n[I];const B=n[I+1];Array.isArray(R)||(R=[R]);const V=s.concat(I);if(R.length===0)return V.error("Expected at least one branch label.");for(const G of R){if(typeof G!="number"&&typeof G!="string")return V.error("Branch labels must be numbers or strings.");if(typeof G=="number"&&Math.abs(G)>Number.MAX_SAFE_INTEGER)return V.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof G=="number"&&Math.floor(G)!==G)return V.error("Numeric branch labels must be integer values.");if(d){if(V.checkSubtype(d,Ee(G)))return null}else d=Ee(G);if(_[String(G)]!==void 0)return V.error("Branch labels must be unique.");_[String(G)]=x.length}const U=s.parse(B,I,g);if(!U)return null;g=g||U.type,x.push(U)}const k=s.parse(n[1],1,St);if(!k)return null;const E=s.parse(n[n.length-1],n.length-1,g);return E?k.type.kind!=="value"&&s.concat(1).checkSubtype(d,k.type)?null:new Sr(d,g,k,_,x,E):null}evaluate(n){const s=this.input.evaluate(n);return(Ee(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class Ut{constructor(n,s,d){this.type=n,this.branches=s,this.otherwise=d}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const g=[];for(let x=1;x<n.length-1;x+=2){const k=s.parse(n[x],x,Et);if(!k)return null;const E=s.parse(n[x+1],x+1,d);if(!E)return null;g.push([k,E]),d=d||E.type}const _=s.parse(n[n.length-1],n.length-1,d);if(!_)return null;if(!d)throw new Error("Can't infer output type");return new Ut(d,g,_)}evaluate(n){for(const[s,d]of this.branches)if(s.evaluate(n))return d.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,d]of this.branches)n(s),n(d);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class mr{constructor(n,s,d,g){this.type=n,this.input=s,this.beginIndex=d,this.endIndex=g}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const d=s.parse(n[1],1,St),g=s.parse(n[2],2,Ue);if(!d||!g)return null;if(!da(d.type,[zn(St),Mt,St]))return s.error(`Expected first argument to be of type array or string, but found ${ir(d.type)} instead`);if(n.length===4){const _=s.parse(n[3],3,Ue);return _?new mr(d.type,d,g,_):null}return new mr(d.type,d,g)}evaluate(n){const s=this.input.evaluate(n),d=this.beginIndex.evaluate(n);if(!fa(s,["string","array"]))throw new Ke(`Expected first argument to be of type array or string, but found ${ir(Ee(s))} instead.`);if(this.endIndex){const g=this.endIndex.evaluate(n);return s.slice(d,g)}return s.slice(d)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function ai(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Vn(a,n,s,d){return d.compare(n,s)===0}function Qi(a,n,s){const d=a!=="=="&&a!=="!=";return class YI{constructor(_,x,k){this.type=Et,this.lhs=_,this.rhs=x,this.collator=k,this.hasUntypedArgument=_.type.kind==="value"||x.type.kind==="value"}static parse(_,x){if(_.length!==3&&_.length!==4)return x.error("Expected two or three arguments.");const k=_[0];let E=x.parse(_[1],1,St);if(!E)return null;if(!ai(k,E.type))return x.concat(1).error(`"${k}" comparisons are not supported for type '${ir(E.type)}'.`);let I=x.parse(_[2],2,St);if(!I)return null;if(!ai(k,I.type))return x.concat(2).error(`"${k}" comparisons are not supported for type '${ir(I.type)}'.`);if(E.type.kind!==I.type.kind&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error(`Cannot compare types '${ir(E.type)}' and '${ir(I.type)}'.`);d&&(E.type.kind==="value"&&I.type.kind!=="value"?E=new xt(I.type,[E]):E.type.kind!=="value"&&I.type.kind==="value"&&(I=new xt(E.type,[I])));let R=null;if(_.length===4){if(E.type.kind!=="string"&&I.type.kind!=="string"&&E.type.kind!=="value"&&I.type.kind!=="value")return x.error("Cannot use collator to compare non-string types.");if(R=x.parse(_[3],3,_o),!R)return null}return new YI(E,I,R)}evaluate(_){const x=this.lhs.evaluate(_),k=this.rhs.evaluate(_);if(d&&this.hasUntypedArgument){const E=Ee(x),I=Ee(k);if(E.kind!==I.kind||E.kind!=="string"&&E.kind!=="number")throw new Ke(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${E.kind}, ${I.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const E=Ee(x),I=Ee(k);if(E.kind!=="string"||I.kind!=="string")return n(_,x,k)}return this.collator?s(_,x,k,this.collator.evaluate(_)):n(_,x,k)}eachChild(_){_(this.lhs),_(this.rhs),this.collator&&_(this.collator)}outputDefined(){return!0}}}const Dc=Qi("==",function(a,n,s){return n===s},Vn),Rc=Qi("!=",function(a,n,s){return n!==s},function(a,n,s,d){return!Vn(0,n,s,d)}),Ku=Qi("<",function(a,n,s){return n<s},function(a,n,s,d){return d.compare(n,s)<0}),E_=Qi(">",function(a,n,s){return n>s},function(a,n,s,d){return d.compare(n,s)>0}),C_=Qi("<=",function(a,n,s){return n<=s},function(a,n,s,d){return d.compare(n,s)<=0}),A_=Qi(">=",function(a,n,s){return n>=s},function(a,n,s,d){return d.compare(n,s)>=0});class bd{constructor(n,s,d,g,_){this.type=Mt,this.number=n,this.locale=s,this.currency=d,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const d=s.parse(n[1],1,Ue);if(!d)return null;const g=n[2];if(typeof g!="object"||Array.isArray(g))return s.error("NumberFormat options argument must be an object.");let _=null;if(g.locale&&(_=s.parse(g.locale,1,Mt),!_))return null;let x=null;if(g.currency&&(x=s.parse(g.currency,1,Mt),!x))return null;let k=null;if(g["min-fraction-digits"]&&(k=s.parse(g["min-fraction-digits"],1,Ue),!k))return null;let E=null;return g["max-fraction-digits"]&&(E=s.parse(g["max-fraction-digits"],1,Ue),!E)?null:new bd(d,_,x,k,E)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class Yu{constructor(n){this.type=zr,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const d=n[1];if(!Array.isArray(d)&&typeof d=="object")return s.error("First argument must be an image or text section.");const g=[];let _=!1;for(let x=1;x<=n.length-1;++x){const k=n[x];if(_&&typeof k=="object"&&!Array.isArray(k)){_=!1;let E=null;if(k["font-scale"]&&(E=s.parse(k["font-scale"],1,Ue),!E))return null;let I=null;if(k["text-font"]&&(I=s.parse(k["text-font"],1,zn(Mt)),!I))return null;let R=null;if(k["text-color"]&&(R=s.parse(k["text-color"],1,mn),!R))return null;const B=g[g.length-1];B.scale=E,B.font=I,B.textColor=R}else{const E=s.parse(n[x],1,St);if(!E)return null;const I=E.type.kind;if(I!=="string"&&I!=="value"&&I!=="null"&&I!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");_=!0,g.push({content:E,scale:null,font:null,textColor:null})}}return new Yu(g)}evaluate(n){return new le(this.sections.map(s=>{const d=s.content.evaluate(n);return Ee(d)===Hr?new ue("",d,null,null,null):new ue(ot(d),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}}class wd{constructor(n){this.type=Hr,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const d=s.parse(n[1],1,Mt);return d?new wd(d):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),d=he.fromString(s);return d&&n.availableImages&&(d.available=n.availableImages.indexOf(s)>-1),d}eachChild(n){n(this.input)}outputDefined(){return!1}}class Sd{constructor(n){this.type=Ue,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const d=s.parse(n[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${ir(d.type)} instead.`):new Sd(d):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new Ke(`Expected value to be of type string or array, but found ${ir(Ee(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const wl={"==":Dc,"!=":Rc,">":E_,"<":Ku,">=":A_,"<=":C_,array:xt,at:st,boolean:xt,case:Ut,coalesce:de,collator:ln,format:Yu,image:wd,in:Ht,"index-of":or,interpolate:oi,"interpolate-hcl":oi,"interpolate-lab":oi,length:Sd,let:Te,literal:at,match:Sr,number:xt,"number-format":bd,object:xt,slice:mr,step:As,string:xt,"to-boolean":kt,"to-color":kt,"to-number":kt,"to-string":kt,var:vl,within:ga};function fm(a,[n,s,d,g]){n=n.evaluate(a),s=s.evaluate(a),d=d.evaluate(a);const _=g?g.evaluate(a):1,x=Ce(n,s,d,_);if(x)throw new Ke(x);return new X(n/255*_,s/255*_,d/255*_,_)}function pm(a,n){return a in n}function Ju(a,n){const s=n[a];return s===void 0?null:s}function Rs(a){return{type:a}}function mm(a){return{result:"success",value:a}}function Sl(a){return{result:"error",value:a}}function Mr(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function gm(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function jt(a){return!!a.expression&&a.expression.interpolated}function tr(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Ar(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Rr(a){return a}function Lc(a,n){const s=n.type==="color",d=a.stops&&typeof a.stops[0][0]=="object",g=d||!(d||a.property!==void 0),_=a.type||(jt(n)?"exponential":"interval");if(s||n.type==="padding"){const I=s?X.parse:se.parse;(a=vi({},a)).stops&&(a.stops=a.stops.map(R=>[R[0],I(R[1])])),a.default=I(a.default?a.default:n.default)}if(a.colorSpace&&a.colorSpace!=="rgb"&&!Mc[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let x,k,E;if(_==="exponential")x=ym;else if(_==="interval")x=I_;else if(_==="categorical"){x=P_,k=Object.create(null);for(const I of a.stops)k[I[0]]=I[1];E=typeof a.stops[0][0]}else{if(_!=="identity")throw new Error(`Unknown function type "${_}"`);x=z_}if(d){const I={},R=[];for(let U=0;U<a.stops.length;U++){const G=a.stops[U],oe=G[0].zoom;I[oe]===void 0&&(I[oe]={zoom:oe,type:a.type,property:a.property,default:a.default,stops:[]},R.push(oe)),I[oe].stops.push([G[0].value,G[1]])}const B=[];for(const U of R)B.push([I[U].zoom,Lc(I[U],n)]);const V={name:"linear"};return{kind:"composite",interpolationType:V,interpolationFactor:oi.interpolationFactor.bind(void 0,V),zoomStops:B.map(U=>U[0]),evaluate:({zoom:U},G)=>ym({stops:B,base:a.base},n,U).evaluate(U,G)}}if(g){const I=_==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:I,interpolationFactor:oi.interpolationFactor.bind(void 0,I),zoomStops:a.stops.map(R=>R[0]),evaluate:({zoom:R})=>x(a,n,R,k,E)}}return{kind:"source",evaluate(I,R){const B=R&&R.properties?R.properties[a.property]:void 0;return B===void 0?kl(a.default,n.default):x(a,n,B,k,E)}}}function kl(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function P_(a,n,s,d,g){return kl(typeof s===g?d[s]:void 0,a.default,n.default)}function I_(a,n,s){if(tr(s)!=="number")return kl(a.default,n.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const g=Ga(a.stops.map(_=>_[0]),s);return a.stops[g][1]}function ym(a,n,s){const d=a.base!==void 0?a.base:1;if(tr(s)!=="number")return kl(a.default,n.default);const g=a.stops.length;if(g===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[g-1][0])return a.stops[g-1][1];const _=Ga(a.stops.map(R=>R[0]),s),x=function(R,B,V,U){const G=U-V,oe=R-V;return G===0?0:B===1?oe/G:(Math.pow(B,oe)-1)/(Math.pow(B,G)-1)}(s,d,a.stops[_][0],a.stops[_+1][0]),k=a.stops[_][1],E=a.stops[_+1][1];let I=Ps[n.type]||Rr;if(a.colorSpace&&a.colorSpace!=="rgb"){const R=Mc[a.colorSpace];I=(B,V)=>R.reverse(R.interpolate(R.forward(B),R.forward(V),x))}return typeof k.evaluate=="function"?{evaluate(...R){const B=k.evaluate.apply(void 0,R),V=E.evaluate.apply(void 0,R);if(B!==void 0&&V!==void 0)return I(B,V,x)}}:I(k,E,x)}function z_(a,n,s){switch(n.type){case"color":s=X.parse(s);break;case"formatted":s=le.fromString(s.toString());break;case"resolvedImage":s=he.fromString(s.toString());break;case"padding":s=se.parse(s);break;default:tr(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0)}return kl(s,a.default,n.default)}lr.register(wl,{error:[{kind:"error"},[Mt],(a,[n])=>{throw new Ke(n.evaluate(a))}],typeof:[Mt,[St],(a,[n])=>ir(Ee(n.evaluate(a)))],"to-rgba":[zn(Ue,4),[mn],(a,[n])=>n.evaluate(a).toArray()],rgb:[mn,[Ue,Ue,Ue],fm],rgba:[mn,[Ue,Ue,Ue,Ue],fm],has:{type:Et,overloads:[[[Mt],(a,[n])=>pm(n.evaluate(a),a.properties())],[[Mt,yo],(a,[n,s])=>pm(n.evaluate(a),s.evaluate(a))]]},get:{type:St,overloads:[[[Mt],(a,[n])=>Ju(n.evaluate(a),a.properties())],[[Mt,yo],(a,[n,s])=>Ju(n.evaluate(a),s.evaluate(a))]]},"feature-state":[St,[Mt],(a,[n])=>Ju(n.evaluate(a),a.featureState||{})],properties:[yo,[],a=>a.properties()],"geometry-type":[Mt,[],a=>a.geometryType()],id:[St,[],a=>a.id()],zoom:[Ue,[],a=>a.globals.zoom],"heatmap-density":[Ue,[],a=>a.globals.heatmapDensity||0],"line-progress":[Ue,[],a=>a.globals.lineProgress||0],accumulated:[St,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Ue,Rs(Ue),(a,n)=>{let s=0;for(const d of n)s+=d.evaluate(a);return s}],"*":[Ue,Rs(Ue),(a,n)=>{let s=1;for(const d of n)s*=d.evaluate(a);return s}],"-":{type:Ue,overloads:[[[Ue,Ue],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[Ue],(a,[n])=>-n.evaluate(a)]]},"/":[Ue,[Ue,Ue],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[Ue,[Ue,Ue],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[Ue,[],()=>Math.LN2],pi:[Ue,[],()=>Math.PI],e:[Ue,[],()=>Math.E],"^":[Ue,[Ue,Ue],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[Ue,[Ue],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[Ue,[Ue],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[Ue,[Ue],(a,[n])=>Math.log(n.evaluate(a))],log2:[Ue,[Ue],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[Ue,[Ue],(a,[n])=>Math.sin(n.evaluate(a))],cos:[Ue,[Ue],(a,[n])=>Math.cos(n.evaluate(a))],tan:[Ue,[Ue],(a,[n])=>Math.tan(n.evaluate(a))],asin:[Ue,[Ue],(a,[n])=>Math.asin(n.evaluate(a))],acos:[Ue,[Ue],(a,[n])=>Math.acos(n.evaluate(a))],atan:[Ue,[Ue],(a,[n])=>Math.atan(n.evaluate(a))],min:[Ue,Rs(Ue),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[Ue,Rs(Ue),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[Ue,[Ue],(a,[n])=>Math.abs(n.evaluate(a))],round:[Ue,[Ue],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[Ue,[Ue],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[Ue,[Ue],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[Et,[Mt,St],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[Et,[St],(a,[n])=>a.id()===n.value],"filter-type-==":[Et,[Mt],(a,[n])=>a.geometryType()===n.value],"filter-<":[Et,[Mt,St],(a,[n,s])=>{const d=a.properties()[n.value],g=s.value;return typeof d==typeof g&&d<g}],"filter-id-<":[Et,[St],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s<d}],"filter->":[Et,[Mt,St],(a,[n,s])=>{const d=a.properties()[n.value],g=s.value;return typeof d==typeof g&&d>g}],"filter-id->":[Et,[St],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s>d}],"filter-<=":[Et,[Mt,St],(a,[n,s])=>{const d=a.properties()[n.value],g=s.value;return typeof d==typeof g&&d<=g}],"filter-id-<=":[Et,[St],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s<=d}],"filter->=":[Et,[Mt,St],(a,[n,s])=>{const d=a.properties()[n.value],g=s.value;return typeof d==typeof g&&d>=g}],"filter-id->=":[Et,[St],(a,[n])=>{const s=a.id(),d=n.value;return typeof s==typeof d&&s>=d}],"filter-has":[Et,[St],(a,[n])=>n.value in a.properties()],"filter-has-id":[Et,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[Et,[zn(Mt)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[Et,[zn(St)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[Et,[Mt,zn(St)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[Et,[Mt,zn(St)],(a,[n,s])=>function(d,g,_,x){for(;_<=x;){const k=_+x>>1;if(g[k]===d)return!0;g[k]>d?x=k-1:_=k+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:Et,overloads:[[[Et,Et],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[Rs(Et),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:Et,overloads:[[[Et,Et],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[Rs(Et),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[Et,[Et],(a,[n])=>!n.evaluate(a)],"is-supported-script":[Et,[Mt],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Mt,[Mt],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Mt,[Mt],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Mt,Rs(St),(a,n)=>n.map(s=>ot(s.evaluate(a))).join("")],"resolved-locale":[Mt,[_o],(a,[n])=>n.evaluate(a).resolvedLocale()]});class Qu{constructor(n,s){this.expression=n,this._warningHistory={},this._evaluator=new Wt,this._defaultValue=s?function(d){return d.type==="color"&&Ar(d.default)?new X(0,0,0,0):d.type==="color"?X.parse(d.default)||null:d.type==="padding"?se.parse(d.default)||null:d.default===void 0?null:d.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,d,g,_,x){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=d,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x,this.expression.evaluate(this._evaluator)}evaluate(n,s,d,g,_,x){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=d||null,this._evaluator.canonical=g,this._evaluator.availableImages=_||null,this._evaluator.formattedSection=x||null;try{const k=this.expression.evaluate(this._evaluator);if(k==null||typeof k=="number"&&k!=k)return this._defaultValue;if(this._enumValues&&!(k in this._enumValues))throw new Ke(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(k)} instead.`);return k}catch(k){return this._warningHistory[k.message]||(this._warningHistory[k.message]=!0,typeof console<"u"&&console.warn(k.message)),this._defaultValue}}}function Bc(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in wl}function Fc(a,n){const s=new ja(wl,[],n?function(g){const _={color:mn,string:Mt,number:Ue,enum:Mt,boolean:Et,formatted:zr,padding:$a,resolvedImage:Hr};return g.type==="array"?zn(_[g.value]||St,g.length):_[g.type]}(n):void 0),d=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?mm(new Qu(d,n)):Sl(s.errors)}class $c{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!Ua(s.expression)}evaluateWithoutErrorHandling(n,s,d,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,g,_,x)}evaluate(n,s,d,g,_,x){return this._styleExpression.evaluate(n,s,d,g,_,x)}}class kd{constructor(n,s,d,g){this.kind=n,this.zoomStops=d,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!Ua(s.expression),this.interpolationType=g}evaluateWithoutErrorHandling(n,s,d,g,_,x){return this._styleExpression.evaluateWithoutErrorHandling(n,s,d,g,_,x)}evaluate(n,s,d,g,_,x){return this._styleExpression.evaluate(n,s,d,g,_,x)}interpolationFactor(n,s,d){return this.interpolationType?oi.interpolationFactor(this.interpolationType,n,s,d):0}}function _m(a,n){const s=Fc(a,n);if(s.result==="error")return s;const d=s.value.expression,g=Es(d);if(!g&&!Mr(n))return Sl([new ni("","data expressions not supported")]);const _=Cs(d,["zoom"]);if(!_&&!gm(n))return Sl([new ni("","zoom expressions not supported")]);const x=th(d);return x||_?x instanceof ni?Sl([x]):x instanceof oi&&!jt(n)?Sl([new ni("",'"interpolate" expressions cannot be used with this property')]):mm(x?new kd(g?"camera":"composite",s.value,x.labels,x instanceof oi?x.interpolation:void 0):new $c(g?"constant":"source",s.value)):Sl([new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class eh{constructor(n,s){this._parameters=n,this._specification=s,vi(this,Lc(this._parameters,this._specification))}static deserialize(n){return new eh(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function th(a){let n=null;if(a instanceof Te)n=th(a.result);else if(a instanceof de){for(const s of a.args)if(n=th(s),n)break}else(a instanceof As||a instanceof oi)&&a.input instanceof lr&&a.input.name==="zoom"&&(n=a);return n instanceof ni||a.eachChild(s=>{const d=th(s);d instanceof ni?n=d:!n&&d?n=new ni("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&d&&n!==d&&(n=new ni("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function xo(a){const n=a.key,s=a.value,d=a.valueSpec||{},g=a.objectElementValidators||{},_=a.style,x=a.styleSpec;let k=[];const E=tr(s);if(E!=="object")return[new We(n,s,`object expected, ${E} found`)];for(const I in s){const R=I.split(".")[0],B=d[R]||d["*"];let V;if(g[R])V=g[R];else if(d[R])V=Mi;else if(g["*"])V=g["*"];else{if(!d["*"]){k.push(new We(n,s[I],`unknown property "${I}"`));continue}V=Mi}k=k.concat(V({key:(n&&`${n}.`)+I,value:s[I],valueSpec:B,style:_,styleSpec:x,object:s,objectKey:I},s))}for(const I in d)g[I]||d[I].required&&d[I].default===void 0&&s[I]===void 0&&k.push(new We(n,s,`missing required property "${I}"`));return k}function vm(a){const n=a.value,s=a.valueSpec,d=a.style,g=a.styleSpec,_=a.key,x=a.arrayElementValidator||Mi;if(tr(n)!=="array")return[new We(_,n,`array expected, ${tr(n)} found`)];if(s.length&&n.length!==s.length)return[new We(_,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new We(_,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let k={type:s.value,values:s.values};g.$version<7&&(k.function=s.function),tr(s.value)==="object"&&(k=s.value);let E=[];for(let I=0;I<n.length;I++)E=E.concat(x({array:n,arrayIndex:I,value:n[I],valueSpec:k,style:d,styleSpec:g,key:`${_}[${I}]`}));return E}function Td(a){const n=a.key,s=a.value,d=a.valueSpec;let g=tr(s);return g==="number"&&s!=s&&(g="NaN"),g!=="number"?[new We(n,s,`number expected, ${g} found`)]:"minimum"in d&&s<d.minimum?[new We(n,s,`${s} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&s>d.maximum?[new We(n,s,`${s} is greater than the maximum value ${d.maximum}`)]:[]}function xm(a){const n=a.valueSpec,s=Nt(a.value.type);let d,g,_,x={};const k=s!=="categorical"&&a.value.property===void 0,E=!k,I=tr(a.value.stops)==="array"&&tr(a.value.stops[0])==="array"&&tr(a.value.stops[0][0])==="object",R=xo({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(U){if(s==="identity")return[new We(U.key,U.value,'identity function may not have a "stops" property')];let G=[];const oe=U.value;return G=G.concat(vm({key:U.key,value:oe,valueSpec:U.valueSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:B})),tr(oe)==="array"&&oe.length===0&&G.push(new We(U.key,oe,"array must have at least one stop")),G},default:function(U){return Mi({key:U.key,value:U.value,valueSpec:n,style:U.style,styleSpec:U.styleSpec})}}});return s==="identity"&&k&&R.push(new We(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||R.push(new We(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!jt(a.valueSpec)&&R.push(new We(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(E&&!Mr(a.valueSpec)?R.push(new We(a.key,a.value,"property functions not supported")):k&&!gm(a.valueSpec)&&R.push(new We(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!I||a.value.property!==void 0||R.push(new We(a.key,a.value,'"property" property is required')),R;function B(U){let G=[];const oe=U.value,ne=U.key;if(tr(oe)!=="array")return[new We(ne,oe,`array expected, ${tr(oe)} found`)];if(oe.length!==2)return[new We(ne,oe,`array length 2 expected, length ${oe.length} found`)];if(I){if(tr(oe[0])!=="object")return[new We(ne,oe,`object expected, ${tr(oe[0])} found`)];if(oe[0].zoom===void 0)return[new We(ne,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new We(ne,oe,"object stop key must have value")];if(_&&_>Nt(oe[0].zoom))return[new We(ne,oe[0].zoom,"stop zoom values must appear in ascending order")];Nt(oe[0].zoom)!==_&&(_=Nt(oe[0].zoom),g=void 0,x={}),G=G.concat(xo({key:`${ne}[0]`,value:oe[0],valueSpec:{zoom:{}},style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Td,value:V}}))}else G=G.concat(V({key:`${ne}[0]`,value:oe[0],valueSpec:{},style:U.style,styleSpec:U.styleSpec},oe));return Bc(ri(oe[1]))?G.concat([new We(`${ne}[1]`,oe[1],"expressions are not allowed in function stops.")]):G.concat(Mi({key:`${ne}[1]`,value:oe[1],valueSpec:n,style:U.style,styleSpec:U.styleSpec}))}function V(U,G){const oe=tr(U.value),ne=Nt(U.value),ye=U.value!==null?U.value:G;if(d){if(oe!==d)return[new We(U.key,ye,`${oe} stop domain type must match previous stop domain type ${d}`)]}else d=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new We(U.key,ye,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&s!=="categorical"){let ke=`number expected, ${oe} found`;return Mr(n)&&s===void 0&&(ke+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new We(U.key,ye,ke)]}return s!=="categorical"||oe!=="number"||isFinite(ne)&&Math.floor(ne)===ne?s!=="categorical"&&oe==="number"&&g!==void 0&&ne<g?[new We(U.key,ye,"stop domain values must appear in ascending order")]:(g=ne,s==="categorical"&&ne in x?[new We(U.key,ye,"stop domain values must be unique")]:(x[ne]=!0,[])):[new We(U.key,ye,`integer expected, found ${ne}`)]}}function Ls(a){const n=(a.expressionContext==="property"?_m:Fc)(ri(a.value),a.valueSpec);if(n.result==="error")return n.value.map(d=>new We(`${a.key}${d.key}`,a.value,d.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new We(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!Ua(s))return[new We(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter"&&!Ua(s))return[new We(a.key,a.value,'"feature-state" data expressions are not supported with filters.')];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Cs(s,["zoom","feature-state"]))return[new We(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!Es(s))return[new We(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Oc(a){const n=a.key,s=a.value,d=a.valueSpec,g=[];return Array.isArray(d.values)?d.values.indexOf(Nt(s))===-1&&g.push(new We(n,s,`expected one of [${d.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(d.values).indexOf(Nt(s))===-1&&g.push(new We(n,s,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(s)} found`)),g}function Tl(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!Tl(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const M_={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function rh(a){if(a==null)return{filter:()=>!0,needGeometry:!1};Tl(a)||(a=Vc(a));const n=Fc(a,M_);if(n.result==="error")throw new Error(n.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,d,g)=>n.value.evaluate(s,d,{},g),needGeometry:wm(a)}}function bm(a,n){return a<n?-1:a>n?1:0}function wm(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(wm(a[n]))return!0;return!1}function Vc(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Ed(a[1],a[2],"=="):n==="!="?El(Ed(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Ed(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(Vc))):n==="all"?["all"].concat(a.slice(1).map(Vc)):n==="none"?["all"].concat(a.slice(1).map(Vc).map(El)):n==="in"?nh(a[1],a.slice(2)):n==="!in"?El(nh(a[1],a.slice(2))):n==="has"?Nc(a[1]):n==="!has"?El(Nc(a[1])):n!=="within"||a;var s}function Ed(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function nh(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(bm)]]:["filter-in-small",a,["literal",n]]}}function Nc(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function El(a){return["!",a]}function Uc(a){return Tl(ri(a.value))?Ls(vi({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Sm(a)}function Sm(a){const n=a.value,s=a.key;if(tr(n)!=="array")return[new We(s,n,`array expected, ${tr(n)} found`)];const d=a.styleSpec;let g,_=[];if(n.length<1)return[new We(s,n,"filter array must have at least 1 element")];switch(_=_.concat(Oc({key:`${s}[0]`,value:n[0],valueSpec:d.filter_operator,style:a.style,styleSpec:a.styleSpec})),Nt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Nt(n[1])==="$type"&&_.push(new We(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&_.push(new We(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(g=tr(n[1]),g!=="string"&&_.push(new We(`${s}[1]`,n[1],`string expected, ${g} found`)));for(let x=2;x<n.length;x++)g=tr(n[x]),Nt(n[1])==="$type"?_=_.concat(Oc({key:`${s}[${x}]`,value:n[x],valueSpec:d.geometry_type,style:a.style,styleSpec:a.styleSpec})):g!=="string"&&g!=="number"&&g!=="boolean"&&_.push(new We(`${s}[${x}]`,n[x],`string, number, or boolean expected, ${g} found`));break;case"any":case"all":case"none":for(let x=1;x<n.length;x++)_=_.concat(Sm({key:`${s}[${x}]`,value:n[x],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":g=tr(n[1]),n.length!==2?_.push(new We(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="string"&&_.push(new We(`${s}[1]`,n[1],`string expected, ${g} found`));break;case"within":g=tr(n[1]),n.length!==2?_.push(new We(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):g!=="object"&&_.push(new We(`${s}[1]`,n[1],`object expected, ${g} found`))}return _}function jc(a,n){const s=a.key,d=a.style,g=a.styleSpec,_=a.value,x=a.objectKey,k=g[`${n}_${a.layerType}`];if(!k)return[];const E=x.match(/^(.*)-transition$/);if(n==="paint"&&E&&k[E[1]]&&k[E[1]].transition)return Mi({key:s,value:_,valueSpec:g.transition,style:d,styleSpec:g});const I=a.valueSpec||k[x];if(!I)return[new We(s,_,`unknown property "${x}"`)];let R;if(tr(_)==="string"&&Mr(I)&&!I.tokens&&(R=/^{([^}]+)}$/.exec(_)))return[new We(s,_,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];const B=[];return a.layerType==="symbol"&&(x==="text-field"&&d&&!d.glyphs&&B.push(new We(s,_,'use of "text-field" requires a style "glyphs" property')),x==="text-font"&&Ar(ri(_))&&Nt(_.type)==="identity"&&B.push(new We(s,_,'"text-font" does not support identity functions'))),B.concat(Mi({key:a.key,value:_,valueSpec:I,style:d,styleSpec:g,expressionContext:"property",propertyType:n,propertyKey:x}))}function km(a){return jc(a,"paint")}function Tm(a){return jc(a,"layout")}function Em(a){let n=[];const s=a.value,d=a.key,g=a.style,_=a.styleSpec;s.type||s.ref||n.push(new We(d,s,'either "type" or "ref" is required'));let x=Nt(s.type);const k=Nt(s.ref);if(s.id){const E=Nt(s.id);for(let I=0;I<a.arrayIndex;I++){const R=g.layers[I];Nt(R.id)===E&&n.push(new We(d,s.id,`duplicate layer id "${s.id}", previously used at line ${R.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(I=>{I in s&&n.push(new We(d,s[I],`"${I}" is prohibited for ref layers`))}),g.layers.forEach(I=>{Nt(I.id)===k&&(E=I)}),E?E.ref?n.push(new We(d,s.ref,"ref cannot reference another ref layer")):x=Nt(E.type):n.push(new We(d,s.ref,`ref layer "${k}" not found`))}else if(x!=="background")if(s.source){const E=g.sources&&g.sources[s.source],I=E&&Nt(E.type);E?I==="vector"&&x==="raster"?n.push(new We(d,s.source,`layer "${s.id}" requires a raster source`)):I==="raster"&&x!=="raster"?n.push(new We(d,s.source,`layer "${s.id}" requires a vector source`)):I!=="vector"||s["source-layer"]?I==="raster-dem"&&x!=="hillshade"?n.push(new We(d,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):x!=="line"||!s.paint||!s.paint["line-gradient"]||I==="geojson"&&E.lineMetrics||n.push(new We(d,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new We(d,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new We(d,s.source,`source "${s.source}" not found`))}else n.push(new We(d,s,'missing required property "source"'));return n=n.concat(xo({key:d,value:s,valueSpec:_.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Mi({key:`${d}.type`,value:s.type,valueSpec:_.layer.type,style:a.style,styleSpec:a.styleSpec,object:s,objectKey:"type"}),filter:Uc,layout:E=>xo({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":I=>Tm(vi({layerType:x},I))}}),paint:E=>xo({layer:s,key:E.key,value:E.value,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":I=>km(vi({layerType:x},I))}})}})),n}function Cl(a){const n=a.value,s=a.key,d=tr(n);return d!=="string"?[new We(s,n,`string expected, ${d} found`)]:[]}const Cm={promoteId:function({key:a,value:n}){if(tr(n)==="string")return Cl({key:a,value:n});{const s=[];for(const d in n)s.push(...Cl({key:`${a}.${d}`,value:n[d]}));return s}}};function Gc(a){const n=a.value,s=a.key,d=a.styleSpec,g=a.style;if(!n.type)return[new We(s,n,'"type" is required')];const _=Nt(n.type);let x;switch(_){case"vector":case"raster":case"raster-dem":return x=xo({key:s,value:n,valueSpec:d[`source_${_.replace("-","_")}`],style:a.style,styleSpec:d,objectElementValidators:Cm}),x;case"geojson":if(x=xo({key:s,value:n,valueSpec:d.source_geojson,style:g,styleSpec:d,objectElementValidators:Cm}),n.cluster)for(const k in n.clusterProperties){const[E,I]=n.clusterProperties[k],R=typeof E=="string"?[E,["accumulated"],["get",k]]:E;x.push(...Ls({key:`${s}.${k}.map`,value:I,expressionContext:"cluster-map"})),x.push(...Ls({key:`${s}.${k}.reduce`,value:R,expressionContext:"cluster-reduce"}))}return x;case"video":return xo({key:s,value:n,valueSpec:d.source_video,style:g,styleSpec:d});case"image":return xo({key:s,value:n,valueSpec:d.source_image,style:g,styleSpec:d});case"canvas":return[new We(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Oc({key:`${s}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:g,styleSpec:d})}}function Zc(a){const n=a.value,s=a.styleSpec,d=s.light,g=a.style;let _=[];const x=tr(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new We("light",n,`object expected, ${x} found`)]),_;for(const k in n){const E=k.match(/^(.*)-transition$/);_=_.concat(E&&d[E[1]]&&d[E[1]].transition?Mi({key:k,value:n[k],valueSpec:s.transition,style:g,styleSpec:s}):d[k]?Mi({key:k,value:n[k],valueSpec:d[k],style:g,styleSpec:s}):[new We(k,n[k],`unknown property "${k}"`)])}return _}function zi(a){const n=a.value,s=a.styleSpec,d=s.terrain,g=a.style;let _=[];const x=tr(n);if(n===void 0)return _;if(x!=="object")return _=_.concat([new We("terrain",n,`object expected, ${x} found`)]),_;for(const k in n)_=_.concat(d[k]?Mi({key:k,value:n[k],valueSpec:d[k],style:g,styleSpec:s}):[new We(k,n[k],`unknown property "${k}"`)]);return _}const Wc={"*":()=>[],array:vm,boolean:function(a){const n=a.value,s=a.key,d=tr(n);return d!=="boolean"?[new We(s,n,`boolean expected, ${d} found`)]:[]},number:Td,color:function(a){const n=a.key,s=a.value,d=tr(s);return d!=="string"?[new We(n,s,`color expected, ${d} found`)]:Va(s)===null?[new We(n,s,`color expected, "${s}" found`)]:[]},constants:Wo,enum:Oc,filter:Uc,function:xm,layer:Em,object:xo,source:Gc,light:Zc,terrain:zi,string:Cl,formatted:function(a){return Cl(a).length===0?[]:Ls(a)},resolvedImage:function(a){return Cl(a).length===0?[]:Ls(a)},padding:function(a){const n=a.key,s=a.value;if(tr(s)==="array"){if(s.length<1||s.length>4)return[new We(n,s,`padding requires 1 to 4 values; ${s.length} values found`)];const d={type:"number"};let g=[];for(let _=0;_<s.length;_++)g=g.concat(Mi({key:`${n}[${_}]`,value:s[_],valueSpec:d}));return g}return Td({key:n,value:s,valueSpec:{}})}};function Mi(a){const n=a.value,s=a.valueSpec,d=a.styleSpec;return s.expression&&Ar(Nt(n))?xm(a):s.expression&&Bc(ri(n))?Ls(a):s.type&&Wc[s.type]?Wc[s.type](a):xo(vi({},a,{valueSpec:s.type?d[s.type]:s}))}function D_(a){const n=a.value,s=a.key,d=Cl(a);return d.length||(n.indexOf("{fontstack}")===-1&&d.push(new We(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&d.push(new We(s,n,'"glyphs" url must include a "{range}" token'))),d}function Wa(a,n=Ie){let s=[];return s=s.concat(Mi({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,objectElementValidators:{glyphs:D_,"*":()=>[]}})),a.constants&&(s=s.concat(Wo({key:"constants",value:a.constants,style:a,styleSpec:n}))),Am(s)}function Am(a){return[].concat(a).sort((n,s)=>n.line-s.line)}function _a(a){return function(...n){return Am(a.apply(this,n))}}Wa.source=_a(Gc),Wa.light=_a(Zc),Wa.terrain=_a(zi),Wa.layer=_a(Em),Wa.filter=_a(Uc),Wa.paintProperty=_a(km),Wa.layoutProperty=_a(Tm);const Hc=Wa,Cd=Hc.light,R_=Hc.paintProperty,L_=Hc.layoutProperty;function ih(a,n){let s=!1;if(n&&n.length)for(const d of n)a.fire(new Fa(new Error(d.message))),s=!0;return s}class qc{constructor(n,s,d){const g=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const x=new Int32Array(this.arrayBuffer);n=x[0],this.d=(s=x[1])+2*(d=x[2]);for(let E=0;E<this.d*this.d;E++){const I=x[3+E],R=x[3+E+1];g.push(I===R?null:x.subarray(I,R))}const k=x[3+g.length+1];this.keys=x.subarray(x[3+g.length],k),this.bboxes=x.subarray(k),this.insert=this._insertReadonly}else{this.d=s+2*d;for(let x=0;x<this.d*this.d;x++)g.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=n,this.padding=d,this.scale=s/n,this.uid=0;const _=d/s*n;this.min=-_,this.max=n+_}insert(n,s,d,g,_){this._forEachCell(s,d,g,_,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(s),this.bboxes.push(d),this.bboxes.push(g),this.bboxes.push(_)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,s,d,g,_,x){this.cells[_].push(x)}query(n,s,d,g,_){const x=this.min,k=this.max;if(n<=x&&s<=x&&k<=d&&k<=g&&!_)return Array.prototype.slice.call(this.keys);{const E=[];return this._forEachCell(n,s,d,g,this._queryCell,E,{},_),E}}_queryCell(n,s,d,g,_,x,k,E){const I=this.cells[_];if(I!==null){const R=this.keys,B=this.bboxes;for(let V=0;V<I.length;V++){const U=I[V];if(k[U]===void 0){const G=4*U;(E?E(B[G+0],B[G+1],B[G+2],B[G+3]):n<=B[G+2]&&s<=B[G+3]&&d>=B[G+0]&&g>=B[G+1])?(k[U]=!0,x.push(R[U])):k[U]=!1}}}}_forEachCell(n,s,d,g,_,x,k,E){const I=this._convertToCellCoord(n),R=this._convertToCellCoord(s),B=this._convertToCellCoord(d),V=this._convertToCellCoord(g);for(let U=I;U<=B;U++)for(let G=R;G<=V;G++){const oe=this.d*G+U;if((!E||E(this._convertFromCellCoord(U),this._convertFromCellCoord(G),this._convertFromCellCoord(U+1),this._convertFromCellCoord(G+1)))&&_.call(this,n,s,d,g,oe,x,k,E))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,s=3+this.cells.length+1+1;let d=0;for(let x=0;x<this.cells.length;x++)d+=this.cells[x].length;const g=new Int32Array(s+d+this.keys.length+this.bboxes.length);g[0]=this.extent,g[1]=this.n,g[2]=this.padding;let _=s;for(let x=0;x<n.length;x++){const k=n[x];g[3+x]=_,g.set(k,_),_+=k.length}return g[3+n.length]=_,g.set(this.keys,_),_+=this.keys.length,g[3+n.length+1]=_,g.set(this.bboxes,_),_+=this.bboxes.length,g.buffer}static serialize(n,s){const d=n.toArrayBuffer();return s&&s.push(d),{buffer:d}}static deserialize(n){return new qc(n.buffer)}}const va={};function it(a,n,s={}){if(va[a])throw new Error(`${a} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:a,writeable:!1}),va[a]={klass:n,omit:s.omit||[],shallow:s.shallow||[]}}it("Object",Object),it("TransferableGridIndex",qc),it("Color",X),it("Error",Error),it("AJAXError",bn),it("ResolvedImage",he),it("StylePropertyFunction",eh),it("StyleExpression",Qu,{omit:["_evaluator"]}),it("ZoomDependentExpression",kd),it("ZoomConstantExpression",$c),it("CompoundExpression",lr,{omit:["_evaluate"]});for(const a in wl)wl[a]._classRegistryKey||it(`Expression_${a}`,wl[a]);function Pm(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Bs(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob)return a;if(Pm(a)||Bt(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const d of a)s.push(Bs(d,n));return s}if(typeof a=="object"){const s=a.constructor,d=s._classRegistryKey;if(!d)throw new Error("can't serialize object of unregistered class");if(!va[d])throw new Error(`${d} is not registered.`);const g=s.serialize?s.serialize(a,n):{};if(s.serialize){if(n&&g===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const _ in a){if(!a.hasOwnProperty(_)||va[d].omit.indexOf(_)>=0)continue;const x=a[_];g[_]=va[d].shallow.indexOf(_)>=0?x:Bs(x,n)}a instanceof Error&&(g.message=a.message)}if(g.$name)throw new Error("$name property is reserved for worker serialization logic.");return d!=="Object"&&(g.$name=d),g}throw new Error("can't serialize object of type "+typeof a)}function Ha(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||Pm(a)||Bt(a)||ArrayBuffer.isView(a)||a instanceof ImageData)return a;if(Array.isArray(a))return a.map(Ha);if(typeof a=="object"){const n=a.$name||"Object";if(!va[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:s}=va[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const d=Object.create(s.prototype);for(const g of Object.keys(a)){if(g==="$name")continue;const _=a[g];d[g]=va[n].shallow.indexOf(g)>=0?_:Ha(_)}return d}throw new Error("can't deserialize object of type "+typeof a)}class Ad{constructor(){this.first=!0}update(n,s){const d=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=s),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=d,!0))}}const Ye={"Latin-1 Supplement":a=>a>=128&&a<=255,Arabic:a=>a>=1536&&a<=1791,"Arabic Supplement":a=>a>=1872&&a<=1919,"Arabic Extended-A":a=>a>=2208&&a<=2303,"Hangul Jamo":a=>a>=4352&&a<=4607,"Unified Canadian Aboriginal Syllabics":a=>a>=5120&&a<=5759,Khmer:a=>a>=6016&&a<=6143,"Unified Canadian Aboriginal Syllabics Extended":a=>a>=6320&&a<=6399,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"CJK Radicals Supplement":a=>a>=11904&&a<=12031,"Kangxi Radicals":a=>a>=12032&&a<=12255,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Hiragana:a=>a>=12352&&a<=12447,Katakana:a=>a>=12448&&a<=12543,Bopomofo:a=>a>=12544&&a<=12591,"Hangul Compatibility Jamo":a=>a>=12592&&a<=12687,Kanbun:a=>a>=12688&&a<=12703,"Bopomofo Extended":a=>a>=12704&&a<=12735,"CJK Strokes":a=>a>=12736&&a<=12783,"Katakana Phonetic Extensions":a=>a>=12784&&a<=12799,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"CJK Unified Ideographs Extension A":a=>a>=13312&&a<=19903,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"CJK Unified Ideographs":a=>a>=19968&&a<=40959,"Yi Syllables":a=>a>=40960&&a<=42127,"Yi Radicals":a=>a>=42128&&a<=42191,"Hangul Jamo Extended-A":a=>a>=43360&&a<=43391,"Hangul Syllables":a=>a>=44032&&a<=55215,"Hangul Jamo Extended-B":a=>a>=55216&&a<=55295,"Private Use Area":a=>a>=57344&&a<=63743,"CJK Compatibility Ideographs":a=>a>=63744&&a<=64255,"Arabic Presentation Forms-A":a=>a>=64336&&a<=65023,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Arabic Presentation Forms-B":a=>a>=65136&&a<=65279,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function oh(a){for(const n of a)if(Id(n.charCodeAt(0)))return!0;return!1}function B_(a){for(const n of a)if(!Pd(n.charCodeAt(0)))return!1;return!0}function Pd(a){return!(Ye.Arabic(a)||Ye["Arabic Supplement"](a)||Ye["Arabic Extended-A"](a)||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a))}function Id(a){return!(a!==746&&a!==747&&(a<4352||!(Ye["Bopomofo Extended"](a)||Ye.Bopomofo(a)||Ye["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||Ye["CJK Compatibility Ideographs"](a)||Ye["CJK Compatibility"](a)||Ye["CJK Radicals Supplement"](a)||Ye["CJK Strokes"](a)||!(!Ye["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||Ye["CJK Unified Ideographs Extension A"](a)||Ye["CJK Unified Ideographs"](a)||Ye["Enclosed CJK Letters and Months"](a)||Ye["Hangul Compatibility Jamo"](a)||Ye["Hangul Jamo Extended-A"](a)||Ye["Hangul Jamo Extended-B"](a)||Ye["Hangul Jamo"](a)||Ye["Hangul Syllables"](a)||Ye.Hiragana(a)||Ye["Ideographic Description Characters"](a)||Ye.Kanbun(a)||Ye["Kangxi Radicals"](a)||Ye["Katakana Phonetic Extensions"](a)||Ye.Katakana(a)&&a!==12540||!(!Ye["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!Ye["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||Ye["Unified Canadian Aboriginal Syllabics"](a)||Ye["Unified Canadian Aboriginal Syllabics Extended"](a)||Ye["Vertical Forms"](a)||Ye["Yijing Hexagram Symbols"](a)||Ye["Yi Syllables"](a)||Ye["Yi Radicals"](a))))}function Im(a){return!(Id(a)||function(n){return!!(Ye["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ye["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ye["Letterlike Symbols"](n)||Ye["Number Forms"](n)||Ye["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ye["Control Pictures"](n)&&n!==9251||Ye["Optical Character Recognition"](n)||Ye["Enclosed Alphanumerics"](n)||Ye["Geometric Shapes"](n)||Ye["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ye["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ye["CJK Symbols and Punctuation"](n)||Ye.Katakana(n)||Ye["Private Use Area"](n)||Ye["CJK Compatibility Forms"](n)||Ye["Small Form Variants"](n)||Ye["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function zm(a){return a>=1424&&a<=2303||Ye["Arabic Presentation Forms-A"](a)||Ye["Arabic Presentation Forms-B"](a)}function F_(a,n){return!(!n&&zm(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||Ye.Khmer(a))}function Mm(a){for(const n of a)if(zm(n.charCodeAt(0)))return!0;return!1}const zd="deferred",Md="loading",Dd="loaded";let Rd=null,xi="unavailable",qa=null;const Dm=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(xi="error"),Rd&&Rd(a)};function Al(){Ld.fire(new Ji("pluginStateChange",{pluginStatus:xi,pluginURL:qa}))}const Ld=new go,Xc=function(){return xi},Rm=function(){if(xi!==zd||!qa)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");xi=Md,Al(),qa&&Ba({url:qa},a=>{a?Dm(a):(xi=Dd,Al())})},eo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>xi===Dd||eo.applyArabicShaping!=null,isLoading:()=>xi===Md,setState(a){if(!Pe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");xi=a.pluginStatus,qa=a.pluginURL},isParsed(){if(!Pe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return eo.applyArabicShaping!=null&&eo.processBidirectionalText!=null&&eo.processStyledBidirectionalText!=null},getPluginURL(){if(!Pe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return qa}};class Lr{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Ad,this.transition={})}isSupportedScript(n){return function(s,d){for(const g of s)if(!F_(g.charCodeAt(0),d))return!1;return!0}(n,eo.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,s=n-Math.floor(n),d=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*s}}}class Kc{constructor(n,s){this.property=n,this.value=s,this.expression=function(d,g){if(Ar(d))return new eh(d,g);if(Bc(d)){const _=_m(d,g);if(_.result==="error")throw new Error(_.value.map(x=>`${x.key}: ${x.message}`).join(", "));return _.value}{let _=d;return g.type==="color"&&typeof d=="string"?_=X.parse(d):g.type!=="padding"||typeof d!="number"&&!Array.isArray(d)||(_=se.parse(d)),{kind:"constant",evaluate:()=>_}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,d){return this.property.possiblyEvaluate(this,n,s,d)}}class ah{constructor(n){this.property=n,this.value=new Kc(n,void 0)}transitioned(n,s){return new Bm(this.property,this.value,s,q({},n.transition,this.transition),n.now)}untransitioned(){return new Bm(this.property,this.value,null,{},0)}}class Lm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return H(this._values[n].value.value)}setValue(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ah(this._values[n].property)),this._values[n].value=new Kc(this._values[n].property,s===null?void 0:H(s))}getTransition(n){return H(this._values[n].transition)}setTransition(n,s){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new ah(this._values[n].property)),this._values[n].transition=H(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d);const g=this.getTransition(s);g!==void 0&&(n[`${s}-transition`]=g)}return n}transitioned(n,s){const d=new Fm(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].transitioned(n,s._values[g]);return d}untransitioned(){const n=new Fm(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Bm{constructor(n,s,d,g,_){this.property=n,this.value=s,this.begin=_+g.delay||0,this.end=this.begin+g.duration||0,n.specification.transition&&(g.delay||g.duration)&&(this.prior=d)}possiblyEvaluate(n,s,d){const g=n.now||0,_=this.value.possiblyEvaluate(n,s,d),x=this.prior;if(x){if(g>this.end)return this.prior=null,_;if(this.value.isDataDriven())return this.prior=null,_;if(g<this.begin)return x.possiblyEvaluate(n,s,d);{const k=(g-this.begin)/(this.end-this.begin);return this.property.interpolate(x.possiblyEvaluate(n,s,d),_,function(E){if(E<=0)return 0;if(E>=1)return 1;const I=E*E,R=I*E;return 4*(E<.5?R:3*(E-I)+R-.75)}(k))}}return _}}class Fm{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,d){const g=new Yc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,d);return g}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class $_{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return H(this._values[n].value)}setValue(n,s){this._values[n]=new Kc(this._values[n].property,s===null?void 0:H(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const d=this.getValue(s);d!==void 0&&(n[s]=d)}return n}possiblyEvaluate(n,s,d){const g=new Yc(this._properties);for(const _ of Object.keys(this._values))g._values[_]=this._values[_].possiblyEvaluate(n,s,d);return g}}class Ho{constructor(n,s,d){this.property=n,this.value=s,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,d,g){return this.property.evaluate(this.value,this.parameters,n,s,d,g)}}class Yc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class dt{constructor(n){this.specification=n}possiblyEvaluate(n,s){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(s)}interpolate(n,s,d){const g=Ps[this.specification.type];return g?g(n,s,d):n}}class bt{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,d,g){return new Ho(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},d,g)}:n.expression,s)}interpolate(n,s,d){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new Ho(this,{kind:"constant",value:void 0},n.parameters);const g=Ps[this.specification.type];return g?new Ho(this,{kind:"constant",value:g(n.value.value,s.value.value,d)},n.parameters):n}evaluate(n,s,d,g,_,x){return n.kind==="constant"?n.value:n.evaluate(s,d,g,_,x)}}class Pl extends bt{possiblyEvaluate(n,s,d,g){if(n.value===void 0)return new Ho(this,{kind:"constant",value:void 0},s);if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},d,g),x=n.property.specification.type==="resolvedImage"&&typeof _!="string"?_.name:_,k=this._calculate(x,x,x,s);return new Ho(this,{kind:"constant",value:k},s)}if(n.expression.kind==="camera"){const _=this._calculate(n.expression.evaluate({zoom:s.zoom-1}),n.expression.evaluate({zoom:s.zoom}),n.expression.evaluate({zoom:s.zoom+1}),s);return new Ho(this,{kind:"constant",value:_},s)}return new Ho(this,n.expression,s)}evaluate(n,s,d,g,_,x){if(n.kind==="source"){const k=n.evaluate(s,d,g,_,x);return this._calculate(k,k,k,s)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(s.zoom)-1},d,g),n.evaluate({zoom:Math.floor(s.zoom)},d,g),n.evaluate({zoom:Math.floor(s.zoom)+1},d,g),s):n.value}_calculate(n,s,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class Bd{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,g){if(n.value!==void 0){if(n.expression.kind==="constant"){const _=n.expression.evaluate(s,null,{},d,g);return this._calculate(_,_,_,s)}return this._calculate(n.expression.evaluate(new Lr(Math.floor(s.zoom-1),s)),n.expression.evaluate(new Lr(Math.floor(s.zoom),s)),n.expression.evaluate(new Lr(Math.floor(s.zoom+1),s)),s)}}_calculate(n,s,d,g){return g.zoom>g.zoomHistory.lastIntegerZoom?{from:n,to:s}:{from:d,to:s}}interpolate(n){return n}}class Xa{constructor(n){this.specification=n}possiblyEvaluate(n,s,d,g){return!!n.expression.evaluate(s,null,{},d,g)}interpolate(){return!1}}class Mn{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const s in n){const d=n[s];d.specification.overridable&&this.overridableProperties.push(s);const g=this.defaultPropertyValues[s]=new Kc(d,void 0),_=this.defaultTransitionablePropertyValues[s]=new ah(d);this.defaultTransitioningPropertyValues[s]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=g.possiblyEvaluate({})}}}it("DataDrivenProperty",bt),it("DataConstantProperty",dt),it("CrossFadedDataDrivenProperty",Pl),it("CrossFadedProperty",Bd),it("ColorRampProperty",Xa);const Ka="-transition";class qo extends go{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new $_(s.layout)),s.paint)){this._transitionablePaint=new Lm(s.paint);for(const d in n.paint)this.setPaintProperty(d,n.paint[d],{validate:!1});for(const d in n.layout)this.setLayoutProperty(d,n.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,d={}){s!=null&&this._validate(L_,`layers.${this.id}.layout.${n}`,n,s,d)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return n.endsWith(Ka)?this._transitionablePaint.getTransition(n.slice(0,-Ka.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,d={}){if(s!=null&&this._validate(R_,`layers.${this.id}.paint.${n}`,n,s,d))return!1;if(n.endsWith(Ka))return this._transitionablePaint.setTransition(n.slice(0,-Ka.length),s||void 0),!1;{const g=this._transitionablePaint._values[n],_=g.property.specification["property-type"]==="cross-faded-data-driven",x=g.value.isDataDriven(),k=g.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const E=this._transitionablePaint._values[n].value;return E.isDataDriven()||x||_||this._handleOverridablePaintPropertyUpdate(n,k,E)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,s,d){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),j(n,(s,d)=>!(s===void 0||d==="layout"&&!Object.keys(s).length||d==="paint"&&!Object.keys(s).length))}_validate(n,s,d,g,_={}){return(!_||_.validate!==!1)&&ih(this,n.call(Hc,{key:s,layerType:this.type,objectKey:d,value:g,styleSpec:Ie,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof Ho&&Mr(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}const $m={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ya{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class qr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function cn(a,n=1){let s=0,d=0;return{members:a.map(g=>{const _=$m[g.type].BYTES_PER_ELEMENT,x=s=Fd(s,Math.max(n,_)),k=g.components||1;return d=Math.max(d,_),s+=_*k,{name:g.name,type:g.type,components:k,offset:x}}),size:Fd(s,Math.max(d,n)),alignment:n}}function Fd(a,n){return Math.ceil(a/n)*n}class Fs extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const g=2*n;return this.int16[g+0]=s,this.int16[g+1]=d,n}}Fs.prototype.bytesPerElement=4,it("StructArrayLayout2i4",Fs);class m extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,g)}emplace(n,s,d,g,_){const x=4*n;return this.int16[x+0]=s,this.int16[x+1]=d,this.int16[x+2]=g,this.int16[x+3]=_,n}}m.prototype.bytesPerElement=8,it("StructArrayLayout4i8",m);class i extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,k){const E=6*n;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=k,n}}i.prototype.bytesPerElement=12,it("StructArrayLayout2i4i12",i);class u extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,k){const E=4*n,I=8*n;return this.int16[E+0]=s,this.int16[E+1]=d,this.uint8[I+4]=g,this.uint8[I+5]=_,this.uint8[I+6]=x,this.uint8[I+7]=k,n}}u.prototype.bytesPerElement=8,it("StructArrayLayout2i4ub8",u);class f extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const g=2*n;return this.float32[g+0]=s,this.float32[g+1]=d,n}}f.prototype.bytesPerElement=8,it("StructArrayLayout2f8",f);class y extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,k,E,I,R){const B=this.length;return this.resize(B+1),this.emplace(B,n,s,d,g,_,x,k,E,I,R)}emplace(n,s,d,g,_,x,k,E,I,R,B){const V=10*n;return this.uint16[V+0]=s,this.uint16[V+1]=d,this.uint16[V+2]=g,this.uint16[V+3]=_,this.uint16[V+4]=x,this.uint16[V+5]=k,this.uint16[V+6]=E,this.uint16[V+7]=I,this.uint16[V+8]=R,this.uint16[V+9]=B,n}}y.prototype.bytesPerElement=20,it("StructArrayLayout10ui20",y);class v extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,k,E,I,R,B,V){const U=this.length;return this.resize(U+1),this.emplace(U,n,s,d,g,_,x,k,E,I,R,B,V)}emplace(n,s,d,g,_,x,k,E,I,R,B,V,U){const G=12*n;return this.int16[G+0]=s,this.int16[G+1]=d,this.int16[G+2]=g,this.int16[G+3]=_,this.uint16[G+4]=x,this.uint16[G+5]=k,this.uint16[G+6]=E,this.uint16[G+7]=I,this.int16[G+8]=R,this.int16[G+9]=B,this.int16[G+10]=V,this.int16[G+11]=U,n}}v.prototype.bytesPerElement=24,it("StructArrayLayout4i4ui4i24",v);class S extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.float32[_+0]=s,this.float32[_+1]=d,this.float32[_+2]=g,n}}S.prototype.bytesPerElement=12,it("StructArrayLayout3f12",S);class C extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}C.prototype.bytesPerElement=4,it("StructArrayLayout1ul4",C);class A extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,k,E,I){const R=this.length;return this.resize(R+1),this.emplace(R,n,s,d,g,_,x,k,E,I)}emplace(n,s,d,g,_,x,k,E,I,R){const B=10*n,V=5*n;return this.int16[B+0]=s,this.int16[B+1]=d,this.int16[B+2]=g,this.int16[B+3]=_,this.int16[B+4]=x,this.int16[B+5]=k,this.uint32[V+3]=E,this.uint16[B+8]=I,this.uint16[B+9]=R,n}}A.prototype.bytesPerElement=20,it("StructArrayLayout6i1ul2ui20",A);class z extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x){const k=this.length;return this.resize(k+1),this.emplace(k,n,s,d,g,_,x)}emplace(n,s,d,g,_,x,k){const E=6*n;return this.int16[E+0]=s,this.int16[E+1]=d,this.int16[E+2]=g,this.int16[E+3]=_,this.int16[E+4]=x,this.int16[E+5]=k,n}}z.prototype.bytesPerElement=12,it("StructArrayLayout2i2i2i12",z);class L extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_){const x=this.length;return this.resize(x+1),this.emplace(x,n,s,d,g,_)}emplace(n,s,d,g,_,x){const k=4*n,E=8*n;return this.float32[k+0]=s,this.float32[k+1]=d,this.float32[k+2]=g,this.int16[E+6]=_,this.int16[E+7]=x,n}}L.prototype.bytesPerElement=16,it("StructArrayLayout2f1f2i16",L);class O extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,g)}emplace(n,s,d,g,_){const x=12*n,k=3*n;return this.uint8[x+0]=s,this.uint8[x+1]=d,this.float32[k+1]=g,this.float32[k+2]=_,n}}O.prototype.bytesPerElement=12,it("StructArrayLayout2ub2f12",O);class N extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.uint16[_+0]=s,this.uint16[_+1]=d,this.uint16[_+2]=g,n}}N.prototype.bytesPerElement=6,it("StructArrayLayout3ui6",N);class te extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe,ne,ye){const ke=this.length;return this.resize(ke+1),this.emplace(ke,n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe,ne,ye)}emplace(n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe,ne,ye,ke){const pe=24*n,we=12*n,Be=48*n;return this.int16[pe+0]=s,this.int16[pe+1]=d,this.uint16[pe+2]=g,this.uint16[pe+3]=_,this.uint32[we+2]=x,this.uint32[we+3]=k,this.uint32[we+4]=E,this.uint16[pe+10]=I,this.uint16[pe+11]=R,this.uint16[pe+12]=B,this.float32[we+7]=V,this.float32[we+8]=U,this.uint8[Be+36]=G,this.uint8[Be+37]=oe,this.uint8[Be+38]=ne,this.uint32[we+10]=ye,this.int16[pe+22]=ke,n}}te.prototype.bytesPerElement=48,it("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",te);class Y extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe,ne,ye,ke,pe,we,Be,Re,nt,ht,Je,qe,Ze,Qe){const Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe,ne,ye,ke,pe,we,Be,Re,nt,ht,Je,qe,Ze,Qe)}emplace(n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe,ne,ye,ke,pe,we,Be,Re,nt,ht,Je,qe,Ze,Qe,Xe){const Ve=34*n,yt=17*n;return this.int16[Ve+0]=s,this.int16[Ve+1]=d,this.int16[Ve+2]=g,this.int16[Ve+3]=_,this.int16[Ve+4]=x,this.int16[Ve+5]=k,this.int16[Ve+6]=E,this.int16[Ve+7]=I,this.uint16[Ve+8]=R,this.uint16[Ve+9]=B,this.uint16[Ve+10]=V,this.uint16[Ve+11]=U,this.uint16[Ve+12]=G,this.uint16[Ve+13]=oe,this.uint16[Ve+14]=ne,this.uint16[Ve+15]=ye,this.uint16[Ve+16]=ke,this.uint16[Ve+17]=pe,this.uint16[Ve+18]=we,this.uint16[Ve+19]=Be,this.uint16[Ve+20]=Re,this.uint16[Ve+21]=nt,this.uint16[Ve+22]=ht,this.uint32[yt+12]=Je,this.float32[yt+13]=qe,this.float32[yt+14]=Ze,this.float32[yt+15]=Qe,this.float32[yt+16]=Xe,n}}Y.prototype.bytesPerElement=68,it("StructArrayLayout8i15ui1ul4f68",Y);class J extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}J.prototype.bytesPerElement=4,it("StructArrayLayout1f4",J);class ce extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=3*n;return this.int16[_+0]=s,this.int16[_+1]=d,this.int16[_+2]=g,n}}ce.prototype.bytesPerElement=6,it("StructArrayLayout3i6",ce);class fe extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,d)}emplace(n,s,d,g){const _=4*n;return this.uint32[2*n+0]=s,this.uint16[_+2]=d,this.uint16[_+3]=g,n}}fe.prototype.bytesPerElement=8,it("StructArrayLayout1ul2ui8",fe);class xe extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const d=this.length;return this.resize(d+1),this.emplace(d,n,s)}emplace(n,s,d){const g=2*n;return this.uint16[g+0]=s,this.uint16[g+1]=d,n}}xe.prototype.bytesPerElement=4,it("StructArrayLayout2ui4",xe);class re extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}re.prototype.bytesPerElement=2,it("StructArrayLayout1ui2",re);class Se extends qr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,d,g)}emplace(n,s,d,g,_){const x=4*n;return this.float32[x+0]=s,this.float32[x+1]=d,this.float32[x+2]=g,this.float32[x+3]=_,n}}Se.prototype.bytesPerElement=16,it("StructArrayLayout4f16",Se);class be extends Ya{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ut(this.anchorPointX,this.anchorPointY)}}be.prototype.size=20;class ze extends A{get(n){return new be(this,n)}}it("CollisionBoxArray",ze);class De extends Ya{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}De.prototype.size=48;class Oe extends te{get(n){return new De(this,n)}}it("PlacedSymbolArray",Oe);class Ae extends Ya{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}Ae.prototype.size=68;class et extends Y{get(n){return new Ae(this,n)}}it("SymbolInstanceArray",et);class He extends J{getoffsetX(n){return this.float32[1*n+0]}}it("GlyphOffsetArray",He);class rt extends ce{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}it("SymbolLineVertexArray",rt);class At extends Ya{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}At.prototype.size=8;class Dt extends fe{get(n){return new At(this,n)}}it("FeatureIndexArray",Dt);class gt extends Fs{}class ur extends Fs{}class hr extends Fs{}class Xt extends i{}class Jt extends u{}class fr extends f{}class Sn extends y{}class Xo extends v{}class bo extends S{}class Ko extends C{}class Ja extends z{}class to extends O{}class bi extends N{}class xa extends xe{}const sh=cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:gn}=sh;class Lt{constructor(n=[]){this.segments=n}prepareSegment(n,s,d,g){let _=this.segments[this.segments.length-1];return n>Lt.MAX_VERTEX_ARRAY_LENGTH&&_e(`Max vertices per segment is ${Lt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!_||_.vertexLength+n>Lt.MAX_VERTEX_ARRAY_LENGTH||_.sortKey!==g)&&(_={vertexOffset:s.length,primitiveOffset:d.length,vertexLength:0,primitiveLength:0},g!==void 0&&(_.sortKey=g),this.segments.push(_)),_}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,d,g){return new Lt([{vertexOffset:n,primitiveOffset:s,vertexLength:d,primitiveLength:g,vaos:{},sortKey:0}])}}function ar(a,n){return 256*(a=P(Math.floor(a),0,255))+P(Math.floor(n),0,255)}Lt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,it("SegmentVector",Lt);const kn=cn([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Tn={exports:{}},Br={exports:{}};Br.exports=function(a,n){var s,d,g,_,x,k,E,I;for(d=a.length-(s=3&a.length),g=n,x=3432918353,k=461845907,I=0;I<d;)E=255&a.charCodeAt(I)|(255&a.charCodeAt(++I))<<8|(255&a.charCodeAt(++I))<<16|(255&a.charCodeAt(++I))<<24,++I,g=27492+(65535&(_=5*(65535&(g=(g^=E=(65535&(E=(E=(65535&E)*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*k+(((E>>>16)*k&65535)<<16)&4294967295)<<13|g>>>19))+((5*(g>>>16)&65535)<<16)&4294967295))+((58964+(_>>>16)&65535)<<16);switch(E=0,s){case 3:E^=(255&a.charCodeAt(I+2))<<16;case 2:E^=(255&a.charCodeAt(I+1))<<8;case 1:g^=E=(65535&(E=(E=(65535&(E^=255&a.charCodeAt(I)))*x+(((E>>>16)*x&65535)<<16)&4294967295)<<15|E>>>17))*k+(((E>>>16)*k&65535)<<16)&4294967295}return g^=a.length,g=2246822507*(65535&(g^=g>>>16))+((2246822507*(g>>>16)&65535)<<16)&4294967295,g=3266489909*(65535&(g^=g>>>13))+((3266489909*(g>>>16)&65535)<<16)&4294967295,(g^=g>>>16)>>>0};var ro={exports:{}};ro.exports=function(a,n){for(var s,d=a.length,g=n^d,_=0;d>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(_)|(255&a.charCodeAt(++_))<<8|(255&a.charCodeAt(++_))<<16|(255&a.charCodeAt(++_))<<24))+((1540483477*(s>>>16)&65535)<<16),g=1540483477*(65535&g)+((1540483477*(g>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),d-=4,++_;switch(d){case 3:g^=(255&a.charCodeAt(_+2))<<16;case 2:g^=(255&a.charCodeAt(_+1))<<8;case 1:g=1540483477*(65535&(g^=255&a.charCodeAt(_)))+((1540483477*(g>>>16)&65535)<<16)}return g=1540483477*(65535&(g^=g>>>13))+((1540483477*(g>>>16)&65535)<<16),(g^=g>>>15)>>>0};var $s=Br.exports,$d=ro.exports;Tn.exports=$s,Tn.exports.murmur3=$s,Tn.exports.murmur2=$d;class Il{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,d,g){this.ids.push(Om(n)),this.positions.push(s,d,g)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const s=Om(n);let d=0,g=this.ids.length-1;for(;d<g;){const x=d+g>>1;this.ids[x]>=s?g=x:d=x+1}const _=[];for(;this.ids[d]===s;)_.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return _}static serialize(n,s){const d=new Float64Array(n.ids),g=new Uint32Array(n.positions);return Od(d,g,0,d.length-1),s&&s.push(d.buffer,g.buffer),{ids:d,positions:g}}static deserialize(n){const s=new Il;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function Om(a){const n=+a;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:Tn.exports(String(a))}function Od(a,n,s,d){for(;s<d;){const g=a[s+d>>1];let _=s-1,x=d+1;for(;;){do _++;while(a[_]<g);do x--;while(a[x]>g);if(_>=x)break;Qa(a,_,x),Qa(n,3*_,3*x),Qa(n,3*_+1,3*x+1),Qa(n,3*_+2,3*x+2)}x-s<d-x?(Od(a,n,s,x),s=x+1):(Od(a,n,x+1,d),d=x)}}function Qa(a,n,s){const d=a[n];a[n]=a[s],a[s]=d}it("FeaturePositionMap",Il);class Os{constructor(n,s){this.gl=n.gl,this.location=s}}class Vs extends Os{constructor(n,s){super(n,s),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class lh extends Os{constructor(n,s){super(n,s),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class K2 extends Os{constructor(n,s){super(n,s),this.current=X.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const M6=new Float32Array(16);function O_(a){return[ar(255*a.r,255*a.g),ar(255*a.b,255*a.a)]}class Vd{constructor(n,s,d){this.value=n,this.uniformNames=s.map(g=>`u_${g}`),this.type=d}setUniform(n,s,d){n.set(d.constantOr(this.value))}getBinding(n,s,d){return this.type==="color"?new K2(n,s):new Vs(n,s)}}class ch{constructor(n,s){this.uniformNames=s.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=n.tlbr}setUniform(n,s,d,g){const _=g==="u_pattern_to"?this.patternTo:g==="u_pattern_from"?this.patternFrom:g==="u_pixel_ratio_to"?this.pixelRatioTo:g==="u_pixel_ratio_from"?this.pixelRatioFrom:null;_&&n.set(_)}getBinding(n,s,d){return d.substr(0,9)==="u_pattern"?new lh(n,s):new Vs(n,s)}}class Ns{constructor(n,s,d,g){this.expression=n,this.type=d,this.maxValue=0,this.paintVertexAttributes=s.map(_=>({name:`a_${_}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new g}populatePaintArray(n,s,d,g,_){const x=this.paintVertexArray.length,k=this.expression.evaluate(new Lr(0),s,{},g,[],_);this.paintVertexArray.resize(n),this._setPaintValue(x,n,k)}updatePaintArray(n,s,d,g){const _=this.expression.evaluate({zoom:0},d,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,d){if(this.type==="color"){const g=O_(d);for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,g[0],g[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ba{constructor(n,s,d,g,_,x){this.expression=n,this.uniformNames=s.map(k=>`u_${k}_t`),this.type=d,this.useIntegerZoom=g,this.zoom=_,this.maxValue=0,this.paintVertexAttributes=s.map(k=>({name:`a_${k}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new x}populatePaintArray(n,s,d,g,_){const x=this.expression.evaluate(new Lr(this.zoom),s,{},g,[],_),k=this.expression.evaluate(new Lr(this.zoom+1),s,{},g,[],_),E=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(E,n,x,k)}updatePaintArray(n,s,d,g){const _=this.expression.evaluate({zoom:this.zoom},d,g),x=this.expression.evaluate({zoom:this.zoom+1},d,g);this._setPaintValue(n,s,_,x)}_setPaintValue(n,s,d,g){if(this.type==="color"){const _=O_(d),x=O_(g);for(let k=n;k<s;k++)this.paintVertexArray.emplace(k,_[0],_[1],x[0],x[1])}else{for(let _=n;_<s;_++)this.paintVertexArray.emplace(_,d,g);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(g))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s){const d=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,g=P(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);n.set(g)}getBinding(n,s,d){return new Vs(n,s)}}class zl{constructor(n,s,d,g,_,x){this.expression=n,this.type=s,this.useIntegerZoom=d,this.zoom=g,this.layerId=x,this.zoomInPaintVertexArray=new _,this.zoomOutPaintVertexArray=new _}populatePaintArray(n,s,d){const g=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(g,n,s.patterns&&s.patterns[this.layerId],d)}updatePaintArray(n,s,d,g,_){this._setPaintValues(n,s,d.patterns&&d.patterns[this.layerId],_)}_setPaintValues(n,s,d,g){if(!g||!d)return;const{min:_,mid:x,max:k}=d,E=g[_],I=g[x],R=g[k];if(E&&I&&R)for(let B=n;B<s;B++)this.zoomInPaintVertexArray.emplace(B,I.tl[0],I.tl[1],I.br[0],I.br[1],E.tl[0],E.tl[1],E.br[0],E.br[1],I.pixelRatio,E.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,I.tl[0],I.tl[1],I.br[0],I.br[1],R.tl[0],R.tl[1],R.br[0],R.br[1],I.pixelRatio,R.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,kn.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,kn.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Y2{constructor(n,s,d){this.binders={},this._buffers=[];const g=[];for(const _ in n.paint._values){if(!d(_))continue;const x=n.paint.get(_);if(!(x instanceof Ho&&Mr(x.property.specification)))continue;const k=D6(_,n.type),E=x.value,I=x.property.specification.type,R=x.property.useIntegerZoom,B=x.property.specification["property-type"],V=B==="cross-faded"||B==="cross-faded-data-driven";if(E.kind==="constant")this.binders[_]=V?new ch(E.value,k):new Vd(E.value,k,I),g.push(`/u_${_}`);else if(E.kind==="source"||V){const U=J2(_,I,"source");this.binders[_]=V?new zl(E,I,R,s,U,n.id):new Ns(E,k,I,U),g.push(`/a_${_}`)}else{const U=J2(_,I,"composite");this.binders[_]=new ba(E,k,I,R,s,U),g.push(`/z_${_}`)}}this.cacheKey=g.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof Ns||s instanceof ba?s.maxValue:0}populatePaintArrays(n,s,d,g,_){for(const x in this.binders){const k=this.binders[x];(k instanceof Ns||k instanceof ba||k instanceof zl)&&k.populatePaintArray(n,s,d,g,_)}}setConstantPatternPositions(n,s){for(const d in this.binders){const g=this.binders[d];g instanceof ch&&g.setConstantPatternPositions(n,s)}}updatePaintArrays(n,s,d,g,_){let x=!1;for(const k in n){const E=s.getPositions(k);for(const I of E){const R=d.feature(I.index);for(const B in this.binders){const V=this.binders[B];if((V instanceof Ns||V instanceof ba||V instanceof zl)&&V.expression.isStateDependent===!0){const U=g.paint.get(B);V.expression=U.value,V.updatePaintArray(I.start,I.end,R,n[k],_),x=!0}}}}return x}defines(){const n=[];for(const s in this.binders){const d=this.binders[s];(d instanceof Vd||d instanceof ch)&&n.push(...d.uniformNames.map(g=>`#define HAS_UNIFORM_${g}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Ns||d instanceof ba)for(let g=0;g<d.paintVertexAttributes.length;g++)n.push(d.paintVertexAttributes[g].name);else if(d instanceof zl)for(let g=0;g<kn.members.length;g++)n.push(kn.members[g].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const d=this.binders[s];if(d instanceof Vd||d instanceof ch||d instanceof ba)for(const g of d.uniformNames)n.push(g)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,s){const d=[];for(const g in this.binders){const _=this.binders[g];if(_ instanceof Vd||_ instanceof ch||_ instanceof ba){for(const x of _.uniformNames)if(s[x]){const k=_.getBinding(n,s[x],x);d.push({name:x,property:g,binding:k})}}}return d}setUniforms(n,s,d,g){for(const{name:_,property:x,binding:k}of s)this.binders[x].setUniform(k,g,d.get(x),_)}updatePaintBuffers(n){this._buffers=[];for(const s in this.binders){const d=this.binders[s];if(n&&d instanceof zl){const g=n.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;g&&this._buffers.push(g)}else(d instanceof Ns||d instanceof ba)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(n){for(const s in this.binders){const d=this.binders[s];(d instanceof Ns||d instanceof ba||d instanceof zl)&&d.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof Ns||s instanceof ba||s instanceof zl)&&s.destroy()}}}class Jc{constructor(n,s,d=()=>!0){this.programConfigurations={};for(const g of n)this.programConfigurations[g.id]=new Y2(g,s,d);this.needsUpload=!1,this._featureMap=new Il,this._bufferOffset=0}populatePaintArrays(n,s,d,g,_,x){for(const k in this.programConfigurations)this.programConfigurations[k].populatePaintArrays(n,s,g,_,x);s.id!==void 0&&this._featureMap.add(s.id,d,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,d,g){for(const _ of d)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function D6(a,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}function J2(a,n,s){const d={color:{source:f,composite:Se},number:{source:J,composite:f}},g=function(_){return{"line-pattern":{source:Sn,composite:Sn},"fill-pattern":{source:Sn,composite:Sn},"fill-extrusion-pattern":{source:Sn,composite:Sn}}[_]}(a);return g&&g[s]||d[n][s]}it("ConstantBinder",Vd),it("CrossFadedConstantBinder",ch),it("SourceExpressionBinder",Ns),it("CrossFadedCompositeBinder",zl),it("CompositeExpressionBinder",ba),it("ProgramConfiguration",Y2,{omit:["_buffers"]}),it("ProgramConfigurationSet",Jc);var yn=8192;const V_=Math.pow(2,14)-1,Q2=-V_-1;function Qc(a){const n=yn/a.extent,s=a.loadGeometry();for(let d=0;d<s.length;d++){const g=s[d];for(let _=0;_<g.length;_++){const x=g[_],k=Math.round(x.x*n),E=Math.round(x.y*n);x.x=P(k,Q2,V_),x.y=P(E,Q2,V_),(k<x.x||k>x.x+1||E<x.y||E>x.y+1)&&_e("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function eu(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?Qc(a):[]}}function Vm(a,n,s,d,g){a.emplaceBack(2*n+(d+1)/2,2*s+(g+1)/2)}class N_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new ur,this.indexArray=new bi,this.segments=new Lt,this.programConfigurations=new Jc(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){const g=this.layers[0],_=[];let x=null,k=!1;g.type==="circle"&&(x=g.layout.get("circle-sort-key"),k=!x.isConstant());for(const{feature:E,id:I,index:R,sourceLayerIndex:B}of n){const V=this.layers[0]._featureFilter.needGeometry,U=eu(E,V);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),U,d))continue;const G=k?x.evaluate(U,{},d):void 0,oe={id:I,properties:E.properties,type:E.type,sourceLayerIndex:B,index:R,geometry:V?U.geometry:Qc(E),patterns:{},sortKey:G};_.push(oe)}k&&_.sort((E,I)=>E.sortKey-I.sortKey);for(const E of _){const{geometry:I,index:R,sourceLayerIndex:B}=E,V=n[R].feature;this.addFeature(E,I,R,d),s.featureIndex.insert(V,I,R,B,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,gn),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,d,g){for(const _ of s)for(const x of _){const k=x.x,E=x.y;if(k<0||k>=yn||E<0||E>=yn)continue;const I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),R=I.vertexLength;Vm(this.layoutVertexArray,k,E,-1,-1),Vm(this.layoutVertexArray,k,E,1,-1),Vm(this.layoutVertexArray,k,E,1,1),Vm(this.layoutVertexArray,k,E,-1,1),this.indexArray.emplaceBack(R,R+1,R+2),this.indexArray.emplaceBack(R,R+3,R+2),I.vertexLength+=4,I.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,{},g)}}function eS(a,n){for(let s=0;s<a.length;s++)if(uh(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(uh(a,n[s]))return!0;return!!U_(a,n)}function R6(a,n,s){return!!uh(a,n)||!!j_(n,a,s)}function tS(a,n){if(a.length===1)return nS(n,a[0]);for(let s=0;s<n.length;s++){const d=n[s];for(let g=0;g<d.length;g++)if(uh(a,d[g]))return!0}for(let s=0;s<a.length;s++)if(nS(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(U_(a,n[s]))return!0;return!1}function L6(a,n,s){if(a.length>1){if(U_(a,n))return!0;for(let d=0;d<n.length;d++)if(j_(n[d],a,s))return!0}for(let d=0;d<a.length;d++)if(j_(a[d],n,s))return!0;return!1}function U_(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const d=a[s],g=a[s+1];for(let _=0;_<n.length-1;_++)if(B6(d,g,n[_],n[_+1]))return!0}return!1}function B6(a,n,s,d){return Le(a,s,d)!==Le(n,s,d)&&Le(a,n,s)!==Le(a,n,d)}function j_(a,n,s){const d=s*s;if(n.length===1)return a.distSqr(n[0])<d;for(let g=1;g<n.length;g++)if(rS(a,n[g-1],n[g])<d)return!0;return!1}function rS(a,n,s){const d=n.distSqr(s);if(d===0)return a.distSqr(n);const g=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/d;return a.distSqr(g<0?n:g>1?s:s.sub(n)._mult(g)._add(n))}function nS(a,n){let s,d,g,_=!1;for(let x=0;x<a.length;x++){s=a[x];for(let k=0,E=s.length-1;k<s.length;E=k++)d=s[k],g=s[E],d.y>n.y!=g.y>n.y&&n.x<(g.x-d.x)*(n.y-d.y)/(g.y-d.y)+d.x&&(_=!_)}return _}function uh(a,n){let s=!1;for(let d=0,g=a.length-1;d<a.length;g=d++){const _=a[d],x=a[g];_.y>n.y!=x.y>n.y&&n.x<(x.x-_.x)*(n.y-_.y)/(x.y-_.y)+_.x&&(s=!s)}return s}function F6(a,n,s){const d=s[0],g=s[2];if(a.x<d.x&&n.x<d.x||a.x>g.x&&n.x>g.x||a.y<d.y&&n.y<d.y||a.y>g.y&&n.y>g.y)return!1;const _=Le(a,n,s[0]);return _!==Le(a,n,s[1])||_!==Le(a,n,s[2])||_!==Le(a,n,s[3])}function Nd(a,n,s){const d=n.paint.get(a).value;return d.kind==="constant"?d.value:s.programConfigurations.get(n.id).getMaxValue(a)}function Nm(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Um(a,n,s,d,g){if(!n[0]&&!n[1])return a;const _=ut.convert(n)._mult(g);s==="viewport"&&_._rotate(-d);const x=[];for(let k=0;k<a.length;k++)x.push(a[k].sub(_));return x}it("CircleBucket",N_,{omit:["layers"]});const $6=new Mn({"circle-sort-key":new bt(Ie.layout_circle["circle-sort-key"])});var O6={paint:new Mn({"circle-radius":new bt(Ie.paint_circle["circle-radius"]),"circle-color":new bt(Ie.paint_circle["circle-color"]),"circle-blur":new bt(Ie.paint_circle["circle-blur"]),"circle-opacity":new bt(Ie.paint_circle["circle-opacity"]),"circle-translate":new dt(Ie.paint_circle["circle-translate"]),"circle-translate-anchor":new dt(Ie.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new dt(Ie.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new dt(Ie.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new bt(Ie.paint_circle["circle-stroke-width"]),"circle-stroke-color":new bt(Ie.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new bt(Ie.paint_circle["circle-stroke-opacity"])}),layout:$6},wi=1e-6,Si=typeof Float32Array<"u"?Float32Array:Array;function iS(){var a=new Si(9);return Si!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function G_(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function oS(a,n,s){var d=n[0],g=n[1],_=n[2],x=n[3],k=n[4],E=n[5],I=n[6],R=n[7],B=n[8],V=n[9],U=n[10],G=n[11],oe=n[12],ne=n[13],ye=n[14],ke=n[15],pe=s[0],we=s[1],Be=s[2],Re=s[3];return a[0]=pe*d+we*k+Be*B+Re*oe,a[1]=pe*g+we*E+Be*V+Re*ne,a[2]=pe*_+we*I+Be*U+Re*ye,a[3]=pe*x+we*R+Be*G+Re*ke,a[4]=(pe=s[4])*d+(we=s[5])*k+(Be=s[6])*B+(Re=s[7])*oe,a[5]=pe*g+we*E+Be*V+Re*ne,a[6]=pe*_+we*I+Be*U+Re*ye,a[7]=pe*x+we*R+Be*G+Re*ke,a[8]=(pe=s[8])*d+(we=s[9])*k+(Be=s[10])*B+(Re=s[11])*oe,a[9]=pe*g+we*E+Be*V+Re*ne,a[10]=pe*_+we*I+Be*U+Re*ye,a[11]=pe*x+we*R+Be*G+Re*ke,a[12]=(pe=s[12])*d+(we=s[13])*k+(Be=s[14])*B+(Re=s[15])*oe,a[13]=pe*g+we*E+Be*V+Re*ne,a[14]=pe*_+we*I+Be*U+Re*ye,a[15]=pe*x+we*R+Be*G+Re*ke,a}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var Ud,V6=oS;function aS(){var a=new Si(3);return Si!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function sS(a,n,s){var d=new Si(3);return d[0]=a,d[1]=n,d[2]=s,d}function jm(a,n,s){var d=n[0],g=n[1],_=n[2],x=n[3];return a[0]=s[0]*d+s[4]*g+s[8]*_+s[12]*x,a[1]=s[1]*d+s[5]*g+s[9]*_+s[13]*x,a[2]=s[2]*d+s[6]*g+s[10]*_+s[14]*x,a[3]=s[3]*d+s[7]*g+s[11]*_+s[15]*x,a}function lS(){var a=new Si(4);return Si!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function cS(a,n){const s=jm([],[a.x,a.y,0,1],n);return new ut(s[0]/s[3],s[1]/s[3])}aS(),Ud=new Si(4),Si!=Float32Array&&(Ud[0]=0,Ud[1]=0,Ud[2]=0,Ud[3]=0),aS(),sS(1,0,0),sS(0,1,0),lS(),lS(),iS(),function(){var a;a=new Si(2),Si!=Float32Array&&(a[0]=0,a[1]=0)}();class uS extends N_{}it("HeatmapBucket",uS,{omit:["layers"]});var N6={paint:new Mn({"heatmap-radius":new bt(Ie.paint_heatmap["heatmap-radius"]),"heatmap-weight":new bt(Ie.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new dt(Ie.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xa(Ie.paint_heatmap["heatmap-color"]),"heatmap-opacity":new dt(Ie.paint_heatmap["heatmap-opacity"])})};function Z_(a,{width:n,height:s},d,g){if(g){if(g instanceof Uint8ClampedArray)g=new Uint8Array(g.buffer);else if(g.length!==n*s*d)throw new RangeError(`mismatched image size. expected: ${g.length} but got: ${n*s*d}`)}else g=new Uint8Array(n*s*d);return a.width=n,a.height=s,a.data=g,a}function hS(a,{width:n,height:s},d){if(n===a.width&&s===a.height)return;const g=Z_({},{width:n,height:s},d);W_(a,g,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,n),height:Math.min(a.height,s)},d),a.width=n,a.height=s,a.data=g.data}function W_(a,n,s,d,g,_){if(g.width===0||g.height===0)return n;if(g.width>a.width||g.height>a.height||s.x>a.width-g.width||s.y>a.height-g.height)throw new RangeError("out of range source coordinates for image copy");if(g.width>n.width||g.height>n.height||d.x>n.width-g.width||d.y>n.height-g.height)throw new RangeError("out of range destination coordinates for image copy");const x=a.data,k=n.data;if(x===k)throw new Error("srcData equals dstData, so image is already copied");for(let E=0;E<g.height;E++){const I=((s.y+E)*a.width+s.x)*_,R=((d.y+E)*n.width+d.x)*_;for(let B=0;B<g.width*_;B++)k[R+B]=x[I+B]}return n}class jd{constructor(n,s){Z_(this,n,1,s)}resize(n){hS(this,n,1)}clone(){return new jd({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,g,_){W_(n,s,d,g,_,1)}}class wo{constructor(n,s){Z_(this,n,4,s)}resize(n){hS(this,n,4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new wo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,d,g,_){W_(n,s,d,g,_,4)}}function dS(a){const n={},s=a.resolution||256,d=a.clips?a.clips.length:1,g=a.image||new wo({width:s,height:d});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);const _=(x,k,E)=>{n[a.evaluationKey]=E;const I=a.expression.evaluate(n);g.data[x+k+0]=Math.floor(255*I.r/I.a),g.data[x+k+1]=Math.floor(255*I.g/I.a),g.data[x+k+2]=Math.floor(255*I.b/I.a),g.data[x+k+3]=Math.floor(255*I.a)};if(a.clips)for(let x=0,k=0;x<d;++x,k+=4*s)for(let E=0,I=0;E<s;E++,I+=4){const R=E/(s-1),{start:B,end:V}=a.clips[x];_(k,I,B*(1-R)+V*R)}else for(let x=0,k=0;x<s;x++,k+=4)_(0,k,x/(s-1));return g}it("AlphaImage",jd),it("RGBAImage",wo);var U6={paint:new Mn({"hillshade-illumination-direction":new dt(Ie.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new dt(Ie.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new dt(Ie.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new dt(Ie.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new dt(Ie.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new dt(Ie.paint_hillshade["hillshade-accent-color"])})};const j6=cn([{name:"a_pos",components:2,type:"Int16"}],4),{members:G6}=j6;var Gm={exports:{}};function Zm(a,n,s){s=s||2;var d,g,_,x,k,E,I,R=n&&n.length,B=R?n[0]*s:a.length,V=fS(a,0,B,s,!0),U=[];if(!V||V.next===V.prev)return U;if(R&&(V=function(oe,ne,ye,ke){var pe,we,Be,Re=[];for(pe=0,we=ne.length;pe<we;pe++)(Be=fS(oe,ne[pe]*ke,pe<we-1?ne[pe+1]*ke:oe.length,ke,!1))===Be.next&&(Be.steiner=!0),Re.push(J6(Be));for(Re.sort(X6),pe=0;pe<Re.length;pe++)ye=K6(Re[pe],ye);return ye}(a,n,V,s)),a.length>80*s){d=_=a[0],g=x=a[1];for(var G=s;G<B;G+=s)(k=a[G])<d&&(d=k),(E=a[G+1])<g&&(g=E),k>_&&(_=k),E>x&&(x=E);I=(I=Math.max(_-d,x-g))!==0?32767/I:0}return Gd(V,U,s,d,g,I,0),U}function fS(a,n,s,d,g){var _,x;if(g===X_(a,n,s,d)>0)for(_=n;_<s;_+=d)x=gS(_,a[_],a[_+1],x);else for(_=s-d;_>=n;_-=d)x=gS(_,a[_],a[_+1],x);return x&&Wm(x,x.next)&&(Wd(x),x=x.next),x}function tu(a,n){if(!a)return a;n||(n=a);var s,d=a;do if(s=!1,d.steiner||!Wm(d,d.next)&&en(d.prev,d,d.next)!==0)d=d.next;else{if(Wd(d),(d=n=d.prev)===d.next)break;s=!0}while(s||d!==n);return n}function Gd(a,n,s,d,g,_,x){if(a){!x&&_&&function(R,B,V,U){var G=R;do G.z===0&&(G.z=H_(G.x,G.y,B,V,U)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,function(oe){var ne,ye,ke,pe,we,Be,Re,nt,ht=1;do{for(ye=oe,oe=null,we=null,Be=0;ye;){for(Be++,ke=ye,Re=0,ne=0;ne<ht&&(Re++,ke=ke.nextZ);ne++);for(nt=ht;Re>0||nt>0&&ke;)Re!==0&&(nt===0||!ke||ye.z<=ke.z)?(pe=ye,ye=ye.nextZ,Re--):(pe=ke,ke=ke.nextZ,nt--),we?we.nextZ=pe:oe=pe,pe.prevZ=we,we=pe;ye=ke}we.nextZ=null,ht*=2}while(Be>1)}(G)}(a,d,g,_);for(var k,E,I=a;a.prev!==a.next;)if(k=a.prev,E=a.next,_?W6(a,d,g,_):Z6(a))n.push(k.i/s|0),n.push(a.i/s|0),n.push(E.i/s|0),Wd(a),a=E.next,I=E.next;else if((a=E)===I){x?x===1?Gd(a=H6(tu(a),n,s),n,s,d,g,_,2):x===2&&q6(a,n,s,d,g,_):Gd(tu(a),n,s,d,g,_,1);break}}}function Z6(a){var n=a.prev,s=a,d=a.next;if(en(n,s,d)>=0)return!1;for(var g=n.x,_=s.x,x=d.x,k=n.y,E=s.y,I=d.y,R=g<_?g<x?g:x:_<x?_:x,B=k<E?k<I?k:I:E<I?E:I,V=g>_?g>x?g:x:_>x?_:x,U=k>E?k>I?k:I:E>I?E:I,G=d.next;G!==n;){if(G.x>=R&&G.x<=V&&G.y>=B&&G.y<=U&&hh(g,k,_,E,x,I,G.x,G.y)&&en(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function W6(a,n,s,d){var g=a.prev,_=a,x=a.next;if(en(g,_,x)>=0)return!1;for(var k=g.x,E=_.x,I=x.x,R=g.y,B=_.y,V=x.y,U=k<E?k<I?k:I:E<I?E:I,G=R<B?R<V?R:V:B<V?B:V,oe=k>E?k>I?k:I:E>I?E:I,ne=R>B?R>V?R:V:B>V?B:V,ye=H_(U,G,n,s,d),ke=H_(oe,ne,n,s,d),pe=a.prevZ,we=a.nextZ;pe&&pe.z>=ye&&we&&we.z<=ke;){if(pe.x>=U&&pe.x<=oe&&pe.y>=G&&pe.y<=ne&&pe!==g&&pe!==x&&hh(k,R,E,B,I,V,pe.x,pe.y)&&en(pe.prev,pe,pe.next)>=0||(pe=pe.prevZ,we.x>=U&&we.x<=oe&&we.y>=G&&we.y<=ne&&we!==g&&we!==x&&hh(k,R,E,B,I,V,we.x,we.y)&&en(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;pe&&pe.z>=ye;){if(pe.x>=U&&pe.x<=oe&&pe.y>=G&&pe.y<=ne&&pe!==g&&pe!==x&&hh(k,R,E,B,I,V,pe.x,pe.y)&&en(pe.prev,pe,pe.next)>=0)return!1;pe=pe.prevZ}for(;we&&we.z<=ke;){if(we.x>=U&&we.x<=oe&&we.y>=G&&we.y<=ne&&we!==g&&we!==x&&hh(k,R,E,B,I,V,we.x,we.y)&&en(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function H6(a,n,s){var d=a;do{var g=d.prev,_=d.next.next;!Wm(g,_)&&pS(g,d,d.next,_)&&Zd(g,_)&&Zd(_,g)&&(n.push(g.i/s|0),n.push(d.i/s|0),n.push(_.i/s|0),Wd(d),Wd(d.next),d=a=_),d=d.next}while(d!==a);return tu(d)}function q6(a,n,s,d,g,_){var x=a;do{for(var k=x.next.next;k!==x.prev;){if(x.i!==k.i&&Q6(x,k)){var E=mS(x,k);return x=tu(x,x.next),E=tu(E,E.next),Gd(x,n,s,d,g,_,0),void Gd(E,n,s,d,g,_,0)}k=k.next}x=x.next}while(x!==a)}function X6(a,n){return a.x-n.x}function K6(a,n){var s=function(g,_){var x,k=_,E=g.x,I=g.y,R=-1/0;do{if(I<=k.y&&I>=k.next.y&&k.next.y!==k.y){var B=k.x+(I-k.y)*(k.next.x-k.x)/(k.next.y-k.y);if(B<=E&&B>R&&(R=B,x=k.x<k.next.x?k:k.next,B===E))return x}k=k.next}while(k!==_);if(!x)return null;var V,U=x,G=x.x,oe=x.y,ne=1/0;k=x;do E>=k.x&&k.x>=G&&E!==k.x&&hh(I<oe?E:R,I,G,oe,I<oe?R:E,I,k.x,k.y)&&(V=Math.abs(I-k.y)/(E-k.x),Zd(k,g)&&(V<ne||V===ne&&(k.x>x.x||k.x===x.x&&Y6(x,k)))&&(x=k,ne=V)),k=k.next;while(k!==U);return x}(a,n);if(!s)return n;var d=mS(s,a);return tu(d,d.next),tu(s,s.next)}function Y6(a,n){return en(a.prev,a,n.prev)<0&&en(n.next,a,a.next)<0}function H_(a,n,s,d,g){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*g|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-d)*g|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function J6(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function hh(a,n,s,d,g,_,x,k){return(g-x)*(n-k)>=(a-x)*(_-k)&&(a-x)*(d-k)>=(s-x)*(n-k)&&(s-x)*(_-k)>=(g-x)*(d-k)}function Q6(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,d){var g=s;do{if(g.i!==s.i&&g.next.i!==s.i&&g.i!==d.i&&g.next.i!==d.i&&pS(g,g.next,s,d))return!0;g=g.next}while(g!==s);return!1}(a,n)&&(Zd(a,n)&&Zd(n,a)&&function(s,d){var g=s,_=!1,x=(s.x+d.x)/2,k=(s.y+d.y)/2;do g.y>k!=g.next.y>k&&g.next.y!==g.y&&x<(g.next.x-g.x)*(k-g.y)/(g.next.y-g.y)+g.x&&(_=!_),g=g.next;while(g!==s);return _}(a,n)&&(en(a.prev,a,n.prev)||en(a,n.prev,n))||Wm(a,n)&&en(a.prev,a,a.next)>0&&en(n.prev,n,n.next)>0)}function en(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function Wm(a,n){return a.x===n.x&&a.y===n.y}function pS(a,n,s,d){var g=qm(en(a,n,s)),_=qm(en(a,n,d)),x=qm(en(s,d,a)),k=qm(en(s,d,n));return g!==_&&x!==k||!(g!==0||!Hm(a,s,n))||!(_!==0||!Hm(a,d,n))||!(x!==0||!Hm(s,a,d))||!(k!==0||!Hm(s,n,d))}function Hm(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function qm(a){return a>0?1:a<0?-1:0}function Zd(a,n){return en(a.prev,a,a.next)<0?en(a,n,a.next)>=0&&en(a,a.prev,n)>=0:en(a,n,a.prev)<0||en(a,a.next,n)<0}function mS(a,n){var s=new q_(a.i,a.x,a.y),d=new q_(n.i,n.x,n.y),g=a.next,_=n.prev;return a.next=n,n.prev=a,s.next=g,g.prev=s,d.next=s,s.prev=d,_.next=d,d.prev=_,d}function gS(a,n,s,d){var g=new q_(a,n,s);return d?(g.next=d.next,g.prev=d,d.next.prev=g,d.next=g):(g.prev=g,g.next=g),g}function Wd(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function q_(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function X_(a,n,s,d){for(var g=0,_=n,x=s-d;_<s;_+=d)g+=(a[x]-a[_])*(a[_+1]+a[x+1]),x=_;return g}function eM(a,n,s,d,g){yS(a,n,s||0,d||a.length-1,g||tM)}function yS(a,n,s,d,g){for(;d>s;){if(d-s>600){var _=d-s+1,x=n-s+1,k=Math.log(_),E=.5*Math.exp(2*k/3),I=.5*Math.sqrt(k*E*(_-E)/_)*(x-_/2<0?-1:1);yS(a,n,Math.max(s,Math.floor(n-x*E/_+I)),Math.min(d,Math.floor(n+(_-x)*E/_+I)),g)}var R=a[n],B=s,V=d;for(Hd(a,s,n),g(a[d],R)>0&&Hd(a,s,d);B<V;){for(Hd(a,B,V),B++,V--;g(a[B],R)<0;)B++;for(;g(a[V],R)>0;)V--}g(a[s],R)===0?Hd(a,s,V):Hd(a,++V,d),V<=n&&(s=V+1),n<=V&&(d=V-1)}}function Hd(a,n,s){var d=a[n];a[n]=a[s],a[s]=d}function tM(a,n){return a<n?-1:a>n?1:0}function K_(a,n){const s=a.length;if(s<=1)return[a];const d=[];let g,_;for(let x=0;x<s;x++){const k=ve(a[x]);k!==0&&(a[x].area=Math.abs(k),_===void 0&&(_=k<0),_===k<0?(g&&d.push(g),g=[a[x]]):g.push(a[x]))}if(g&&d.push(g),n>1)for(let x=0;x<d.length;x++)d[x].length<=n||(eM(d[x],n,1,d[x].length-1,rM),d[x]=d[x].slice(0,n));return d}function rM(a,n){return n.area-a.area}function Y_(a,n,s){const d=s.patternDependencies;let g=!1;for(const _ of n){const x=_.paint.get(`${a}-pattern`);x.isConstant()||(g=!0);const k=x.constantOr(null);k&&(g=!0,d[k.to]=!0,d[k.from]=!0)}return g}function J_(a,n,s,d,g){const _=g.patternDependencies;for(const x of n){const k=x.paint.get(`${a}-pattern`).value;if(k.kind!=="constant"){let E=k.evaluate({zoom:d-1},s,{},g.availableImages),I=k.evaluate({zoom:d},s,{},g.availableImages),R=k.evaluate({zoom:d+1},s,{},g.availableImages);E=E&&E.name?E.name:E,I=I&&I.name?I.name:I,R=R&&R.name?R.name:R,_[E]=!0,_[I]=!0,_[R]=!0,s.patterns[x.id]={min:E,mid:I,max:R}}}return s}Gm.exports=Zm,Gm.exports.default=Zm,Zm.deviation=function(a,n,s,d){var g=n&&n.length,_=Math.abs(X_(a,0,g?n[0]*s:a.length,s));if(g)for(var x=0,k=n.length;x<k;x++)_-=Math.abs(X_(a,n[x]*s,x<k-1?n[x+1]*s:a.length,s));var E=0;for(x=0;x<d.length;x+=3){var I=d[x]*s,R=d[x+1]*s,B=d[x+2]*s;E+=Math.abs((a[I]-a[B])*(a[R+1]-a[I+1])-(a[I]-a[R])*(a[B+1]-a[I+1]))}return _===0&&E===0?0:Math.abs((E-_)/_)},Zm.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},d=0,g=0;g<a.length;g++){for(var _=0;_<a[g].length;_++)for(var x=0;x<n;x++)s.vertices.push(a[g][_][x]);g>0&&s.holes.push(d+=a[g-1].length)}return s};class Q_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new hr,this.indexArray=new bi,this.indexArray2=new xa,this.programConfigurations=new Jc(n.layers,n.zoom),this.segments=new Lt,this.segments2=new Lt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.hasPattern=Y_("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=!g.isConstant(),x=[];for(const{feature:k,id:E,index:I,sourceLayerIndex:R}of n){const B=this.layers[0]._featureFilter.needGeometry,V=eu(k,B);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),V,d))continue;const U=_?g.evaluate(V,{},d,s.availableImages):void 0,G={id:E,properties:k.properties,type:k.type,sourceLayerIndex:R,index:I,geometry:B?V.geometry:Qc(k),patterns:{},sortKey:U};x.push(G)}_&&x.sort((k,E)=>k.sortKey-E.sortKey);for(const k of x){const{geometry:E,index:I,sourceLayerIndex:R}=k;if(this.hasPattern){const B=J_("fill",this.layers,k,this.zoom,s);this.patternFeatures.push(B)}else this.addFeature(k,E,I,d,{});s.featureIndex.insert(n[I].feature,E,I,R,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,G6),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,d,g,_){for(const x of K_(s,500)){let k=0;for(const U of x)k+=U.length;const E=this.segments.prepareSegment(k,this.layoutVertexArray,this.indexArray),I=E.vertexLength,R=[],B=[];for(const U of x){if(U.length===0)continue;U!==x[0]&&B.push(R.length/2);const G=this.segments2.prepareSegment(U.length,this.layoutVertexArray,this.indexArray2),oe=G.vertexLength;this.layoutVertexArray.emplaceBack(U[0].x,U[0].y),this.indexArray2.emplaceBack(oe+U.length-1,oe),R.push(U[0].x),R.push(U[0].y);for(let ne=1;ne<U.length;ne++)this.layoutVertexArray.emplaceBack(U[ne].x,U[ne].y),this.indexArray2.emplaceBack(oe+ne-1,oe+ne),R.push(U[ne].x),R.push(U[ne].y);G.vertexLength+=U.length,G.primitiveLength+=U.length}const V=Gm.exports(R,B);for(let U=0;U<V.length;U+=3)this.indexArray.emplaceBack(I+V[U],I+V[U+1],I+V[U+2]);E.vertexLength+=k,E.primitiveLength+=V.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,g)}}it("FillBucket",Q_,{omit:["layers","patternFeatures"]});const nM=new Mn({"fill-sort-key":new bt(Ie.layout_fill["fill-sort-key"])});var iM={paint:new Mn({"fill-antialias":new dt(Ie.paint_fill["fill-antialias"]),"fill-opacity":new bt(Ie.paint_fill["fill-opacity"]),"fill-color":new bt(Ie.paint_fill["fill-color"]),"fill-outline-color":new bt(Ie.paint_fill["fill-outline-color"]),"fill-translate":new dt(Ie.paint_fill["fill-translate"]),"fill-translate-anchor":new dt(Ie.paint_fill["fill-translate-anchor"]),"fill-pattern":new Pl(Ie.paint_fill["fill-pattern"])}),layout:nM};const oM=cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),aM=cn([{name:"a_centroid",components:2,type:"Int16"}],4),{members:sM}=oM;var Ml={},lM=ut,_S=dh;function dh(a,n,s,d,g){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=d,this._values=g,a.readFields(cM,this,n)}function cM(a,n,s){a==1?n.id=s.readVarint():a==2?function(d,g){for(var _=d.readVarint()+d.pos;d.pos<_;){var x=g._keys[d.readVarint()],k=g._values[d.readVarint()];g.properties[x]=k}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function uM(a){for(var n,s,d=0,g=0,_=a.length,x=_-1;g<_;x=g++)d+=((s=a[x]).x-(n=a[g]).x)*(n.y+s.y);return d}dh.types=["Unknown","Point","LineString","Polygon"],dh.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,d=1,g=0,_=0,x=0,k=[];a.pos<s;){if(g<=0){var E=a.readVarint();d=7&E,g=E>>3}if(g--,d===1||d===2)_+=a.readSVarint(),x+=a.readSVarint(),d===1&&(n&&k.push(n),n=[]),n.push(new lM(_,x));else{if(d!==7)throw new Error("unknown command "+d);n&&n.push(n[0].clone())}}return n&&k.push(n),k},dh.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,d=0,g=0,_=0,x=1/0,k=-1/0,E=1/0,I=-1/0;a.pos<n;){if(d<=0){var R=a.readVarint();s=7&R,d=R>>3}if(d--,s===1||s===2)(g+=a.readSVarint())<x&&(x=g),g>k&&(k=g),(_+=a.readSVarint())<E&&(E=_),_>I&&(I=_);else if(s!==7)throw new Error("unknown command "+s)}return[x,E,k,I]},dh.prototype.toGeoJSON=function(a,n,s){var d,g,_=this.extent*Math.pow(2,s),x=this.extent*a,k=this.extent*n,E=this.loadGeometry(),I=dh.types[this.type];function R(U){for(var G=0;G<U.length;G++){var oe=U[G];U[G]=[360*(oe.x+x)/_-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+k)/_)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(d=0;d<E.length;d++)B[d]=E[d][0];R(E=B);break;case 2:for(d=0;d<E.length;d++)R(E[d]);break;case 3:for(E=function(U){var G=U.length;if(G<=1)return[U];for(var oe,ne,ye=[],ke=0;ke<G;ke++){var pe=uM(U[ke]);pe!==0&&(ne===void 0&&(ne=pe<0),ne===pe<0?(oe&&ye.push(oe),oe=[U[ke]]):oe.push(U[ke]))}return oe&&ye.push(oe),ye}(E),d=0;d<E.length;d++)for(g=0;g<E[d].length;g++)R(E[d][g])}E.length===1?E=E[0]:I="Multi"+I;var V={type:"Feature",geometry:{type:I,coordinates:E},properties:this.properties};return"id"in this&&(V.id=this.id),V};var hM=_S,vS=xS;function xS(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(dM,this,n),this.length=this._features.length}function dM(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(d){for(var g=null,_=d.readVarint()+d.pos;d.pos<_;){var x=d.readVarint()>>3;g=x===1?d.readString():x===2?d.readFloat():x===3?d.readDouble():x===4?d.readVarint64():x===5?d.readVarint():x===6?d.readSVarint():x===7?d.readBoolean():null}return g}(s))}xS.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new hM(this._pbf,n,this.extent,this._keys,this._values)};var fM=vS;function pM(a,n,s){if(a===3){var d=new fM(s,s.readVarint()+s.pos);d.length&&(n[d.name]=d)}}Ml.VectorTile=function(a,n){this.layers=a.readFields(pM,{},n)},Ml.VectorTileFeature=_S,Ml.VectorTileLayer=vS;const mM=Ml.VectorTileFeature.types,e1=Math.pow(2,13);function qd(a,n,s,d,g,_,x,k){a.emplaceBack(n,s,2*Math.floor(d*e1)+x,g*e1*2,_*e1*2,Math.round(k))}class t1{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new Xt,this.centroidVertexArray=new gt,this.indexArray=new bi,this.programConfigurations=new Jc(n.layers,n.zoom),this.segments=new Lt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.features=[],this.hasPattern=Y_("fill-extrusion",this.layers,s);for(const{feature:g,id:_,index:x,sourceLayerIndex:k}of n){const E=this.layers[0]._featureFilter.needGeometry,I=eu(g,E);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),I,d))continue;const R={id:_,sourceLayerIndex:k,index:x,geometry:E?I.geometry:Qc(g),properties:g.properties,type:g.type,patterns:{}};this.hasPattern?this.features.push(J_("fill-extrusion",this.layers,R,this.zoom,s)):this.addFeature(R,R.geometry,x,d,{}),s.featureIndex.insert(g,R.geometry,x,k,this.index,!0)}}addFeatures(n,s,d){for(const g of this.features){const{geometry:_}=g;this.addFeature(g,_,g.index,s,d)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,sM),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,aM.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,s,d,g,_){const x={x:0,y:0,vertexCount:0};for(const k of K_(s,500)){let E=0;for(const G of k)E+=G.length;let I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const G of k){if(G.length===0||yM(G))continue;let oe=0;for(let ne=0;ne<G.length;ne++){const ye=G[ne];if(ne>=1){const ke=G[ne-1];if(!gM(ye,ke)){I.vertexLength+4>Lt.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const pe=ye.sub(ke)._perp()._unit(),we=ke.dist(ye);oe+we>32768&&(oe=0),qd(this.layoutVertexArray,ye.x,ye.y,pe.x,pe.y,0,0,oe),qd(this.layoutVertexArray,ye.x,ye.y,pe.x,pe.y,0,1,oe),x.x+=2*ye.x,x.y+=2*ye.y,x.vertexCount+=2,oe+=we,qd(this.layoutVertexArray,ke.x,ke.y,pe.x,pe.y,0,0,oe),qd(this.layoutVertexArray,ke.x,ke.y,pe.x,pe.y,0,1,oe),x.x+=2*ke.x,x.y+=2*ke.y,x.vertexCount+=2;const Be=I.vertexLength;this.indexArray.emplaceBack(Be,Be+2,Be+1),this.indexArray.emplaceBack(Be+1,Be+2,Be+3),I.vertexLength+=4,I.primitiveLength+=2}}}}if(I.vertexLength+E>Lt.MAX_VERTEX_ARRAY_LENGTH&&(I=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray)),mM[n.type]!=="Polygon")continue;const R=[],B=[],V=I.vertexLength;for(const G of k)if(G.length!==0){G!==k[0]&&B.push(R.length/2);for(let oe=0;oe<G.length;oe++){const ne=G[oe];qd(this.layoutVertexArray,ne.x,ne.y,0,0,1,1,0),x.x+=ne.x,x.y+=ne.y,x.vertexCount+=1,R.push(ne.x),R.push(ne.y)}}const U=Gm.exports(R,B);for(let G=0;G<U.length;G+=3)this.indexArray.emplaceBack(V+U[G],V+U[G+2],V+U[G+1]);I.primitiveLength+=U.length/3,I.vertexLength+=E}for(let k=0;k<x.vertexCount;k++)this.centroidVertexArray.emplaceBack(Math.floor(x.x/x.vertexCount),Math.floor(x.y/x.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,g)}}function gM(a,n){return a.x===n.x&&(a.x<0||a.x>yn)||a.y===n.y&&(a.y<0||a.y>yn)}function yM(a){return a.every(n=>n.x<0)||a.every(n=>n.x>yn)||a.every(n=>n.y<0)||a.every(n=>n.y>yn)}it("FillExtrusionBucket",t1,{omit:["layers","features"]});var _M={paint:new Mn({"fill-extrusion-opacity":new dt(Ie["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new bt(Ie["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new dt(Ie["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new dt(Ie["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Pl(Ie["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new bt(Ie["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new bt(Ie["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new dt(Ie["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function Xd(a,n){return a.x*n.x+a.y*n.y}function bS(a,n){if(a.length===1){let s=0;const d=n[s++];let g;for(;!g||d.equals(g);)if(g=n[s++],!g)return 1/0;for(;s<n.length;s++){const _=n[s],x=a[0],k=g.sub(d),E=_.sub(d),I=x.sub(d),R=Xd(k,k),B=Xd(k,E),V=Xd(E,E),U=Xd(I,k),G=Xd(I,E),oe=R*V-B*B,ne=(V*U-B*G)/oe,ye=(R*G-B*U)/oe,ke=d.z*(1-ne-ye)+g.z*ne+_.z*ye;if(isFinite(ke))return ke}return 1/0}{let s=1/0;for(const d of n)s=Math.min(s,d.z);return s}}const vM=cn([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xM}=vM,bM=cn([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:wM}=bM,SM=Ml.VectorTileFeature.types,kM=Math.cos(Math.PI/180*37.5),wS=Math.pow(2,14)/.5;class r1{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new Jt,this.layoutVertexArray2=new fr,this.indexArray=new bi,this.programConfigurations=new Jc(n.layers,n.zoom),this.segments=new Lt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,d){this.hasPattern=Y_("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=!g.isConstant(),x=[];for(const{feature:k,id:E,index:I,sourceLayerIndex:R}of n){const B=this.layers[0]._featureFilter.needGeometry,V=eu(k,B);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),V,d))continue;const U=_?g.evaluate(V,{},d):void 0,G={id:E,properties:k.properties,type:k.type,sourceLayerIndex:R,index:I,geometry:B?V.geometry:Qc(k),patterns:{},sortKey:U};x.push(G)}_&&x.sort((k,E)=>k.sortKey-E.sortKey);for(const k of x){const{geometry:E,index:I,sourceLayerIndex:R}=k;if(this.hasPattern){const B=J_("line",this.layers,k,this.zoom,s);this.patternFeatures.push(B)}else this.addFeature(k,E,I,d,{});s.featureIndex.insert(n[I].feature,E,I,R,this.index)}}update(n,s,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,d)}addFeatures(n,s,d){for(const g of this.patternFeatures)this.addFeature(g,g.geometry,g.index,s,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,wM)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xM),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,d,g,_){const x=this.layers[0].layout,k=x.get("line-join").evaluate(n,{}),E=x.get("line-cap"),I=x.get("line-miter-limit"),R=x.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const B of s)this.addLine(B,n,k,E,I,R);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,d,_,g)}addLine(n,s,d,g,_,x){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ye=0;ye<n.length-1;ye++)this.totalDistance+=n[ye].dist(n[ye+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const k=SM[s.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let I=0;for(;I<E-1&&n[I].equals(n[I+1]);)I++;if(E<(k?3:2))return;d==="bevel"&&(_=1.05);const R=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let V,U,G,oe,ne;this.e1=this.e2=-1,k&&(V=n[E-2],ne=n[I].sub(V)._unit()._perp());for(let ye=I;ye<E;ye++){if(G=ye===E-1?k?n[I+1]:void 0:n[ye+1],G&&n[ye].equals(G))continue;ne&&(oe=ne),V&&(U=V),V=n[ye],ne=G?G.sub(V)._unit()._perp():oe,oe=oe||ne;let ke=oe.add(ne);ke.x===0&&ke.y===0||ke._unit();const pe=oe.x*ne.x+oe.y*ne.y,we=ke.x*ne.x+ke.y*ne.y,Be=we!==0?1/we:1/0,Re=2*Math.sqrt(2-2*we),nt=we<kM&&U&&G,ht=oe.x*ne.y-oe.y*ne.x>0;if(nt&&ye>I){const Ze=V.dist(U);if(Ze>2*R){const Qe=V.sub(V.sub(U)._mult(R/Ze)._round());this.updateDistance(U,Qe),this.addCurrentVertex(Qe,oe,0,0,B),U=Qe}}const Je=U&&G;let qe=Je?d:k?"butt":g;if(Je&&qe==="round"&&(Be<x?qe="miter":Be<=2&&(qe="fakeround")),qe==="miter"&&Be>_&&(qe="bevel"),qe==="bevel"&&(Be>2&&(qe="flipbevel"),Be<_&&(qe="miter")),U&&this.updateDistance(U,V),qe==="miter")ke._mult(Be),this.addCurrentVertex(V,ke,0,0,B);else if(qe==="flipbevel"){if(Be>100)ke=ne.mult(-1);else{const Ze=Be*oe.add(ne).mag()/oe.sub(ne).mag();ke._perp()._mult(Ze*(ht?-1:1))}this.addCurrentVertex(V,ke,0,0,B),this.addCurrentVertex(V,ke.mult(-1),0,0,B)}else if(qe==="bevel"||qe==="fakeround"){const Ze=-Math.sqrt(Be*Be-1),Qe=ht?Ze:0,Xe=ht?0:Ze;if(U&&this.addCurrentVertex(V,oe,Qe,Xe,B),qe==="fakeround"){const Ve=Math.round(180*Re/Math.PI/20);for(let yt=1;yt<Ve;yt++){let ft=yt/Ve;if(ft!==.5){const Dr=ft-.5;ft+=ft*Dr*(ft-1)*((1.0904+pe*(pe*(3.55645-1.43519*pe)-3.2452))*Dr*Dr+(.848013+pe*(.215638*pe-1.06021)))}const Rt=ne.sub(oe)._mult(ft)._add(oe)._unit()._mult(ht?-1:1);this.addHalfVertex(V,Rt.x,Rt.y,!1,ht,0,B)}}G&&this.addCurrentVertex(V,ne,-Qe,-Xe,B)}else if(qe==="butt")this.addCurrentVertex(V,ke,0,0,B);else if(qe==="square"){const Ze=U?1:-1;this.addCurrentVertex(V,ke,Ze,Ze,B)}else qe==="round"&&(U&&(this.addCurrentVertex(V,oe,0,0,B),this.addCurrentVertex(V,oe,1,1,B,!0)),G&&(this.addCurrentVertex(V,ne,-1,-1,B,!0),this.addCurrentVertex(V,ne,0,0,B)));if(nt&&ye<E-1){const Ze=V.dist(G);if(Ze>2*R){const Qe=V.add(G.sub(V)._mult(R/Ze)._round());this.updateDistance(V,Qe),this.addCurrentVertex(Qe,ne,0,0,B),V=Qe}}}}addCurrentVertex(n,s,d,g,_,x=!1){const k=s.y*g-s.x,E=-s.y-s.x*g;this.addHalfVertex(n,s.x+s.y*d,s.y-s.x*d,x,!1,d,_),this.addHalfVertex(n,k,E,x,!0,-g,_),this.distance>wS/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,s,d,g,_,x))}addHalfVertex({x:n,y:s},d,g,_,x,k,E){const I=.5*(this.lineClips?this.scaledDistance*(wS-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(_?1:0),(s<<1)+(x?1:0),Math.round(63*d)+128,Math.round(63*g)+128,1+(k===0?0:k<0?-1:1)|(63&I)<<2,I>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const R=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,R),E.primitiveLength++),x?this.e2=R:this.e1=R}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}it("LineBucket",r1,{omit:["layers","patternFeatures"]});const TM=new Mn({"line-cap":new dt(Ie.layout_line["line-cap"]),"line-join":new bt(Ie.layout_line["line-join"]),"line-miter-limit":new dt(Ie.layout_line["line-miter-limit"]),"line-round-limit":new dt(Ie.layout_line["line-round-limit"]),"line-sort-key":new bt(Ie.layout_line["line-sort-key"])});var SS={paint:new Mn({"line-opacity":new bt(Ie.paint_line["line-opacity"]),"line-color":new bt(Ie.paint_line["line-color"]),"line-translate":new dt(Ie.paint_line["line-translate"]),"line-translate-anchor":new dt(Ie.paint_line["line-translate-anchor"]),"line-width":new bt(Ie.paint_line["line-width"]),"line-gap-width":new bt(Ie.paint_line["line-gap-width"]),"line-offset":new bt(Ie.paint_line["line-offset"]),"line-blur":new bt(Ie.paint_line["line-blur"]),"line-dasharray":new Bd(Ie.paint_line["line-dasharray"]),"line-pattern":new Pl(Ie.paint_line["line-pattern"]),"line-gradient":new Xa(Ie.paint_line["line-gradient"])}),layout:TM};const kS=new class extends bt{possiblyEvaluate(a,n){return n=new Lr(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(a,n)}evaluate(a,n,s,d){return n=q({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(a,n,s,d)}}(SS.paint.properties["line-width"].specification);function TS(a,n){return n>0?n+2*a:a}kS.useIntegerZoom=!0;const EM=cn([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),CM=cn([{name:"a_projected_pos",components:3,type:"Float32"}],4);cn([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const AM=cn([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);cn([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const ES=cn([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),PM=cn([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function IM(a,n,s){return a.sections.forEach(d=>{d.text=function(g,_,x){const k=_.layout.get("text-transform").evaluate(x,{});return k==="uppercase"?g=g.toLocaleUpperCase():k==="lowercase"&&(g=g.toLocaleLowerCase()),eo.applyArabicShaping&&(g=eo.applyArabicShaping(g)),g}(d.text,n,s)}),a}cn([{name:"triangle",components:3,type:"Uint16"}]),cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),cn([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),cn([{type:"Float32",name:"offsetX"}]),cn([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Kd={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var Dn=24,n1=gr,CS=function(a,n,s,d,g){var _,x,k=8*g-d-1,E=(1<<k)-1,I=E>>1,R=-7,B=s?g-1:0,V=s?-1:1,U=a[n+B];for(B+=V,_=U&(1<<-R)-1,U>>=-R,R+=k;R>0;_=256*_+a[n+B],B+=V,R-=8);for(x=_&(1<<-R)-1,_>>=-R,R+=d;R>0;x=256*x+a[n+B],B+=V,R-=8);if(_===0)_=1-I;else{if(_===E)return x?NaN:1/0*(U?-1:1);x+=Math.pow(2,d),_-=I}return(U?-1:1)*x*Math.pow(2,_-d)},AS=function(a,n,s,d,g,_){var x,k,E,I=8*_-g-1,R=(1<<I)-1,B=R>>1,V=g===23?Math.pow(2,-24)-Math.pow(2,-77):0,U=d?0:_-1,G=d?1:-1,oe=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(k=isNaN(n)?1:0,x=R):(x=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-x))<1&&(x--,E*=2),(n+=x+B>=1?V/E:V*Math.pow(2,1-B))*E>=2&&(x++,E/=2),x+B>=R?(k=0,x=R):x+B>=1?(k=(n*E-1)*Math.pow(2,g),x+=B):(k=n*Math.pow(2,B-1)*Math.pow(2,g),x=0));g>=8;a[s+U]=255&k,U+=G,k/=256,g-=8);for(x=x<<g|k,I+=g;I>0;a[s+U]=255&x,U+=G,x/=256,I-=8);a[s+U-G]|=128*oe};function gr(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}gr.Varint=0,gr.Fixed64=1,gr.Bytes=2,gr.Fixed32=5;var Dl,i1=4294967296,PS=1/i1,IS=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Us(a){return a.type===gr.Bytes?a.readVarint()+a.pos:a.pos+1}function fh(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function zS(a,n,s){var d=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(d);for(var g=s.pos-1;g>=a;g--)s.buf[g+d]=s.buf[g]}function zM(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function MM(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function DM(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function RM(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function LM(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function BM(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function FM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function $M(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function OM(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function Xm(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function ph(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function MS(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}function VM(a,n,s){a===1&&s.readMessage(NM,n)}function NM(a,n,s){if(a===3){const{id:d,bitmap:g,width:_,height:x,left:k,top:E,advance:I}=s.readMessage(UM,{});n.push({id:d,bitmap:new jd({width:_+6,height:x+6},g),metrics:{width:_,height:x,left:k,top:E,advance:I}})}}function UM(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}function DS(a){let n=0,s=0;for(const x of a)n+=x.w*x.h,s=Math.max(s,x.w);a.sort((x,k)=>k.h-x.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let g=0,_=0;for(const x of a)for(let k=d.length-1;k>=0;k--){const E=d[k];if(!(x.w>E.w||x.h>E.h)){if(x.x=E.x,x.y=E.y,_=Math.max(_,x.y+x.h),g=Math.max(g,x.x+x.w),x.w===E.w&&x.h===E.h){const I=d.pop();k<d.length&&(d[k]=I)}else x.h===E.h?(E.x+=x.w,E.w-=x.w):x.w===E.w?(E.y+=x.h,E.h-=x.h):(d.push({x:E.x+x.w,y:E.y,w:E.w-x.w,h:x.h}),E.y+=x.h,E.h-=x.h);break}}return{w:g,h:_,fill:n/(g*_)||0}}gr.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var d=this.readVarint(),g=d>>3,_=this.pos;this.type=7&d,a(g,n,this),this.pos===_&&this.skip(d)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=Xm(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=MS(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Xm(this.buf,this.pos)+Xm(this.buf,this.pos+4)*i1;return this.pos+=8,a},readSFixed64:function(){var a=Xm(this.buf,this.pos)+MS(this.buf,this.pos+4)*i1;return this.pos+=8,a},readFloat:function(){var a=CS(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=CS(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,d=this.buf;return n=127&(s=d[this.pos++]),s<128?n:(n|=(127&(s=d[this.pos++]))<<7,s<128?n:(n|=(127&(s=d[this.pos++]))<<14,s<128?n:(n|=(127&(s=d[this.pos++]))<<21,s<128?n:function(g,_,x){var k,E,I=x.buf;if(k=(112&(E=I[x.pos++]))>>4,E<128||(k|=(127&(E=I[x.pos++]))<<3,E<128)||(k|=(127&(E=I[x.pos++]))<<10,E<128)||(k|=(127&(E=I[x.pos++]))<<17,E<128)||(k|=(127&(E=I[x.pos++]))<<24,E<128)||(k|=(1&(E=I[x.pos++]))<<31,E<128))return fh(g,k,_);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=d[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&IS?function(s,d,g){return IS.decode(s.subarray(d,g))}(this.buf,n,a):function(s,d,g){for(var _="",x=d;x<g;){var k,E,I,R=s[x],B=null,V=R>239?4:R>223?3:R>191?2:1;if(x+V>g)break;V===1?R<128&&(B=R):V===2?(192&(k=s[x+1]))==128&&(B=(31&R)<<6|63&k)<=127&&(B=null):V===3?(E=s[x+2],(192&(k=s[x+1]))==128&&(192&E)==128&&((B=(15&R)<<12|(63&k)<<6|63&E)<=2047||B>=55296&&B<=57343)&&(B=null)):V===4&&(E=s[x+2],I=s[x+3],(192&(k=s[x+1]))==128&&(192&E)==128&&(192&I)==128&&((B=(15&R)<<18|(63&k)<<12|(63&E)<<6|63&I)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,V=1):B>65535&&(B-=65536,_+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),_+=String.fromCharCode(B),x+=V}return _}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==gr.Bytes)return a.push(this.readVarint(n));var s=Us(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==gr.Bytes)return a.push(this.readSVarint());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==gr.Bytes)return a.push(this.readBoolean());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==gr.Bytes)return a.push(this.readFloat());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==gr.Bytes)return a.push(this.readDouble());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==gr.Bytes)return a.push(this.readFixed32());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==gr.Bytes)return a.push(this.readSFixed32());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==gr.Bytes)return a.push(this.readFixed64());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==gr.Bytes)return a.push(this.readSFixed64());var n=Us(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===gr.Varint)for(;this.buf[this.pos++]>127;);else if(n===gr.Bytes)this.pos=this.readVarint()+this.pos;else if(n===gr.Fixed32)this.pos+=4;else{if(n!==gr.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),ph(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),ph(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),ph(this.buf,-1&a,this.pos),ph(this.buf,Math.floor(a*PS),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),ph(this.buf,-1&a,this.pos),ph(this.buf,Math.floor(a*PS),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var d,g;if(n>=0?(d=n%4294967296|0,g=n/4294967296|0):(g=~(-n/4294967296),4294967295^(d=~(-n%4294967296))?d=d+1|0:(d=0,g=g+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(_,x,k){k.buf[k.pos++]=127&_|128,_>>>=7,k.buf[k.pos++]=127&_|128,_>>>=7,k.buf[k.pos++]=127&_|128,_>>>=7,k.buf[k.pos++]=127&_|128,k.buf[k.pos]=127&(_>>>=7)}(d,0,s),function(_,x){var k=(7&_)<<4;x.buf[x.pos++]|=k|((_>>>=3)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_|((_>>>=7)?128:0),_&&(x.buf[x.pos++]=127&_)))))}(g,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(d,g,_){for(var x,k,E=0;E<g.length;E++){if((x=g.charCodeAt(E))>55295&&x<57344){if(!k){x>56319||E+1===g.length?(d[_++]=239,d[_++]=191,d[_++]=189):k=x;continue}if(x<56320){d[_++]=239,d[_++]=191,d[_++]=189,k=x;continue}x=k-55296<<10|x-56320|65536,k=null}else k&&(d[_++]=239,d[_++]=191,d[_++]=189,k=null);x<128?d[_++]=x:(x<2048?d[_++]=x>>6|192:(x<65536?d[_++]=x>>12|224:(d[_++]=x>>18|240,d[_++]=x>>12&63|128),d[_++]=x>>6&63|128),d[_++]=63&x|128)}return _}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&zS(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),AS(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),AS(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var d=this.pos-s;d>=128&&zS(s,d,this),this.pos=s-1,this.writeVarint(d),this.pos+=d},writeMessage:function(a,n,s){this.writeTag(a,gr.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,zM,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,MM,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,LM,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,DM,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,RM,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,BM,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,FM,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,$M,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,OM,n)},writeBytesField:function(a,n){this.writeTag(a,gr.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,gr.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,gr.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,gr.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,gr.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,gr.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,gr.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,gr.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,gr.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,gr.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};class o1{constructor(n,{pixelRatio:s,version:d,stretchX:g,stretchY:_,content:x}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=g,this.stretchY=_,this.content=x,this.version=d}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class RS{constructor(n,s){const d={},g={};this.haveRenderCallbacks=[];const _=[];this.addImages(n,d,_),this.addImages(s,g,_);const{w:x,h:k}=DS(_),E=new wo({width:x||1,height:k||1});for(const I in n){const R=n[I],B=d[I].paddedRect;wo.copy(R.data,E,{x:0,y:0},{x:B.x+1,y:B.y+1},R.data)}for(const I in s){const R=s[I],B=g[I].paddedRect,V=B.x+1,U=B.y+1,G=R.data.width,oe=R.data.height;wo.copy(R.data,E,{x:0,y:0},{x:V,y:U},R.data),wo.copy(R.data,E,{x:0,y:oe-1},{x:V,y:U-1},{width:G,height:1}),wo.copy(R.data,E,{x:0,y:0},{x:V,y:U+oe},{width:G,height:1}),wo.copy(R.data,E,{x:G-1,y:0},{x:V-1,y:U},{width:1,height:oe}),wo.copy(R.data,E,{x:0,y:0},{x:V+G,y:U},{width:1,height:oe})}this.image=E,this.iconPositions=d,this.patternPositions=g}addImages(n,s,d){for(const g in n){const _=n[g],x={x:0,y:0,w:_.data.width+2,h:_.data.height+2};d.push(x),s[g]=new o1(x,_),_.hasRenderCallback&&this.haveRenderCallbacks.push(g)}}patchUpdatedImages(n,s){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in n.updatedImages)this.patchUpdatedImage(this.iconPositions[d],n.getImage(d),s),this.patchUpdatedImage(this.patternPositions[d],n.getImage(d),s)}patchUpdatedImage(n,s,d){if(!n||!s||n.version===s.version)return;n.version=s.version;const[g,_]=n.tl;d.update(s.data,void 0,{x:g,y:_})}}it("ImagePosition",o1),it("ImageAtlas",RS),l.WritingMode=void 0,(Dl=l.WritingMode||(l.WritingMode={}))[Dl.none=0]="none",Dl[Dl.horizontal=1]="horizontal",Dl[Dl.vertical=2]="vertical",Dl[Dl.horizontalOnly=3]="horizontalOnly";const Km=-17;class Yd{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const d=new Yd;return d.scale=n||1,d.fontStack=s,d}static forImage(n){const s=new Yd;return s.imageName=n,s}}class mh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const d=new mh;for(let g=0;g<n.sections.length;g++){const _=n.sections[g];_.image?d.addImageSection(_):d.addTextSection(_,s)}return d}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let s="";for(let d=0;d<n.length;d++){const g=n.charCodeAt(d+1)||null,_=n.charCodeAt(d-1)||null;s+=g&&Im(g)&&!Kd[n[d+1]]||_&&Im(_)&&!Kd[n[d-1]]||!Kd[n[d]]?n[d]:Kd[n[d]]}return s}(this.text)}trim(){let n=0;for(let d=0;d<this.text.length&&Jm[this.text.charCodeAt(d)];d++)n++;let s=this.text.length;for(let d=this.text.length-1;d>=0&&d>=n&&Jm[this.text.charCodeAt(d)];d--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const d=new mh;return d.text=this.text.substring(n,s),d.sectionIndex=this.sectionIndex.slice(n,s),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(Yd.forText(n.scale,n.fontStack||s));const d=this.sections.length-1;for(let g=0;g<n.text.length;++g)this.sectionIndex.push(d)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void _e("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Yd.forImage(s)),this.sectionIndex.push(this.sections.length-1)):_e("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ym(a,n,s,d,g,_,x,k,E,I,R,B,V,U,G,oe){const ne=mh.fromFeature(a,g);let ye;B===l.WritingMode.vertical&&ne.verticalizePunctuation();const{processBidirectionalText:ke,processStyledBidirectionalText:pe}=eo;if(ke&&ne.sections.length===1){ye=[];const Re=ke(ne.toString(),a1(ne,I,_,n,d,U,G));for(const nt of Re){const ht=new mh;ht.text=nt,ht.sections=ne.sections;for(let Je=0;Je<nt.length;Je++)ht.sectionIndex.push(0);ye.push(ht)}}else if(pe){ye=[];const Re=pe(ne.text,ne.sectionIndex,a1(ne,I,_,n,d,U,G));for(const nt of Re){const ht=new mh;ht.text=nt[0],ht.sectionIndex=nt[1],ht.sections=ne.sections,ye.push(ht)}}else ye=function(Re,nt){const ht=[],Je=Re.text;let qe=0;for(const Ze of nt)ht.push(Re.substring(qe,Ze)),qe=Ze;return qe<Je.length&&ht.push(Re.substring(qe,Je.length)),ht}(ne,a1(ne,I,_,n,d,U,G));const we=[],Be={positionedLines:we,text:ne.toString(),top:R[1],bottom:R[1],left:R[0],right:R[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(Re,nt,ht,Je,qe,Ze,Qe,Xe,Ve,yt,ft,Rt){let Dr=0,Fr=Km,_n=0,ko=0;const Nn=Xe==="right"?1:Xe==="left"?0:.5;let un=0;for(const hn of qe){hn.trim();const jn=hn.getMaxScale(),li=(jn-1)*Dn,ki={positionedGlyphs:[],lineOffset:0};Re.positionedLines[un]=ki;const Ri=ki.positionedGlyphs;let Li=0;if(!hn.length()){Fr+=Ze,++un;continue}for(let Cn=0;Cn<hn.length();Cn++){const Ot=hn.getSection(Cn),no=hn.getSectionIndex(Cn),Gn=hn.getCharCode(Cn);let ci=0,Yo=null,wa=null,Sa=null,Gs=Dn;const Jo=!(Ve===l.WritingMode.horizontal||!ft&&!Id(Gn)||ft&&(Jm[Gn]||(En=Gn,Ye.Arabic(En)||Ye["Arabic Supplement"](En)||Ye["Arabic Extended-A"](En)||Ye["Arabic Presentation Forms-A"](En)||Ye["Arabic Presentation Forms-B"](En))));if(Ot.imageName){const To=Je[Ot.imageName];if(!To)continue;Sa=Ot.imageName,Re.iconsInText=Re.iconsInText||!0,wa=To.paddedRect;const Bi=To.displaySize;Ot.scale=Ot.scale*Dn/Rt,Yo={width:Bi[0],height:Bi[1],left:1,top:-3,advance:Jo?Bi[1]:Bi[0]},ci=li+(Dn-Bi[1]*Ot.scale),Gs=Yo.advance;const Zs=Jo?Bi[0]*Ot.scale-Dn*jn:Bi[1]*Ot.scale-Dn*jn;Zs>0&&Zs>Li&&(Li=Zs)}else{const To=ht[Ot.fontStack],Bi=To&&To[Gn];if(Bi&&Bi.rect)wa=Bi.rect,Yo=Bi.metrics;else{const Zs=nt[Ot.fontStack],ef=Zs&&Zs[Gn];if(!ef)continue;Yo=ef.metrics}ci=(jn-Ot.scale)*Dn}Jo?(Re.verticalizable=!0,Ri.push({glyph:Gn,imageName:Sa,x:Dr,y:Fr+ci,vertical:Jo,scale:Ot.scale,fontStack:Ot.fontStack,sectionIndex:no,metrics:Yo,rect:wa}),Dr+=Gs*Ot.scale+yt):(Ri.push({glyph:Gn,imageName:Sa,x:Dr,y:Fr+ci,vertical:Jo,scale:Ot.scale,fontStack:Ot.fontStack,sectionIndex:no,metrics:Yo,rect:wa}),Dr+=Yo.advance*Ot.scale+yt)}Ri.length!==0&&(_n=Math.max(Dr-yt,_n),ZM(Ri,0,Ri.length-1,Nn,Li)),Dr=0;const $r=Ze*jn+Li;ki.lineOffset=Math.max(Li,li),Fr+=$r,ko=Math.max($r,ko),++un}var En;const Un=Fr-Km,{horizontalAlign:si,verticalAlign:Di}=s1(Qe);(function(hn,jn,li,ki,Ri,Li,$r,Cn,Ot){const no=(jn-li)*Ri;let Gn=0;Gn=Li!==$r?-Cn*ki-Km:(-ki*Ot+.5)*$r;for(const ci of hn)for(const Yo of ci.positionedGlyphs)Yo.x+=no,Yo.y+=Gn})(Re.positionedLines,Nn,si,Di,_n,ko,Ze,Un,qe.length),Re.top+=-Di*Un,Re.bottom=Re.top+Un,Re.left+=-si*_n,Re.right=Re.left+_n}(Be,n,s,d,ye,x,k,E,B,I,V,oe),!function(Re){for(const nt of Re)if(nt.positionedGlyphs.length!==0)return!1;return!0}(we)&&Be}const Jm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},jM={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function LS(a,n,s,d,g,_){if(n.imageName){const x=d[n.imageName];return x?x.displaySize[0]*n.scale*Dn/_+g:0}{const x=s[n.fontStack],k=x&&x[a];return k?k.metrics.advance*n.scale+g:0}}function BS(a,n,s,d){const g=Math.pow(a-n,2);return d?a<n?g/2:2*g:g+Math.abs(s)*s}function GM(a,n,s){let d=0;return a===10&&(d-=1e4),s&&(d+=150),a!==40&&a!==65288||(d+=50),n!==41&&n!==65289||(d+=50),d}function FS(a,n,s,d,g,_){let x=null,k=BS(n,s,g,_);for(const E of d){const I=BS(n-E.x,s,g,_)+E.badness;I<=k&&(x=E,k=I)}return{index:a,x:n,priorBreak:x,badness:k}}function $S(a){return a?$S(a.priorBreak).concat(a.index):[]}function a1(a,n,s,d,g,_,x){if(_!=="point")return[];if(!a)return[];const k=[],E=function(V,U,G,oe,ne,ye){let ke=0;for(let pe=0;pe<V.length();pe++){const we=V.getSection(pe);ke+=LS(V.getCharCode(pe),we,oe,ne,U,ye)}return ke/Math.max(1,Math.ceil(ke/G))}(a,n,s,d,g,x),I=a.text.indexOf("")>=0;let R=0;for(let V=0;V<a.length();V++){const U=a.getSection(V),G=a.getCharCode(V);if(Jm[G]||(R+=LS(G,U,d,g,n,x)),V<a.length()-1){const oe=!((B=G)<11904||!(Ye["Bopomofo Extended"](B)||Ye.Bopomofo(B)||Ye["CJK Compatibility Forms"](B)||Ye["CJK Compatibility Ideographs"](B)||Ye["CJK Compatibility"](B)||Ye["CJK Radicals Supplement"](B)||Ye["CJK Strokes"](B)||Ye["CJK Symbols and Punctuation"](B)||Ye["CJK Unified Ideographs Extension A"](B)||Ye["CJK Unified Ideographs"](B)||Ye["Enclosed CJK Letters and Months"](B)||Ye["Halfwidth and Fullwidth Forms"](B)||Ye.Hiragana(B)||Ye["Ideographic Description Characters"](B)||Ye["Kangxi Radicals"](B)||Ye["Katakana Phonetic Extensions"](B)||Ye.Katakana(B)||Ye["Vertical Forms"](B)||Ye["Yi Radicals"](B)||Ye["Yi Syllables"](B)));(jM[G]||oe||U.imageName)&&k.push(FS(V+1,R,E,k,GM(G,a.getCharCode(V+1),oe&&I),!1))}}var B;return $S(FS(a.length(),R,E,k,0,!0))}function s1(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function ZM(a,n,s,d,g){if(!d&&!g)return;const _=a[s],x=(a[s].x+_.metrics.advance*_.scale)*d;for(let k=n;k<=s;k++)a[k].x-=x,a[k].y+=g}function WM(a,n,s){const{horizontalAlign:d,verticalAlign:g}=s1(s),_=n[0]-a.displaySize[0]*d,x=n[1]-a.displaySize[1]*g;return{image:a,top:x,bottom:x+a.displaySize[1],left:_,right:_+a.displaySize[0]}}function OS(a,n,s,d,g,_){const x=a.image;let k;if(x.content){const ne=x.content,ye=x.pixelRatio||1;k=[ne[0]/ye,ne[1]/ye,x.displaySize[0]-ne[2]/ye,x.displaySize[1]-ne[3]/ye]}const E=n.left*_,I=n.right*_;let R,B,V,U;s==="width"||s==="both"?(U=g[0]+E-d[3],B=g[0]+I+d[1]):(U=g[0]+(E+I-x.displaySize[0])/2,B=U+x.displaySize[0]);const G=n.top*_,oe=n.bottom*_;return s==="height"||s==="both"?(R=g[1]+G-d[0],V=g[1]+oe+d[2]):(R=g[1]+(G+oe-x.displaySize[1])/2,V=R+x.displaySize[1]),{image:x,top:R,right:B,bottom:V,left:U,collisionPadding:k}}const js=128;function VS(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new Lr(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:g}=s;let _=0;for(;_<d.length&&d[_]<=a;)_++;_=Math.max(0,_-1);let x=_;for(;x<d.length&&d[x]<a+1;)x++;x=Math.min(d.length-1,x);const k=d[_],E=d[x];return s.kind==="composite"?{kind:"composite",minZoom:k,maxZoom:E,interpolationType:g}:{kind:"camera",minZoom:k,maxZoom:E,minSize:s.evaluate(new Lr(k)),maxSize:s.evaluate(new Lr(E)),interpolationType:g}}}class Rl extends ut{constructor(n,s,d,g){super(n,s),this.angle=d,g!==void 0&&(this.segment=g)}clone(){return new Rl(this.x,this.y,this.angle,this.segment)}}function NS(a,n,s,d,g){if(n.segment===void 0)return!0;let _=n,x=n.segment+1,k=0;for(;k>-s/2;){if(x--,x<0)return!1;k-=a[x].dist(_),_=a[x]}k+=a[x].dist(a[x+1]),x++;const E=[];let I=0;for(;k<s/2;){const R=a[x],B=a[x+1];if(!B)return!1;let V=a[x-1].angleTo(R)-R.angleTo(B);for(V=Math.abs((V+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:k,angleDelta:V}),I+=V;k-E[0].distance>d;)I-=E.shift().angleDelta;if(I>g)return!1;x++,k+=R.dist(B)}return!0}function US(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function jS(a,n,s){return a?.6*n*s:0}function GS(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function HM(a,n,s,d,g,_){const x=jS(s,g,_),k=GS(s,d)*_;let E=0;const I=US(a)/2;for(let R=0;R<a.length-1;R++){const B=a[R],V=a[R+1],U=B.dist(V);if(E+U>I){const G=(I-E)/U,oe=Cr(B.x,V.x,G),ne=Cr(B.y,V.y,G),ye=new Rl(oe,ne,V.angleTo(B),R);return ye._round(),!x||NS(a,ye,k,x,n)?ye:void 0}E+=U}}function qM(a,n,s,d,g,_,x,k,E){const I=jS(d,_,x),R=GS(d,g),B=R*x,V=a[0].x===0||a[0].x===E||a[0].y===0||a[0].y===E;return n-B<n/4&&(n=B+n/4),ZS(a,V?n/2*k%n:(R/2+2*_)*x*k%n,n,I,s,B,V,!1,E)}function ZS(a,n,s,d,g,_,x,k,E){const I=_/2,R=US(a);let B=0,V=n-s,U=[];for(let G=0;G<a.length-1;G++){const oe=a[G],ne=a[G+1],ye=oe.dist(ne),ke=ne.angleTo(oe);for(;V+s<B+ye;){V+=s;const pe=(V-B)/ye,we=Cr(oe.x,ne.x,pe),Be=Cr(oe.y,ne.y,pe);if(we>=0&&we<E&&Be>=0&&Be<E&&V-I>=0&&V+I<=R){const Re=new Rl(we,Be,ke,G);Re._round(),d&&!NS(a,Re,_,d,g)||U.push(Re)}}B+=ye}return k||U.length||x||(U=ZS(a,B/2,s,d,g,_,x,!0,E)),U}function WS(a,n,s,d,g){const _=[];for(let x=0;x<a.length;x++){const k=a[x];let E;for(let I=0;I<k.length-1;I++){let R=k[I],B=k[I+1];R.x<n&&B.x<n||(R.x<n?R=new ut(n,R.y+(n-R.x)/(B.x-R.x)*(B.y-R.y))._round():B.x<n&&(B=new ut(n,R.y+(n-R.x)/(B.x-R.x)*(B.y-R.y))._round()),R.y<s&&B.y<s||(R.y<s?R=new ut(R.x+(s-R.y)/(B.y-R.y)*(B.x-R.x),s)._round():B.y<s&&(B=new ut(R.x+(s-R.y)/(B.y-R.y)*(B.x-R.x),s)._round()),R.x>=d&&B.x>=d||(R.x>=d?R=new ut(d,R.y+(d-R.x)/(B.x-R.x)*(B.y-R.y))._round():B.x>=d&&(B=new ut(d,R.y+(d-R.x)/(B.x-R.x)*(B.y-R.y))._round()),R.y>=g&&B.y>=g||(R.y>=g?R=new ut(R.x+(g-R.y)/(B.y-R.y)*(B.x-R.x),g)._round():B.y>=g&&(B=new ut(R.x+(g-R.y)/(B.y-R.y)*(B.x-R.x),g)._round()),E&&R.equals(E[E.length-1])||(E=[R],_.push(E)),E.push(B)))))}}return _}function HS(a,n,s,d){const g=[],_=a.image,x=_.pixelRatio,k=_.paddedRect.w-2,E=_.paddedRect.h-2,I=a.right-a.left,R=a.bottom-a.top,B=_.stretchX||[[0,k]],V=_.stretchY||[[0,E]],U=(Ze,Qe)=>Ze+Qe[1]-Qe[0],G=B.reduce(U,0),oe=V.reduce(U,0),ne=k-G,ye=E-oe;let ke=0,pe=G,we=0,Be=oe,Re=0,nt=ne,ht=0,Je=ye;if(_.content&&d){const Ze=_.content;ke=Qm(B,0,Ze[0]),we=Qm(V,0,Ze[1]),pe=Qm(B,Ze[0],Ze[2]),Be=Qm(V,Ze[1],Ze[3]),Re=Ze[0]-ke,ht=Ze[1]-we,nt=Ze[2]-Ze[0]-pe,Je=Ze[3]-Ze[1]-Be}const qe=(Ze,Qe,Xe,Ve)=>{const yt=eg(Ze.stretch-ke,pe,I,a.left),ft=tg(Ze.fixed-Re,nt,Ze.stretch,G),Rt=eg(Qe.stretch-we,Be,R,a.top),Dr=tg(Qe.fixed-ht,Je,Qe.stretch,oe),Fr=eg(Xe.stretch-ke,pe,I,a.left),_n=tg(Xe.fixed-Re,nt,Xe.stretch,G),ko=eg(Ve.stretch-we,Be,R,a.top),Nn=tg(Ve.fixed-ht,Je,Ve.stretch,oe),un=new ut(yt,Rt),En=new ut(Fr,Rt),Un=new ut(Fr,ko),si=new ut(yt,ko),Di=new ut(ft/x,Dr/x),hn=new ut(_n/x,Nn/x),jn=n*Math.PI/180;if(jn){const Ri=Math.sin(jn),Li=Math.cos(jn),$r=[Li,-Ri,Ri,Li];un._matMult($r),En._matMult($r),si._matMult($r),Un._matMult($r)}const li=Ze.stretch+Ze.fixed,ki=Qe.stretch+Qe.fixed;return{tl:un,tr:En,bl:si,br:Un,tex:{x:_.paddedRect.x+1+li,y:_.paddedRect.y+1+ki,w:Xe.stretch+Xe.fixed-li,h:Ve.stretch+Ve.fixed-ki},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Di,pixelOffsetBR:hn,minFontScaleX:nt/x/I,minFontScaleY:Je/x/R,isSDF:s}};if(d&&(_.stretchX||_.stretchY)){const Ze=qS(B,ne,G),Qe=qS(V,ye,oe);for(let Xe=0;Xe<Ze.length-1;Xe++){const Ve=Ze[Xe],yt=Ze[Xe+1];for(let ft=0;ft<Qe.length-1;ft++)g.push(qe(Ve,Qe[ft],yt,Qe[ft+1]))}}else g.push(qe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:E+1}));return g}function Qm(a,n,s){let d=0;for(const g of a)d+=Math.max(n,Math.min(s,g[1]))-Math.max(n,Math.min(s,g[0]));return d}function qS(a,n,s){const d=[{fixed:-1,stretch:0}];for(const[g,_]of a){const x=d[d.length-1];d.push({fixed:g-x.stretch,stretch:x.stretch}),d.push({fixed:g-x.stretch,stretch:x.stretch+(_-g)})}return d.push({fixed:n+1,stretch:s}),d}function eg(a,n,s,d){return a/n*s+d}function tg(a,n,s,d){return a-n*s/d}it("Anchor",Rl);class rg{constructor(n,s,d,g,_,x,k,E,I,R){if(this.boxStartIndex=n.length,I){let B=x.top,V=x.bottom;const U=x.collisionPadding;U&&(B-=U[1],V+=U[3]);let G=V-B;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{let B=x.top*k-E[0],V=x.bottom*k+E[2],U=x.left*k-E[3],G=x.right*k+E[1];const oe=x.collisionPadding;if(oe&&(U-=oe[0]*k,B-=oe[1]*k,G+=oe[2]*k,V+=oe[3]*k),R){const ne=new ut(U,B),ye=new ut(G,B),ke=new ut(U,V),pe=new ut(G,V),we=R*Math.PI/180;ne._rotate(we),ye._rotate(we),ke._rotate(we),pe._rotate(we),U=Math.min(ne.x,ye.x,ke.x,pe.x),G=Math.max(ne.x,ye.x,ke.x,pe.x),B=Math.min(ne.y,ye.y,ke.y,pe.y),V=Math.max(ne.y,ye.y,ke.y,pe.y)}n.emplaceBack(s.x,s.y,U,B,G,V,d,g,_)}this.boxEndIndex=n.length}}class XM{constructor(n=[],s=KM){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:d}=this,g=s[n];for(;n>0;){const _=n-1>>1,x=s[_];if(d(g,x)>=0)break;s[n]=x,n=_}s[n]=g}_down(n){const{data:s,compare:d}=this,g=this.length>>1,_=s[n];for(;n<g;){let x=1+(n<<1),k=s[x];const E=x+1;if(E<this.length&&d(s[E],k)<0&&(x=E,k=s[E]),d(k,_)>=0)break;s[n]=k,n=x}s[n]=_}}function KM(a,n){return a<n?-1:a>n?1:0}function YM(a,n=1,s=!1){let d=1/0,g=1/0,_=-1/0,x=-1/0;const k=a[0];for(let U=0;U<k.length;U++){const G=k[U];(!U||G.x<d)&&(d=G.x),(!U||G.y<g)&&(g=G.y),(!U||G.x>_)&&(_=G.x),(!U||G.y>x)&&(x=G.y)}const E=Math.min(_-d,x-g);let I=E/2;const R=new XM([],JM);if(E===0)return new ut(d,g);for(let U=d;U<_;U+=E)for(let G=g;G<x;G+=E)R.push(new gh(U+I,G+I,I,a));let B=function(U){let G=0,oe=0,ne=0;const ye=U[0];for(let ke=0,pe=ye.length,we=pe-1;ke<pe;we=ke++){const Be=ye[ke],Re=ye[we],nt=Be.x*Re.y-Re.x*Be.y;oe+=(Be.x+Re.x)*nt,ne+=(Be.y+Re.y)*nt,G+=3*nt}return new gh(oe/G,ne/G,0,U)}(a),V=R.length;for(;R.length;){const U=R.pop();(U.d>B.d||!B.d)&&(B=U,s&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,V)),U.max-B.d<=n||(I=U.h/2,R.push(new gh(U.p.x-I,U.p.y-I,I,a)),R.push(new gh(U.p.x+I,U.p.y-I,I,a)),R.push(new gh(U.p.x-I,U.p.y+I,I,a)),R.push(new gh(U.p.x+I,U.p.y+I,I,a)),V+=4)}return s&&(console.log(`num probes: ${V}`),console.log(`best distance: ${B.d}`)),B.p}function JM(a,n){return n.max-a.max}function gh(a,n,s,d){this.p=new ut(a,n),this.h=s,this.d=function(g,_){let x=!1,k=1/0;for(let E=0;E<_.length;E++){const I=_[E];for(let R=0,B=I.length,V=B-1;R<B;V=R++){const U=I[R],G=I[V];U.y>g.y!=G.y>g.y&&g.x<(G.x-U.x)*(g.y-U.y)/(G.y-U.y)+U.x&&(x=!x),k=Math.min(k,rS(g,U,G))}}return(x?1:-1)*Math.sqrt(k)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}const l1=Number.POSITIVE_INFINITY;function XS(a,n){return n[1]!==l1?function(s,d,g){let _=0,x=0;switch(d=Math.abs(d),g=Math.abs(g),s){case"top-right":case"top-left":case"top":x=g-7;break;case"bottom-right":case"bottom-left":case"bottom":x=7-g}switch(s){case"top-right":case"bottom-right":case"right":_=-d;break;case"top-left":case"bottom-left":case"left":_=d}return[_,x]}(a,n[0],n[1]):function(s,d){let g=0,_=0;d<0&&(d=0);const x=d/Math.sqrt(2);switch(s){case"top-right":case"top-left":_=x-7;break;case"bottom-right":case"bottom-left":_=7-x;break;case"bottom":_=7-d;break;case"top":_=d-7}switch(s){case"top-right":case"bottom-right":g=-x;break;case"top-left":case"bottom-left":g=x;break;case"left":g=d;break;case"right":g=-d}return[g,_]}(a,n[0])}function c1(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function QM(a,n,s,d,g,_,x,k,E,I,R){let B=_.textMaxSize.evaluate(n,{});B===void 0&&(B=x);const V=a.layers[0].layout,U=V.get("icon-offset").evaluate(n,{},R),G=YS(s.horizontal),oe=x/24,ne=a.tilePixelRatio*oe,ye=a.tilePixelRatio*B/24,ke=a.tilePixelRatio*k,pe=a.tilePixelRatio*V.get("symbol-spacing"),we=V.get("text-padding")*a.tilePixelRatio,Be=function(Ve,yt,ft,Rt=1){const Dr=Ve.get("icon-padding").evaluate(yt,{},ft),Fr=Dr&&Dr.values;return[Fr[0]*Rt,Fr[1]*Rt,Fr[2]*Rt,Fr[3]*Rt]}(V,n,R,a.tilePixelRatio),Re=V.get("text-max-angle")/180*Math.PI,nt=V.get("text-rotation-alignment")!=="viewport"&&V.get("symbol-placement")!=="point",ht=V.get("icon-rotation-alignment")==="map"&&V.get("symbol-placement")!=="point",Je=V.get("symbol-placement"),qe=pe/2,Ze=V.get("icon-text-fit");let Qe;d&&Ze!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(Qe=OS(d,s.vertical,Ze,V.get("icon-text-fit-padding"),U,oe)),G&&(d=OS(d,G,Ze,V.get("icon-text-fit-padding"),U,oe)));const Xe=(Ve,yt)=>{yt.x<0||yt.x>=yn||yt.y<0||yt.y>=yn||function(ft,Rt,Dr,Fr,_n,ko,Nn,un,En,Un,si,Di,hn,jn,li,ki,Ri,Li,$r,Cn,Ot,no,Gn,ci,Yo){const wa=ft.addToLineVertexArray(Rt,Dr);let Sa,Gs,Jo,To,Bi=0,Zs=0,ef=0,fk=0,v1=-1,x1=-1;const Ws={};let pk=Tn.exports(""),b1=0,w1=0;if(un._unevaluatedLayout.getValue("text-radial-offset")===void 0?[b1,w1]=un.layout.get("text-offset").evaluate(Ot,{},ci).map(Fi=>Fi*Dn):(b1=un.layout.get("text-radial-offset").evaluate(Ot,{},ci)*Dn,w1=l1),ft.allowVerticalPlacement&&Fr.vertical){const Fi=un.layout.get("text-rotate").evaluate(Ot,{},ci)+90;Jo=new rg(En,Rt,Un,si,Di,Fr.vertical,hn,jn,li,Fi),Nn&&(To=new rg(En,Rt,Un,si,Di,Nn,Ri,Li,li,Fi))}if(_n){const Fi=un.layout.get("icon-rotate").evaluate(Ot,{}),es=un.layout.get("icon-text-fit")!=="none",tf=HS(_n,Fi,Gn,es),rf=Nn?HS(Nn,Fi,Gn,es):void 0;Gs=new rg(En,Rt,Un,si,Di,_n,Ri,Li,!1,Fi),Bi=4*tf.length;const yk=ft.iconSizeData;let nu=null;yk.kind==="source"?(nu=[js*un.layout.get("icon-size").evaluate(Ot,{})],nu[0]>Ll&&_e(`${ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):yk.kind==="composite"&&(nu=[js*no.compositeIconSizes[0].evaluate(Ot,{},ci),js*no.compositeIconSizes[1].evaluate(Ot,{},ci)],(nu[0]>Ll||nu[1]>Ll)&&_e(`${ft.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ft.addSymbols(ft.icon,tf,nu,Cn,$r,Ot,l.WritingMode.none,Rt,wa.lineStartIndex,wa.lineLength,-1,ci),v1=ft.icon.placedSymbolArray.length-1,rf&&(Zs=4*rf.length,ft.addSymbols(ft.icon,rf,nu,Cn,$r,Ot,l.WritingMode.vertical,Rt,wa.lineStartIndex,wa.lineLength,-1,ci),x1=ft.icon.placedSymbolArray.length-1)}const mk=Object.keys(Fr.horizontal);for(const Fi of mk){const es=Fr.horizontal[Fi];if(!Sa){pk=Tn.exports(es.text);const rf=un.layout.get("text-rotate").evaluate(Ot,{},ci);Sa=new rg(En,Rt,Un,si,Di,es,hn,jn,li,rf)}const tf=es.positionedLines.length===1;if(ef+=KS(ft,Rt,es,ko,un,li,Ot,ki,wa,Fr.vertical?l.WritingMode.horizontal:l.WritingMode.horizontalOnly,tf?mk:[Fi],Ws,v1,no,ci),tf)break}Fr.vertical&&(fk+=KS(ft,Rt,Fr.vertical,ko,un,li,Ot,ki,wa,l.WritingMode.vertical,["vertical"],Ws,x1,no,ci));const dD=Sa?Sa.boxStartIndex:ft.collisionBoxArray.length,fD=Sa?Sa.boxEndIndex:ft.collisionBoxArray.length,pD=Jo?Jo.boxStartIndex:ft.collisionBoxArray.length,mD=Jo?Jo.boxEndIndex:ft.collisionBoxArray.length,gD=Gs?Gs.boxStartIndex:ft.collisionBoxArray.length,yD=Gs?Gs.boxEndIndex:ft.collisionBoxArray.length,_D=To?To.boxStartIndex:ft.collisionBoxArray.length,vD=To?To.boxEndIndex:ft.collisionBoxArray.length;let ka=-1;const sg=(Fi,es)=>Fi&&Fi.circleDiameter?Math.max(Fi.circleDiameter,es):es;ka=sg(Sa,ka),ka=sg(Jo,ka),ka=sg(Gs,ka),ka=sg(To,ka);const gk=ka>-1?1:0;gk&&(ka*=Yo/Dn),ft.glyphOffsetArray.length>=yh.MAX_GLYPHS&&_e("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Ot.sortKey!==void 0&&ft.addToSortKeyRanges(ft.symbolInstances.length,Ot.sortKey),ft.symbolInstances.emplaceBack(Rt.x,Rt.y,Ws.right>=0?Ws.right:-1,Ws.center>=0?Ws.center:-1,Ws.left>=0?Ws.left:-1,Ws.vertical||-1,v1,x1,pk,dD,fD,pD,mD,gD,yD,_D,vD,Un,ef,fk,Bi,Zs,gk,0,hn,b1,w1,ka)}(a,yt,Ve,s,d,g,Qe,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,ne,[we,we,we,we],nt,E,ke,Be,ht,U,n,_,I,R,x)};if(Je==="line")for(const Ve of WS(n.geometry,0,0,yn,yn)){const yt=qM(Ve,pe,Re,s.vertical||G,d,24,ye,a.overscaling,yn);for(const ft of yt){const Rt=G;Rt&&eD(a,Rt.text,qe,ft)||Xe(Ve,ft)}}else if(Je==="line-center"){for(const Ve of n.geometry)if(Ve.length>1){const yt=HM(Ve,Re,s.vertical||G,d,24,ye);yt&&Xe(Ve,yt)}}else if(n.type==="Polygon")for(const Ve of K_(n.geometry,0)){const yt=YM(Ve,16);Xe(Ve[0],new Rl(yt.x,yt.y,0))}else if(n.type==="LineString")for(const Ve of n.geometry)Xe(Ve,new Rl(Ve[0].x,Ve[0].y,0));else if(n.type==="Point")for(const Ve of n.geometry)for(const yt of Ve)Xe([yt],new Rl(yt.x,yt.y,0))}const Ll=32640;function KS(a,n,s,d,g,_,x,k,E,I,R,B,V,U,G){const oe=function(ke,pe,we,Be,Re,nt,ht,Je){const qe=Be.layout.get("text-rotate").evaluate(nt,{})*Math.PI/180,Ze=[];for(const Qe of pe.positionedLines)for(const Xe of Qe.positionedGlyphs){if(!Xe.rect)continue;const Ve=Xe.rect||{};let yt=4,ft=!0,Rt=1,Dr=0;const Fr=(Re||Je)&&Xe.vertical,_n=Xe.metrics.advance*Xe.scale/2;if(Je&&pe.verticalizable){const $r=(Xe.scale-1)*Dn,Cn=(Dn-Xe.metrics.width*Xe.scale)/2;Dr=Qe.lineOffset/2-(Xe.imageName?-Cn:$r)}if(Xe.imageName){const $r=ht[Xe.imageName];ft=$r.sdf,Rt=$r.pixelRatio,yt=1/Rt}const ko=Re?[Xe.x+_n,Xe.y]:[0,0];let Nn=Re?[0,0]:[Xe.x+_n+we[0],Xe.y+we[1]-Dr],un=[0,0];Fr&&(un=Nn,Nn=[0,0]);const En=(Xe.metrics.left-yt)*Xe.scale-_n+Nn[0],Un=(-Xe.metrics.top-yt)*Xe.scale+Nn[1],si=En+Ve.w*Xe.scale/Rt,Di=Un+Ve.h*Xe.scale/Rt,hn=new ut(En,Un),jn=new ut(si,Un),li=new ut(En,Di),ki=new ut(si,Di);if(Fr){const $r=new ut(-_n,_n-Km),Cn=-Math.PI/2,Ot=12-_n,no=new ut(22-Ot,-(Xe.imageName?Ot:0)),Gn=new ut(...un);hn._rotateAround(Cn,$r)._add(no)._add(Gn),jn._rotateAround(Cn,$r)._add(no)._add(Gn),li._rotateAround(Cn,$r)._add(no)._add(Gn),ki._rotateAround(Cn,$r)._add(no)._add(Gn)}if(qe){const $r=Math.sin(qe),Cn=Math.cos(qe),Ot=[Cn,-$r,$r,Cn];hn._matMult(Ot),jn._matMult(Ot),li._matMult(Ot),ki._matMult(Ot)}const Ri=new ut(0,0),Li=new ut(0,0);Ze.push({tl:hn,tr:jn,bl:li,br:ki,tex:Ve,writingMode:pe.writingMode,glyphOffset:ko,sectionIndex:Xe.sectionIndex,isSDF:ft,pixelOffsetTL:Ri,pixelOffsetBR:Li,minFontScaleX:0,minFontScaleY:0})}return Ze}(0,s,k,g,_,x,d,a.allowVerticalPlacement),ne=a.textSizeData;let ye=null;ne.kind==="source"?(ye=[js*g.layout.get("text-size").evaluate(x,{})],ye[0]>Ll&&_e(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ne.kind==="composite"&&(ye=[js*U.compositeTextSizes[0].evaluate(x,{},G),js*U.compositeTextSizes[1].evaluate(x,{},G)],(ye[0]>Ll||ye[1]>Ll)&&_e(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,oe,ye,k,_,x,I,n,E.lineStartIndex,E.lineLength,V,G);for(const ke of R)B[ke]=a.text.placedSymbolArray.length-1;return 4*oe.length}function YS(a){for(const n in a)return a[n];return null}function eD(a,n,s,d){const g=a.compareText;if(n in g){const _=g[n];for(let x=_.length-1;x>=0;x--)if(d.dist(_[x])<s)return!0}else g[n]=[];return g[n].push(d),!1}const tD=Ml.VectorTileFeature.types,rD=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ng(a,n,s,d,g,_,x,k,E,I,R,B,V){const U=k?Math.min(Ll,Math.round(k[0])):0,G=k?Math.min(Ll,Math.round(k[1])):0;a.emplaceBack(n,s,Math.round(32*d),Math.round(32*g),_,x,(U<<1)+(E?1:0),G,16*I,16*R,256*B,256*V)}function u1(a,n,s){a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s),a.emplaceBack(n.x,n.y,s)}function nD(a){for(const n of a.sections)if(Mm(n.text))return!0;return!1}class h1{constructor(n){this.layoutVertexArray=new Xo,this.indexArray=new bi,this.programConfigurations=n,this.segments=new Lt,this.dynamicLayoutVertexArray=new bo,this.opacityVertexArray=new Ko,this.placedSymbolArray=new Oe}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,d,g){this.isEmpty()||(d&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,EM.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,CM.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,rD,!0),this.opacityVertexBuffer.itemSize=1),(d||g)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}it("SymbolBuffers",h1);class d1{constructor(n,s,d){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new d,this.segments=new Lt,this.collisionVertexArray=new to}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,AM.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}it("CollisionBuffers",d1);class yh{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(x=>x.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=G_([]),this.placementViewportMatrix=G_([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=VS(this.zoom,s["text-size"]),this.iconSizeData=VS(this.zoom,s["icon-size"]);const d=this.layers[0].layout,g=d.get("symbol-sort-key"),_=d.get("symbol-z-order");this.canOverlap=p1(d,"text-overlap","text-allow-overlap")!=="never"||p1(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=_!=="viewport-y"&&!g.isConstant(),this.sortFeaturesByY=(_==="viewport-y"||_==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(x=>l.WritingMode[x])),this.stateDependentLayerIds=this.layers.filter(x=>x.isStateDependent()).map(x=>x.id),this.sourceID=n.sourceID}createArrays(){this.text=new h1(new Jc(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new h1(new Jc(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new He,this.lineVertexArray=new rt,this.symbolInstances=new et}calculateGlyphDependencies(n,s,d,g,_){for(let x=0;x<n.length;x++)if(s[n.charCodeAt(x)]=!0,(d||g)&&_){const k=Kd[n.charAt(x)];k&&(s[k.charCodeAt(0)]=!0)}}populate(n,s,d){const g=this.layers[0],_=g.layout,x=_.get("text-font"),k=_.get("text-field"),E=_.get("icon-image"),I=(k.value.kind!=="constant"||k.value.value instanceof le&&!k.value.value.isEmpty()||k.value.value.toString().length>0)&&(x.value.kind!=="constant"||x.value.value.length>0),R=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,B=_.get("symbol-sort-key");if(this.features=[],!I&&!R)return;const V=s.iconDependencies,U=s.glyphDependencies,G=s.availableImages,oe=new Lr(this.zoom);for(const{feature:ne,id:ye,index:ke,sourceLayerIndex:pe}of n){const we=g._featureFilter.needGeometry,Be=eu(ne,we);if(!g._featureFilter.filter(oe,Be,d))continue;let Re,nt;if(we||(Be.geometry=Qc(ne)),I){const Je=g.getValueAndResolveTokens("text-field",Be,d,G),qe=le.factory(Je);nD(qe)&&(this.hasRTLText=!0),(!this.hasRTLText||Xc()==="unavailable"||this.hasRTLText&&eo.isParsed())&&(Re=IM(qe,g,Be))}if(R){const Je=g.getValueAndResolveTokens("icon-image",Be,d,G);nt=Je instanceof he?Je:he.fromString(Je)}if(!Re&&!nt)continue;const ht=this.sortFeaturesByKey?B.evaluate(Be,{},d):void 0;if(this.features.push({id:ye,text:Re,icon:nt,index:ke,sourceLayerIndex:pe,geometry:Be.geometry,properties:ne.properties,type:tD[ne.type],sortKey:ht}),nt&&(V[nt.name]=!0),Re){const Je=x.evaluate(Be,{},d).join(","),qe=_.get("text-rotation-alignment")!=="viewport"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.WritingMode.vertical)>=0;for(const Ze of Re.sections)if(Ze.image)V[Ze.image.name]=!0;else{const Qe=oh(Re.toString()),Xe=Ze.fontStack||Je,Ve=U[Xe]=U[Xe]||{};this.calculateGlyphDependencies(Ze.text,Ve,qe,this.allowVerticalPlacement,Qe)}}}_.get("symbol-placement")==="line"&&(this.features=function(ne){const ye={},ke={},pe=[];let we=0;function Be(Je){pe.push(ne[Je]),we++}function Re(Je,qe,Ze){const Qe=ke[Je];return delete ke[Je],ke[qe]=Qe,pe[Qe].geometry[0].pop(),pe[Qe].geometry[0]=pe[Qe].geometry[0].concat(Ze[0]),Qe}function nt(Je,qe,Ze){const Qe=ye[qe];return delete ye[qe],ye[Je]=Qe,pe[Qe].geometry[0].shift(),pe[Qe].geometry[0]=Ze[0].concat(pe[Qe].geometry[0]),Qe}function ht(Je,qe,Ze){const Qe=Ze?qe[0][qe[0].length-1]:qe[0][0];return`${Je}:${Qe.x}:${Qe.y}`}for(let Je=0;Je<ne.length;Je++){const qe=ne[Je],Ze=qe.geometry,Qe=qe.text?qe.text.toString():null;if(!Qe){Be(Je);continue}const Xe=ht(Qe,Ze),Ve=ht(Qe,Ze,!0);if(Xe in ke&&Ve in ye&&ke[Xe]!==ye[Ve]){const yt=nt(Xe,Ve,Ze),ft=Re(Xe,Ve,pe[yt].geometry);delete ye[Xe],delete ke[Ve],ke[ht(Qe,pe[ft].geometry,!0)]=ft,pe[yt].geometry=null}else Xe in ke?Re(Xe,Ve,Ze):Ve in ye?nt(Xe,Ve,Ze):(Be(Je),ye[Xe]=we-1,ke[Ve]=we-1)}return pe.filter(Je=>Je.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ne,ye)=>ne.sortKey-ye.sortKey)}update(n,s,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,d),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const d=this.lineVertexArray.length;if(n.segment!==void 0){let g=n.dist(s[n.segment+1]),_=n.dist(s[n.segment]);const x={};for(let k=n.segment+1;k<s.length;k++)x[k]={x:s[k].x,y:s[k].y,tileUnitDistanceFromAnchor:g},k<s.length-1&&(g+=s[k+1].dist(s[k]));for(let k=n.segment||0;k>=0;k--)x[k]={x:s[k].x,y:s[k].y,tileUnitDistanceFromAnchor:_},k>0&&(_+=s[k-1].dist(s[k]));for(let k=0;k<s.length;k++){const E=x[k];this.lineVertexArray.emplaceBack(E.x,E.y,E.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(n,s,d,g,_,x,k,E,I,R,B,V){const U=n.indexArray,G=n.layoutVertexArray,oe=n.segments.prepareSegment(4*s.length,G,U,this.canOverlap?x.sortKey:void 0),ne=this.glyphOffsetArray.length,ye=oe.vertexLength,ke=this.allowVerticalPlacement&&k===l.WritingMode.vertical?Math.PI/2:0,pe=x.text&&x.text.sections;for(let we=0;we<s.length;we++){const{tl:Be,tr:Re,bl:nt,br:ht,tex:Je,pixelOffsetTL:qe,pixelOffsetBR:Ze,minFontScaleX:Qe,minFontScaleY:Xe,glyphOffset:Ve,isSDF:yt,sectionIndex:ft}=s[we],Rt=oe.vertexLength,Dr=Ve[1];ng(G,E.x,E.y,Be.x,Dr+Be.y,Je.x,Je.y,d,yt,qe.x,qe.y,Qe,Xe),ng(G,E.x,E.y,Re.x,Dr+Re.y,Je.x+Je.w,Je.y,d,yt,Ze.x,qe.y,Qe,Xe),ng(G,E.x,E.y,nt.x,Dr+nt.y,Je.x,Je.y+Je.h,d,yt,qe.x,Ze.y,Qe,Xe),ng(G,E.x,E.y,ht.x,Dr+ht.y,Je.x+Je.w,Je.y+Je.h,d,yt,Ze.x,Ze.y,Qe,Xe),u1(n.dynamicLayoutVertexArray,E,ke),U.emplaceBack(Rt,Rt+1,Rt+2),U.emplaceBack(Rt+1,Rt+2,Rt+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ve[0]),we!==s.length-1&&ft===s[we+1].sectionIndex||n.programConfigurations.populatePaintArrays(G.length,x,x.index,{},V,pe&&pe[ft])}n.placedSymbolArray.emplaceBack(E.x,E.y,ne,this.glyphOffsetArray.length-ne,ye,I,R,E.segment,d?d[0]:0,d?d[1]:0,g[0],g[1],k,0,!1,0,B)}_addCollisionDebugVertex(n,s,d,g,_,x){return s.emplaceBack(0,0),n.emplaceBack(d.x,d.y,g,_,Math.round(x.x),Math.round(x.y))}addCollisionDebugVertices(n,s,d,g,_,x,k){const E=_.segments.prepareSegment(4,_.layoutVertexArray,_.indexArray),I=E.vertexLength,R=_.layoutVertexArray,B=_.collisionVertexArray,V=k.anchorX,U=k.anchorY;this._addCollisionDebugVertex(R,B,x,V,U,new ut(n,s)),this._addCollisionDebugVertex(R,B,x,V,U,new ut(d,s)),this._addCollisionDebugVertex(R,B,x,V,U,new ut(d,g)),this._addCollisionDebugVertex(R,B,x,V,U,new ut(n,g)),E.vertexLength+=4;const G=_.indexArray;G.emplaceBack(I,I+1),G.emplaceBack(I+1,I+2),G.emplaceBack(I+2,I+3),G.emplaceBack(I+3,I),E.primitiveLength+=4}addDebugCollisionBoxes(n,s,d,g){for(let _=n;_<s;_++){const x=this.collisionBoxArray.get(_);this.addCollisionDebugVertices(x.x1,x.y1,x.x2,x.y2,g?this.textCollisionBox:this.iconCollisionBox,x.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new d1(Ja,ES.members,xa),this.iconCollisionBox=new d1(Ja,ES.members,xa);for(let n=0;n<this.symbolInstances.length;n++){const s=this.symbolInstances.get(n);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(n,s,d,g,_,x,k,E,I){const R={};for(let B=s;B<d;B++){const V=n.get(B);R.textBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.textFeatureIndex=V.featureIndex;break}for(let B=g;B<_;B++){const V=n.get(B);R.verticalTextBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.verticalTextFeatureIndex=V.featureIndex;break}for(let B=x;B<k;B++){const V=n.get(B);R.iconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.iconFeatureIndex=V.featureIndex;break}for(let B=E;B<I;B++){const V=n.get(B);R.verticalIconBox={x1:V.x1,y1:V.y1,x2:V.x2,y2:V.y2,anchorPointX:V.anchorPointX,anchorPointY:V.anchorPointY},R.verticalIconFeatureIndex=V.featureIndex;break}return R}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const d=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const d=n.placedSymbolArray.get(s),g=d.vertexStartIndex+4*d.numGlyphs;for(let _=d.vertexStartIndex;_<g;_+=4)n.indexArray.emplaceBack(_,_+1,_+2),n.indexArray.emplaceBack(_+1,_+2,_+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),d=Math.cos(n),g=[],_=[],x=[];for(let k=0;k<this.symbolInstances.length;++k){x.push(k);const E=this.symbolInstances.get(k);g.push(0|Math.round(s*E.anchorX+d*E.anchorY)),_.push(E.featureIndex)}return x.sort((k,E)=>g[k]-g[E]||_[E]-_[k]),x}addToSortKeyRanges(n,s){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===s?d.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const d=this.symbolInstances.get(s);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((g,_,x)=>{g>=0&&x.indexOf(g)===_&&this.addIndicesForPlacedSymbol(this.text,g)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}it("SymbolBucket",yh,{omit:["layers","collisionBoxArray","features","compareText"]}),yh.MAX_GLYPHS=65535,yh.addDynamicAttributes=u1;const iD=new Mn({"symbol-placement":new dt(Ie.layout_symbol["symbol-placement"]),"symbol-spacing":new dt(Ie.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new dt(Ie.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new bt(Ie.layout_symbol["symbol-sort-key"]),"symbol-z-order":new dt(Ie.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new dt(Ie.layout_symbol["icon-allow-overlap"]),"icon-overlap":new dt(Ie.layout_symbol["icon-overlap"]),"icon-ignore-placement":new dt(Ie.layout_symbol["icon-ignore-placement"]),"icon-optional":new dt(Ie.layout_symbol["icon-optional"]),"icon-rotation-alignment":new dt(Ie.layout_symbol["icon-rotation-alignment"]),"icon-size":new bt(Ie.layout_symbol["icon-size"]),"icon-text-fit":new dt(Ie.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new dt(Ie.layout_symbol["icon-text-fit-padding"]),"icon-image":new bt(Ie.layout_symbol["icon-image"]),"icon-rotate":new bt(Ie.layout_symbol["icon-rotate"]),"icon-padding":new bt(Ie.layout_symbol["icon-padding"]),"icon-keep-upright":new dt(Ie.layout_symbol["icon-keep-upright"]),"icon-offset":new bt(Ie.layout_symbol["icon-offset"]),"icon-anchor":new bt(Ie.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new dt(Ie.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new dt(Ie.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new dt(Ie.layout_symbol["text-rotation-alignment"]),"text-field":new bt(Ie.layout_symbol["text-field"]),"text-font":new bt(Ie.layout_symbol["text-font"]),"text-size":new bt(Ie.layout_symbol["text-size"]),"text-max-width":new bt(Ie.layout_symbol["text-max-width"]),"text-line-height":new dt(Ie.layout_symbol["text-line-height"]),"text-letter-spacing":new bt(Ie.layout_symbol["text-letter-spacing"]),"text-justify":new bt(Ie.layout_symbol["text-justify"]),"text-radial-offset":new bt(Ie.layout_symbol["text-radial-offset"]),"text-variable-anchor":new dt(Ie.layout_symbol["text-variable-anchor"]),"text-anchor":new bt(Ie.layout_symbol["text-anchor"]),"text-max-angle":new dt(Ie.layout_symbol["text-max-angle"]),"text-writing-mode":new dt(Ie.layout_symbol["text-writing-mode"]),"text-rotate":new bt(Ie.layout_symbol["text-rotate"]),"text-padding":new dt(Ie.layout_symbol["text-padding"]),"text-keep-upright":new dt(Ie.layout_symbol["text-keep-upright"]),"text-transform":new bt(Ie.layout_symbol["text-transform"]),"text-offset":new bt(Ie.layout_symbol["text-offset"]),"text-allow-overlap":new dt(Ie.layout_symbol["text-allow-overlap"]),"text-overlap":new dt(Ie.layout_symbol["text-overlap"]),"text-ignore-placement":new dt(Ie.layout_symbol["text-ignore-placement"]),"text-optional":new dt(Ie.layout_symbol["text-optional"])});var f1={paint:new Mn({"icon-opacity":new bt(Ie.paint_symbol["icon-opacity"]),"icon-color":new bt(Ie.paint_symbol["icon-color"]),"icon-halo-color":new bt(Ie.paint_symbol["icon-halo-color"]),"icon-halo-width":new bt(Ie.paint_symbol["icon-halo-width"]),"icon-halo-blur":new bt(Ie.paint_symbol["icon-halo-blur"]),"icon-translate":new dt(Ie.paint_symbol["icon-translate"]),"icon-translate-anchor":new dt(Ie.paint_symbol["icon-translate-anchor"]),"text-opacity":new bt(Ie.paint_symbol["text-opacity"]),"text-color":new bt(Ie.paint_symbol["text-color"],{runtimeType:mn,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new bt(Ie.paint_symbol["text-halo-color"]),"text-halo-width":new bt(Ie.paint_symbol["text-halo-width"]),"text-halo-blur":new bt(Ie.paint_symbol["text-halo-blur"]),"text-translate":new dt(Ie.paint_symbol["text-translate"]),"text-translate-anchor":new dt(Ie.paint_symbol["text-translate-anchor"])}),layout:iD};class JS{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:On,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}it("FormatSectionOverride",JS,{omit:["defaultValue"]});class ig extends qo{constructor(n){super(n,f1)}recalculate(n,s){if(super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const g=[];for(const _ of d)g.indexOf(_)<0&&g.push(_);this.layout._values["text-writing-mode"]=g}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,s,d,g){const _=this.layout.get(n).evaluate(s,{},d,g),x=this._unevaluatedLayout._values[n];return x.isDataDriven()||Bc(x.value)||!_?_:function(k,E){return E.replace(/{([^{}]+)}/g,(I,R)=>R in k?String(k[R]):"")}(s.properties,_)}createBucket(n){return new yh(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of f1.paint.overridableProperties){if(!ig.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),d=new JS(s),g=new Qu(d,s.property.specification);let _=null;_=s.value.kind==="constant"||s.value.kind==="source"?new $c("source",g):new kd("composite",g,s.value.zoomStops),this.paint._values[n]=new Ho(s.property,_,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,d){return!(!this.layout||s.isDataDriven()||d.isDataDriven())&&ig.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const d=n.get("text-field"),g=f1.paint.properties[s];let _=!1;const x=k=>{for(const E of k)if(g.overrides&&g.overrides.hasOverride(E))return void(_=!0)};if(d.value.kind==="constant"&&d.value.value instanceof le)x(d.value.value.sections);else if(d.value.kind==="source"){const k=I=>{_||(I instanceof at&&Ee(I.value)===zr?x(I.value.sections):I instanceof Yu?x(I.sections):I.eachChild(k))},E=d.value;E._styleExpression&&k(E._styleExpression.expression)}return _}}function p1(a,n,s){let d="never";const g=a.get(n);return g?d=g:a.get(s)&&(d="always"),d}var oD={paint:new Mn({"background-color":new dt(Ie.paint_background["background-color"]),"background-pattern":new Bd(Ie.paint_background["background-pattern"]),"background-opacity":new dt(Ie.paint_background["background-opacity"])})},aD={paint:new Mn({"raster-opacity":new dt(Ie.paint_raster["raster-opacity"]),"raster-hue-rotate":new dt(Ie.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new dt(Ie.paint_raster["raster-brightness-min"]),"raster-brightness-max":new dt(Ie.paint_raster["raster-brightness-max"]),"raster-saturation":new dt(Ie.paint_raster["raster-saturation"]),"raster-contrast":new dt(Ie.paint_raster["raster-contrast"]),"raster-resampling":new dt(Ie.paint_raster["raster-resampling"]),"raster-fade-duration":new dt(Ie.paint_raster["raster-fade-duration"])})};class sD extends qo{constructor(n){super(n,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const lD={circle:class extends qo{constructor(a){super(a,O6)}createBucket(a){return new N_(a)}queryRadius(a){const n=a;return Nd("circle-radius",this,n)+Nd("circle-stroke-width",this,n)+Nm(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,s,d,g,_,x,k){const E=Um(a,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),_.angle,x),I=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s),R=this.paint.get("circle-pitch-alignment")==="map",B=R?E:function(U,G){return U.map(oe=>cS(oe,G))}(E,k),V=R?I*x:I;for(const U of d)for(const G of U){const oe=R?G:cS(G,k);let ne=V;const ye=jm([],[G.x,G.y,0,1],k);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=ye[3]/_.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=_.cameraToCenterDistance/ye[3]),R6(B,oe,ne))return!0}return!1}},heatmap:class extends qo{constructor(a){super(a,N6),this._updateColorRamp()}createBucket(a){return new uS(a)}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=dS({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends qo{constructor(a){super(a,U6)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends qo{constructor(a){super(a,iM)}recalculate(a,n){super.recalculate(a,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Q_(a)}queryRadius(){return Nm(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,s,d,g,_,x){return tS(Um(a,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),_.angle,x),d)}isTileClipped(){return!0}},"fill-extrusion":class extends qo{constructor(a){super(a,_M)}createBucket(a){return new t1(a)}queryRadius(){return Nm(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(a,n,s,d,g,_,x,k){const E=Um(a,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),_.angle,x),I=this.paint.get("fill-extrusion-height").evaluate(n,s),R=this.paint.get("fill-extrusion-base").evaluate(n,s),B=function(U,G,oe,ne){const ye=[];for(const ke of U){const pe=[ke.x,ke.y,0,1];jm(pe,pe,G),ye.push(new ut(pe[0]/pe[3],pe[1]/pe[3]))}return ye}(E,k),V=function(U,G,oe,ne){const ye=[],ke=[],pe=ne[8]*G,we=ne[9]*G,Be=ne[10]*G,Re=ne[11]*G,nt=ne[8]*oe,ht=ne[9]*oe,Je=ne[10]*oe,qe=ne[11]*oe;for(const Ze of U){const Qe=[],Xe=[];for(const Ve of Ze){const yt=Ve.x,ft=Ve.y,Rt=ne[0]*yt+ne[4]*ft+ne[12],Dr=ne[1]*yt+ne[5]*ft+ne[13],Fr=ne[2]*yt+ne[6]*ft+ne[14],_n=ne[3]*yt+ne[7]*ft+ne[15],ko=Fr+Be,Nn=_n+Re,un=Rt+nt,En=Dr+ht,Un=Fr+Je,si=_n+qe,Di=new ut((Rt+pe)/Nn,(Dr+we)/Nn);Di.z=ko/Nn,Qe.push(Di);const hn=new ut(un/si,En/si);hn.z=Un/si,Xe.push(hn)}ye.push(Qe),ke.push(Xe)}return[ye,ke]}(d,R,I,k);return function(U,G,oe){let ne=1/0;tS(oe,G)&&(ne=bS(oe,G[0]));for(let ye=0;ye<G.length;ye++){const ke=G[ye],pe=U[ye];for(let we=0;we<ke.length-1;we++){const Be=ke[we],Re=[Be,ke[we+1],pe[we+1],pe[we],Be];eS(oe,Re)&&(ne=Math.min(ne,bS(oe,Re)))}}return ne!==1/0&&ne}(V[0],V[1],B)}},line:class extends qo{constructor(a){super(a,SS),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){a==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof As,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=kS.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new r1(a)}queryRadius(a){const n=a,s=TS(Nd("line-width",this,n),Nd("line-gap-width",this,n)),d=Nd("line-offset",this,n);return s/2+Math.abs(d)+Nm(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,s,d,g,_,x){const k=Um(a,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),_.angle,x),E=x/2*TS(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),I=this.paint.get("line-offset").evaluate(n,s);return I&&(d=function(R,B){const V=[];for(let U=0;U<R.length;U++){const G=R[U],oe=[];for(let ne=0;ne<G.length;ne++){const ye=G[ne-1],ke=G[ne],pe=G[ne+1],we=ne===0?new ut(0,0):ke.sub(ye)._unit()._perp(),Be=ne===G.length-1?new ut(0,0):pe.sub(ke)._unit()._perp(),Re=we._add(Be)._unit(),nt=Re.x*Be.x+Re.y*Be.y;nt!==0&&Re._mult(1/nt),oe.push(Re._mult(B)._add(ke))}V.push(oe)}return V}(d,I*x)),function(R,B,V){for(let U=0;U<B.length;U++){const G=B[U];if(R.length>=3){for(let oe=0;oe<G.length;oe++)if(uh(R,G[oe]))return!0}if(L6(R,G,V))return!0}return!1}(k,d,E)}isTileClipped(){return!0}},symbol:ig,background:class extends qo{constructor(a){super(a,oD)}},raster:class extends qo{constructor(a){super(a,aD)}}};class cD{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const QS=63710088e-1;class Xr{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Xr($(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,d=this.lat*s,g=n.lat*s,_=Math.sin(d)*Math.sin(g)+Math.cos(d)*Math.cos(g)*Math.cos((n.lng-this.lng)*s);return QS*Math.acos(Math.min(_,1))}toBounds(n=0){const s=360*n/40075017,d=s/Math.cos(Math.PI/180*this.lat);return new ru(new Xr(this.lng-d,this.lat-s),new Xr(this.lng+d,this.lat+s))}static convert(n){if(n instanceof Xr)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Xr(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Xr(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ru{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Xr?new Xr(n.lng,n.lat):Xr.convert(n),this}setSouthWest(n){return this._sw=n instanceof Xr?new Xr(n.lng,n.lat):Xr.convert(n),this}extend(n){const s=this._sw,d=this._ne;let g,_;if(n instanceof Xr)g=n,_=n;else{if(!(n instanceof ru))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(ru.convert(n)):this.extend(Xr.convert(n)):this;if(g=n._sw,_=n._ne,!g||!_)return this}return s||d?(s.lng=Math.min(g.lng,s.lng),s.lat=Math.min(g.lat,s.lat),d.lng=Math.max(_.lng,d.lng),d.lat=Math.max(_.lat,d.lat)):(this._sw=new Xr(g.lng,g.lat),this._ne=new Xr(_.lng,_.lat)),this}getCenter(){return new Xr((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Xr(this.getWest(),this.getNorth())}getSouthEast(){return new Xr(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:d}=Xr.convert(n);let g=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(g=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&g}static convert(n){return n instanceof ru?n:n&&new ru(n)}}const ek=2*Math.PI*QS;function tk(a){return ek*Math.cos(a*Math.PI/180)}function rk(a){return(180+a)/360}function nk(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function ik(a,n){return a/tk(n)}function m1(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class og{constructor(n,s,d=0){this.x=+n,this.y=+s,this.z=+d}static fromLngLat(n,s=0){const d=Xr.convert(n);return new og(rk(d.lng),nk(d.lat),ik(s,d.lat))}toLngLat(){return new Xr(360*this.x-180,m1(this.y))}toAltitude(){return this.z*tk(m1(this.y))}meterInMercatorCoordinateUnits(){return 1/ek*(n=m1(this.y),1/Math.cos(n*Math.PI/180));var n}}function ok(a,n,s){var d=2*Math.PI*6378137/256/Math.pow(2,s);return[a*d-2*Math.PI*6378137/2,n*d-2*Math.PI*6378137/2]}class g1{constructor(n,s,d){if(n<0||n>25||d<0||d>=Math.pow(2,n)||s<0||s>=Math.pow(2,n))throw new Error(`x=${s}, y=${d}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=s,this.y=d,this.key=Jd(0,n,n,s,d)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s,d){const g=(x=this.y,k=this.z,E=ok(256*(_=this.x),256*(x=Math.pow(2,k)-x-1),k),I=ok(256*(_+1),256*(x+1),k),E[0]+","+E[1]+","+I[0]+","+I[1]);var _,x,k,E,I;const R=function(B,V,U){let G,oe="";for(let ne=B;ne>0;ne--)G=1<<ne-1,oe+=(V&G?1:0)+(U&G?2:0);return oe}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,R).replace(/{bbox-epsg-3857}/g,g)}isChildOf(n){const s=this.z-n.z;return s>0&&n.x===this.x>>s&&n.y===this.y>>s}getTilePoint(n){const s=Math.pow(2,this.z);return new ut((n.x*s-this.x)*yn,(n.y*s-this.y)*yn)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ak{constructor(n,s){this.wrap=n,this.canonical=s,this.key=Jd(n,s.z,s.z,s.x,s.y)}}class So{constructor(n,s,d,g,_){if(n<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${d}`);this.overscaledZ=n,this.wrap=s,this.canonical=new g1(d,+g,+_),this.key=Jd(s,n,d,g,_)}clone(){return new So(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const s=this.canonical.z-n;return n>this.canonical.z?new So(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new So(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-n;return n>this.canonical.z?Jd(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y):Jd(this.wrap*+s,n,n,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new So(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,d=2*this.canonical.x,g=2*this.canonical.y;return[new So(s,this.wrap,s,d,g),new So(s,this.wrap,s,d+1,g),new So(s,this.wrap,s,d,g+1),new So(s,this.wrap,s,d+1,g+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new So(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new So(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ak(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new og(n.x-this.wrap,n.y))}}function Jd(a,n,s,d,g){(a*=2)<0&&(a=-1*a-1);const _=1<<s;return(_*_*a+_*g+d).toString(36)+s.toString(36)+n.toString(36)}it("CanonicalTileID",g1),it("OverscaledTileID",So,{omit:["posMatrix"]});class sk{constructor(n,s,d){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(d&&d!=="mapbox"&&d!=="terrarium")return void _e(`"${d}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const g=this.dim=s.height-2;this.data=new Uint32Array(s.data.buffer),this.encoding=d||"mapbox";for(let _=0;_<g;_++)this.data[this._idx(-1,_)]=this.data[this._idx(0,_)],this.data[this._idx(g,_)]=this.data[this._idx(g-1,_)],this.data[this._idx(_,-1)]=this.data[this._idx(_,0)],this.data[this._idx(_,g)]=this.data[this._idx(_,g-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(g,-1)]=this.data[this._idx(g-1,0)],this.data[this._idx(-1,g)]=this.data[this._idx(0,g-1)],this.data[this._idx(g,g)]=this.data[this._idx(g-1,g-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _=0;_<g;_++)for(let x=0;x<g;x++){const k=this.get(_,x);k>this.max&&(this.max=k),k<this.min&&(this.min=k)}}get(n,s){const d=new Uint8Array(this.data.buffer),g=4*this._idx(n,s);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(d[g],d[g+1],d[g+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}_unpackMapbox(n,s,d){return(256*n*256+256*s+d)/10-1e4}_unpackTerrarium(n,s,d){return 256*n+s+d/256-32768}getPixels(){return new wo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,s,d){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let g=s*this.dim,_=s*this.dim+this.dim,x=d*this.dim,k=d*this.dim+this.dim;switch(s){case-1:g=_-1;break;case 1:_=g+1}switch(d){case-1:x=k-1;break;case 1:k=x+1}const E=-s*this.dim,I=-d*this.dim;for(let R=x;R<k;R++)for(let B=g;B<_;B++)this.data[this._idx(B,R)]=n.data[this._idx(B+E,R+I)]}}it("DEMData",sk);class lk{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const d=n[s];this._stringToNumber[d]=s,this._numberToString[s]=d}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class ck{constructor(n,s,d,g,_){this.type="Feature",this._vectorTileFeature=n,n._z=s,n._x=d,n._y=g,this.properties=n.properties,this.id=_}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(n[s]=this[s]);return n}}class uk{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new qc(yn,16,0),this.grid3D=new qc(yn,16,0),this.featureIndexArray=new Dt,this.promoteId=s}insert(n,s,d,g,_,x){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,g,_);const E=x?this.grid3D:this.grid;for(let I=0;I<s.length;I++){const R=s[I],B=[1/0,1/0,-1/0,-1/0];for(let V=0;V<R.length;V++){const U=R[V];B[0]=Math.min(B[0],U.x),B[1]=Math.min(B[1],U.y),B[2]=Math.max(B[2],U.x),B[3]=Math.max(B[3],U.y)}B[0]<yn&&B[1]<yn&&B[2]>=0&&B[3]>=0&&E.insert(k,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Ml.VectorTile(new n1(this.rawTileData)).layers,this.sourceLayerCoder=new lk(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,s,d,g){this.loadVTLayers();const _=n.params||{},x=yn/n.tileSize/n.scale,k=rh(_.filter),E=n.queryGeometry,I=n.queryPadding*x,R=dk(E),B=this.grid.query(R.minX-I,R.minY-I,R.maxX+I,R.maxY+I),V=dk(n.cameraQueryGeometry),U=this.grid3D.query(V.minX-I,V.minY-I,V.maxX+I,V.maxY+I,(ne,ye,ke,pe)=>function(we,Be,Re,nt,ht){for(const qe of we)if(Be<=qe.x&&Re<=qe.y&&nt>=qe.x&&ht>=qe.y)return!0;const Je=[new ut(Be,Re),new ut(Be,ht),new ut(nt,ht),new ut(nt,Re)];if(we.length>2){for(const qe of Je)if(uh(we,qe))return!0}for(let qe=0;qe<we.length-1;qe++)if(F6(we[qe],we[qe+1],Je))return!0;return!1}(n.cameraQueryGeometry,ne-I,ye-I,ke+I,pe+I));for(const ne of U)B.push(ne);B.sort(uD);const G={};let oe;for(let ne=0;ne<B.length;ne++){const ye=B[ne];if(ye===oe)continue;oe=ye;const ke=this.featureIndexArray.get(ye);let pe=null;this.loadMatchingFeature(G,ke.bucketIndex,ke.sourceLayerIndex,ke.featureIndex,k,_.layers,_.availableImages,s,d,g,(we,Be,Re)=>(pe||(pe=Qc(we)),Be.queryIntersectsFeature(E,we,Re,pe,this.z,n.transform,x,n.pixelPosMatrix)))}return G}loadMatchingFeature(n,s,d,g,_,x,k,E,I,R,B){const V=this.bucketLayerIDs[s];if(x&&!function(ne,ye){for(let ke=0;ke<ne.length;ke++)if(ye.indexOf(ne[ke])>=0)return!0;return!1}(x,V))return;const U=this.sourceLayerCoder.decode(d),G=this.vtLayers[U].feature(g);if(_.needGeometry){const ne=eu(G,!0);if(!_.filter(new Lr(this.tileID.overscaledZ),ne,this.tileID.canonical))return}else if(!_.filter(new Lr(this.tileID.overscaledZ),G))return;const oe=this.getId(G,U);for(let ne=0;ne<V.length;ne++){const ye=V[ne];if(x&&x.indexOf(ye)<0)continue;const ke=E[ye];if(!ke)continue;let pe={};oe&&R&&(pe=R.getState(ke.sourceLayer||"_geojsonTileLayer",oe));const we=q({},I[ye]);we.paint=hk(we.paint,ke.paint,G,pe,k),we.layout=hk(we.layout,ke.layout,G,pe,k);const Be=!B||B(G,ke,pe);if(!Be)continue;const Re=new ck(G,this.z,this.x,this.y,oe);Re.layer=we;let nt=n[ye];nt===void 0&&(nt=n[ye]=[]),nt.push({featureIndex:g,feature:Re,intersectionZ:Be})}}lookupSymbolFeatures(n,s,d,g,_,x,k,E){const I={};this.loadVTLayers();const R=rh(_);for(const B of n)this.loadMatchingFeature(I,d,g,B,R,x,k,E,s);return I}hasLayer(n){for(const s of this.bucketLayerIDs)for(const d of s)if(n===d)return!0;return!1}getId(n,s){let d=n.id;return this.promoteId&&(d=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof d=="boolean"&&(d=Number(d))),d}}function hk(a,n,s,d,g){return Z(a,(_,x)=>{const k=n instanceof Yc?n.get(x):null;return k&&k.evaluate?k.evaluate(s,d,g):k})}function dk(a){let n=1/0,s=1/0,d=-1/0,g=-1/0;for(const _ of a)n=Math.min(n,_.x),s=Math.min(s,_.y),d=Math.max(d,_.x),g=Math.max(g,_.y);return{minX:n,minY:s,maxX:d,maxY:g}}function uD(a,n){return n-a}var y1;it("FeatureIndex",uk,{omit:["rawTileData","sourceLayerCoder"]}),l.PerformanceMarkers=void 0,(y1=l.PerformanceMarkers||(l.PerformanceMarkers={})).create="create",y1.load="load",y1.fullLoad="fullLoad";let ag=null,Qd=[];const _1=1e3/30,hD={mark(a){performance.mark(a)},frame(a){const n=a;ag!=null&&Qd.push(n-ag),ag=n},clearMetrics(){ag=null,Qd=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const a in l.PerformanceMarkers)performance.clearMarks(l.PerformanceMarkers[a])},getPerformanceMetrics(){performance.measure("loadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.load),performance.measure("fullLoadTime",l.PerformanceMarkers.create,l.PerformanceMarkers.fullLoad);const a=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,s=Qd.length,d=1/(Qd.reduce((_,x)=>_+x,0)/s/1e3),g=Qd.filter(_=>_>_1).reduce((_,x)=>_+(x-_1)/_1,0);return{loadTime:a,fullLoadTime:n,fps:d,percentDroppedFrames:g/(s+g)*100}}};l.AJAXError=bn,l.ARRAY_TYPE=Si,l.Actor=class{constructor(a,n,s){this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},me(["receive","process"],this),this.invoker=new cD(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Pe()?a:window}send(a,n,s,d,g=!1){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(this.callbacks[_]=s);const x=Er(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:a,hasCallback:!!s,targetMapId:d,mustQueue:g,sourceMapId:this.mapId,data:Bs(n,x)},x),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:d,sourceMapId:this.mapId})}}}receive(a){const n=a.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[s];const d=this.cancelCallbacks[s];delete this.cancelCallbacks[s],d&&d()}else Pe()||n.mustQueue?(this.tasks[s]=n,this.taskQueue.push(s),this.invoker.trigger()):this.processTask(s,n)}process(){if(!this.taskQueue.length)return;const a=this.taskQueue.shift(),n=this.tasks[a];delete this.tasks[a],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(a,n)}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(Ha(n.error)):s(null,Ha(n.data)))}else{let s=!1;const d=Er(this.globalScope)?void 0:[],g=n.hasCallback?(k,E)=>{s=!0,delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:k?Bs(k):null,data:Bs(E,d)},d)}:k=>{s=!0};let _=null;const x=Ha(n.data);if(this.parent[n.type])_=this.parent[n.type](n.sourceMapId,x,g);else if(this.parent.getWorkerSource){const k=n.type.split(".");_=this.parent.getWorkerSource(n.sourceMapId,k[0],x.source)[k[1]](x,g)}else g(new Error(`Could not find function ${n.type}`));!s&&_&&_.cancel&&(this.cancelCallbacks[a]=_.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},l.AlphaImage=jd,l.CanonicalTileID=g1,l.CollisionBoxArray=ze,l.CollisionCircleLayoutArray=class extends L{},l.Color=X,l.DEMData=sk,l.DataConstantProperty=dt,l.DictionaryCoder=lk,l.EXTENT=yn,l.ErrorEvent=Fa,l.EvaluationParameters=Lr,l.Event=Ji,l.Evented=go,l.FeatureIndex=uk,l.FillBucket=Q_,l.FillExtrusionBucket=t1,l.GeoJSONFeature=ck,l.ImageAtlas=RS,l.ImagePosition=o1,l.LineBucket=r1,l.LineStripIndexArray=class extends re{},l.LngLat=Xr,l.LngLatBounds=ru,l.MercatorCoordinate=og,l.ONE_EM=Dn,l.OverscaledTileID=So,l.PerformanceUtils=hD,l.PosArray=gt,l.Properties=Mn,l.QuadTriangleArray=class extends N{},l.RGBAImage=wo,l.RasterBoundsArray=class extends m{},l.RequestPerformance=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},l.ResourceType=Qn,l.SegmentVector=Lt,l.SymbolBucket=yh,l.Transitionable=Lm,l.TriangleIndexArray=bi,l.Uniform1f=Vs,l.Uniform1i=class extends Os{constructor(a,n){super(a,n),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},l.Uniform2f=class extends Os{constructor(a,n){super(a,n),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},l.Uniform3f=class extends Os{constructor(a,n){super(a,n),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},l.Uniform4f=lh,l.UniformColor=K2,l.UniformMatrix4f=class extends Os{constructor(a,n){super(a,n),this.current=M6}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let n=1;n<16;n++)if(a[n]!==this.current[n]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},l.UnwrappedTileID=ak,l.ValidationError=We,l.ZoomHistory=Ad,l.add=function(a,n,s){return a[0]=n[0]+s[0],a[1]=n[1]+s[1],a[2]=n[2]+s[2],a},l.addDynamicAttributes=u1,l.asyncAll=function(a,n,s){if(!a.length)return s(null,[]);let d=a.length;const g=new Array(a.length);let _=null;a.forEach((x,k)=>{n(x,(E,I)=>{E&&(_=E),g[k]=I,--d==0&&s(_,g)})})},l.bezier=T,l.bindAll=me,l.cacheEntryPossiblyAdded=function(a){fn++,fn>$t&&(a.getActor().send("enforceCacheSizeLimit",nr),fn=0)},l.clamp=P,l.clearTileCache=function(a){const n=caches.delete(_t);a&&n.catch(a).then(()=>a())},l.clipLine=WS,l.clone=function(a){var n=new Si(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},l.clone$1=H,l.clone$2=function(a){var n=new Si(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n},l.collisionCircleLayout=PM,l.config=tt,l.copy=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},l.create=function(){var a=new Si(16);return Si!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},l.create$1=iS,l.createExpression=Fc,l.createFilter=rh,l.createLayout=cn,l.createStyleLayer=function(a){return a.type==="custom"?new sD(a):new lD[a.type](a)},l.cross=function(a,n,s){var d=n[0],g=n[1],_=n[2],x=s[0],k=s[1],E=s[2];return a[0]=g*E-_*k,a[1]=_*x-d*E,a[2]=d*k-g*x,a},l.dot=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]},l.dot$1=function(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]},l.ease=D,l.emitValidationErrors=ih,l.enforceCacheSizeLimit=function(a){an(),wt&&wt.then(n=>{n.keys().then(s=>{for(let d=0;d<s.length-a;d++)n.delete(s[d])})})},l.equals=function(a,n){var s=a[0],d=a[1],g=a[2],_=a[3],x=a[4],k=a[5],E=a[6],I=a[7],R=a[8],B=a[9],V=a[10],U=a[11],G=a[12],oe=a[13],ne=a[14],ye=a[15],ke=n[0],pe=n[1],we=n[2],Be=n[3],Re=n[4],nt=n[5],ht=n[6],Je=n[7],qe=n[8],Ze=n[9],Qe=n[10],Xe=n[11],Ve=n[12],yt=n[13],ft=n[14],Rt=n[15];return Math.abs(s-ke)<=wi*Math.max(1,Math.abs(s),Math.abs(ke))&&Math.abs(d-pe)<=wi*Math.max(1,Math.abs(d),Math.abs(pe))&&Math.abs(g-we)<=wi*Math.max(1,Math.abs(g),Math.abs(we))&&Math.abs(_-Be)<=wi*Math.max(1,Math.abs(_),Math.abs(Be))&&Math.abs(x-Re)<=wi*Math.max(1,Math.abs(x),Math.abs(Re))&&Math.abs(k-nt)<=wi*Math.max(1,Math.abs(k),Math.abs(nt))&&Math.abs(E-ht)<=wi*Math.max(1,Math.abs(E),Math.abs(ht))&&Math.abs(I-Je)<=wi*Math.max(1,Math.abs(I),Math.abs(Je))&&Math.abs(R-qe)<=wi*Math.max(1,Math.abs(R),Math.abs(qe))&&Math.abs(B-Ze)<=wi*Math.max(1,Math.abs(B),Math.abs(Ze))&&Math.abs(V-Qe)<=wi*Math.max(1,Math.abs(V),Math.abs(Qe))&&Math.abs(U-Xe)<=wi*Math.max(1,Math.abs(U),Math.abs(Xe))&&Math.abs(G-Ve)<=wi*Math.max(1,Math.abs(G),Math.abs(Ve))&&Math.abs(oe-yt)<=wi*Math.max(1,Math.abs(oe),Math.abs(yt))&&Math.abs(ne-ft)<=wi*Math.max(1,Math.abs(ne),Math.abs(ft))&&Math.abs(ye-Rt)<=wi*Math.max(1,Math.abs(ye),Math.abs(Rt))},l.evaluateSizeForFeature=function(a,{uSize:n,uSizeT:s},{lowerSize:d,upperSize:g}){return a.kind==="source"?d/js:a.kind==="composite"?Cr(d/js,g/js,s):n},l.evaluateSizeForZoom=function(a,n){let s=0,d=0;if(a.kind==="constant")d=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:g,minZoom:_,maxZoom:x}=a,k=g?P(oi.interpolationFactor(g,n,_,x),0,1):0;a.kind==="camera"?d=Cr(a.minSize,a.maxSize,k):s=k}return{uSizeT:s,uSize:d}},l.evaluateVariableOffset=XS,l.evented=Ld,l.exported=Ft,l.exported$1=br,l.extend=q,l.filterObject=j,l.fromRotation=function(a,n){var s=Math.sin(n),d=Math.cos(n);return a[0]=d,a[1]=s,a[2]=0,a[3]=-s,a[4]=d,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},l.fromScaling=function(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},l.getAnchorAlignment=s1,l.getAnchorJustification=c1,l.getArrayBuffer=Ba,l.getImage=Ii,l.getJSON=function(a,n){return La(q(a,{type:"json"}),n)},l.getOverlapMode=p1,l.getRTLTextPluginStatus=Xc,l.getReferrer=ws,l.getVideo=function(a,n){const s=window.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let d=0;d<a.length;d++){const g=window.document.createElement("source");Ss(a[d])||(s.crossOrigin="Anonymous"),g.src=a[d],s.appendChild(g)}return{cancel:()=>{}}},l.identity=G_,l.invert=function(a,n){var s=n[0],d=n[1],g=n[2],_=n[3],x=n[4],k=n[5],E=n[6],I=n[7],R=n[8],B=n[9],V=n[10],U=n[11],G=n[12],oe=n[13],ne=n[14],ye=n[15],ke=s*k-d*x,pe=s*E-g*x,we=s*I-_*x,Be=d*E-g*k,Re=d*I-_*k,nt=g*I-_*E,ht=R*oe-B*G,Je=R*ne-V*G,qe=R*ye-U*G,Ze=B*ne-V*oe,Qe=B*ye-U*oe,Xe=V*ye-U*ne,Ve=ke*Xe-pe*Qe+we*Ze+Be*qe-Re*Je+nt*ht;return Ve?(a[0]=(k*Xe-E*Qe+I*Ze)*(Ve=1/Ve),a[1]=(g*Qe-d*Xe-_*Ze)*Ve,a[2]=(oe*nt-ne*Re+ye*Be)*Ve,a[3]=(V*Re-B*nt-U*Be)*Ve,a[4]=(E*qe-x*Xe-I*Je)*Ve,a[5]=(s*Xe-g*qe+_*Je)*Ve,a[6]=(ne*we-G*nt-ye*pe)*Ve,a[7]=(R*nt-V*we+U*pe)*Ve,a[8]=(x*Qe-k*qe+I*ht)*Ve,a[9]=(d*qe-s*Qe-_*ht)*Ve,a[10]=(G*Re-oe*we+ye*ke)*Ve,a[11]=(B*we-R*Re-U*ke)*Ve,a[12]=(k*Je-x*Ze-E*ht)*Ve,a[13]=(s*Ze-d*Je+g*ht)*Ve,a[14]=(oe*pe-G*Be-ne*ke)*Ve,a[15]=(R*Be-B*pe+V*ke)*Ve,a):null},l.isImageBitmap=Bt,l.isSafari=Er,l.isWorker=Pe,l.keysDifference=function(a,n){const s=[];for(const d in a)d in n||s.push(d);return s},l.lazyLoadRTLTextPlugin=function(){eo.isLoading()||eo.isLoaded()||Xc()!=="deferred"||Rm()},l.makeRequest=La,l.mapObject=Z,l.mercatorXfromLng=rk,l.mercatorYfromLat=nk,l.mercatorZfromAltitude=ik,l.mul=V6,l.mul$1=function(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a[3]=n[3]*s[3],a},l.multiply=oS,l.nextPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},l.normalize=function(a,n){var s=n[0],d=n[1],g=n[2],_=s*s+d*d+g*g;return _>0&&(_=1/Math.sqrt(_)),a[0]=n[0]*_,a[1]=n[1]*_,a[2]=n[2]*_,a},l.number=Cr,l.ortho=function(a,n,s,d,g,_,x){var k=1/(n-s),E=1/(d-g),I=1/(_-x);return a[0]=-2*k,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*E,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*I,a[11]=0,a[12]=(n+s)*k,a[13]=(g+d)*E,a[14]=(x+_)*I,a[15]=1,a},l.parseCacheControl=Ne,l.parseGlyphPbf=function(a){return new n1(a).readFields(VM,[])},l.pbf=n1,l.performSymbolLayout=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=yn/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;const n=a.bucket.layers[0].layout,s=a.bucket.layers[0]._unevaluatedLayout._values,d={layoutIconSize:s["icon-size"].possiblyEvaluate(new Lr(a.bucket.zoom+1),a.canonical),layoutTextSize:s["text-size"].possiblyEvaluate(new Lr(a.bucket.zoom+1),a.canonical),textMaxSize:s["text-size"].possiblyEvaluate(new Lr(18))};if(a.bucket.textSizeData.kind==="composite"){const{minZoom:E,maxZoom:I}=a.bucket.textSizeData;d.compositeTextSizes=[s["text-size"].possiblyEvaluate(new Lr(E),a.canonical),s["text-size"].possiblyEvaluate(new Lr(I),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){const{minZoom:E,maxZoom:I}=a.bucket.iconSizeData;d.compositeIconSizes=[s["icon-size"].possiblyEvaluate(new Lr(E),a.canonical),s["icon-size"].possiblyEvaluate(new Lr(I),a.canonical)]}const g=n.get("text-line-height")*Dn,_=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",x=n.get("text-keep-upright"),k=n.get("text-size");for(const E of a.bucket.features){const I=n.get("text-font").evaluate(E,{},a.canonical).join(","),R=k.evaluate(E,{},a.canonical),B=d.layoutTextSize.evaluate(E,{},a.canonical),V=d.layoutIconSize.evaluate(E,{},a.canonical),U={horizontal:{},vertical:void 0},G=E.text;let oe,ne=[0,0];if(G){const pe=G.toString(),we=n.get("text-letter-spacing").evaluate(E,{},a.canonical)*Dn,Be=B_(pe)?we:0,Re=n.get("text-anchor").evaluate(E,{},a.canonical),nt=n.get("text-variable-anchor");if(!nt){const Qe=n.get("text-radial-offset").evaluate(E,{},a.canonical);ne=Qe?XS(Re,[Qe*Dn,l1]):n.get("text-offset").evaluate(E,{},a.canonical).map(Xe=>Xe*Dn)}let ht=_?"center":n.get("text-justify").evaluate(E,{},a.canonical);const Je=n.get("symbol-placement"),qe=Je==="point"?n.get("text-max-width").evaluate(E,{},a.canonical)*Dn:0,Ze=()=>{a.bucket.allowVerticalPlacement&&oh(pe)&&(U.vertical=Ym(G,a.glyphMap,a.glyphPositions,a.imagePositions,I,qe,g,Re,"left",Be,ne,l.WritingMode.vertical,!0,Je,B,R))};if(!_&&nt){const Qe=ht==="auto"?nt.map(Ve=>c1(Ve)):[ht];let Xe=!1;for(let Ve=0;Ve<Qe.length;Ve++){const yt=Qe[Ve];if(!U.horizontal[yt])if(Xe)U.horizontal[yt]=U.horizontal[0];else{const ft=Ym(G,a.glyphMap,a.glyphPositions,a.imagePositions,I,qe,g,"center",yt,Be,ne,l.WritingMode.horizontal,!1,Je,B,R);ft&&(U.horizontal[yt]=ft,Xe=ft.positionedLines.length===1)}}Ze()}else{ht==="auto"&&(ht=c1(Re));const Qe=Ym(G,a.glyphMap,a.glyphPositions,a.imagePositions,I,qe,g,Re,ht,Be,ne,l.WritingMode.horizontal,!1,Je,B,R);Qe&&(U.horizontal[ht]=Qe),Ze(),oh(pe)&&_&&x&&(U.vertical=Ym(G,a.glyphMap,a.glyphPositions,a.imagePositions,I,qe,g,Re,ht,Be,ne,l.WritingMode.vertical,!1,Je,B,R))}}let ye=!1;if(E.icon&&E.icon.name){const pe=a.imageMap[E.icon.name];pe&&(oe=WM(a.imagePositions[E.icon.name],n.get("icon-offset").evaluate(E,{},a.canonical),n.get("icon-anchor").evaluate(E,{},a.canonical)),ye=!!pe.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=ye:a.bucket.sdfIcons!==ye&&_e("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==a.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}const ke=YS(U.horizontal)||U.vertical;a.bucket.iconsInText=!!ke&&ke.iconsInText,(ke||oe)&&QM(a.bucket,E,U,oe,a.imageMap,d,B,V,ne,ye,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},l.perspective=function(a,n,s,d,g){var _,x=1/Math.tan(n/2);return a[0]=x/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=x,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,g!=null&&g!==1/0?(a[10]=(g+d)*(_=1/(d-g)),a[14]=2*g*d*_):(a[10]=-1,a[14]=-2*d),a},l.pick=function(a,n){const s={};for(let d=0;d<n.length;d++){const g=n[d];g in a&&(s[g]=a[g])}return s},l.plugin=eo,l.pointGeometry=ut,l.polygonIntersectsPolygon=eS,l.potpack=DS,l.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],l.register=it,l.registerForPluginStateChange=function(a){return a({pluginStatus:xi,pluginURL:qa}),Ld.on("pluginStateChange",a),a},l.renderColorRamp=dS,l.rotateX=function(a,n,s){var d=Math.sin(s),g=Math.cos(s),_=n[4],x=n[5],k=n[6],E=n[7],I=n[8],R=n[9],B=n[10],V=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=_*g+I*d,a[5]=x*g+R*d,a[6]=k*g+B*d,a[7]=E*g+V*d,a[8]=I*g-_*d,a[9]=R*g-x*d,a[10]=B*g-k*d,a[11]=V*g-E*d,a},l.rotateZ=function(a,n,s){var d=Math.sin(s),g=Math.cos(s),_=n[0],x=n[1],k=n[2],E=n[3],I=n[4],R=n[5],B=n[6],V=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=_*g+I*d,a[1]=x*g+R*d,a[2]=k*g+B*d,a[3]=E*g+V*d,a[4]=I*g-_*d,a[5]=R*g-x*d,a[6]=B*g-k*d,a[7]=V*g-E*d,a},l.scale=function(a,n,s){var d=s[0],g=s[1],_=s[2];return a[0]=n[0]*d,a[1]=n[1]*d,a[2]=n[2]*d,a[3]=n[3]*d,a[4]=n[4]*g,a[5]=n[5]*g,a[6]=n[6]*g,a[7]=n[7]*g,a[8]=n[8]*_,a[9]=n[9]*_,a[10]=n[10]*_,a[11]=n[11]*_,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a},l.scale$1=function(a,n,s){return a[0]=n[0]*s,a[1]=n[1]*s,a[2]=n[2]*s,a},l.setCacheLimits=function(a,n){nr=a,$t=n},l.setRTLTextPlugin=function(a,n,s=!1){if(xi===zd||xi===Md||xi===Dd)throw new Error("setRTLTextPlugin cannot be called multiple times.");qa=Ft.resolveURL(a),xi=zd,Rd=n,Al(),s||Rm()},l.spec=Ie,l.sphericalToCartesian=function([a,n,s]){return n+=90,n*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(n)*Math.sin(s),y:a*Math.sin(n)*Math.sin(s),z:a*Math.cos(s)}},l.sqrLen=function(a){var n=a[0],s=a[1];return n*n+s*s},l.sub=function(a,n,s){return a[0]=n[0]-s[0],a[1]=n[1]-s[1],a[2]=n[2]-s[2],a},l.toEvaluationFeature=eu,l.transformMat3=function(a,n,s){var d=n[0],g=n[1],_=n[2];return a[0]=d*s[0]+g*s[3]+_*s[6],a[1]=d*s[1]+g*s[4]+_*s[7],a[2]=d*s[2]+g*s[5]+_*s[8],a},l.transformMat4=jm,l.transformMat4$1=function(a,n,s){var d=n[0],g=n[1];return a[0]=s[0]*d+s[4]*g+s[12],a[1]=s[1]*d+s[5]*g+s[13],a},l.translate=function(a,n,s){var d,g,_,x,k,E,I,R,B,V,U,G,oe=s[0],ne=s[1],ye=s[2];return n===a?(a[12]=n[0]*oe+n[4]*ne+n[8]*ye+n[12],a[13]=n[1]*oe+n[5]*ne+n[9]*ye+n[13],a[14]=n[2]*oe+n[6]*ne+n[10]*ye+n[14],a[15]=n[3]*oe+n[7]*ne+n[11]*ye+n[15]):(g=n[1],_=n[2],x=n[3],k=n[4],E=n[5],I=n[6],R=n[7],B=n[8],V=n[9],U=n[10],G=n[11],a[0]=d=n[0],a[1]=g,a[2]=_,a[3]=x,a[4]=k,a[5]=E,a[6]=I,a[7]=R,a[8]=B,a[9]=V,a[10]=U,a[11]=G,a[12]=d*oe+k*ne+B*ye+n[12],a[13]=g*oe+E*ne+V*ye+n[13],a[14]=_*oe+I*ne+U*ye+n[14],a[15]=x*oe+R*ne+G*ye+n[15]),a},l.triggerPluginCompletionEvent=Dm,l.unicodeBlockLookup=Ye,l.uniqueId=function(){return ee++},l.validateCustomStyleLayer=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},l.validateLight=Cd,l.validateStyle=Hc,l.vectorTile=Ml,l.warnOnce=_e,l.wrap=$}),h(["./shared"],function(l){function b(K){const M=typeof K;if(M==="number"||M==="boolean"||M==="string"||K==null)return JSON.stringify(K);if(Array.isArray(K)){let X="[";for(const ae of K)X+=`${b(ae)},`;return`${X}]`}const F=Object.keys(K).sort();let W="{";for(let X=0;X<F.length;X++)W+=`${JSON.stringify(F[X])}:${b(K[F[X]])},`;return`${W}}`}function w(K){let M="";for(const F of l.refProperties)M+=`/${b(K[F])}`;return M}class T{constructor(M){this.keyCache={},M&&this.replace(M)}replace(M){this._layerConfigs={},this._layers={},this.update(M,[])}update(M,F){for(const X of M){this._layerConfigs[X.id]=X;const ae=this._layers[X.id]=l.createStyleLayer(X);ae._featureFilter=l.createFilter(ae.filter),this.keyCache[X.id]&&delete this.keyCache[X.id]}for(const X of F)delete this.keyCache[X],delete this._layerConfigs[X],delete this._layers[X];this.familiesBySource={};const W=function(X,ae){const ue={};for(let se=0;se<X.length;se++){const he=ae&&ae[X[se].id]||w(X[se]);ae&&(ae[X[se].id]=he);let Ce=ue[he];Ce||(Ce=ue[he]=[]),Ce.push(X[se])}const le=[];for(const se in ue)le.push(ue[se]);return le}(Object.values(this._layerConfigs),this.keyCache);for(const X of W){const ae=X.map(Fe=>this._layers[Fe.id]),ue=ae[0];if(ue.visibility==="none")continue;const le=ue.source||"";let se=this.familiesBySource[le];se||(se=this.familiesBySource[le]={});const he=ue.sourceLayer||"_geojsonTileLayer";let Ce=se[he];Ce||(Ce=se[he]=[]),Ce.push(ae)}}}class D{constructor(M){const F={},W=[];for(const le in M){const se=M[le],he=F[le]={};for(const Ce in se){const Fe=se[+Ce];if(!Fe||Fe.bitmap.width===0||Fe.bitmap.height===0)continue;const Ee={x:0,y:0,w:Fe.bitmap.width+2,h:Fe.bitmap.height+2};W.push(Ee),he[Ce]={rect:Ee,metrics:Fe.metrics}}}const{w:X,h:ae}=l.potpack(W),ue=new l.AlphaImage({width:X||1,height:ae||1});for(const le in M){const se=M[le];for(const he in se){const Ce=se[+he];if(!Ce||Ce.bitmap.width===0||Ce.bitmap.height===0)continue;const Fe=F[le][he].rect;l.AlphaImage.copy(Ce.bitmap,ue,{x:0,y:0},{x:Fe.x+1,y:Fe.y+1},Ce.bitmap)}}this.image=ue,this.positions=F}}l.register("GlyphAtlas",D);class P{constructor(M){this.tileID=new l.OverscaledTileID(M.tileID.overscaledZ,M.tileID.wrap,M.tileID.canonical.z,M.tileID.canonical.x,M.tileID.canonical.y),this.uid=M.uid,this.zoom=M.zoom,this.pixelRatio=M.pixelRatio,this.tileSize=M.tileSize,this.source=M.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=M.showCollisionBoxes,this.collectResourceTiming=!!M.collectResourceTiming,this.returnDependencies=!!M.returnDependencies,this.promoteId=M.promoteId}parse(M,F,W,X,ae){this.status="parsing",this.data=M,this.collisionBoxArray=new l.CollisionBoxArray;const ue=new l.DictionaryCoder(Object.keys(M.layers).sort()),le=new l.FeatureIndex(this.tileID,this.promoteId);le.bucketLayerIDs=[];const se={},he={featureIndex:le,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Ce=F.familiesBySource[this.source];for(const kt in Ce){const zt=M.layers[kt];if(!zt)continue;zt.version===1&&l.warnOnce(`Vector tile source "${this.source}" layer "${kt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Wt=ue.encode(kt),lr=[];for(let ln=0;ln<zt.length;ln++){const wr=zt.feature(ln),wn=le.getId(wr,kt);lr.push({feature:wr,id:wn,index:ln,sourceLayerIndex:Wt})}for(const ln of Ce[kt]){const wr=ln[0];wr.source!==this.source&&l.warnOnce(`layer.source = ${wr.source} does not equal this.source = ${this.source}`),wr.minzoom&&this.zoom<Math.floor(wr.minzoom)||wr.maxzoom&&this.zoom>=wr.maxzoom||wr.visibility!=="none"&&($(ln,this.zoom,W),(se[wr.id]=wr.createBucket({index:le.bucketLayerIDs.length,layers:ln,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Wt,sourceID:this.source})).populate(lr,he,this.tileID.canonical),le.bucketLayerIDs.push(ln.map(wn=>wn.id)))}}let Fe,Ee,ot,at;const Ke=l.mapObject(he.glyphDependencies,kt=>Object.keys(kt).map(Number));Object.keys(Ke).length?X.send("getGlyphs",{uid:this.uid,stacks:Ke},(kt,zt)=>{Fe||(Fe=kt,Ee=zt,Zt.call(this))}):Ee={};const mt=Object.keys(he.iconDependencies);mt.length?X.send("getImages",{icons:mt,source:this.source,tileID:this.tileID,type:"icons"},(kt,zt)=>{Fe||(Fe=kt,ot=zt,Zt.call(this))}):ot={};const xt=Object.keys(he.patternDependencies);function Zt(){if(Fe)return ae(Fe);if(Ee&&ot&&at){const kt=new D(Ee),zt=new l.ImageAtlas(ot,at);for(const Wt in se){const lr=se[Wt];lr instanceof l.SymbolBucket?($(lr.layers,this.zoom,W),l.performSymbolLayout({bucket:lr,glyphMap:Ee,glyphPositions:kt.positions,imageMap:ot,imagePositions:zt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):lr.hasPattern&&(lr instanceof l.LineBucket||lr instanceof l.FillBucket||lr instanceof l.FillExtrusionBucket)&&($(lr.layers,this.zoom,W),lr.addFeatures(he,this.tileID.canonical,zt.patternPositions))}this.status="done",ae(null,{buckets:Object.values(se).filter(Wt=>!Wt.isEmpty()),featureIndex:le,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:kt.image,imageAtlas:zt,glyphMap:this.returnDependencies?Ee:null,iconMap:this.returnDependencies?ot:null,glyphPositions:this.returnDependencies?kt.positions:null})}}xt.length?X.send("getImages",{icons:xt,source:this.source,tileID:this.tileID,type:"patterns"},(kt,zt)=>{Fe||(Fe=kt,at=zt,Zt.call(this))}):at={},Zt.call(this)}}function $(K,M,F){const W=new l.EvaluationParameters(M);for(const X of K)X.recalculate(W,F)}function q(K,M){const F=l.getArrayBuffer(K.request,(W,X,ae,ue)=>{W?M(W):X&&M(null,{vectorTile:new l.vectorTile.VectorTile(new l.pbf(X)),rawData:X,cacheControl:ae,expires:ue})});return()=>{F.cancel(),M()}}class ee{constructor(M,F,W,X){this.actor=M,this.layerIndex=F,this.availableImages=W,this.loadVectorData=X||q,this.loading={},this.loaded={}}loadTile(M,F){const W=M.uid;this.loading||(this.loading={});const X=!!(M&&M.request&&M.request.collectResourceTiming)&&new l.RequestPerformance(M.request),ae=this.loading[W]=new P(M);ae.abort=this.loadVectorData(M,(ue,le)=>{if(delete this.loading[W],ue||!le)return ae.status="done",this.loaded[W]=ae,F(ue);const se=le.rawData,he={};le.expires&&(he.expires=le.expires),le.cacheControl&&(he.cacheControl=le.cacheControl);const Ce={};if(X){const Fe=X.finish();Fe&&(Ce.resourceTiming=JSON.parse(JSON.stringify(Fe)))}ae.vectorTile=le.vectorTile,ae.parse(le.vectorTile,this.layerIndex,this.availableImages,this.actor,(Fe,Ee)=>{if(Fe||!Ee)return F(Fe);F(null,l.extend({rawTileData:se.slice(0)},Ee,he,Ce))}),this.loaded=this.loaded||{},this.loaded[W]=ae})}reloadTile(M,F){const W=this.loaded,X=M.uid,ae=this;if(W&&W[X]){const ue=W[X];ue.showCollisionBoxes=M.showCollisionBoxes;const le=(se,he)=>{const Ce=ue.reloadCallback;Ce&&(delete ue.reloadCallback,ue.parse(ue.vectorTile,ae.layerIndex,this.availableImages,ae.actor,Ce)),F(se,he)};ue.status==="parsing"?ue.reloadCallback=le:ue.status==="done"&&(ue.vectorTile?ue.parse(ue.vectorTile,this.layerIndex,this.availableImages,this.actor,le):le())}}abortTile(M,F){const W=this.loading,X=M.uid;W&&W[X]&&W[X].abort&&(W[X].abort(),delete W[X]),F()}removeTile(M,F){const W=this.loaded,X=M.uid;W&&W[X]&&delete W[X],F()}}class me{constructor(){this.loaded={}}loadTile(M,F){const{uid:W,encoding:X,rawImageData:ae}=M,ue=l.isImageBitmap(ae)?this.getImageData(ae):ae,le=new l.DEMData(W,ue,X);this.loaded=this.loaded||{},this.loaded[W]=le,F(null,le)}getImageData(M){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(M.width,M.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=M.width,this.offscreenCanvas.height=M.height,this.offscreenCanvasContext.drawImage(M,0,0,M.width,M.height);const F=this.offscreenCanvasContext.getImageData(-1,-1,M.width+2,M.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new l.RGBAImage({width:F.width,height:F.height},F.data)}removeTile(M){const F=this.loaded,W=M.uid;F&&F[W]&&delete F[W]}}var Z=function K(M,F){var W,X=M&&M.type;if(X==="FeatureCollection")for(W=0;W<M.features.length;W++)K(M.features[W],F);else if(X==="GeometryCollection")for(W=0;W<M.geometries.length;W++)K(M.geometries[W],F);else if(X==="Feature")K(M.geometry,F);else if(X==="Polygon")j(M.coordinates,F);else if(X==="MultiPolygon")for(W=0;W<M.coordinates.length;W++)j(M.coordinates[W],F);return M};function j(K,M){if(K.length!==0){H(K[0],M);for(var F=1;F<K.length;F++)H(K[F],!M)}}function H(K,M){for(var F=0,W=0,X=0,ae=K.length,ue=ae-1;X<ae;ue=X++){var le=(K[X][0]-K[ue][0])*(K[ue][1]+K[X][1]),se=F+le;W+=Math.abs(F)>=Math.abs(le)?F-se+le:le-se+F,F=se}F+W>=0!=!!M&&K.reverse()}const ie=l.vectorTile.VectorTileFeature.prototype.toGeoJSON;class _e{constructor(M){this._feature=M,this.extent=l.EXTENT,this.type=M.type,this.properties=M.tags,"id"in M&&!isNaN(M.id)&&(this.id=parseInt(M.id,10))}loadGeometry(){if(this._feature.type===1){const M=[];for(const F of this._feature.geometry)M.push([new l.pointGeometry(F[0],F[1])]);return M}{const M=[];for(const F of this._feature.geometry){const W=[];for(const X of F)W.push(new l.pointGeometry(X[0],X[1]));M.push(W)}return M}}toGeoJSON(M,F,W){return ie.call(this,M,F,W)}}class Le{constructor(M){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.EXTENT,this.length=M.length,this._features=M}feature(M){return new _e(this._features[M])}}var ve={exports:{}},Pe=l.pointGeometry,Ne=l.vectorTile.VectorTileFeature,$e=ct;function ct(K,M){this.options=M||{},this.features=K,this.length=K.length}function qt(K,M){this.id=typeof K.id=="number"?K.id:void 0,this.type=K.type,this.rawGeometry=K.type===1?[K.geometry]:K.geometry,this.properties=K.tags,this.extent=M||4096}ct.prototype.feature=function(K){return new qt(this.features[K],this.options.extent)},qt.prototype.loadGeometry=function(){var K=this.rawGeometry;this.geometry=[];for(var M=0;M<K.length;M++){for(var F=K[M],W=[],X=0;X<F.length;X++)W.push(new Pe(F[X][0],F[X][1]));this.geometry.push(W)}return this.geometry},qt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var K=this.geometry,M=1/0,F=-1/0,W=1/0,X=-1/0,ae=0;ae<K.length;ae++)for(var ue=K[ae],le=0;le<ue.length;le++){var se=ue[le];M=Math.min(M,se.x),F=Math.max(F,se.x),W=Math.min(W,se.y),X=Math.max(X,se.y)}return[M,W,F,X]},qt.prototype.toGeoJSON=Ne.prototype.toGeoJSON;var Er=l.pbf,Bt=$e;function Ft(K){var M=new Er;return function(F,W){for(var X in F.layers)W.writeMessage(3,ut,F.layers[X])}(K,M),M.finish()}function ut(K,M){var F;M.writeVarintField(15,K.version||1),M.writeStringField(1,K.name||""),M.writeVarintField(5,K.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(F=0;F<K.length;F++)W.feature=K.feature(F),M.writeMessage(2,It,W);var X=W.keys;for(F=0;F<X.length;F++)M.writeStringField(3,X[F]);var ae=W.values;for(F=0;F<ae.length;F++)M.writeMessage(4,nr,ae[F])}function It(K,M){var F=K.feature;F.id!==void 0&&M.writeVarintField(1,F.id),M.writeMessage(2,tt,K),M.writeVarintField(3,F.type),M.writeMessage(4,Tt,F)}function tt(K,M){var F=K.feature,W=K.keys,X=K.values,ae=K.keycache,ue=K.valuecache;for(var le in F.properties){var se=F.properties[le],he=ae[le];if(se!==null){he===void 0&&(W.push(le),ae[le]=he=W.length-1),M.writeVarint(he);var Ce=typeof se;Ce!=="string"&&Ce!=="boolean"&&Ce!=="number"&&(se=JSON.stringify(se));var Fe=Ce+":"+se,Ee=ue[Fe];Ee===void 0&&(X.push(se),ue[Fe]=Ee=X.length-1),M.writeVarint(Ee)}}}function _t(K,M){return(M<<3)+(7&K)}function wt(K){return K<<1^K>>31}function Tt(K,M){for(var F=K.loadGeometry(),W=K.type,X=0,ae=0,ue=F.length,le=0;le<ue;le++){var se=F[le],he=1;W===1&&(he=se.length),M.writeVarint(_t(1,he));for(var Ce=W===3?se.length-1:se.length,Fe=0;Fe<Ce;Fe++){Fe===1&&W!==1&&M.writeVarint(_t(2,Ce-1));var Ee=se[Fe].x-X,ot=se[Fe].y-ae;M.writeVarint(wt(Ee)),M.writeVarint(wt(ot)),X+=Ee,ae+=ot}W===3&&M.writeVarint(_t(7,1))}}function nr(K,M){var F=typeof K;F==="string"?M.writeStringField(1,K):F==="boolean"?M.writeBooleanField(7,K):F==="number"&&(K%1!=0?M.writeDoubleField(3,K):K<0?M.writeSVarintField(6,K):M.writeVarintField(5,K))}function $t(K,M,F,W,X,ae){if(X-W<=F)return;const ue=W+X>>1;an(K,M,ue,W,X,ae%2),$t(K,M,F,W,ue-1,ae+1),$t(K,M,F,ue+1,X,ae+1)}function an(K,M,F,W,X,ae){for(;X>W;){if(X-W>600){const he=X-W+1,Ce=F-W+1,Fe=Math.log(he),Ee=.5*Math.exp(2*Fe/3),ot=.5*Math.sqrt(Fe*Ee*(he-Ee)/he)*(Ce-he/2<0?-1:1);an(K,M,F,Math.max(W,Math.floor(F-Ce*Ee/he+ot)),Math.min(X,Math.floor(F+(he-Ce)*Ee/he+ot)),ae)}const ue=M[2*F+ae];let le=W,se=X;for(fn(K,M,W,F),M[2*X+ae]>ue&&fn(K,M,W,X);le<se;){for(fn(K,M,le,se),le++,se--;M[2*le+ae]<ue;)le++;for(;M[2*se+ae]>ue;)se--}M[2*W+ae]===ue?fn(K,M,W,se):(se++,fn(K,M,se,X)),se<=F&&(W=se+1),F<=se&&(X=se-1)}}function fn(K,M,F,W){br(K,F,W),br(M,2*F,2*W),br(M,2*F+1,2*W+1)}function br(K,M,F){const W=K[M];K[M]=K[F],K[F]=W}function pn(K,M,F,W){const X=K-F,ae=M-W;return X*X+ae*ae}ve.exports=Ft,ve.exports.fromVectorTileJs=Ft,ve.exports.fromGeojsonVt=function(K,M){M=M||{};var F={};for(var W in K)F[W]=new Bt(K[W].features,M),F[W].name=W,F[W].version=M.version,F[W].extent=M.extent;return Ft({layers:F})},ve.exports.GeoJSONWrapper=Bt;const Fn=K=>K[0],Qr=K=>K[1];class Jn{constructor(M,F=Fn,W=Qr,X=64,ae=Float64Array){this.nodeSize=X,this.points=M;const ue=M.length<65536?Uint16Array:Uint32Array,le=this.ids=new ue(M.length),se=this.coords=new ae(2*M.length);for(let he=0;he<M.length;he++)le[he]=he,se[2*he]=F(M[he]),se[2*he+1]=W(M[he]);$t(le,se,X,0,le.length-1,0)}range(M,F,W,X){return function(ae,ue,le,se,he,Ce,Fe){const Ee=[0,ae.length-1,0],ot=[];let at,Ke;for(;Ee.length;){const mt=Ee.pop(),xt=Ee.pop(),Zt=Ee.pop();if(xt-Zt<=Fe){for(let Wt=Zt;Wt<=xt;Wt++)at=ue[2*Wt],Ke=ue[2*Wt+1],at>=le&&at<=he&&Ke>=se&&Ke<=Ce&&ot.push(ae[Wt]);continue}const kt=Math.floor((Zt+xt)/2);at=ue[2*kt],Ke=ue[2*kt+1],at>=le&&at<=he&&Ke>=se&&Ke<=Ce&&ot.push(ae[kt]);const zt=(mt+1)%2;(mt===0?le<=at:se<=Ke)&&(Ee.push(Zt),Ee.push(kt-1),Ee.push(zt)),(mt===0?he>=at:Ce>=Ke)&&(Ee.push(kt+1),Ee.push(xt),Ee.push(zt))}return ot}(this.ids,this.coords,M,F,W,X,this.nodeSize)}within(M,F,W){return function(X,ae,ue,le,se,he){const Ce=[0,X.length-1,0],Fe=[],Ee=se*se;for(;Ce.length;){const ot=Ce.pop(),at=Ce.pop(),Ke=Ce.pop();if(at-Ke<=he){for(let zt=Ke;zt<=at;zt++)pn(ae[2*zt],ae[2*zt+1],ue,le)<=Ee&&Fe.push(X[zt]);continue}const mt=Math.floor((Ke+at)/2),xt=ae[2*mt],Zt=ae[2*mt+1];pn(xt,Zt,ue,le)<=Ee&&Fe.push(X[mt]);const kt=(ot+1)%2;(ot===0?ue-se<=xt:le-se<=Zt)&&(Ce.push(Ke),Ce.push(mt-1),Ce.push(kt)),(ot===0?ue+se>=xt:le+se>=Zt)&&(Ce.push(mt+1),Ce.push(at),Ce.push(kt))}return Fe}(this.ids,this.coords,M,F,W,this.nodeSize)}}const $n={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:K=>K},Qn=Math.fround||(bn=new Float32Array(1),K=>(bn[0]=+K,bn[0]));var bn;class ws{constructor(M){this.options=Ii(Object.create($n),M),this.trees=new Array(this.options.maxZoom+1)}load(M){const{log:F,minZoom:W,maxZoom:X,nodeSize:ae}=this.options;F&&console.time("total time");const ue=`prepare ${M.length} points`;F&&console.time(ue),this.points=M;let le=[];for(let se=0;se<M.length;se++)M[se].geometry&&le.push(La(M[se],se));this.trees[X+1]=new Jn(le,ti,Yi,ae,Float32Array),F&&console.timeEnd(ue);for(let se=X;se>=W;se--){const he=+Date.now();le=this._cluster(le,se),this.trees[se]=new Jn(le,ti,Yi,ae,Float32Array),F&&console.log("z%d: %d clusters in %dms",se,le.length,+Date.now()-he)}return F&&console.timeEnd("total time"),this}getClusters(M,F){let W=((M[0]+180)%360+360)%360-180;const X=Math.max(-90,Math.min(90,M[1]));let ae=M[2]===180?180:((M[2]+180)%360+360)%360-180;const ue=Math.max(-90,Math.min(90,M[3]));if(M[2]-M[0]>=360)W=-180,ae=180;else if(W>ae){const Ce=this.getClusters([W,X,180,ue],F),Fe=this.getClusters([-180,X,ae,ue],F);return Ce.concat(Fe)}const le=this.trees[this._limitZoom(F)],se=le.range(Gt(W),ei(ue),Gt(ae),ei(X)),he=[];for(const Ce of se){const Fe=le.points[Ce];he.push(Fe.numPoints?Ba(Fe):this.points[Fe.index])}return he}getChildren(M){const F=this._getOriginId(M),W=this._getOriginZoom(M),X="No cluster with the specified id.",ae=this.trees[W];if(!ae)throw new Error(X);const ue=ae.points[F];if(!ue)throw new Error(X);const le=this.options.radius/(this.options.extent*Math.pow(2,W-1)),se=ae.within(ue.x,ue.y,le),he=[];for(const Ce of se){const Fe=ae.points[Ce];Fe.parentId===M&&he.push(Fe.numPoints?Ba(Fe):this.points[Fe.index])}if(he.length===0)throw new Error(X);return he}getLeaves(M,F,W){const X=[];return this._appendLeaves(X,M,F=F||10,W=W||0,0),X}getTile(M,F,W){const X=this.trees[this._limitZoom(M)],ae=Math.pow(2,M),{extent:ue,radius:le}=this.options,se=le/ue,he=(W-se)/ae,Ce=(W+1+se)/ae,Fe={features:[]};return this._addTileFeatures(X.range((F-se)/ae,he,(F+1+se)/ae,Ce),X.points,F,W,ae,Fe),F===0&&this._addTileFeatures(X.range(1-se/ae,he,1,Ce),X.points,ae,W,ae,Fe),F===ae-1&&this._addTileFeatures(X.range(0,he,se/ae,Ce),X.points,-1,W,ae,Fe),Fe.features.length?Fe:null}getClusterExpansionZoom(M){let F=this._getOriginZoom(M)-1;for(;F<=this.options.maxZoom;){const W=this.getChildren(M);if(F++,W.length!==1)break;M=W[0].properties.cluster_id}return F}_appendLeaves(M,F,W,X,ae){const ue=this.getChildren(F);for(const le of ue){const se=le.properties;if(se&&se.cluster?ae+se.point_count<=X?ae+=se.point_count:ae=this._appendLeaves(M,se.cluster_id,W,X,ae):ae<X?ae++:M.push(le),M.length===W)break}return ae}_addTileFeatures(M,F,W,X,ae,ue){for(const le of M){const se=F[le],he=se.numPoints;let Ce,Fe,Ee;if(he)Ce=Ss(se),Fe=se.x,Ee=se.y;else{const Ke=this.points[se.index];Ce=Ke.properties,Fe=Gt(Ke.geometry.coordinates[0]),Ee=ei(Ke.geometry.coordinates[1])}const ot={type:1,geometry:[[Math.round(this.options.extent*(Fe*ae-W)),Math.round(this.options.extent*(Ee*ae-X))]],tags:Ce};let at;he?at=se.id:this.options.generateId?at=se.index:this.points[se.index].id&&(at=this.points[se.index].id),at!==void 0&&(ot.id=at),ue.features.push(ot)}}_limitZoom(M){return Math.max(this.options.minZoom,Math.min(Math.floor(+M),this.options.maxZoom+1))}_cluster(M,F){const W=[],{radius:X,extent:ae,reduce:ue,minPoints:le}=this.options,se=X/(ae*Math.pow(2,F));for(let he=0;he<M.length;he++){const Ce=M[he];if(Ce.zoom<=F)continue;Ce.zoom=F;const Fe=this.trees[F+1],Ee=Fe.within(Ce.x,Ce.y,se),ot=Ce.numPoints||1;let at=ot;for(const Ke of Ee){const mt=Fe.points[Ke];mt.zoom>F&&(at+=mt.numPoints||1)}if(at>ot&&at>=le){let Ke=Ce.x*ot,mt=Ce.y*ot,xt=ue&&ot>1?this._map(Ce,!0):null;const Zt=(he<<5)+(F+1)+this.points.length;for(const kt of Ee){const zt=Fe.points[kt];if(zt.zoom<=F)continue;zt.zoom=F;const Wt=zt.numPoints||1;Ke+=zt.x*Wt,mt+=zt.y*Wt,zt.parentId=Zt,ue&&(xt||(xt=this._map(Ce,!0)),ue(xt,this._map(zt)))}Ce.parentId=Zt,W.push(Zo(Ke/at,mt/at,Zt,at,xt))}else if(W.push(Ce),at>1)for(const Ke of Ee){const mt=Fe.points[Ke];mt.zoom<=F||(mt.zoom=F,W.push(mt))}}return W}_getOriginId(M){return M-this.points.length>>5}_getOriginZoom(M){return(M-this.points.length)%32}_map(M,F){if(M.numPoints)return F?Ii({},M.properties):M.properties;const W=this.points[M.index].properties,X=this.options.map(W);return F&&X===W?Ii({},X):X}}function Zo(K,M,F,W,X){return{x:Qn(K),y:Qn(M),zoom:1/0,id:F,parentId:-1,numPoints:W,properties:X}}function La(K,M){const[F,W]=K.geometry.coordinates;return{x:Qn(Gt(F)),y:Qn(ei(W)),zoom:1/0,index:M,parentId:-1}}function Ba(K){return{type:"Feature",id:K.id,properties:Ss(K),geometry:{type:"Point",coordinates:[(M=K.x,360*(M-.5)),Ki(K.y)]}};var M}function Ss(K){const M=K.numPoints,F=M>=1e4?`${Math.round(M/1e3)}k`:M>=1e3?Math.round(M/100)/10+"k":M;return Ii(Ii({},K.properties),{cluster:!0,cluster_id:K.id,point_count:M,point_count_abbreviated:F})}function Gt(K){return K/360+.5}function ei(K){const M=Math.sin(K*Math.PI/180),F=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return F<0?0:F>1?1:F}function Ki(K){const M=(180-360*K)*Math.PI/180;return 360*Math.atan(Math.exp(M))/Math.PI-90}function Ii(K,M){for(const F in M)K[F]=M[F];return K}function ti(K){return K.x}function Yi(K){return K.y}function Ji(K,M,F,W){for(var X,ae=W,ue=F-M>>1,le=F-M,se=K[M],he=K[M+1],Ce=K[F],Fe=K[F+1],Ee=M+3;Ee<F;Ee+=3){var ot=Fa(K[Ee],K[Ee+1],se,he,Ce,Fe);if(ot>ae)X=Ee,ae=ot;else if(ot===ae){var at=Math.abs(Ee-ue);at<le&&(X=Ee,le=at)}}ae>W&&(X-M>3&&Ji(K,M,X,W),K[X+2]=ae,F-X>3&&Ji(K,X,F,W))}function Fa(K,M,F,W,X,ae){var ue=X-F,le=ae-W;if(ue!==0||le!==0){var se=((K-F)*ue+(M-W)*le)/(ue*ue+le*le);se>1?(F=X,W=ae):se>0&&(F+=ue*se,W+=le*se)}return(ue=K-F)*ue+(le=M-W)*le}function go(K,M,F,W){var X={id:K===void 0?null:K,type:M,geometry:F,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(ae){var ue=ae.geometry,le=ae.type;if(le==="Point"||le==="MultiPoint"||le==="LineString")Ie(ae,ue);else if(le==="Polygon"||le==="MultiLineString")for(var se=0;se<ue.length;se++)Ie(ae,ue[se]);else if(le==="MultiPolygon")for(se=0;se<ue.length;se++)for(var he=0;he<ue[se].length;he++)Ie(ae,ue[se][he])}(X),X}function Ie(K,M){for(var F=0;F<M.length;F+=3)K.minX=Math.min(K.minX,M[F]),K.minY=Math.min(K.minY,M[F+1]),K.maxX=Math.max(K.maxX,M[F]),K.maxY=Math.max(K.maxY,M[F+1])}function We(K,M,F,W){if(M.geometry){var X=M.geometry.coordinates,ae=M.geometry.type,ue=Math.pow(F.tolerance/((1<<F.maxZoom)*F.extent),2),le=[],se=M.id;if(F.promoteId?se=M.properties[F.promoteId]:F.generateId&&(se=W||0),ae==="Point")Wo(X,le);else if(ae==="MultiPoint")for(var he=0;he<X.length;he++)Wo(X[he],le);else if(ae==="LineString")vi(X,le,ue,!1);else if(ae==="MultiLineString"){if(F.lineMetrics){for(he=0;he<X.length;he++)vi(X[he],le=[],ue,!1),K.push(go(se,"LineString",le,M.properties));return}Nt(X,le,ue,!1)}else if(ae==="Polygon")Nt(X,le,ue,!0);else{if(ae!=="MultiPolygon"){if(ae==="GeometryCollection"){for(he=0;he<M.geometry.geometries.length;he++)We(K,{id:se,geometry:M.geometry.geometries[he],properties:M.properties},F,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(he=0;he<X.length;he++){var Ce=[];Nt(X[he],Ce,ue,!0),le.push(Ce)}}K.push(go(se,ae,le,M.properties))}}function Wo(K,M){M.push(ri(K[0])),M.push(ni(K[1])),M.push(0)}function vi(K,M,F,W){for(var X,ae,ue=0,le=0;le<K.length;le++){var se=ri(K[le][0]),he=ni(K[le][1]);M.push(se),M.push(he),M.push(0),le>0&&(ue+=W?(X*he-se*ae)/2:Math.sqrt(Math.pow(se-X,2)+Math.pow(he-ae,2))),X=se,ae=he}var Ce=M.length-3;M[2]=1,Ji(M,0,Ce,F),M[Ce+2]=1,M.size=Math.abs(ue),M.start=0,M.end=M.size}function Nt(K,M,F,W){for(var X=0;X<K.length;X++){var ae=[];vi(K[X],ae,F,W),M.push(ae)}}function ri(K){return K/360+.5}function ni(K){var M=Math.sin(K*Math.PI/180),F=.5-.25*Math.log((1+M)/(1-M))/Math.PI;return F<0?0:F>1?1:F}function ii(K,M,F,W,X,ae,ue,le){if(W/=M,ae>=(F/=M)&&ue<W)return K;if(ue<F||ae>=W)return null;for(var se=[],he=0;he<K.length;he++){var Ce=K[he],Fe=Ce.geometry,Ee=Ce.type,ot=X===0?Ce.minX:Ce.minY,at=X===0?Ce.maxX:Ce.maxY;if(ot>=F&&at<W)se.push(Ce);else if(!(at<F||ot>=W)){var Ke=[];if(Ee==="Point"||Ee==="MultiPoint")On(Fe,Ke,F,W,X);else if(Ee==="LineString")Ue(Fe,Ke,F,W,X,!1,le.lineMetrics);else if(Ee==="MultiLineString")Et(Fe,Ke,F,W,X,!1);else if(Ee==="Polygon")Et(Fe,Ke,F,W,X,!0);else if(Ee==="MultiPolygon")for(var mt=0;mt<Fe.length;mt++){var xt=[];Et(Fe[mt],xt,F,W,X,!0),xt.length&&Ke.push(xt)}if(Ke.length){if(le.lineMetrics&&Ee==="LineString"){for(mt=0;mt<Ke.length;mt++)se.push(go(Ce.id,Ee,Ke[mt],Ce.tags));continue}Ee!=="LineString"&&Ee!=="MultiLineString"||(Ke.length===1?(Ee="LineString",Ke=Ke[0]):Ee="MultiLineString"),Ee!=="Point"&&Ee!=="MultiPoint"||(Ee=Ke.length===3?"Point":"MultiPoint"),se.push(go(Ce.id,Ee,Ke,Ce.tags))}}}return se.length?se:null}function On(K,M,F,W,X){for(var ae=0;ae<K.length;ae+=3){var ue=K[ae+X];ue>=F&&ue<=W&&(M.push(K[ae]),M.push(K[ae+1]),M.push(K[ae+2]))}}function Ue(K,M,F,W,X,ae,ue){for(var le,se,he=Mt(K),Ce=X===0?yo:St,Fe=K.start,Ee=0;Ee<K.length-3;Ee+=3){var ot=K[Ee],at=K[Ee+1],Ke=K[Ee+2],mt=K[Ee+3],xt=K[Ee+4],Zt=X===0?ot:at,kt=X===0?mt:xt,zt=!1;ue&&(le=Math.sqrt(Math.pow(ot-mt,2)+Math.pow(at-xt,2))),Zt<F?kt>F&&(se=Ce(he,ot,at,mt,xt,F),ue&&(he.start=Fe+le*se)):Zt>W?kt<W&&(se=Ce(he,ot,at,mt,xt,W),ue&&(he.start=Fe+le*se)):mn(he,ot,at,Ke),kt<F&&Zt>=F&&(se=Ce(he,ot,at,mt,xt,F),zt=!0),kt>W&&Zt<=W&&(se=Ce(he,ot,at,mt,xt,W),zt=!0),!ae&&zt&&(ue&&(he.end=Fe+le*se),M.push(he),he=Mt(K)),ue&&(Fe+=le)}var Wt=K.length-3;ot=K[Wt],at=K[Wt+1],Ke=K[Wt+2],(Zt=X===0?ot:at)>=F&&Zt<=W&&mn(he,ot,at,Ke),Wt=he.length-3,ae&&Wt>=3&&(he[Wt]!==he[0]||he[Wt+1]!==he[1])&&mn(he,he[0],he[1],he[2]),he.length&&M.push(he)}function Mt(K){var M=[];return M.size=K.size,M.start=K.start,M.end=K.end,M}function Et(K,M,F,W,X,ae){for(var ue=0;ue<K.length;ue++)Ue(K[ue],M,F,W,X,ae,!1)}function mn(K,M,F,W){K.push(M),K.push(F),K.push(W)}function yo(K,M,F,W,X,ae){var ue=(ae-M)/(W-M);return K.push(ae),K.push(F+(X-F)*ue),K.push(1),ue}function St(K,M,F,W,X,ae){var ue=(ae-F)/(X-F);return K.push(M+(W-M)*ue),K.push(ae),K.push(1),ue}function _o(K,M){for(var F=[],W=0;W<K.length;W++){var X,ae=K[W],ue=ae.type;if(ue==="Point"||ue==="MultiPoint"||ue==="LineString")X=zr(ae.geometry,M);else if(ue==="MultiLineString"||ue==="Polygon"){X=[];for(var le=0;le<ae.geometry.length;le++)X.push(zr(ae.geometry[le],M))}else if(ue==="MultiPolygon")for(X=[],le=0;le<ae.geometry.length;le++){for(var se=[],he=0;he<ae.geometry[le].length;he++)se.push(zr(ae.geometry[le][he],M));X.push(se)}F.push(go(ae.id,ue,X,ae.tags))}return F}function zr(K,M){var F=[];F.size=K.size,K.start!==void 0&&(F.start=K.start,F.end=K.end);for(var W=0;W<K.length;W+=3)F.push(K[W]+M,K[W+1],K[W+2]);return F}function $a(K,M){if(K.transformed)return K;var F,W,X,ae=1<<K.z,ue=K.x,le=K.y;for(F=0;F<K.features.length;F++){var se=K.features[F],he=se.geometry,Ce=se.type;if(se.geometry=[],Ce===1)for(W=0;W<he.length;W+=2)se.geometry.push(Hr(he[W],he[W+1],M,ae,ue,le));else for(W=0;W<he.length;W++){var Fe=[];for(X=0;X<he[W].length;X+=2)Fe.push(Hr(he[W][X],he[W][X+1],M,ae,ue,le));se.geometry.push(Fe)}}return K.transformed=!0,K}function Hr(K,M,F,W,X,ae){return[Math.round(F*(K*W-X)),Math.round(F*(M*W-ae))]}function zn(K,M,F,W,X){for(var ae=M===X.maxZoom?0:X.tolerance/((1<<M)*X.extent),ue={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:F,y:W,z:M,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},le=0;le<K.length;le++){ue.numFeatures++,ir(ue,K[le],ae,X);var se=K[le].minX,he=K[le].minY,Ce=K[le].maxX,Fe=K[le].maxY;se<ue.minX&&(ue.minX=se),he<ue.minY&&(ue.minY=he),Ce>ue.maxX&&(ue.maxX=Ce),Fe>ue.maxY&&(ue.maxY=Fe)}return ue}function ir(K,M,F,W){var X=M.geometry,ae=M.type,ue=[];if(ae==="Point"||ae==="MultiPoint")for(var le=0;le<X.length;le+=3)ue.push(X[le]),ue.push(X[le+1]),K.numPoints++,K.numSimplified++;else if(ae==="LineString")Oa(ue,X,K,F,!1,!1);else if(ae==="MultiLineString"||ae==="Polygon")for(le=0;le<X.length;le++)Oa(ue,X[le],K,F,ae==="Polygon",le===0);else if(ae==="MultiPolygon")for(var se=0;se<X.length;se++){var he=X[se];for(le=0;le<he.length;le++)Oa(ue,he[le],K,F,!0,le===0)}if(ue.length){var Ce=M.tags||null;if(ae==="LineString"&&W.lineMetrics){for(var Fe in Ce={},M.tags)Ce[Fe]=M.tags[Fe];Ce.mapbox_clip_start=X.start/X.size,Ce.mapbox_clip_end=X.end/X.size}var Ee={geometry:ue,type:ae==="Polygon"||ae==="MultiPolygon"?3:ae==="LineString"||ae==="MultiLineString"?2:1,tags:Ce};M.id!==null&&(Ee.id=M.id),K.features.push(Ee)}}function Oa(K,M,F,W,X,ae){var ue=W*W;if(W>0&&M.size<(X?ue:W))F.numPoints+=M.length/3;else{for(var le=[],se=0;se<M.length;se+=3)(W===0||M[se+2]>ue)&&(F.numSimplified++,le.push(M[se]),le.push(M[se+1])),F.numPoints++;X&&function(he,Ce){for(var Fe=0,Ee=0,ot=he.length,at=ot-2;Ee<ot;at=Ee,Ee+=2)Fe+=(he[Ee]-he[at])*(he[Ee+1]+he[at+1]);if(Fe>0===Ce)for(Ee=0,ot=he.length;Ee<ot/2;Ee+=2){var Ke=he[Ee],mt=he[Ee+1];he[Ee]=he[ot-2-Ee],he[Ee+1]=he[ot-1-Ee],he[ot-2-Ee]=Ke,he[ot-1-Ee]=mt}}(le,ae),K.push(le)}}function sn(K,M){var F=(M=this.options=function(X,ae){for(var ue in ae)X[ue]=ae[ue];return X}(Object.create(this.options),M)).debug;if(F&&console.time("preprocess data"),M.maxZoom<0||M.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(M.promoteId&&M.generateId)throw new Error("promoteId and generateId cannot be used together.");var W=function(X,ae){var ue=[];if(X.type==="FeatureCollection")for(var le=0;le<X.features.length;le++)We(ue,X.features[le],ae,le);else We(ue,X.type==="Feature"?X:{geometry:X},ae);return ue}(K,M);this.tiles={},this.tileCoords=[],F&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",M.indexMaxZoom,M.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),W=function(X,ae){var ue=ae.buffer/ae.extent,le=X,se=ii(X,1,-1-ue,ue,0,-1,2,ae),he=ii(X,1,1-ue,2+ue,0,-1,2,ae);return(se||he)&&(le=ii(X,1,-ue,1+ue,0,-1,2,ae)||[],se&&(le=_o(se,1).concat(le)),he&&(le=le.concat(_o(he,-1)))),le}(W,M),W.length&&this.splitTile(W,0,0,0),F&&(W.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function da(K,M,F){return 32*((1<<K)*F+M)+K}function fa(K,M){const F=K.tileID.canonical;if(!this._geoJSONIndex)return M(null,null);const W=this._geoJSONIndex.getTile(F.z,F.x,F.y);if(!W)return M(null,null);const X=new Le(W.features);let ae=ve.exports(X);ae.byteOffset===0&&ae.byteLength===ae.buffer.byteLength||(ae=new Uint8Array(ae)),M(null,{vectorTile:X,rawData:ae.buffer})}sn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},sn.prototype.splitTile=function(K,M,F,W,X,ae,ue){for(var le=[K,M,F,W],se=this.options,he=se.debug;le.length;){W=le.pop(),F=le.pop(),M=le.pop(),K=le.pop();var Ce=1<<M,Fe=da(M,F,W),Ee=this.tiles[Fe];if(!Ee&&(he>1&&console.time("creation"),Ee=this.tiles[Fe]=zn(K,M,F,W,se),this.tileCoords.push({z:M,x:F,y:W}),he)){he>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",M,F,W,Ee.numFeatures,Ee.numPoints,Ee.numSimplified),console.timeEnd("creation"));var ot="z"+M;this.stats[ot]=(this.stats[ot]||0)+1,this.total++}if(Ee.source=K,X){if(M===se.maxZoom||M===X)continue;var at=1<<X-M;if(F!==Math.floor(ae/at)||W!==Math.floor(ue/at))continue}else if(M===se.indexMaxZoom||Ee.numPoints<=se.indexMaxPoints)continue;if(Ee.source=null,K.length!==0){he>1&&console.time("clipping");var Ke,mt,xt,Zt,kt,zt,Wt=.5*se.buffer/se.extent,lr=.5-Wt,ln=.5+Wt,wr=1+Wt;Ke=mt=xt=Zt=null,kt=ii(K,Ce,F-Wt,F+ln,0,Ee.minX,Ee.maxX,se),zt=ii(K,Ce,F+lr,F+wr,0,Ee.minX,Ee.maxX,se),K=null,kt&&(Ke=ii(kt,Ce,W-Wt,W+ln,1,Ee.minY,Ee.maxY,se),mt=ii(kt,Ce,W+lr,W+wr,1,Ee.minY,Ee.maxY,se),kt=null),zt&&(xt=ii(zt,Ce,W-Wt,W+ln,1,Ee.minY,Ee.maxY,se),Zt=ii(zt,Ce,W+lr,W+wr,1,Ee.minY,Ee.maxY,se),zt=null),he>1&&console.timeEnd("clipping"),le.push(Ke||[],M+1,2*F,2*W),le.push(mt||[],M+1,2*F,2*W+1),le.push(xt||[],M+1,2*F+1,2*W),le.push(Zt||[],M+1,2*F+1,2*W+1)}}},sn.prototype.getTile=function(K,M,F){var W=this.options,X=W.extent,ae=W.debug;if(K<0||K>24)return null;var ue=1<<K,le=da(K,M=(M%ue+ue)%ue,F);if(this.tiles[le])return $a(this.tiles[le],X);ae>1&&console.log("drilling down to z%d-%d-%d",K,M,F);for(var se,he=K,Ce=M,Fe=F;!se&&he>0;)he--,Ce=Math.floor(Ce/2),Fe=Math.floor(Fe/2),se=this.tiles[da(he,Ce,Fe)];return se&&se.source?(ae>1&&console.log("found parent tile z%d-%d-%d",he,Ce,Fe),ae>1&&console.time("drilling down"),this.splitTile(se.source,he,Ce,Fe,K,M,F),ae>1&&console.timeEnd("drilling down"),this.tiles[le]?$a(this.tiles[le],X):null):null};class Va extends ee{constructor(M,F,W,X){super(M,F,W,fa),X&&(this.loadGeoJSON=X)}loadData(M,F){var W;(W=this._pendingRequest)===null||W===void 0||W.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const X=!!(M&&M.request&&M.request.collectResourceTiming)&&new l.RequestPerformance(M.request);this._pendingCallback=F,this._pendingRequest=this.loadGeoJSON(M,(ae,ue)=>{if(delete this._pendingCallback,delete this._pendingRequest,ae||!ue)return F(ae);if(typeof ue!="object")return F(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));{Z(ue,!0);try{if(M.filter){const se=l.createExpression(M.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(Ce=>`${Ce.key}: ${Ce.message}`).join(", "));ue={type:"FeatureCollection",features:ue.features.filter(Ce=>se.value.evaluate({zoom:0},Ce))}}this._geoJSONIndex=M.cluster?new ws(function({superclusterOptions:se,clusterProperties:he}){if(!he||!se)return se;const Ce={},Fe={},Ee={accumulated:null,zoom:0},ot={properties:null},at=Object.keys(he);for(const Ke of at){const[mt,xt]=he[Ke],Zt=l.createExpression(xt),kt=l.createExpression(typeof mt=="string"?[mt,["accumulated"],["get",Ke]]:mt);Ce[Ke]=Zt.value,Fe[Ke]=kt.value}return se.map=Ke=>{ot.properties=Ke;const mt={};for(const xt of at)mt[xt]=Ce[xt].evaluate(Ee,ot);return mt},se.reduce=(Ke,mt)=>{ot.properties=mt;for(const xt of at)Ee.accumulated=Ke[xt],Ke[xt]=Fe[xt].evaluate(Ee,ot)},se}(M)).load(ue.features):function(se,he){return new sn(se,he)}(ue,M.geojsonVtOptions)}catch(se){return F(se)}this.loaded={};const le={};if(X){const se=X.finish();se&&(le.resourceTiming={},le.resourceTiming[M.source]=JSON.parse(JSON.stringify(se)))}F(null,le)}})}reloadTile(M,F){const W=this.loaded;return W&&W[M.uid]?super.reloadTile(M,F):this.loadTile(M,F)}loadGeoJSON(M,F){if(M.request)return l.getJSON(M.request,F);if(typeof M.data=="string")try{F(null,JSON.parse(M.data))}catch{F(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`))}else F(new Error(`Input data given to '${M.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(M,F){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),F()}getClusterExpansionZoom(M,F){try{F(null,this._geoJSONIndex.getClusterExpansionZoom(M.clusterId))}catch(W){F(W)}}getClusterChildren(M,F){try{F(null,this._geoJSONIndex.getChildren(M.clusterId))}catch(W){F(W)}}getClusterLeaves(M,F){try{F(null,this._geoJSONIndex.getLeaves(M.clusterId,M.limit,M.offset))}catch(W){F(W)}}}class pa{constructor(M){this.self=M,this.actor=new l.Actor(M,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:ee,geojson:Va},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(F,W)=>{if(this.workerSourceTypes[F])throw new Error(`Worker source with name "${F}" already registered.`);this.workerSourceTypes[F]=W},this.self.registerRTLTextPlugin=F=>{if(l.plugin.isParsed())throw new Error("RTL text plugin already registered.");l.plugin.applyArabicShaping=F.applyArabicShaping,l.plugin.processBidirectionalText=F.processBidirectionalText,l.plugin.processStyledBidirectionalText=F.processStyledBidirectionalText}}setReferrer(M,F){this.referrer=F}setImages(M,F,W){this.availableImages[M]=F;for(const X in this.workerSources[M]){const ae=this.workerSources[M][X];for(const ue in ae)ae[ue].availableImages=F}W()}setLayers(M,F,W){this.getLayerIndex(M).replace(F),W()}updateLayers(M,F,W){this.getLayerIndex(M).update(F.layers,F.removedIds),W()}loadTile(M,F,W){this.getWorkerSource(M,F.type,F.source).loadTile(F,W)}loadDEMTile(M,F,W){this.getDEMWorkerSource(M,F.source).loadTile(F,W)}reloadTile(M,F,W){this.getWorkerSource(M,F.type,F.source).reloadTile(F,W)}abortTile(M,F,W){this.getWorkerSource(M,F.type,F.source).abortTile(F,W)}removeTile(M,F,W){this.getWorkerSource(M,F.type,F.source).removeTile(F,W)}removeDEMTile(M,F){this.getDEMWorkerSource(M,F.source).removeTile(F)}removeSource(M,F,W){if(!this.workerSources[M]||!this.workerSources[M][F.type]||!this.workerSources[M][F.type][F.source])return;const X=this.workerSources[M][F.type][F.source];delete this.workerSources[M][F.type][F.source],X.removeSource!==void 0?X.removeSource(F,W):W()}loadWorkerSource(M,F,W){try{this.self.importScripts(F.url),W()}catch(X){W(X.toString())}}syncRTLPluginState(M,F,W){try{l.plugin.setState(F);const X=l.plugin.getPluginURL();if(l.plugin.isLoaded()&&!l.plugin.isParsed()&&X!=null){this.self.importScripts(X);const ae=l.plugin.isParsed();W(ae?void 0:new Error(`RTL Text Plugin failed to import scripts from ${X}`),ae)}}catch(X){W(X.toString())}}getAvailableImages(M){let F=this.availableImages[M];return F||(F=[]),F}getLayerIndex(M){let F=this.layerIndexes[M];return F||(F=this.layerIndexes[M]=new T),F}getWorkerSource(M,F,W){if(this.workerSources[M]||(this.workerSources[M]={}),this.workerSources[M][F]||(this.workerSources[M][F]={}),!this.workerSources[M][F][W]){const X={send:(ae,ue,le)=>{this.actor.send(ae,ue,le,M)}};this.workerSources[M][F][W]=new this.workerSourceTypes[F](X,this.getLayerIndex(M),this.getAvailableImages(M))}return this.workerSources[M][F][W]}getDEMWorkerSource(M,F){return this.demWorkerSources[M]||(this.demWorkerSources[M]={}),this.demWorkerSources[M][F]||(this.demWorkerSources[M][F]=new me),this.demWorkerSources[M][F]}enforceCacheSizeLimit(M,F){l.enforceCacheSizeLimit(F)}}return l.isWorker()&&(self.worker=new pa(self)),pa}),h(["./shared"],function(l){var b=w;function w(m){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var f,y,v=new Blob([""],{type:"text/javascript"}),S=URL.createObjectURL(v);try{y=new Worker(S),f=!0}catch{f=!1}return y&&y.terminate(),URL.revokeObjectURL(S),f}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var f=document.createElement("canvas");f.width=f.height=1;var y=f.getContext("2d");if(!y)return!1;var v=y.getImageData(0,0,1,1);return v&&v.width===f.width}()?(T[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(T[u]=function(f){var y,v=function(S){var C=document.createElement("canvas"),A=Object.create(w.webGLContextAttributes);return A.failIfMajorPerformanceCaveat=S,C.getContext("webgl",A)||C.getContext("experimental-webgl",A)}(f);if(!v)return!1;try{y=v.createShader(v.VERTEX_SHADER)}catch{return!1}return!(!y||v.isContextLost())&&(v.shaderSource(y,"void main() {}"),v.compileShader(y),v.getShaderParameter(y,v.COMPILE_STATUS)===!0)}(u)),T[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(m)}var T={};function D(m,i){if(Array.isArray(m)){if(!Array.isArray(i)||m.length!==i.length)return!1;for(let u=0;u<m.length;u++)if(!D(m[u],i[u]))return!1;return!0}if(typeof m=="object"&&m!==null&&i!==null){if(typeof i!="object"||Object.keys(m).length!==Object.keys(i).length)return!1;for(const u in m)if(!D(m[u],i[u]))return!1;return!0}return m===i}w.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class P{static testProp(i){if(!P.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in P.docStyle)return i[u];return i[0]}static create(i,u,f){const y=window.document.createElement(i);return u!==void 0&&(y.className=u),f&&f.appendChild(y),y}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){P.docStyle&&P.selectProp&&(P.userSelect=P.docStyle[P.selectProp],P.docStyle[P.selectProp]="none")}static enableDrag(){P.docStyle&&P.selectProp&&(P.docStyle[P.selectProp]=P.userSelect)}static setTransform(i,u){i.style[P.transformProp]=u}static addEventListener(i,u,f,y={}){i.addEventListener(u,f,"passive"in y?y:y.capture)}static removeEventListener(i,u,f,y={}){i.removeEventListener(u,f,"passive"in y?y:y.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",P.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",P.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",P.suppressClickInternal,!0)},0)}static mousePos(i,u){const f=i.getBoundingClientRect();return new l.pointGeometry(u.clientX-f.left-i.clientLeft,u.clientY-f.top-i.clientTop)}static touchPos(i,u){const f=i.getBoundingClientRect(),y=[];for(let v=0;v<u.length;v++)y.push(new l.pointGeometry(u[v].clientX-f.left-i.clientLeft,u[v].clientY-f.top-i.clientTop));return y}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}P.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,P.selectProp=P.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),P.transformProp=P.testProp(["transform","WebkitTransform"]);class ${constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,f){const y=function(v){const S=v.match(q);if(!S)throw new Error(`Unable to parse URL "${v}"`);return{protocol:S[1],authority:S[2],path:S[3]||"/",params:S[4]?S[4].split("&"):[]}}(i);return y.path+=`${u}${f}`,function(v){const S=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${S}`}(y)}setTransformRequest(i){this._transformRequestFn=i}}const q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class ee{constructor(i,u,f,y){this.context=i,this.format=f,this.texture=i.gl.createTexture(),this.update(u,y)}update(i,u,f){const{width:y,height:v}=i,S=!(this.size&&this.size[0]===y&&this.size[1]===v||f),{context:C}=this,{gl:A}=C;if(this.useMipmap=!!(u&&u.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),C.pixelStoreUnpackFlipY.set(!1),C.pixelStoreUnpack.set(1),C.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!u||u.premultiply!==!1)),S)this.size=[y,v],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,i):A.texImage2D(A.TEXTURE_2D,0,this.format,y,v,0,this.format,A.UNSIGNED_BYTE,i.data);else{const{x:z,y:L}=f||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||l.isImageBitmap(i)?A.texSubImage2D(A.TEXTURE_2D,0,z,L,A.RGBA,A.UNSIGNED_BYTE,i):A.texSubImage2D(A.TEXTURE_2D,0,z,L,y,v,A.RGBA,A.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(i,u,f){const{context:y}=this,{gl:v}=y;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),i!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,i),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||i),this.filter=i),u!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,u),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function me(m){const{userImage:i}=m;return!!(i&&i.render&&i.render())&&(m.data.replace(new Uint8Array(i.data.buffer)),!0)}class Z extends l.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new l.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:f}of this.requestors)this._notify(u,f);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let f=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),f=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),f=!1),this._validateContent(u.content,u)||(this.fire(new l.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),f=!1),f}_validateStretch(i,u){if(!i)return!0;let f=0;for(const y of i){if(y[0]<f||y[1]<y[0]||u<y[1])return!1;f=y[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){const f=this.images[i];if(f.data.width!==u.data.width||f.data.height!==u.data.height)throw new Error(`size mismatch between old image (${f.data.width}x${f.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=f.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let f=!0;if(!this.isLoaded())for(const y of i)this.images[y]||(f=!1);this.isLoaded()||f?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const f={};for(const y of i){this.images[y]||this.fire(new l.Event("styleimagemissing",{id:y}));const v=this.images[y];v?f[y]={data:v.data.clone(),pixelRatio:v.pixelRatio,sdf:v.sdf,version:v.version,stretchX:v.stretchX,stretchY:v.stretchY,content:v.content,hasRenderCallback:!!(v.userImage&&v.userImage.render)}:l.warnOnce(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,f)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],f=this.getImage(i);if(!f)return null;if(u&&u.position.version===f.version)return u.position;if(u)u.position.version=f.version;else{const y={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new l.ImagePosition(y,f);this.patterns[i]={bin:y,position:v}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ee(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const v in this.patterns)i.push(this.patterns[v].bin);const{w:u,h:f}=l.potpack(i),y=this.atlasImage;y.resize({width:u||1,height:f||1});for(const v in this.patterns){const{bin:S}=this.patterns[v],C=S.x+1,A=S.y+1,z=this.images[v].data,L=z.width,O=z.height;l.RGBAImage.copy(z,y,{x:0,y:0},{x:C,y:A},{width:L,height:O}),l.RGBAImage.copy(z,y,{x:0,y:O-1},{x:C,y:A-1},{width:L,height:1}),l.RGBAImage.copy(z,y,{x:0,y:0},{x:C,y:A+O},{width:L,height:1}),l.RGBAImage.copy(z,y,{x:L-1,y:0},{x:C-1,y:A},{width:1,height:O}),l.RGBAImage.copy(z,y,{x:0,y:0},{x:C+L,y:A},{width:1,height:O})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const f=this.images[u];f||l.warnOnce(`Image with ID: "${u}" was not found`),me(f)&&this.updateImage(u,f)}}}const j=1e20;function H(m,i,u,f,y,v,S,C,A){for(let z=i;z<i+f;z++)ie(m,u*v+z,v,y,S,C,A);for(let z=u;z<u+y;z++)ie(m,z*v+i,1,f,S,C,A)}function ie(m,i,u,f,y,v,S){v[0]=0,S[0]=-j,S[1]=j,y[0]=m[i];for(let C=1,A=0,z=0;C<f;C++){y[C]=m[i+C*u];const L=C*C;do{const O=v[A];z=(y[C]-y[O]+L-O*O)/(C-O)/2}while(z<=S[A]&&--A>-1);A++,v[A]=C,S[A]=z,S[A+1]=j}for(let C=0,A=0;C<f;C++){for(;S[A+1]<C;)A++;const z=v[A],L=C-z;m[i+C*u]=y[z]+L*L}}class _e{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const f=[];for(const y in i)for(const v of i[y])f.push({stack:y,id:v});l.asyncAll(f,({stack:y,id:v},S)=>{let C=this.entries[y];C||(C=this.entries[y]={glyphs:{},requests:{},ranges:{}});let A=C.glyphs[v];if(A!==void 0)return void S(null,{stack:y,id:v,glyph:A});if(A=this._tinySDF(C,y,v),A)return C.glyphs[v]=A,void S(null,{stack:y,id:v,glyph:A});const z=Math.floor(v/256);if(256*z>65535)return void S(new Error("glyphs > 65535 not supported"));if(C.ranges[z])return void S(null,{stack:y,id:v,glyph:A});let L=C.requests[z];L||(L=C.requests[z]=[],_e.loadGlyphRange(y,z,this.url,this.requestManager,(O,N)=>{if(N){for(const te in N)this._doesCharSupportLocalGlyph(+te)||(C.glyphs[+te]=N[+te]);C.ranges[z]=!0}for(const te of L)te(O,N);delete C.requests[z]})),L.push((O,N)=>{O?S(O):N&&S(null,{stack:y,id:v,glyph:N[v]||null})})},(y,v)=>{if(y)u(y);else if(v){const S={};for(const{stack:C,id:A,glyph:z}of v)(S[C]||(S[C]={}))[A]=z&&{id:z.id,bitmap:z.bitmap.clone(),metrics:z.metrics};u(null,S)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(l.unicodeBlockLookup["CJK Unified Ideographs"](i)||l.unicodeBlockLookup["Hangul Syllables"](i)||l.unicodeBlockLookup.Hiragana(i)||l.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,f){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(f))return;let v=i.tinySDF;if(!v){let C="400";/bold/i.test(u)?C="900":/medium/i.test(u)?C="500":/light/i.test(u)&&(C="200"),v=i.tinySDF=new _e.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:y,fontWeight:C})}const S=v.draw(String.fromCharCode(f));return{id:f,bitmap:new l.AlphaImage({width:S.width||30,height:S.height||30},S.data),metrics:{width:S.glyphWidth||24,height:S.glyphHeight||24,left:S.glyphLeft||0,top:S.glyphTop-27||-8,advance:S.glyphAdvance||24}}}}_e.loadGlyphRange=function(m,i,u,f,y){const v=256*i,S=v+255,C=f.transformRequest(u.replace("{fontstack}",m).replace("{range}",`${v}-${S}`),l.ResourceType.Glyphs);l.getArrayBuffer(C,(A,z)=>{if(A)y(A);else if(z){const L={};for(const O of l.parseGlyphPbf(z))L[O.id]=O;y(null,L)}})},_e.TinySDF=class{constructor({fontSize:m=24,buffer:i=3,radius:u=8,cutoff:f=.25,fontFamily:y="sans-serif",fontWeight:v="normal",fontStyle:S="normal"}={}){this.buffer=i,this.cutoff=f,this.radius=u;const C=this.size=m+4*i,A=this._createCanvas(C),z=this.ctx=A.getContext("2d",{willReadFrequently:!0});z.font=`${S} ${v} ${m}px ${y}`,z.textBaseline="alphabetic",z.textAlign="left",z.fillStyle="black",this.gridOuter=new Float64Array(C*C),this.gridInner=new Float64Array(C*C),this.f=new Float64Array(C),this.z=new Float64Array(C+1),this.v=new Uint16Array(C)}_createCanvas(m){const i=document.createElement("canvas");return i.width=i.height=m,i}draw(m){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:f,actualBoundingBoxLeft:y,actualBoundingBoxRight:v}=this.ctx.measureText(m),S=Math.ceil(u),C=Math.min(this.size-this.buffer,Math.ceil(v-y)),A=Math.min(this.size-this.buffer,S+Math.ceil(f)),z=C+2*this.buffer,L=A+2*this.buffer,O=Math.max(z*L,0),N=new Uint8ClampedArray(O),te={data:N,width:z,height:L,glyphWidth:C,glyphHeight:A,glyphTop:S,glyphLeft:0,glyphAdvance:i};if(C===0||A===0)return te;const{ctx:Y,buffer:J,gridInner:ce,gridOuter:fe}=this;Y.clearRect(J,J,C,A),Y.fillText(m,J,J+S);const xe=Y.getImageData(J,J,C,A);fe.fill(j,0,O),ce.fill(0,0,O);for(let re=0;re<A;re++)for(let Se=0;Se<C;Se++){const be=xe.data[4*(re*C+Se)+3]/255;if(be===0)continue;const ze=(re+J)*z+Se+J;if(be===1)fe[ze]=0,ce[ze]=j;else{const De=.5-be;fe[ze]=De>0?De*De:0,ce[ze]=De<0?De*De:0}}H(fe,0,0,z,L,z,this.f,this.v,this.z),H(ce,J,J,C,A,z,this.f,this.v,this.z);for(let re=0;re<O;re++){const Se=Math.sqrt(fe[re])-Math.sqrt(ce[re]);N[re]=Math.round(255-255*(Se/this.radius+this.cutoff))}return te}};const Le=new l.Properties({anchor:new l.DataConstantProperty(l.spec.light.anchor),position:new class{constructor(){this.specification=l.spec.light.position}possiblyEvaluate(m,i){return l.sphericalToCartesian(m.expression.evaluate(i))}interpolate(m,i,u){return{x:l.number(m.x,i.x,u),y:l.number(m.y,i.y,u),z:l.number(m.z,i.z,u)}}},color:new l.DataConstantProperty(l.spec.light.color),intensity:new l.DataConstantProperty(l.spec.light.intensity)}),ve="-transition";class Pe extends l.Evented{constructor(i){super(),this._transitionable=new l.Transitionable(Le),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(l.validateLight,i,u))for(const f in i){const y=i[f];f.endsWith(ve)?this._transitionable.setTransition(f.slice(0,-ve.length),y):this._transitionable.setValue(f,y)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,f){return(!f||f.validate!==!1)&&l.emitValidationErrors(this,i.call(l.validateStyle,l.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:l.spec})))}}class Ne{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const f=i.join(",")+String(u);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(i,u)),this.dashEntry[f]}getDashRanges(i,u,f){const y=[];let v=i.length%2==1?-i[i.length-1]*f:0,S=i[0]*f,C=!0;y.push({left:v,right:S,isDash:C,zeroLength:i[0]===0});let A=i[0];for(let z=1;z<i.length;z++){C=!C;const L=i[z];v=A*f,A+=L,S=A*f,y.push({left:v,right:S,isDash:C,zeroLength:L===0})}return y}addRoundDash(i,u,f){const y=u/2;for(let v=-f;v<=f;v++){const S=this.width*(this.nextRow+f+v);let C=0,A=i[C];for(let z=0;z<this.width;z++){z/A.right>1&&(A=i[++C]);const L=Math.abs(z-A.left),O=Math.abs(z-A.right),N=Math.min(L,O);let te;const Y=v/f*(y+1);if(A.isDash){const J=y-Math.abs(Y);te=Math.sqrt(N*N+J*J)}else te=y-Math.sqrt(N*N+Y*Y);this.data[S+z]=Math.max(0,Math.min(255,te+128))}}}addRegularDash(i){for(let C=i.length-1;C>=0;--C){const A=i[C],z=i[C+1];A.zeroLength?i.splice(C,1):z&&z.isDash===A.isDash&&(z.left=A.left,i.splice(C,1))}const u=i[0],f=i[i.length-1];u.isDash===f.isDash&&(u.left=f.left-this.width,f.right=u.right+this.width);const y=this.width*this.nextRow;let v=0,S=i[v];for(let C=0;C<this.width;C++){C/S.right>1&&(S=i[++v]);const A=Math.abs(C-S.left),z=Math.abs(C-S.right),L=Math.min(A,z);this.data[y+C]=Math.max(0,Math.min(255,(S.isDash?L:-L)+128))}}addDash(i,u){const f=u?7:0,y=2*f+1;if(this.nextRow+y>this.height)return l.warnOnce("LineAtlas out of space"),null;let v=0;for(let C=0;C<i.length;C++)v+=i[C];if(v!==0){const C=this.width/v,A=this.getDashRanges(i,this.width,C);u?this.addRoundDash(A,C,f):this.addRegularDash(A)}const S={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=y,this.dirty=!0,S}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class $e{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=l.uniqueId();const f=this.workerPool.acquire(this.id);for(let y=0;y<f.length;y++){const v=new $e.Actor(f[y],u,this.id);v.name=`Worker ${y}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,f){l.asyncAll(this.actors,(y,v)=>{y.send(i,u,v)},f=f||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ct(m,i,u){const f=function(y,v){if(y)return u(y);if(v){const S=l.pick(l.extend(v,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);v.vector_layers&&(S.vectorLayers=v.vector_layers,S.vectorLayerIds=S.vectorLayers.map(C=>C.id)),u(null,S)}};return m.url?l.getJSON(i.transformRequest(m.url,l.ResourceType.Source),f):l.exported.frame(()=>f(null,m))}$e.Actor=l.Actor;class qt{constructor(i,u,f){this.bounds=l.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=f||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),f=Math.floor(l.mercatorXfromLng(this.bounds.getWest())*u),y=Math.floor(l.mercatorYfromLat(this.bounds.getNorth())*u),v=Math.ceil(l.mercatorXfromLng(this.bounds.getEast())*u),S=Math.ceil(l.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=f&&i.x<v&&i.y>=y&&i.y<S}}class Er extends l.Evented{constructor(i,u,f,y){if(super(),this.id=i,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,l.extend(this,l.pick(u,["url","scheme","tileSize","promoteId"])),this._options=l.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ct(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new l.ErrorEvent(i)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new qt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(f,l.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function v(S,C){return delete i.request,i.aborted?u(null):S&&S.status!==404?u(S):(C&&C.resourceTiming&&(i.resourceTiming=C.resourceTiming),this.map._refreshExpiredTiles&&C&&i.setExpiryData(C),i.loadVectorData(C,this.map.painter),l.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}y.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",y,v.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",y,v.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class Bt extends l.Evented{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=l.extend({type:"raster"},u),l.extend(this,l.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ct(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new l.ErrorEvent(i)):u&&(l.extend(this,u),u.bounds&&(this.tileBounds=new qt(u.bounds,this.minzoom,this.maxzoom)),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return l.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=l.getImage(this.map._requestManager.transformRequest(f,l.ResourceType.Tile),(y,v,S)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(y)i.state="errored",u(y);else if(v){this.map._refreshExpiredTiles&&i.setExpiryData(S);const C=this.map.painter.context,A=C.gl;i.texture=this.map.painter.getTileTexture(v.width),i.texture?i.texture.update(v,{useMipmap:!0}):(i.texture=new ee(C,v,A.RGBA,{useMipmap:!0}),i.texture.bind(A.LINEAR,A.CLAMP_TO_EDGE,A.LINEAR_MIPMAP_NEAREST),C.extTextureFilterAnisotropic&&A.texParameterf(A.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax)),i.state="loaded",l.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let Ft;class ut extends Bt{constructor(i,u,f,y){super(i,u,f,y),this.type="raster-dem",this.maxzoom=22,this._options=l.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const f=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function y(v,S){v&&(i.state="errored",u(v)),S&&(i.dem=S,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.request=l.getImage(this.map._requestManager.transformRequest(f,l.ResourceType.Tile),function(v,S){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(v)i.state="errored",u(v);else if(S){this.map._refreshExpiredTiles&&i.setExpiryData(S),delete S.cacheControl,delete S.expires;const C=l.isImageBitmap(S)&&(Ft==null&&(Ft=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Ft)?S:l.exported.getImageData(S,1),A={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:C,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",A,y.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,f=Math.pow(2,u.z),y=(u.x-1+f)%f,v=u.x===0?i.wrap-1:i.wrap,S=(u.x+1+f)%f,C=u.x+1===f?i.wrap+1:i.wrap,A={};return A[new l.OverscaledTileID(i.overscaledZ,v,u.z,y,u.y).key]={backfilled:!1},A[new l.OverscaledTileID(i.overscaledZ,C,u.z,S,u.y).key]={backfilled:!1},u.y>0&&(A[new l.OverscaledTileID(i.overscaledZ,v,u.z,y,u.y-1).key]={backfilled:!1},A[new l.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},A[new l.OverscaledTileID(i.overscaledZ,C,u.z,S,u.y-1).key]={backfilled:!1}),u.y+1<f&&(A[new l.OverscaledTileID(i.overscaledZ,v,u.z,y,u.y+1).key]={backfilled:!1},A[new l.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},A[new l.OverscaledTileID(i.overscaledZ,C,u.z,S,u.y+1).key]={backfilled:!1}),A}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class It extends l.Evented{constructor(i,u,f,y){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(y),this._data=u.data,this._options=l.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const v=l.EXTENT/this.tileSize;this.workerOptions=l.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*v,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*v,extent:l.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:l.EXTENT,radius:(u.clusterRadius||50)*v,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,f,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:f},y),this}_updateWorkerData(i){const u=l.extend({},this.workerOptions),f=this._data;typeof f=="string"?(u.request=this.map._requestManager.transformRequest(l.exported.resolveURL(f),l.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(f),this._pendingLoads++,this.fire(new l.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(y,v)=>{if(this._pendingLoads--,this._removed||v&&v.abandoned)return void this.fire(new l.Event("dataabort",{dataType:"source",sourceDataType:i}));let S=null;if(v&&v.resourceTiming&&v.resourceTiming[this.id]&&(S=v.resourceTiming[this.id].slice(0)),y)return void this.fire(new l.ErrorEvent(y));const C={dataType:"source",sourceDataType:i};this._collectResourceTiming&&S&&S.length>0&&l.extend(C,{resourceTiming:S}),this.fire(new l.Event("data",C))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const f=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const y={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(f,y,(v,S)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):v?u(v):(i.loadVectorData(S,this.map.painter,f==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return l.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var tt=l.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class _t extends l.Evented{constructor(i,u,f,y){super(),this.id=i,this.dispatcher=f,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=u}load(i,u){this._loaded=!1,this.fire(new l.Event("dataloading",{dataType:"source"})),this.url=this.options.url,l.getImage(this.map._requestManager.transformRequest(this.url,l.ResourceType.Image),(f,y)=>{this._loaded=!0,f?this.fire(new l.ErrorEvent(f)):y&&(this.image=y,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(l.MercatorCoordinate.fromLngLat);this.tileID=function(y){let v=1/0,S=1/0,C=-1/0,A=-1/0;for(const N of y)v=Math.min(v,N.x),S=Math.min(S,N.y),C=Math.max(C,N.x),A=Math.max(A,N.y);const z=Math.max(C-v,A-S),L=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),O=Math.pow(2,L);return new l.CanonicalTileID(L,Math.floor((v+C)/2*O),Math.floor((S+A)/2*O))}(u),this.minzoom=this.maxzoom=this.tileID.z;const f=u.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new l.RasterBoundsArray,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,l.EXTENT,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,l.EXTENT),this._boundsArray.emplaceBack(f[2].x,f[2].y,l.EXTENT,l.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new l.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,tt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ee(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class wt extends _t{constructor(i,u,f,y){super(i,u,f,y),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,l.ResourceType.Source).url);l.getVideo(this.urls,(u,f)=>{this._loaded=!0,u?this.fire(new l.ErrorEvent(u)):f&&(this.video=f,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,tt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new ee(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const f in this.tiles){const y=this.tiles[f];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Tt extends _t{constructor(i,u,f,y){super(i,u,f,y),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(S=>typeof S!="number"))||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new l.ErrorEvent(new l.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new l.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,f=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,tt.members)),this.boundsSegments||(this.boundsSegments=l.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ee(u,this.canvas,f.RGBA,{premultiply:!0});for(const y in this.tiles){const v=this.tiles[y];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const nr={vector:Er,raster:Bt,"raster-dem":ut,geojson:It,video:wt,image:_t,canvas:Tt};function $t(m,i){const u=l.create();return l.translate(u,u,[1,1,0]),l.scale(u,u,[.5*m.width,.5*m.height,1]),l.multiply(u,u,m.calculatePosMatrix(i.toUnwrapped()))}function an(m,i,u,f,y,v){const S=function(O,N,te){if(O)for(const Y of O){const J=N[Y];if(J&&J.source===te&&J.type==="fill-extrusion")return!0}else for(const Y in N){const J=N[Y];if(J.source===te&&J.type==="fill-extrusion")return!0}return!1}(y&&y.layers,i,m.id),C=v.maxPitchScaleFactor(),A=m.tilesIn(f,C,S);A.sort(fn);const z=[];for(const O of A)z.push({wrappedTileID:O.tileID.wrapped().key,queryResults:O.tile.queryRenderedFeatures(i,u,m._state,O.queryGeometry,O.cameraQueryGeometry,O.scale,y,v,C,$t(m.transform,O.tileID))});const L=function(O){const N={},te={};for(const Y of O){const J=Y.queryResults,ce=Y.wrappedTileID,fe=te[ce]=te[ce]||{};for(const xe in J){const re=J[xe],Se=fe[xe]=fe[xe]||{},be=N[xe]=N[xe]||[];for(const ze of re)Se[ze.featureIndex]||(Se[ze.featureIndex]=!0,be.push(ze))}}return N}(z);for(const O in L)L[O].forEach(N=>{const te=N.feature,Y=m.getFeatureState(te.layer["source-layer"],te.id);te.source=te.layer.source,te.layer["source-layer"]&&(te.sourceLayer=te.layer["source-layer"]),te.state=Y});return L}function fn(m,i){const u=m.tileID,f=i.tileID;return u.overscaledZ-f.overscaledZ||u.canonical.y-f.canonical.y||u.wrap-f.wrap||u.canonical.x-f.canonical.x}class br{constructor(i,u){this.tileID=i,this.uid=l.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<l.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.textures.forEach(u=>i.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(i,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(y,v){const S={};if(!v)return S;for(const C of y){const A=C.layerIds.map(z=>v.getLayer(z)).filter(Boolean);if(A.length!==0){C.layers=A,C.stateDependentLayerIds&&(C.stateDependentLayers=C.stateDependentLayerIds.map(z=>A.filter(L=>L.id===z)[0]));for(const z of A)S[z.id]=C}}return S}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const v=this.buckets[y];if(v instanceof l.SymbolBucket){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const v=this.buckets[y];if(v instanceof l.SymbolBucket&&v.hasRTLText){this.hasRTLText=!0,l.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const y in this.buckets){const v=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(y).queryRadius(v))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new l.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const f in this.buckets){const y=this.buckets[f];y.uploadPending()&&y.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ee(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ee(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,f,y,v,S,C,A,z,L){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:v,scale:S,tileSize:this.tileSize,pixelPosMatrix:L,transform:A,params:C,queryPadding:this.queryPadding*z},i,u,f):{}}querySourceFeatures(i,u){const f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;const y=f.loadVTLayers(),v=u?u.sourceLayer:"",S=y._geojsonTileLayer||y[v];if(!S)return;const C=l.createFilter(u&&u.filter),{z:A,x:z,y:L}=this.tileID.canonical,O={z:A,x:z,y:L};for(let N=0;N<S.length;N++){const te=S.feature(N);if(C.needGeometry){const ce=l.toEvaluationFeature(te,!0);if(!C.filter(new l.EvaluationParameters(this.tileID.overscaledZ),ce,this.tileID.canonical))continue}else if(!C.filter(new l.EvaluationParameters(this.tileID.overscaledZ),te))continue;const Y=f.getId(te,v),J=new l.GeoJSONFeature(te,A,z,L,Y);J.tile=O,i.push(J)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const f=l.parseCacheControl(i.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const f=Date.now();let y=!1;if(this.expirationTime>f)y=!1;else if(u)if(this.expirationTime<u)y=!0;else{const v=this.expirationTime-u;v?this.expirationTime=f+Math.max(v,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const f=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!u.style.hasLayer(y))continue;const v=this.buckets[y],S=v.layers[0].sourceLayer||"_geojsonTileLayer",C=f[S],A=i[S];if(!C||!A||Object.keys(A).length===0)continue;v.update(A,C,this.imageAtlas&&this.imageAtlas.patternPositions||{});const z=u&&u.style&&u.style.getLayer(y);z&&(this.queryPadding=Math.max(this.queryPadding,z.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<l.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=l.exported.now()+i}setDependencies(i,u){const f={};for(const y of u)f[y]=!0;this.dependencies[i]=f}hasDependency(i,u){for(const f of i){const y=this.dependencies[f];if(y){for(const v of u)if(y[v])return!0}}return!1}}class pn{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,f){const y=i.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const v={value:u,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(i,v)},f)),this.data[y].push(v),this.order.push(y),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const f=i.wrapped().key,y=u===void 0?0:this.data[f].indexOf(u),v=this.data[f][y];return this.data[f].splice(y,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const f in this.data)for(const y of this.data[f])i(y.value)||u.push(y);for(const f of u)this.remove(f.value.tileID,f)}}class Fn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,f){const y=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][y]=this.stateChanges[i][y]||{},l.extend(this.stateChanges[i][y],f),this.deletedStates[i]===null){this.deletedStates[i]={};for(const v in this.state[i])v!==y&&(this.deletedStates[i][v]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][y]===null){this.deletedStates[i][y]={};for(const v in this.state[i][y])f[v]||(this.deletedStates[i][y][v]=null)}else for(const v in f)this.deletedStates[i]&&this.deletedStates[i][y]&&this.deletedStates[i][y][v]===null&&delete this.deletedStates[i][y][v]}removeFeatureState(i,u,f){if(this.deletedStates[i]===null)return;const y=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},f&&u!==void 0)this.deletedStates[i][y]!==null&&(this.deletedStates[i][y]=this.deletedStates[i][y]||{},this.deletedStates[i][y][f]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][y])for(f in this.deletedStates[i][y]={},this.stateChanges[i][y])this.deletedStates[i][y][f]=null;else this.deletedStates[i][y]=null;else this.deletedStates[i]=null}getState(i,u){const f=String(u),y=l.extend({},(this.state[i]||{})[f],(this.stateChanges[i]||{})[f]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const v=this.deletedStates[i][u];if(v===null)return{};for(const S in v)delete y[S]}return y}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const f={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const v={};for(const S in this.stateChanges[y])this.state[y][S]||(this.state[y][S]={}),l.extend(this.state[y][S],this.stateChanges[y][S]),v[S]=this.state[y][S];f[y]=v}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const v={};if(this.deletedStates[y]===null)for(const S in this.state[y])v[S]={},this.state[y][S]={};else for(const S in this.deletedStates[y]){if(this.deletedStates[y][S]===null)this.state[y][S]={};else for(const C of Object.keys(this.deletedStates[y][S]))delete this.state[y][S][C];v[S]=this.state[y][S]}f[y]=f[y]||{},l.extend(f[y],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(const y in i)i[y].setFeatureState(f,u)}}class Qr extends l.Evented{constructor(i,u,f){super(),this.id=i,this.dispatcher=f,this.on("data",y=>{y.dataType==="source"&&y.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&y.dataType==="source"&&y.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(y,v,S,C){const A=new nr[v.type](y,v,S,C);if(A.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${A.id}`);return l.bindAll(["load","abort","unload","serialize","prepare"],A),A}(i,u,f,this),this._tiles={},this._cache=new pn(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Fn}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new l.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const f=this._tiles[u];f.upload(i),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(Jn).map(i=>i.key)}getRenderableIds(i){const u=[];for(const f in this._tiles)this._isIdRenderable(f,i)&&u.push(this._tiles[f]);return i?u.sort((f,y)=>{const v=f.tileID,S=y.tileID,C=new l.pointGeometry(v.canonical.x,v.canonical.y)._rotate(this.transform.angle),A=new l.pointGeometry(S.canonical.x,S.canonical.y)._rotate(this.transform.angle);return v.overscaledZ-S.overscaledZ||A.y-C.y||A.x-C.x}).map(f=>f.tileID.key):u.map(f=>f.tileID).sort(Jn).map(f=>f.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const f=this._tiles[i];f&&(f.state!=="loading"&&(f.state=u),this._loadTile(f,this._tileLoaded.bind(this,f,i,u)))}_tileLoaded(i,u,f,y){if(y)return i.state="errored",void(y.status!==404?this._source.fire(new l.ErrorEvent(y,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=l.exported.now(),f==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new l.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let y=0;y<u.length;y++){const v=u[y];if(i.neighboringTiles&&i.neighboringTiles[v]){const S=this.getTileByID(v);f(i,S),f(S,i)}}function f(y,v){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let S=v.tileID.canonical.x-y.tileID.canonical.x;const C=v.tileID.canonical.y-y.tileID.canonical.y,A=Math.pow(2,y.tileID.canonical.z),z=v.tileID.key;S===0&&C===0||Math.abs(C)>1||(Math.abs(S)>1&&(Math.abs(S+A)===1?S+=A:Math.abs(S-A)===1&&(S-=A)),v.dem&&y.dem&&(y.dem.backfillBorder(v.dem,S,C),y.neighboringTiles&&y.neighboringTiles[z]&&(y.neighboringTiles[z].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,f,y){for(const v in this._tiles){let S=this._tiles[v];if(y[v]||!S.hasData()||S.tileID.overscaledZ<=u||S.tileID.overscaledZ>f)continue;let C=S.tileID;for(;S&&S.tileID.overscaledZ>u+1;){const z=S.tileID.scaledTo(S.tileID.overscaledZ-1);S=this._tiles[z.key],S&&S.hasData()&&(C=z)}let A=C;for(;A.overscaledZ>u;)if(A=A.scaledTo(A.overscaledZ-1),i[A.key]){y[C.key]=C;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const f=this._loadedParentTiles[i.key];return f&&f.tileID.overscaledZ>=u?f:null}for(let f=i.overscaledZ-1;f>=u;f--){const y=i.scaledTo(f),v=this._getLoadedTile(y);if(v)return v}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,f=Math.ceil(i.height/this._source.tileSize)+1,y=Math.floor(u*f*5),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(v)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const f={};for(const y in this._tiles){const v=this._tiles[y];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+u),f[v.tileID.key]=v}this._tiles=f;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let f;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(z=>new l.OverscaledTileID(z.canonical.z,z.wrap,z.canonical.z,z.canonical.x,z.canonical.y)):(f=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(f=f.filter(z=>this._source.hasTile(z)))):f=[];const y=i.coveringZoomLevel(this._source),v=Math.max(y-Qr.maxOverzooming,this._source.minzoom),S=Math.max(y+Qr.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const z={};for(const L of f)if(L.canonical.z>this._source.minzoom){const O=L.scaledTo(L.canonical.z-1);z[O.key]=O;const N=L.scaledTo(Math.max(this._source.minzoom,Math.min(L.canonical.z,5)));z[N.key]=N}f=f.concat(Object.values(z))}const C=this._updateRetainedTiles(f,y);if($n(this._source.type)){const z={},L={},O=Object.keys(C);for(const N of O){const te=C[N],Y=this._tiles[N];if(!Y||Y.fadeEndTime&&Y.fadeEndTime<=l.exported.now())continue;const J=this.findLoadedParent(te,v);J&&(this._addTile(J.tileID),z[J.tileID.key]=J.tileID),L[N]=te}this._retainLoadedChildren(L,y,S,C);for(const N in z)C[N]||(this._coveredTiles[N]=!0,C[N]=z[N]);if(u){const N={},te={};for(const Y of f)this._tiles[Y.key].hasData()?N[Y.key]=Y:te[Y.key]=Y;for(const Y in te){const J=te[Y].children(this._source.maxzoom);this._tiles[J[0].key]&&this._tiles[J[1].key]&&this._tiles[J[2].key]&&this._tiles[J[3].key]&&(N[J[0].key]=C[J[0].key]=J[0],N[J[1].key]=C[J[1].key]=J[1],N[J[2].key]=C[J[2].key]=J[2],N[J[3].key]=C[J[3].key]=J[3],delete te[Y])}for(const Y in te){const J=this.findLoadedParent(te[Y],this._source.minzoom);if(J){N[J.tileID.key]=C[J.tileID.key]=J.tileID;for(const ce in N)N[ce].isChildOf(J.tileID)&&delete N[ce]}}for(const Y in this._tiles)N[Y]||(this._coveredTiles[Y]=!0)}}for(const z in C)this._tiles[z].clearFadeHold();const A=l.keysDifference(this._tiles,C);for(const z of A){const L=this._tiles[z];L.hasSymbolBuckets&&!L.holdingForFade()?L.setHoldDuration(this.map._fadeDuration):L.hasSymbolBuckets&&!L.symbolFadeFinished()||this._removeTile(z)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const f={},y={},v=Math.max(u-Qr.maxOverzooming,this._source.minzoom),S=Math.max(u+Qr.maxUnderzooming,this._source.minzoom),C={};for(const A of i){const z=this._addTile(A);f[A.key]=A,z.hasData()||u<this._source.maxzoom&&(C[A.key]=A)}this._retainLoadedChildren(C,u,S,f);for(const A of i){let z=this._tiles[A.key];if(z.hasData())continue;if(u+1>this._source.maxzoom){const O=A.children(this._source.maxzoom)[0],N=this.getTile(O);if(N&&N.hasData()){f[O.key]=O;continue}}else{const O=A.children(this._source.maxzoom);if(f[O[0].key]&&f[O[1].key]&&f[O[2].key]&&f[O[3].key])continue}let L=z.wasRequested();for(let O=A.overscaledZ-1;O>=v;--O){const N=A.scaledTo(O);if(y[N.key]||(y[N.key]=!0,z=this.getTile(N),!z&&L&&(z=this._addTile(N)),z&&(f[N.key]=N,L=z.wasRequested(),z.hasData())))break}}return f}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let f,y=this._tiles[i].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){f=this._loadedParentTiles[y.key];break}u.push(y.key);const v=y.scaledTo(y.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;y=v}for(const v of u)this._loadedParentTiles[v]=f}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const f=u;return u||(u=new br(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,f||this._source.fire(new l.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const f=u.getExpiryTimeout();f&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},f))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,f){const y=[],v=this.transform;if(!v)return y;const S=f?v.getCameraQueryGeometry(i):i,C=i.map(Y=>v.pointCoordinate(Y,this.terrain)),A=S.map(Y=>v.pointCoordinate(Y,this.terrain)),z=this.getIds();let L=1/0,O=1/0,N=-1/0,te=-1/0;for(const Y of A)L=Math.min(L,Y.x),O=Math.min(O,Y.y),N=Math.max(N,Y.x),te=Math.max(te,Y.y);for(let Y=0;Y<z.length;Y++){const J=this._tiles[z[Y]];if(J.holdingForFade())continue;const ce=J.tileID,fe=Math.pow(2,v.zoom-J.tileID.overscaledZ),xe=u*J.queryPadding*l.EXTENT/J.tileSize/fe,re=[ce.getTilePoint(new l.MercatorCoordinate(L,O)),ce.getTilePoint(new l.MercatorCoordinate(N,te))];if(re[0].x-xe<l.EXTENT&&re[0].y-xe<l.EXTENT&&re[1].x+xe>=0&&re[1].y+xe>=0){const Se=C.map(ze=>ce.getTilePoint(ze)),be=A.map(ze=>ce.getTilePoint(ze));y.push({tile:J,tileID:ce,queryGeometry:Se,cameraQueryGeometry:be,scale:fe})}}return y}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(f=>this._tiles[f].tileID);for(const f of u)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if($n(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=l.exported.now())return!0}return!1}setFeatureState(i,u,f){this._state.updateState(i=i||"_geojsonTileLayer",u,f)}removeFeatureState(i,u,f){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,f)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,f){const y=this._tiles[i];y&&y.setDependencies(u,f)}reloadTilesForDependencies(i,u){for(const f in this._tiles)this._tiles[f].hasDependency(i,u)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(i,u))}}function Jn(m,i){const u=Math.abs(2*m.wrap)-+(m.wrap<0),f=Math.abs(2*i.wrap)-+(i.wrap<0);return m.overscaledZ-i.overscaledZ||f-u||i.canonical.y-m.canonical.y||i.canonical.x-m.canonical.x}function $n(m){return m==="raster"||m==="image"||m==="video"}Qr.maxOverzooming=10,Qr.maxUnderzooming=3;const Qn="mapboxgl_preloaded_worker_pool";class bn{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<bn.workerCount;)this.workers.push(new Worker(Fs.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Qn]}numActive(){return Object.keys(this.active).length}}const ws=Math.floor(l.exported.hardwareConcurrency/2);let Zo;function La(){return Zo||(Zo=new bn),Zo}function Ba(m,i){const u={};for(const f in m)f!=="ref"&&(u[f]=m[f]);return l.refProperties.forEach(f=>{f in i&&(u[f]=i[f])}),u}function Ss(m){m=m.slice();const i=Object.create(null);for(let u=0;u<m.length;u++)i[m[u].id]=m[u];for(let u=0;u<m.length;u++)"ref"in m[u]&&(m[u]=Ba(m[u],i[m[u].ref]));return m}bn.workerCount=Math.max(Math.min(ws,6),1);const Gt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function ei(m,i,u){u.push({command:Gt.addSource,args:[m,i[m]]})}function Ki(m,i,u){i.push({command:Gt.removeSource,args:[m]}),u[m]=!0}function Ii(m,i,u,f){Ki(m,u,f),ei(m,i,u)}function ti(m,i,u){let f;for(f in m[u])if(Object.prototype.hasOwnProperty.call(m[u],f)&&f!=="data"&&!D(m[u][f],i[u][f]))return!1;for(f in i[u])if(Object.prototype.hasOwnProperty.call(i[u],f)&&f!=="data"&&!D(m[u][f],i[u][f]))return!1;return!0}function Yi(m,i,u,f,y,v){let S;for(S in i=i||{},m=m||{})Object.prototype.hasOwnProperty.call(m,S)&&(D(m[S],i[S])||u.push({command:v,args:[f,S,i[S],y]}));for(S in i)Object.prototype.hasOwnProperty.call(i,S)&&!Object.prototype.hasOwnProperty.call(m,S)&&(D(m[S],i[S])||u.push({command:v,args:[f,S,i[S],y]}))}function Ji(m){return m.id}function Fa(m,i){return m[i.id]=i,m}class go{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=l.clamp(i,0,1);let u=1,f=this._distances[u];const y=i*this.paddedLength+this.padding;for(;f<y&&u<this._distances.length;)f=this._distances[++u];const v=u-1,S=this._distances[v],C=f-S,A=C>0?(y-S)/C:0;return this.points[v].mult(1-A).add(this.points[u].mult(A))}}function Ie(m,i){let u=!0;return m==="always"||m!=="never"&&i!=="never"||(u=!1),u}class We{constructor(i,u,f){const y=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(i/f),this.yCellCount=Math.ceil(u/f);for(let S=0;S<this.xCellCount*this.yCellCount;S++)y.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,f,y,v){this._forEachCell(u,f,y,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(v)}insertCircle(i,u,f,y){this._forEachCell(u-y,f-y,u+y,f+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(f),this.circles.push(y)}_insertBoxCell(i,u,f,y,v,S){this.boxCells[v].push(S)}_insertCircleCell(i,u,f,y,v,S){this.circleCells[v].push(S)}_query(i,u,f,y,v,S,C){if(f<0||i>this.width||y<0||u>this.height)return[];const A=[];if(i<=0&&u<=0&&this.width<=f&&this.height<=y){if(v)return[{key:null,x1:i,y1:u,x2:f,y2:y}];for(let z=0;z<this.boxKeys.length;z++)A.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const L=this.circles[3*z],O=this.circles[3*z+1],N=this.circles[3*z+2];A.push({key:this.circleKeys[z],x1:L-N,y1:O-N,x2:L+N,y2:O+N})}}else this._forEachCell(i,u,f,y,this._queryCell,A,{hitTest:v,overlapMode:S,seenUids:{box:{},circle:{}}},C);return A}query(i,u,f,y){return this._query(i,u,f,y,!1,null)}hitTest(i,u,f,y,v,S){return this._query(i,u,f,y,!0,v,S).length>0}hitTestCircle(i,u,f,y,v){const S=i-f,C=i+f,A=u-f,z=u+f;if(C<0||S>this.width||z<0||A>this.height)return!1;const L=[];return this._forEachCell(S,A,C,z,this._queryCellCircle,L,{hitTest:!0,overlapMode:y,circle:{x:i,y:u,radius:f},seenUids:{box:{},circle:{}}},v),L.length>0}_queryCell(i,u,f,y,v,S,C,A){const{seenUids:z,hitTest:L,overlapMode:O}=C,N=this.boxCells[v];if(N!==null){const Y=this.bboxes;for(const J of N)if(!z.box[J]){z.box[J]=!0;const ce=4*J,fe=this.boxKeys[J];if(i<=Y[ce+2]&&u<=Y[ce+3]&&f>=Y[ce+0]&&y>=Y[ce+1]&&(!A||A(fe))&&(!L||!Ie(O,fe.overlapMode))&&(S.push({key:fe,x1:Y[ce],y1:Y[ce+1],x2:Y[ce+2],y2:Y[ce+3]}),L))return!0}}const te=this.circleCells[v];if(te!==null){const Y=this.circles;for(const J of te)if(!z.circle[J]){z.circle[J]=!0;const ce=3*J,fe=this.circleKeys[J];if(this._circleAndRectCollide(Y[ce],Y[ce+1],Y[ce+2],i,u,f,y)&&(!A||A(fe))&&(!L||!Ie(O,fe.overlapMode))){const xe=Y[ce],re=Y[ce+1],Se=Y[ce+2];if(S.push({key:fe,x1:xe-Se,y1:re-Se,x2:xe+Se,y2:re+Se}),L)return!0}}}return!1}_queryCellCircle(i,u,f,y,v,S,C,A){const{circle:z,seenUids:L,overlapMode:O}=C,N=this.boxCells[v];if(N!==null){const Y=this.bboxes;for(const J of N)if(!L.box[J]){L.box[J]=!0;const ce=4*J,fe=this.boxKeys[J];if(this._circleAndRectCollide(z.x,z.y,z.radius,Y[ce+0],Y[ce+1],Y[ce+2],Y[ce+3])&&(!A||A(fe))&&!Ie(O,fe.overlapMode))return S.push(!0),!0}}const te=this.circleCells[v];if(te!==null){const Y=this.circles;for(const J of te)if(!L.circle[J]){L.circle[J]=!0;const ce=3*J,fe=this.circleKeys[J];if(this._circlesCollide(Y[ce],Y[ce+1],Y[ce+2],z.x,z.y,z.radius)&&(!A||A(fe))&&!Ie(O,fe.overlapMode))return S.push(!0),!0}}}_forEachCell(i,u,f,y,v,S,C,A){const z=this._convertToXCellCoord(i),L=this._convertToYCellCoord(u),O=this._convertToXCellCoord(f),N=this._convertToYCellCoord(y);for(let te=z;te<=O;te++)for(let Y=L;Y<=N;Y++)if(v.call(this,i,u,f,y,this.xCellCount*Y+te,S,C,A))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,f,y,v,S){const C=y-i,A=v-u,z=f+S;return z*z>C*C+A*A}_circleAndRectCollide(i,u,f,y,v,S,C){const A=(S-y)/2,z=Math.abs(i-(y+A));if(z>A+f)return!1;const L=(C-v)/2,O=Math.abs(u-(v+L));if(O>L+f)return!1;if(z<=A||O<=L)return!0;const N=z-A,te=O-L;return N*N+te*te<=f*f}}function Wo(m,i,u,f,y){const v=l.create();return i?(l.scale(v,v,[1/y,1/y,1]),u||l.rotateZ(v,v,f.angle)):l.multiply(v,f.labelPlaneMatrix,m),v}function vi(m,i,u,f,y){if(i){const v=l.clone(m);return l.scale(v,v,[y,y,1]),u||l.rotateZ(v,v,-f.angle),v}return f.glCoordMatrix}function Nt(m,i,u){let f;u?(f=[m.x,m.y,u(m.x,m.y),1],l.transformMat4(f,f,i)):(f=[m.x,m.y,0,1],_o(f,f,i));const y=f[3];return{point:new l.pointGeometry(f[0]/y,f[1]/y),signedDistanceFromCamera:y}}function ri(m,i){return .5+m/i*.5}function ni(m,i){const u=m[0]/m[3],f=m[1]/m[3];return u>=-i[0]&&u<=i[0]&&f>=-i[1]&&f<=i[1]}function ii(m,i,u,f,y,v,S,C,A,z){const L=f?m.textSizeData:m.iconSizeData,O=l.evaluateSizeForZoom(L,u.transform.zoom),N=[256/u.width*2+1,256/u.height*2+1],te=f?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;te.clear();const Y=m.lineVertexArray,J=f?m.text.placedSymbolArray:m.icon.placedSymbolArray,ce=u.transform.width/u.transform.height;let fe=!1;for(let xe=0;xe<J.length;xe++){const re=J.get(xe);if(re.hidden||re.writingMode===l.WritingMode.vertical&&!fe){St(re.numGlyphs,te);continue}let Se;if(fe=!1,z?(Se=[re.anchorX,re.anchorY,z(re.anchorX,re.anchorY),1],l.transformMat4(Se,Se,i)):(Se=[re.anchorX,re.anchorY,0,1],_o(Se,Se,i)),!ni(Se,N)){St(re.numGlyphs,te);continue}const be=ri(u.transform.cameraToCenterDistance,Se[3]),ze=l.evaluateSizeForFeature(L,O,re),De=S?ze/be:ze*be,Oe=new l.pointGeometry(re.anchorX,re.anchorY),Ae=Nt(Oe,y,z).point,et={},He=Mt(re,De,!1,C,i,y,v,m.glyphOffsetArray,Y,te,Ae,Oe,et,ce,A,z);fe=He.useVertical,(He.notEnoughRoom||fe||He.needsFlipping&&Mt(re,De,!0,C,i,y,v,m.glyphOffsetArray,Y,te,Ae,Oe,et,ce,A,z).notEnoughRoom)&&St(re.numGlyphs,te)}f?m.text.dynamicLayoutVertexBuffer.updateData(te):m.icon.dynamicLayoutVertexBuffer.updateData(te)}function On(m,i,u,f,y,v,S,C,A,z,L,O,N){const te=C.glyphStartIndex+C.numGlyphs,Y=C.lineStartIndex,J=C.lineStartIndex+C.lineLength,ce=i.getoffsetX(C.glyphStartIndex),fe=i.getoffsetX(te-1),xe=mn(m*ce,u,f,y,v,S,C.segment,Y,J,A,z,L,O,N);if(!xe)return null;const re=mn(m*fe,u,f,y,v,S,C.segment,Y,J,A,z,L,O,N);return re?{first:xe,last:re}:null}function Ue(m,i,u,f){return m===l.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*f?{useVertical:!0}:(m===l.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Mt(m,i,u,f,y,v,S,C,A,z,L,O,N,te,Y,J){const ce=i/24,fe=m.lineOffsetX*ce,xe=m.lineOffsetY*ce;let re;if(m.numGlyphs>1){const Se=m.glyphStartIndex+m.numGlyphs,be=m.lineStartIndex,ze=m.lineStartIndex+m.lineLength,De=On(ce,C,fe,xe,u,L,O,m,A,v,N,Y,J);if(!De)return{notEnoughRoom:!0};const Oe=Nt(De.first.point,S,J).point,Ae=Nt(De.last.point,S,J).point;if(f&&!u){const et=Ue(m.writingMode,Oe,Ae,te);if(et)return et}re=[De.first];for(let et=m.glyphStartIndex+1;et<Se-1;et++)re.push(mn(ce*C.getoffsetX(et),fe,xe,u,L,O,m.segment,be,ze,A,v,N,Y,J));re.push(De.last)}else{if(f&&!u){const be=Nt(O,y,J).point,ze=m.lineStartIndex+m.segment+1,De=new l.pointGeometry(A.getx(ze),A.gety(ze)),Oe=Nt(De,y,J),Ae=Oe.signedDistanceFromCamera>0?Oe.point:Et(O,De,be,1,y,J),et=Ue(m.writingMode,be,Ae,te);if(et)return et}const Se=mn(ce*C.getoffsetX(m.glyphStartIndex),fe,xe,u,L,O,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,A,v,N,Y,J);if(!Se)return{notEnoughRoom:!0};re=[Se]}for(const Se of re)l.addDynamicAttributes(z,Se.point,Se.angle);return{}}function Et(m,i,u,f,y,v){const S=Nt(m.add(m.sub(i)._unit()),y,v).point,C=u.sub(S);return u.add(C._mult(f/C.mag()))}function mn(m,i,u,f,y,v,S,C,A,z,L,O,N,te){const Y=f?m-i:m+i;let J=Y>0?1:-1,ce=0;f&&(J*=-1,ce=Math.PI),J<0&&(ce+=Math.PI);let fe=J>0?C+S:C+S+1,xe=y,re=y,Se=0,be=0;const ze=Math.abs(Y),De=[];for(;Se+be<=ze;){if(fe+=J,fe<C||fe>=A)return null;if(re=xe,De.push(xe),xe=O[fe],xe===void 0){const rt=new l.pointGeometry(z.getx(fe),z.gety(fe)),At=Nt(rt,L,te);if(At.signedDistanceFromCamera>0)xe=O[fe]=At.point;else{const Dt=fe-J;xe=Et(Se===0?v:new l.pointGeometry(z.getx(Dt),z.gety(Dt)),rt,re,ze-Se+1,L,te)}}Se+=be,be=re.dist(xe)}const Oe=(ze-Se)/be,Ae=xe.sub(re),et=Ae.mult(Oe)._add(re);et._add(Ae._unit()._perp()._mult(u*J));const He=ce+Math.atan2(xe.y-re.y,xe.x-re.x);return De.push(et),{point:et,angle:N?He:0,path:De}}const yo=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function St(m,i){for(let u=0;u<m;u++){const f=i.length;i.resize(f+4),i.float32.set(yo,3*f)}}function _o(m,i,u){const f=i[0],y=i[1];return m[0]=u[0]*f+u[4]*y+u[12],m[1]=u[1]*f+u[5]*y+u[13],m[3]=u[3]*f+u[7]*y+u[15],m}const zr=100;class $a{constructor(i,u=new We(i.width+200,i.height+200,25),f=new We(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=f,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+zr,this.screenBottomBoundary=i.height+zr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,f,y,v,S){const C=this.projectAndGetPerspectiveRatio(y,i.anchorPointX,i.anchorPointY,S),A=f*C.perspectiveRatio,z=i.x1*A+C.point.x,L=i.y1*A+C.point.y,O=i.x2*A+C.point.x,N=i.y2*A+C.point.y;return!this.isInsideGrid(z,L,O,N)||u!=="always"&&this.grid.hitTest(z,L,O,N,u,v)||C.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[z,L,O,N],offscreen:this.isOffscreen(z,L,O,N)}}placeCollisionCircles(i,u,f,y,v,S,C,A,z,L,O,N,te,Y){const J=[],ce=new l.pointGeometry(u.anchorX,u.anchorY),fe=Nt(ce,S,Y),xe=ri(this.transform.cameraToCenterDistance,fe.signedDistanceFromCamera),re=(L?v/xe:v*xe)/l.ONE_EM,Se=Nt(ce,C,Y).point,be=On(re,y,u.lineOffsetX*re,u.lineOffsetY*re,!1,Se,ce,u,f,C,{},!1,Y);let ze=!1,De=!1,Oe=!0;if(be){const Ae=.5*N*xe+te,et=new l.pointGeometry(-100,-100),He=new l.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),rt=new go,At=be.first,Dt=be.last;let gt=[];for(let Xt=At.path.length-1;Xt>=1;Xt--)gt.push(At.path[Xt]);for(let Xt=1;Xt<Dt.path.length;Xt++)gt.push(Dt.path[Xt]);const ur=2.5*Ae;if(A){const Xt=gt.map(Jt=>Nt(Jt,A,Y));gt=Xt.some(Jt=>Jt.signedDistanceFromCamera<=0)?[]:Xt.map(Jt=>Jt.point)}let hr=[];if(gt.length>0){const Xt=gt[0].clone(),Jt=gt[0].clone();for(let fr=1;fr<gt.length;fr++)Xt.x=Math.min(Xt.x,gt[fr].x),Xt.y=Math.min(Xt.y,gt[fr].y),Jt.x=Math.max(Jt.x,gt[fr].x),Jt.y=Math.max(Jt.y,gt[fr].y);hr=Xt.x>=et.x&&Jt.x<=He.x&&Xt.y>=et.y&&Jt.y<=He.y?[gt]:Jt.x<et.x||Xt.x>He.x||Jt.y<et.y||Xt.y>He.y?[]:l.clipLine([gt],et.x,et.y,He.x,He.y)}for(const Xt of hr){rt.reset(Xt,.25*Ae);let Jt=0;Jt=rt.length<=.5*Ae?1:Math.ceil(rt.paddedLength/ur)+1;for(let fr=0;fr<Jt;fr++){const Sn=fr/Math.max(Jt-1,1),Xo=rt.lerp(Sn),bo=Xo.x+zr,Ko=Xo.y+zr;J.push(bo,Ko,Ae,0);const Ja=bo-Ae,to=Ko-Ae,bi=bo+Ae,xa=Ko+Ae;if(Oe=Oe&&this.isOffscreen(Ja,to,bi,xa),De=De||this.isInsideGrid(Ja,to,bi,xa),i!=="always"&&this.grid.hitTestCircle(bo,Ko,Ae,i,O)&&(ze=!0,!z))return{circles:[],offscreen:!1,collisionDetected:ze}}}}return{circles:!z&&ze||!De||xe<this.perspectiveRatioCutoff?[]:J,offscreen:Oe,collisionDetected:ze}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let f=1/0,y=1/0,v=-1/0,S=-1/0;for(const L of i){const O=new l.pointGeometry(L.x+zr,L.y+zr);f=Math.min(f,O.x),y=Math.min(y,O.y),v=Math.max(v,O.x),S=Math.max(S,O.y),u.push(O)}const C=this.grid.query(f,y,v,S).concat(this.ignoredGrid.query(f,y,v,S)),A={},z={};for(const L of C){const O=L.key;if(A[O.bucketInstanceId]===void 0&&(A[O.bucketInstanceId]={}),A[O.bucketInstanceId][O.featureIndex])continue;const N=[new l.pointGeometry(L.x1,L.y1),new l.pointGeometry(L.x2,L.y1),new l.pointGeometry(L.x2,L.y2),new l.pointGeometry(L.x1,L.y2)];l.polygonIntersectsPolygon(u,N)&&(A[O.bucketInstanceId][O.featureIndex]=!0,z[O.bucketInstanceId]===void 0&&(z[O.bucketInstanceId]=[]),z[O.bucketInstanceId].push(O.featureIndex))}return z}insertCollisionBox(i,u,f,y,v,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:v,collisionGroupID:S,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,f,y,v,S){const C=f?this.ignoredGrid:this.grid,A={bucketInstanceId:y,featureIndex:v,collisionGroupID:S,overlapMode:u};for(let z=0;z<i.length;z+=4)C.insertCircle(A,i[z],i[z+1],i[z+2])}projectAndGetPerspectiveRatio(i,u,f,y){let v;return y?(v=[u,f,y(u,f),1],l.transformMat4(v,v,i)):(v=[u,f,0,1],_o(v,v,i)),{point:new l.pointGeometry((v[0]/v[3]+1)/2*this.transform.width+zr,(-v[1]/v[3]+1)/2*this.transform.height+zr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/v[3]*.5}}isOffscreen(i,u,f,y){return f<zr||i>=this.screenRightBoundary||y<zr||u>this.screenBottomBoundary}isInsideGrid(i,u,f,y){return f>=0&&i<this.gridRightBoundary&&y>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=l.identity([]);return l.translate(i,i,[-100,-100,0]),i}}function Hr(m,i,u){return i*(l.EXTENT/(m.tileSize*Math.pow(2,u-m.tileID.overscaledZ)))}class zn{constructor(i,u,f,y){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):y&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class ir{constructor(i,u,f,y,v){this.text=new zn(i?i.text:null,u,f,v),this.icon=new zn(i?i.icon:null,u,y,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Oa{constructor(i,u,f){this.text=i,this.icon=u,this.skipFade=f}}class sn{constructor(){this.invProjMatrix=l.create(),this.viewportMatrix=l.create(),this.circles=[]}}class da{constructor(i,u,f,y,v){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=f,this.bucketIndex=y,this.tileID=v}}class fa{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:f=>f.collisionGroupID===u}}return this.collisionGroups[i]}}function Va(m,i,u,f,y){const{horizontalAlign:v,verticalAlign:S}=l.getAnchorAlignment(m),C=-(v-.5)*i,A=-(S-.5)*u,z=l.evaluateVariableOffset(m,f);return new l.pointGeometry(C+z[0]*y,A+z[1]*y)}function pa(m,i,u,f,y,v){const{x1:S,x2:C,y1:A,y2:z,anchorPointX:L,anchorPointY:O}=m,N=new l.pointGeometry(i,u);return f&&N._rotate(y?v:-v),{x1:S+N.x,y1:A+N.y,x2:C+N.x,y2:z+N.y,anchorPointX:L,anchorPointY:O}}class K{constructor(i,u,f,y,v){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new $a(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new fa(y),this.collisionCircleArrays={},this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,f,y){const v=f.getBucket(u),S=f.latestFeatureIndex;if(!v||!S||u.id!==v.layerIds[0])return;const C=f.collisionBoxArray,A=v.layers[0].layout,z=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),L=f.tileSize/l.EXTENT,O=this.transform.calculatePosMatrix(f.tileID.toUnwrapped()),N=A.get("text-pitch-alignment")==="map",te=A.get("text-rotation-alignment")==="map",Y=Hr(f,1,this.transform.zoom),J=Wo(O,N,te,this.transform,Y);let ce=null;if(N){const xe=vi(O,N,te,this.transform,Y);ce=l.multiply([],this.transform.labelPlaneMatrix,xe)}this.retainedQueryData[v.bucketInstanceId]=new da(v.bucketInstanceId,S,v.sourceLayerIndex,v.index,f.tileID);const fe={bucket:v,layout:A,posMatrix:O,textLabelPlaneMatrix:J,labelToScreenMatrix:ce,scale:z,textPixelRatio:L,holdingForFade:f.holdingForFade(),collisionBoxArray:C,partiallyEvaluatedTextSize:l.evaluateSizeForZoom(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(y)for(const xe of v.sortKeyRanges){const{sortKey:re,symbolInstanceStart:Se,symbolInstanceEnd:be}=xe;i.push({sortKey:re,symbolInstanceStart:Se,symbolInstanceEnd:be,parameters:fe})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:fe})}attemptAnchorPlacement(i,u,f,y,v,S,C,A,z,L,O,N,te,Y,J,ce){const fe=[N.textOffset0,N.textOffset1],xe=Va(i,f,y,fe,v),re=this.collisionIndex.placeCollisionBox(pa(u,xe.x,xe.y,S,C,this.transform.angle),O,A,z,L.predicate,ce);if((!J||this.collisionIndex.placeCollisionBox(pa(J,xe.x,xe.y,S,C,this.transform.angle),O,A,z,L.predicate,ce).box.length!==0)&&re.box.length>0){let Se;if(this.prevPlacement&&this.prevPlacement.variableOffsets[N.crossTileID]&&this.prevPlacement.placements[N.crossTileID]&&this.prevPlacement.placements[N.crossTileID].text&&(Se=this.prevPlacement.variableOffsets[N.crossTileID].anchor),N.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[N.crossTileID]={textOffset:fe,width:f,height:y,anchor:i,textBoxScale:v,prevAnchor:Se},this.markUsedJustification(te,i,N,Y),te.allowVerticalPlacement&&(this.markUsedOrientation(te,Y,N),this.placedOrientations[N.crossTileID]=Y),{shift:xe,placedGlyphBoxes:re}}}placeLayerBucketPart(i,u,f){const{bucket:y,layout:v,posMatrix:S,textLabelPlaneMatrix:C,labelToScreenMatrix:A,textPixelRatio:z,holdingForFade:L,collisionBoxArray:O,partiallyEvaluatedTextSize:N,collisionGroup:te}=i.parameters,Y=v.get("text-optional"),J=v.get("icon-optional"),ce=l.getOverlapMode(v,"text-overlap","text-allow-overlap"),fe=ce==="always",xe=l.getOverlapMode(v,"icon-overlap","icon-allow-overlap"),re=xe==="always",Se=v.get("text-rotation-alignment")==="map",be=v.get("text-pitch-alignment")==="map",ze=v.get("icon-text-fit")!=="none",De=v.get("symbol-z-order")==="viewport-y",Oe=fe&&(re||!y.hasIconData()||J),Ae=re&&(fe||!y.hasTextData()||Y);!y.collisionArrays&&O&&y.deserializeCollisionBoxes(O);const et=(He,rt)=>{if(u[He.crossTileID])return;if(L)return void(this.placements[He.crossTileID]=new Oa(!1,!1,!1));let At=!1,Dt=!1,gt=!0,ur=null,hr={box:null,offscreen:null},Xt={box:null,offscreen:null},Jt=null,fr=null,Sn=null,Xo=0,bo=0,Ko=0;rt.textFeatureIndex?Xo=rt.textFeatureIndex:He.useRuntimeCollisionCircles&&(Xo=He.featureIndex),rt.verticalTextFeatureIndex&&(bo=rt.verticalTextFeatureIndex);const Ja=this.retainedQueryData[y.bucketInstanceId].tileID,to=this.terrain?(gn,Lt)=>this.terrain.getElevation(Ja,gn,Lt):null;for(const gn of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Lt=rt[gn];Lt&&(Lt.elevation=to?to(Lt.anchorPointX,Lt.anchorPointY):0)}const bi=rt.textBox;if(bi){const gn=ar=>{let kn=l.WritingMode.horizontal;if(y.allowVerticalPlacement&&!ar&&this.prevPlacement){const Tn=this.prevPlacement.placedOrientations[He.crossTileID];Tn&&(this.placedOrientations[He.crossTileID]=Tn,kn=Tn,this.markUsedOrientation(y,kn,He))}return kn},Lt=(ar,kn)=>{if(y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&rt.verticalTextBox){for(const Tn of y.writingModes)if(Tn===l.WritingMode.vertical?(hr=kn(),Xt=hr):hr=ar(),hr&&hr.box&&hr.box.length)break}else hr=ar()};if(v.get("text-variable-anchor")){let ar=v.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[He.crossTileID]){const Br=this.prevPlacement.variableOffsets[He.crossTileID];ar.indexOf(Br.anchor)>0&&(ar=ar.filter(ro=>ro!==Br.anchor),ar.unshift(Br.anchor))}const kn=(Br,ro,$s)=>{const $d=Br.x2-Br.x1,Il=Br.y2-Br.y1,Om=He.textBoxScale,Od=ze&&xe==="never"?ro:null;let Qa={box:[],offscreen:!1};const Os=ce!=="never"?2*ar.length:ar.length;for(let Vs=0;Vs<Os;++Vs){const lh=this.attemptAnchorPlacement(ar[Vs%ar.length],Br,$d,Il,Om,Se,be,z,S,te,Vs>=ar.length?ce:"never",He,y,$s,Od,to);if(lh&&(Qa=lh.placedGlyphBoxes,Qa&&Qa.box&&Qa.box.length)){At=!0,ur=lh.shift;break}}return Qa};Lt(()=>kn(bi,rt.iconBox,l.WritingMode.horizontal),()=>{const Br=rt.verticalTextBox;return y.allowVerticalPlacement&&!(hr&&hr.box&&hr.box.length)&&He.numVerticalGlyphVertices>0&&Br?kn(Br,rt.verticalIconBox,l.WritingMode.vertical):{box:null,offscreen:null}}),hr&&(At=hr.box,gt=hr.offscreen);const Tn=gn(hr&&hr.box);if(!At&&this.prevPlacement){const Br=this.prevPlacement.variableOffsets[He.crossTileID];Br&&(this.variableOffsets[He.crossTileID]=Br,this.markUsedJustification(y,Br.anchor,He,Tn))}}else{const ar=(kn,Tn)=>{const Br=this.collisionIndex.placeCollisionBox(kn,ce,z,S,te.predicate,to);return Br&&Br.box&&Br.box.length&&(this.markUsedOrientation(y,Tn,He),this.placedOrientations[He.crossTileID]=Tn),Br};Lt(()=>ar(bi,l.WritingMode.horizontal),()=>{const kn=rt.verticalTextBox;return y.allowVerticalPlacement&&He.numVerticalGlyphVertices>0&&kn?ar(kn,l.WritingMode.vertical):{box:null,offscreen:null}}),gn(hr&&hr.box&&hr.box.length)}}if(Jt=hr,At=Jt&&Jt.box&&Jt.box.length>0,gt=Jt&&Jt.offscreen,He.useRuntimeCollisionCircles){const gn=y.text.placedSymbolArray.get(He.centerJustifiedTextSymbolIndex),Lt=l.evaluateSizeForFeature(y.textSizeData,N,gn),ar=v.get("text-padding");fr=this.collisionIndex.placeCollisionCircles(ce,gn,y.lineVertexArray,y.glyphOffsetArray,Lt,S,C,A,f,be,te.predicate,He.collisionCircleDiameter,ar,to),fr.circles.length&&fr.collisionDetected&&!f&&l.warnOnce("Collisions detected, but collision boxes are not shown"),At=fe||fr.circles.length>0&&!fr.collisionDetected,gt=gt&&fr.offscreen}if(rt.iconFeatureIndex&&(Ko=rt.iconFeatureIndex),rt.iconBox){const gn=Lt=>{const ar=ze&&ur?pa(Lt,ur.x,ur.y,Se,be,this.transform.angle):Lt;return this.collisionIndex.placeCollisionBox(ar,xe,z,S,te.predicate,to)};Xt&&Xt.box&&Xt.box.length&&rt.verticalIconBox?(Sn=gn(rt.verticalIconBox),Dt=Sn.box.length>0):(Sn=gn(rt.iconBox),Dt=Sn.box.length>0),gt=gt&&Sn.offscreen}const xa=Y||He.numHorizontalGlyphVertices===0&&He.numVerticalGlyphVertices===0,sh=J||He.numIconVertices===0;if(xa||sh?sh?xa||(Dt=Dt&&At):At=Dt&&At:Dt=At=Dt&&At,At&&Jt&&Jt.box&&this.collisionIndex.insertCollisionBox(Jt.box,ce,v.get("text-ignore-placement"),y.bucketInstanceId,Xt&&Xt.box&&bo?bo:Xo,te.ID),Dt&&Sn&&this.collisionIndex.insertCollisionBox(Sn.box,xe,v.get("icon-ignore-placement"),y.bucketInstanceId,Ko,te.ID),fr&&(At&&this.collisionIndex.insertCollisionCircles(fr.circles,ce,v.get("text-ignore-placement"),y.bucketInstanceId,Xo,te.ID),f)){const gn=y.bucketInstanceId;let Lt=this.collisionCircleArrays[gn];Lt===void 0&&(Lt=this.collisionCircleArrays[gn]=new sn);for(let ar=0;ar<fr.circles.length;ar+=4)Lt.circles.push(fr.circles[ar+0]),Lt.circles.push(fr.circles[ar+1]),Lt.circles.push(fr.circles[ar+2]),Lt.circles.push(fr.collisionDetected?1:0)}if(He.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[He.crossTileID]=new Oa(At||Oe,Dt||Ae,gt||y.justReloaded),u[He.crossTileID]=!0};if(De){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const He=y.getSortedSymbolIndexes(this.transform.angle);for(let rt=He.length-1;rt>=0;--rt){const At=He[rt];et(y.symbolInstances.get(At),y.collisionArrays[At])}}else for(let He=i.symbolInstanceStart;He<i.symbolInstanceEnd;He++)et(y.symbolInstances.get(He),y.collisionArrays[He]);if(f&&y.bucketInstanceId in this.collisionCircleArrays){const He=this.collisionCircleArrays[y.bucketInstanceId];l.invert(He.invProjMatrix,S),He.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}markUsedJustification(i,u,f,y){let v;v=y===l.WritingMode.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[l.getAnchorJustification(u)];const S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(const C of S)C>=0&&(i.text.placedSymbolArray.get(C).crossTileID=v>=0&&C!==v?0:f.crossTileID)}markUsedOrientation(i,u,f){const y=u===l.WritingMode.horizontal||u===l.WritingMode.horizontalOnly?u:0,v=u===l.WritingMode.vertical?u:0,S=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(const C of S)i.text.placedSymbolArray.get(C).placedOrientation=y;f.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let f=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const y=u?u.symbolFadeChange(i):1,v=u?u.opacities:{},S=u?u.variableOffsets:{},C=u?u.placedOrientations:{};for(const A in this.placements){const z=this.placements[A],L=v[A];L?(this.opacities[A]=new ir(L,y,z.text,z.icon),f=f||z.text!==L.text.placed||z.icon!==L.icon.placed):(this.opacities[A]=new ir(null,y,z.text,z.icon,z.skipFade),f=f||z.text||z.icon)}for(const A in v){const z=v[A];if(!this.opacities[A]){const L=new ir(z,y,!1,!1);L.isHidden()||(this.opacities[A]=L,f=f||z.text.placed||z.icon.placed)}}for(const A in S)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=S[A]);for(const A in C)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=C[A]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const f={};for(const y of u){const v=y.getBucket(i);v&&y.latestFeatureIndex&&i.id===v.layerIds[0]&&this.updateBucketOpacities(v,f,y.collisionBoxArray)}}updateBucketOpacities(i,u,f){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const y=i.layers[0].layout,v=new ir(null,0,!1,!1,!0),S=y.get("text-allow-overlap"),C=y.get("icon-allow-overlap"),A=y.get("text-variable-anchor"),z=y.get("text-rotation-alignment")==="map",L=y.get("text-pitch-alignment")==="map",O=y.get("icon-text-fit")!=="none",N=new ir(null,0,S&&(C||!i.hasIconData()||y.get("icon-optional")),C&&(S||!i.hasTextData()||y.get("text-optional")),!0);!i.collisionArrays&&f&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(f);const te=(Y,J,ce)=>{for(let fe=0;fe<J/4;fe++)Y.opacityVertexArray.emplaceBack(ce)};for(let Y=0;Y<i.symbolInstances.length;Y++){const J=i.symbolInstances.get(Y),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:fe,crossTileID:xe}=J;let re=this.opacities[xe];u[xe]?re=v:re||(re=N,this.opacities[xe]=re),u[xe]=!0;const Se=J.numIconVertices>0,be=this.placedOrientations[J.crossTileID],ze=be===l.WritingMode.vertical,De=be===l.WritingMode.horizontal||be===l.WritingMode.horizontalOnly;if(ce>0||fe>0){const Oe=he(re.text);te(i.text,ce,ze?Ce:Oe),te(i.text,fe,De?Ce:Oe);const Ae=re.text.isHidden();[J.rightJustifiedTextSymbolIndex,J.centerJustifiedTextSymbolIndex,J.leftJustifiedTextSymbolIndex].forEach(rt=>{rt>=0&&(i.text.placedSymbolArray.get(rt).hidden=Ae||ze?1:0)}),J.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(J.verticalPlacedTextSymbolIndex).hidden=Ae||De?1:0);const et=this.variableOffsets[J.crossTileID];et&&this.markUsedJustification(i,et.anchor,J,be);const He=this.placedOrientations[J.crossTileID];He&&(this.markUsedJustification(i,"left",J,He),this.markUsedOrientation(i,He,J))}if(Se){const Oe=he(re.icon),Ae=!(O&&J.verticalPlacedIconSymbolIndex&&ze);J.placedIconSymbolIndex>=0&&(te(i.icon,J.numIconVertices,Ae?Oe:Ce),i.icon.placedSymbolArray.get(J.placedIconSymbolIndex).hidden=re.icon.isHidden()),J.verticalPlacedIconSymbolIndex>=0&&(te(i.icon,J.numVerticalIconVertices,Ae?Ce:Oe),i.icon.placedSymbolArray.get(J.verticalPlacedIconSymbolIndex).hidden=re.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const Oe=i.collisionArrays[Y];if(Oe){let Ae=new l.pointGeometry(0,0);if(Oe.textBox||Oe.verticalTextBox){let He=!0;if(A){const rt=this.variableOffsets[xe];rt?(Ae=Va(rt.anchor,rt.width,rt.height,rt.textOffset,rt.textBoxScale),z&&Ae._rotate(L?this.transform.angle:-this.transform.angle)):He=!1}Oe.textBox&&M(i.textCollisionBox.collisionVertexArray,re.text.placed,!He||ze,Ae.x,Ae.y),Oe.verticalTextBox&&M(i.textCollisionBox.collisionVertexArray,re.text.placed,!He||De,Ae.x,Ae.y)}const et=!!(!De&&Oe.verticalIconBox);Oe.iconBox&&M(i.iconCollisionBox.collisionVertexArray,re.icon.placed,et,O?Ae.x:0,O?Ae.y:0),Oe.verticalIconBox&&M(i.iconCollisionBox.collisionVertexArray,re.icon.placed,!et,O?Ae.x:0,O?Ae.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Y=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Y.invProjMatrix,i.placementViewportMatrix=Y.viewportMatrix,i.collisionCircleArray=Y.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const f=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*f>i}setStale(){this.stale=!0}}function M(m,i,u,f,y){m.emplaceBack(i?1:0,u?1:0,f||0,y||0),m.emplaceBack(i?1:0,u?1:0,f||0,y||0),m.emplaceBack(i?1:0,u?1:0,f||0,y||0),m.emplaceBack(i?1:0,u?1:0,f||0,y||0)}const F=Math.pow(2,25),W=Math.pow(2,24),X=Math.pow(2,17),ae=Math.pow(2,16),ue=Math.pow(2,9),le=Math.pow(2,8),se=Math.pow(2,1);function he(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const i=m.placed?1:0,u=Math.floor(127*m.opacity);return u*F+i*W+u*X+i*ae+u*ue+i*le+u*se+i}const Ce=0;class Fe{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,f,y,v){const S=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(S,y,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,S.sort((C,A)=>C.sortKey-A.sortKey));this._currentPartIndex<S.length;)if(u.placeLayerBucketPart(S[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class Ee{constructor(i,u,f,y,v,S,C,A){this.placement=new K(i,u,S,C,A),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(i,u,f){const y=l.exported.now(),v=()=>{const S=l.exported.now()-y;return!this._forceFullPlacement&&S>2};for(;this._currentPlacementIndex>=0;){const S=u[i[this._currentPlacementIndex]],C=this.placement.collisionIndex.transform.zoom;if(S.type==="symbol"&&(!S.minzoom||S.minzoom<=C)&&(!S.maxzoom||S.maxzoom>C)){if(this._inProgressLayer||(this._inProgressLayer=new Fe(S)),this._inProgressLayer.continuePlacement(f[S.source],this.placement,this._showCollisionBoxes,S,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const ot=512/l.EXTENT/2;class at{constructor(i,u,f){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=f;for(let y=0;y<u.length;y++){const v=u.get(y),S=v.key;this.indexedSymbolInstances[S]||(this.indexedSymbolInstances[S]=[]),this.indexedSymbolInstances[S].push({crossTileID:v.crossTileID,coord:this.getScaledCoordinates(v,i)})}}getScaledCoordinates(i,u){const f=ot/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*l.EXTENT+i.anchorX)*f),y:Math.floor((u.canonical.y*l.EXTENT+i.anchorY)*f)}}findMatches(i,u,f){const y=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let v=0;v<i.length;v++){const S=i.get(v);if(S.crossTileID)continue;const C=this.indexedSymbolInstances[S.key];if(!C)continue;const A=this.getScaledCoordinates(S,u);for(const z of C)if(Math.abs(z.coord.x-A.x)<=y&&Math.abs(z.coord.y-A.y)<=y&&!f[z.crossTileID]){f[z.crossTileID]=!0,S.crossTileID=z.crossTileID;break}}}}class Ke{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class mt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const f in this.indexes){const y=this.indexes[f],v={};for(const S in y){const C=y[S];C.tileID=C.tileID.unwrapTo(C.tileID.wrap+u),v[C.tileID.key]=C}this.indexes[f]=v}this.lng=i}addBucket(i,u,f){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let v=0;v<u.symbolInstances.length;v++)u.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const y=this.usedCrossTileIDs[i.overscaledZ];for(const v in this.indexes){const S=this.indexes[v];if(Number(v)>i.overscaledZ)for(const C in S){const A=S[C];A.tileID.isChildOf(i)&&A.findMatches(u.symbolInstances,i,y)}else{const C=S[i.scaledTo(Number(v)).key];C&&C.findMatches(u.symbolInstances,i,y)}}for(let v=0;v<u.symbolInstances.length;v++){const S=u.symbolInstances.get(v);S.crossTileID||(S.crossTileID=f.generate(),y[S.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new at(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const f in u.indexedSymbolInstances)for(const y of u.indexedSymbolInstances[f])delete this.usedCrossTileIDs[i][y.crossTileID]}removeStaleBuckets(i){let u=!1;for(const f in this.indexes){const y=this.indexes[f];for(const v in y)i[y[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,y[v]),delete y[v],u=!0)}return u}}class xt{constructor(){this.layerIndexes={},this.crossTileIDs=new Ke,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,f){let y=this.layerIndexes[i.id];y===void 0&&(y=this.layerIndexes[i.id]=new mt);let v=!1;const S={};y.handleWrapJump(f);for(const C of u){const A=C.getBucket(i);A&&i.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(C.tileID,A,this.crossTileIDs)&&(v=!0),S[A.bucketInstanceId]=!0)}return y.removeStaleBuckets(S)&&(v=!0),v}pruneUnusedLayers(i){const u={};i.forEach(f=>{u[f]=!0});for(const f in this.layerIndexes)u[f]||delete this.layerIndexes[f]}}var Zt=l.createLayout([{name:"a_pos",type:"Int16",components:2}]);class kt extends l.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=i._cache.max,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const i in this._tiles){const u=this._tiles[i];u.textures.forEach(f=>f.destroy()),u.textures=[]}}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];for(const f of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(f.key),this._tiles[f.key]||(f.posMatrix=new Float64Array(16),l.ortho(f.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),this._tiles[f.key]=new br(f,this.tileSize))}removeOutdated(i){const u={};this.renderHistory=this.renderHistory.filter((f,y)=>this.renderHistory.indexOf(f)===y).slice(0,this.renderHistorySize);for(const f of this._renderableTilesKeys)u[f]=!0;for(const f of this.renderHistory)u[f]=!0;for(const f in this._tiles)u[f]||(this._tiles[f].clearTextures(i),delete this._tiles[f])}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const f of this._renderableTilesKeys){const y=this._tiles[f].tileID;if(y.canonical.equals(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16),l.ortho(v.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),u[f]=v}else if(y.canonical.isChildOf(i.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const S=y.canonical.z-i.canonical.z,C=y.canonical.x-(y.canonical.x>>S<<S),A=y.canonical.y-(y.canonical.y>>S<<S),z=l.EXTENT>>S;l.ortho(v.posMatrix,0,z,0,z,0,1),l.translate(v.posMatrix,v.posMatrix,[-C*z,-A*z,0]),u[f]=v}else if(i.canonical.isChildOf(y.canonical)){const v=i.clone();v.posMatrix=new Float64Array(16);const S=i.canonical.z-y.canonical.z,C=i.canonical.x-(i.canonical.x>>S<<S),A=i.canonical.y-(i.canonical.y>>S<<S),z=l.EXTENT>>S;l.ortho(v.posMatrix,0,l.EXTENT,0,l.EXTENT,0,1),l.translate(v.posMatrix,v.posMatrix,[C*z,A*z,0]),l.scale(v.posMatrix,v.posMatrix,[1/2**S,1/2**S,0]),u[f]=v}}return u}getSourceTile(i,u){const f=this.sourceCache._source;let y=i.overscaledZ-this.deltaZoom;if(y>f.maxzoom&&(y=f.maxzoom),y<f.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(y).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!v||!v.dem)&&u)for(;y>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(i.scaledTo(y--).key);return v}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=i)}}class zt{constructor(i,u,f){this.style=i,this.sourceCache=new kt(u),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.elevationOffset=typeof f.elevationOffset=="number"?f.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(i,u,f,y=l.EXTENT){if(!(u>=0&&u<y&&f>=0&&f<y))return this.elevationOffset;let v=0;const S=this.getTerrainData(i);if(S.tile&&S.tile.dem){const C=l.transformMat4$1([],[u/y*l.EXTENT,f/y*l.EXTENT],S.u_terrain_matrix),A=[C[0]*S.tile.dem.dim,C[1]*S.tile.dem.dim],z=[Math.floor(A[0]),Math.floor(A[1])],L=S.tile.dem.get(z[0],z[1]),O=S.tile.dem.get(z[0],z[1]+1),N=S.tile.dem.get(z[0]+1,z[1]),te=S.tile.dem.get(z[0]+1,z[1]+1);v=l.number(l.number(L,O,A[0]-z[0]),l.number(N,te,A[0]-z[0]),A[1]-z[1])}return v}rememberForRerender(i,u){for(const f in this.sourceCache._tiles){const y=this.sourceCache._tiles[f];(y.tileID.equals(u)||y.tileID.isChildOf(u))&&(i===this.sourceCache.sourceCache.id&&(y.timeLoaded=Date.now()),this._rerender[i]=this._rerender[i]||{},this._rerender[i][y.tileID.key]=!0)}}needsRerender(i,u){return this._rerender[i]&&this._rerender[i][u.key]}clearRerenderCache(){this._rerender={}}getElevation(i,u,f,y=l.EXTENT){return(this.getDEMElevation(i,u,f,y)+this.elevationOffset)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const y=this.style.map.painter.context,v=new l.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ee(y,v,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ee(y,new l.RGBAImage({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=l.identity([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const y=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new ee(y,u.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),u.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const f=u&&u+u.tileID.key+i.key;if(f&&!this._demMatrixCache[f]){const y=this.sourceCache.sourceCache._source.maxzoom;let v=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=y?v=i.canonical.z-y:l.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const S=i.canonical.x-(i.canonical.x>>v<<v),C=i.canonical.y-(i.canonical.y>>v<<v),A=l.fromScaling(new Float64Array(16),[1/(l.EXTENT<<v),1/(l.EXTENT<<v),0]);l.translate(A,A,[S*l.EXTENT,C*l.EXTENT,0]),this._demMatrixCache[i.key]={matrix:A,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const i=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=i.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(i){const u=this.style.map.painter,f=u.width/devicePixelRatio,y=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ee(u.context,{width:f,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ee(u.context,{width:f,height:y,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(f,y,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,f,y))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,S=0;v<this._coordsTextureSize;v++)for(let C=0;C<this._coordsTextureSize;C++,S+=4)u[S+0]=255&C,u[S+1]=255&v,u[S+2]=C>>8<<4|v>>8,u[S+3]=0;const f=new l.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),y=new ee(i,f,i.gl.RGBA,{premultiply:!1});return y.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(i){const u=new Uint8Array(4),f=this.style.map.painter,y=f.context,v=y.gl;y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),v.readPixels(i.x,f.height/devicePixelRatio-i.y-1,1,1,v.RGBA,v.UNSIGNED_BYTE,u),y.bindFramebuffer.set(null);const S=u[0]+(u[2]>>4<<8),C=u[1]+((15&u[2])<<8),A=this.coordsIndex[255-u[3]],z=A&&this.sourceCache.getTileByID(A);if(!z)return null;const L=this._coordsTextureSize,O=(1<<z.tileID.canonical.z)*L;return new l.MercatorCoordinate((z.tileID.canonical.x*L+S)/O,(z.tileID.canonical.y*L+C)/O,this.getElevation(z.tileID,S,C,L))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.style.map.painter.context,u=new l.PosArray,f=new l.TriangleIndexArray,y=this.meshSize,v=l.EXTENT/y,S=y*y;for(let C=0;C<=y;C++)for(let A=0;A<=y;A++)u.emplaceBack(A*v,C*v);for(let C=0;C<S;C+=y+1)for(let A=0;A<y;A++)f.emplaceBack(A+C,y+A+C+1,y+A+C+2),f.emplaceBack(A+C,y+A+C+2,A+C+1);return this._mesh={indexBuffer:i.createIndexBuffer(f),vertexBuffer:i.createVertexBuffer(u,Zt.members),segments:l.SegmentVector.simpleSegment(0,0,u.length,f.length)},this._mesh}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,f={minElevation:null,maxElevation:null};return u&&u.dem&&(f.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,f.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),f}}const Wt=(m,i)=>l.emitValidationErrors(m,i&&i.filter(u=>u.identifier!=="source.canvas")),lr=l.pick(Gt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ln=l.pick(Gt,["setCenter","setZoom","setBearing","setPitch"]),wr=function(){const m={},i=l.spec.$version;for(const u in l.spec.$root){const f=l.spec.$root[u];if(f.required){let y=null;y=u==="version"?i:f.type==="array"?[]:{},y!=null&&(m[u]=y)}}return m}();class wn extends l.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new $e(La(),this),this.imageManager=new Z,this.imageManager.setEventedParent(this),this.glyphManager=new _e(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Ne(256,512),this.crossTileSymbolIndex=new xt,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new l.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",l.getReferrer());const f=this;this._rtlTextPluginCallback=wn.registerForPluginStateChange(y=>{f.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:y.pluginStatus,pluginURL:y.pluginURL},(v,S)=>{if(l.triggerPluginCompletionEvent(v),S&&S.every(C=>C))for(const C in f.sourceCaches)f.sourceCaches[C].reload()})}),this.on("data",y=>{if(y.dataType!=="source"||y.sourceDataType!=="metadata")return;const v=this.sourceCaches[y.sourceId];if(!v)return;const S=v.getSource();if(S&&S.vectorLayerIds)for(const C in this._layers){const A=this._layers[C];A.source===S.id&&this._validateLayer(A)}})}loadURL(i,u={}){this.fire(new l.Event("dataloading",{dataType:"style"}));const f=typeof u.validate!="boolean"||u.validate,y=this.map._requestManager.transformRequest(i,l.ResourceType.Style);this._request=l.getJSON(y,(v,S)=>{this._request=null,v?this.fire(new l.ErrorEvent(v)):S&&this._load(S,f)})}loadJSON(i,u={}){this.fire(new l.Event("dataloading",{dataType:"style"})),this._request=l.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new l.Event("dataloading",{dataType:"style"})),this._load(wr,!1)}_load(i,u){if(u&&Wt(this,l.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const y in i.sources)this.addSource(y,i.sources[y],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const f=Ss(this.stylesheet.layers);this._order=f.map(y=>y.id),this._layers={},this._serializedLayers={};for(let y of f)y=l.createStyleLayer(y),y.setEventedParent(this,{layer:{id:y.id}}),this._layers[y.id]=y,this._serializedLayers[y.id]=y.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Pe(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new l.Event("data",{dataType:"style"})),this.fire(new l.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,f,y,v){let S,C,A;const z=y>1?"@2x":"";let L=l.getJSON(f.transformRequest(f.normalizeSpriteURL(u,z,".json"),l.ResourceType.SpriteJSON),(te,Y)=>{L=null,A||(A=te,S=Y,N())}),O=l.getImage(f.transformRequest(f.normalizeSpriteURL(u,z,".png"),l.ResourceType.SpriteImage),(te,Y)=>{O=null,A||(A=te,C=Y,N())});function N(){if(A)v(A);else if(S&&C){const te=l.exported.getImageData(C),Y={};for(const J in S){const{width:ce,height:fe,x:xe,y:re,sdf:Se,pixelRatio:be,stretchX:ze,stretchY:De,content:Oe}=S[J],Ae=new l.RGBAImage({width:ce,height:fe});l.RGBAImage.copy(te,Ae,{x:xe,y:re},{x:0,y:0},{width:ce,height:fe}),Y[J]={data:Ae,pixelRatio:be,sdf:Se,stretchX:ze,stretchY:De,content:Oe}}v(null,Y)}}return{cancel(){L&&(L.cancel(),L=null),O&&(O.cancel(),O=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,f)=>{if(this._spriteRequest=null,u)this.fire(new l.ErrorEvent(u));else if(f)for(const y in f)this.imageManager.addImage(y,f[y]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const f=i.sourceLayer;if(!f)return;const y=u.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(f)===-1)&&this.fire(new l.ErrorEvent(new Error(`Source layer "${f}" does not exist on source "${y.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const f of i){const y=this._layers[f];y.type!=="custom"&&u.push(y.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const y=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(y.length||v.length)&&this._updateWorkerLayers(y,v);for(const S in this._updatedSources){const C=this._updatedSources[S];if(C==="reload")this._reloadSource(S);else{if(C!=="clear")throw new Error(`Invalid action ${C}`);this._clearSource(S)}}this._updateTilesForChangedImages();for(const S in this._updatedPaintProps)this._layers[S].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const f={};for(const y in this.sourceCaches){const v=this.sourceCaches[y];f[y]=v.used,v.used=!1}for(const y of this._order){const v=this._layers[y];v.recalculate(i,this._availableImages),!v.isHidden(i.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(const y in f){const v=this.sourceCaches[y];f[y]!==v.used&&v.fire(new l.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new l.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(i){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),i){const u=this.sourceCaches[i.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${i.source}`);this.terrain=new zt(this,u,i),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=f=>{f.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=f=>{f.tile&&(f.sourceId===i.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(f.sourceId,f.tile.tileID)):f.source.type==="geojson"&&this.terrain.rememberForRerender(f.sourceId,f.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new l.Event("terrain",{terrain:i}))}setState(i){if(this._checkLoaded(),Wt(this,l.validateStyle(i)))return!1;(i=l.clone$1(i)).layers=Ss(i.layers);const u=function(y,v){if(!y)return[{command:Gt.setStyle,args:[v]}];let S=[];try{if(!D(y.version,v.version))return[{command:Gt.setStyle,args:[v]}];D(y.center,v.center)||S.push({command:Gt.setCenter,args:[v.center]}),D(y.zoom,v.zoom)||S.push({command:Gt.setZoom,args:[v.zoom]}),D(y.bearing,v.bearing)||S.push({command:Gt.setBearing,args:[v.bearing]}),D(y.pitch,v.pitch)||S.push({command:Gt.setPitch,args:[v.pitch]}),D(y.sprite,v.sprite)||S.push({command:Gt.setSprite,args:[v.sprite]}),D(y.glyphs,v.glyphs)||S.push({command:Gt.setGlyphs,args:[v.glyphs]}),D(y.transition,v.transition)||S.push({command:Gt.setTransition,args:[v.transition]}),D(y.light,v.light)||S.push({command:Gt.setLight,args:[v.light]});const C={},A=[];(function(L,O,N,te){let Y;for(Y in O=O||{},L=L||{})Object.prototype.hasOwnProperty.call(L,Y)&&(Object.prototype.hasOwnProperty.call(O,Y)||Ki(Y,N,te));for(Y in O)Object.prototype.hasOwnProperty.call(O,Y)&&(Object.prototype.hasOwnProperty.call(L,Y)?D(L[Y],O[Y])||(L[Y].type==="geojson"&&O[Y].type==="geojson"&&ti(L,O,Y)?N.push({command:Gt.setGeoJSONSourceData,args:[Y,O[Y].data]}):Ii(Y,O,N,te)):ei(Y,O,N))})(y.sources,v.sources,A,C);const z=[];y.layers&&y.layers.forEach(L=>{C[L.source]?S.push({command:Gt.removeLayer,args:[L.id]}):z.push(L)}),S=S.concat(A),function(L,O,N){O=O||[];const te=(L=L||[]).map(Ji),Y=O.map(Ji),J=L.reduce(Fa,{}),ce=O.reduce(Fa,{}),fe=te.slice(),xe=Object.create(null);let re,Se,be,ze,De,Oe,Ae;for(re=0,Se=0;re<te.length;re++)be=te[re],Object.prototype.hasOwnProperty.call(ce,be)?Se++:(N.push({command:Gt.removeLayer,args:[be]}),fe.splice(fe.indexOf(be,Se),1));for(re=0,Se=0;re<Y.length;re++)be=Y[Y.length-1-re],fe[fe.length-1-re]!==be&&(Object.prototype.hasOwnProperty.call(J,be)?(N.push({command:Gt.removeLayer,args:[be]}),fe.splice(fe.lastIndexOf(be,fe.length-Se),1)):Se++,Oe=fe[fe.length-re],N.push({command:Gt.addLayer,args:[ce[be],Oe]}),fe.splice(fe.length-re,0,be),xe[be]=!0);for(re=0;re<Y.length;re++)if(be=Y[re],ze=J[be],De=ce[be],!xe[be]&&!D(ze,De))if(D(ze.source,De.source)&&D(ze["source-layer"],De["source-layer"])&&D(ze.type,De.type)){for(Ae in Yi(ze.layout,De.layout,N,be,null,Gt.setLayoutProperty),Yi(ze.paint,De.paint,N,be,null,Gt.setPaintProperty),D(ze.filter,De.filter)||N.push({command:Gt.setFilter,args:[be,De.filter]}),D(ze.minzoom,De.minzoom)&&D(ze.maxzoom,De.maxzoom)||N.push({command:Gt.setLayerZoomRange,args:[be,De.minzoom,De.maxzoom]}),ze)Object.prototype.hasOwnProperty.call(ze,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Yi(ze[Ae],De[Ae],N,be,Ae.slice(6),Gt.setPaintProperty):D(ze[Ae],De[Ae])||N.push({command:Gt.setLayerProperty,args:[be,Ae,De[Ae]]}));for(Ae in De)Object.prototype.hasOwnProperty.call(De,Ae)&&!Object.prototype.hasOwnProperty.call(ze,Ae)&&Ae!=="layout"&&Ae!=="paint"&&Ae!=="filter"&&Ae!=="metadata"&&Ae!=="minzoom"&&Ae!=="maxzoom"&&(Ae.indexOf("paint.")===0?Yi(ze[Ae],De[Ae],N,be,Ae.slice(6),Gt.setPaintProperty):D(ze[Ae],De[Ae])||N.push({command:Gt.setLayerProperty,args:[be,Ae,De[Ae]]}))}else N.push({command:Gt.removeLayer,args:[be]}),Oe=fe[fe.lastIndexOf(be)+1],N.push({command:Gt.addLayer,args:[De,Oe]})}(z,v.layers,S)}catch(C){console.warn("Unable to compute style diff:",C),S=[{command:Gt.setStyle,args:[v]}]}return S}(this.serialize(),i).filter(y=>!(y.command in ln));if(u.length===0)return!1;const f=u.filter(y=>!(y.command in lr));if(f.length>0)throw new Error(`Unimplemented: ${f.map(y=>y.command).join(", ")}.`);return u.forEach(y=>{y.command!=="setTransition"&&this[y.command].apply(this,y.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new l.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new l.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,f={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(l.validateStyle.source,`sources.${i}`,u,null,f))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const y=this.sourceCaches[i]=new Qr(i,u,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:y.serialize(),sourceId:i})),y.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const f in this._layers)if(this._layers[f].source===i)return this.fire(new l.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${f}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new l.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const f=this.sourceCaches[i].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,f={}){this._checkLoaded();const y=i.id;if(this.getLayer(y))return void this.fire(new l.ErrorEvent(new Error(`Layer "${y}" already exists on this map.`)));let v;if(i.type==="custom"){if(Wt(this,l.validateCustomStyleLayer(i)))return;v=l.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(y,i.source),i=l.clone$1(i),i=l.extend(i,{source:y})),this._validate(l.validateStyle.layer,`layers.${y}`,i,{arrayIndex:-1},f))return;v=l.createStyleLayer(i),this._validateLayer(v),v.setEventedParent(this,{layer:{id:y}}),this._serializedLayers[v.id]=v.serialize()}const S=u?this._order.indexOf(u):this._order.length;if(u&&S===-1)this.fire(new l.ErrorEvent(new Error(`Cannot add layer "${y}" before non-existing layer "${u}".`)));else{if(this._order.splice(S,0,y),this._layerOrderChanged=!0,this._layers[y]=v,this._removedLayers[y]&&v.source&&v.type!=="custom"){const C=this._removedLayers[y];delete this._removedLayers[y],C.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new l.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const f=this._order.indexOf(i);this._order.splice(f,1);const y=u?this._order.indexOf(u):this._order.length;u&&y===-1?this.fire(new l.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(y,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new l.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const f=this._order.indexOf(i);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,f){this._checkLoaded();const y=this.getLayer(i);y?y.minzoom===u&&y.maxzoom===f||(u!=null&&(y.minzoom=u),f!=null&&(y.maxzoom=f),this._updateLayer(y)):this.fire(new l.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,f={}){this._checkLoaded();const y=this.getLayer(i);if(y){if(!D(y.filter,u))return u==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(l.validateStyle.filter,`layers.${y.id}.filter`,u,null,f)||(y.filter=l.clone$1(u),this._updateLayer(y)))}else this.fire(new l.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return l.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,f,y={}){this._checkLoaded();const v=this.getLayer(i);v?D(v.getLayoutProperty(u),f)||(v.setLayoutProperty(u,f,y),this._updateLayer(v)):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const f=this.getLayer(i);if(f)return f.getLayoutProperty(u);this.fire(new l.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,f,y={}){this._checkLoaded();const v=this.getLayer(i);v?D(v.getPaintProperty(u),f)||(v.setPaintProperty(u,f,y)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new l.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const f=i.source,y=i.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const S=v.getSource().type;S==="geojson"&&y?this.fire(new l.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):S!=="vector"||y?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),v.setFeatureState(y,i.id,u)):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const f=i.source,y=this.sourceCaches[f];if(y===void 0)return void this.fire(new l.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)));const v=y.getSource().type,S=v==="vector"?i.sourceLayer:void 0;v!=="vector"||S?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new l.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(S,i.id,u):this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,f=i.sourceLayer,y=this.sourceCaches[u];if(y!==void 0)return y.getSource().type!=="vector"||f?(i.id===void 0&&this.fire(new l.ErrorEvent(new Error("The feature id parameter must be provided."))),y.getFeatureState(f,i.id)):void this.fire(new l.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new l.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return l.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return l.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:l.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=S=>this._layers[S].type==="fill-extrusion",f={},y=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(u(C)){f[C]=S;for(const A of i){const z=A[C];if(z)for(const L of z)y.push(L)}}}y.sort((S,C)=>C.intersectionZ-S.intersectionZ);const v=[];for(let S=this._order.length-1;S>=0;S--){const C=this._order[S];if(u(C))for(let A=y.length-1;A>=0;A--){const z=y[A].feature;if(f[z.layer.id]<S)break;v.push(z),y.pop()}else for(const A of i){const z=A[C];if(z)for(const L of z)v.push(L.feature)}}return v}queryRenderedFeatures(i,u,f){u&&u.filter&&this._validate(l.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const y={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new l.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const S of u.layers){const C=this._layers[S];if(!C)return this.fire(new l.ErrorEvent(new Error(`The layer '${S}' does not exist in the map's style and cannot be queried for features.`))),[];y[C.source]=!0}}const v=[];u.availableImages=this._availableImages;for(const S in this.sourceCaches)u.layers&&!y[S]||v.push(an(this.sourceCaches[S],this._layers,this._serializedLayers,i,u,f));return this.placement&&v.push(function(S,C,A,z,L,O,N){const te={},Y=O.queryRenderedSymbols(z),J=[];for(const ce of Object.keys(Y).map(Number))J.push(N[ce]);J.sort(fn);for(const ce of J){const fe=ce.featureIndex.lookupSymbolFeatures(Y[ce.bucketInstanceId],C,ce.bucketIndex,ce.sourceLayerIndex,L.filter,L.layers,L.availableImages,S);for(const xe in fe){const re=te[xe]=te[xe]||[],Se=fe[xe];Se.sort((be,ze)=>{const De=ce.featureSortOrder;if(De){const Oe=De.indexOf(be.featureIndex);return De.indexOf(ze.featureIndex)-Oe}return ze.featureIndex-be.featureIndex});for(const be of Se)re.push(be)}}for(const ce in te)te[ce].forEach(fe=>{const xe=fe.feature,re=A[S[ce].source].getFeatureState(xe.layer["source-layer"],xe.id);xe.source=xe.layer.source,xe.layer["source-layer"]&&(xe.sourceLayer=xe.layer["source-layer"]),xe.state=re});return te}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(i,u){u&&u.filter&&this._validate(l.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const f=this.sourceCaches[i];return f?function(y,v){const S=y.getRenderableIds().map(z=>y.getTileByID(z)),C=[],A={};for(let z=0;z<S.length;z++){const L=S[z],O=L.tileID.canonical.key;A[O]||(A[O]=!0,L.querySourceFeatures(C,v))}return C}(f,u):[]}addSourceType(i,u,f){return wn.getSourceType(i)?f(new Error(`A source type called "${i}" already exists.`)):(wn.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},f):f(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const f=this.light.getLight();let y=!1;for(const S in i)if(!D(i[S],f[S])){y=!0;break}if(!y)return;const v={now:l.exported.now(),transition:l.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(v)}_validate(i,u,f,y,v={}){return(!v||v.validate!==!1)&&Wt(this,i.call(l.validateStyle,l.extend({key:u,style:this.serialize(),value:f,styleSpec:l.spec},y)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),l.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const u=this.sourceCaches[i];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,f,y,v=!1){let S=!1,C=!1;const A={};for(const z of this._order){const L=this._layers[z];if(L.type!=="symbol")continue;if(!A[L.source]){const N=this.sourceCaches[L.source];A[L.source]=N.getRenderableIds(!0).map(te=>N.getTileByID(te)).sort((te,Y)=>Y.tileID.overscaledZ-te.tileID.overscaledZ||(te.tileID.isLessThan(Y.tileID)?-1:1))}const O=this.crossTileSymbolIndex.addLayer(L,A[L.source],i.center.lng);S=S||O}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(l.exported.now(),i.zoom))&&(this.pauseablePlacement=new Ee(i,this.terrain,this._order,v,u,f,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(l.exported.now()),C=!0),S&&this.pauseablePlacement.placement.setStale()),C||S)for(const z of this._order){const L=this._layers[z];L.type==="symbol"&&this.placement.updateLayerOpacities(L,A[L.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(l.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,f){this.imageManager.getImages(u.icons,f),this._updateTilesForChangedImages();const y=this.sourceCaches[u.source];y&&y.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,f){this.glyphManager.getGlyphs(u.stacks,f)}getResource(i,u,f){return l.makeRequest(u,f)}}wn.getSourceType=function(m){return nr[m]},wn.setSourceType=function(m,i){nr[m]=i},wn.registerForPluginStateChange=l.registerForPluginStateChange;var Na="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const ks={prelude:cr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:cr(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:cr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:cr(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:cr("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:cr(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:cr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:cr("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:cr("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:cr("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:cr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:cr(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:cr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:cr(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:cr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:cr(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:cr(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:cr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:cr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:cr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:cr(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:cr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:cr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:cr("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Na),terrainDepth:cr("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Na),terrainCoords:cr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Na)};function cr(m,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=i.match(/attribute ([\w]+) ([\w]+)/g),y=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=v?v.concat(y):y,C={};return{fragmentSource:m=m.replace(u,(A,z,L,O,N)=>(C[N]=!0,z==="define"?`
#ifndef HAS_UNIFORM_u_${N}
varying ${L} ${O} ${N};
#else
uniform ${L} ${O} u_${N};
#endif
`:`
#ifdef HAS_UNIFORM_u_${N}
    ${L} ${O} ${N} = u_${N};
#endif
`)),vertexSource:i=i.replace(u,(A,z,L,O,N)=>{const te=O==="float"?"vec2":"vec4",Y=N.match(/color/)?"color":te;return C[N]?z==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
attribute ${L} ${te} a_${N};
varying ${L} ${O} ${N};
#else
uniform ${L} ${O} u_${N};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = a_${N};
#else
    ${L} ${O} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${N} = unpack_mix_${Y}(a_${N}, u_${N}_t);
#else
    ${L} ${O} ${N} = u_${N};
#endif
`:z==="define"?`
#ifndef HAS_UNIFORM_u_${N}
uniform lowp float u_${N}_t;
attribute ${L} ${te} a_${N};
#else
uniform ${L} ${O} u_${N};
#endif
`:Y==="vec4"?`
#ifndef HAS_UNIFORM_u_${N}
    ${L} ${O} ${N} = a_${N};
#else
    ${L} ${O} ${N} = u_${N};
#endif
`:`
#ifndef HAS_UNIFORM_u_${N}
    ${L} ${O} ${N} = unpack_mix_${Y}(a_${N}, u_${N}_t);
#else
    ${L} ${O} ${N} = u_${N};
#endif
`}),staticAttributes:f,staticUniforms:S}}class Tc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,f,y,v,S,C,A,z){this.context=i;let L=this.boundPaintVertexBuffers.length!==y.length;for(let O=0;!L&&O<y.length;O++)this.boundPaintVertexBuffers[O]!==y[O]&&(L=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===f&&!L&&this.boundIndexBuffer===v&&this.boundVertexOffset===S&&this.boundDynamicVertexBuffer===C&&this.boundDynamicVertexBuffer2===A&&this.boundDynamicVertexBuffer3===z?(i.bindVertexArrayOES.set(this.vao),C&&C.bind(),v&&v.dynamicDraw&&v.bind(),A&&A.bind(),z&&z.bind()):this.freshBind(u,f,y,v,S,C,A,z)}freshBind(i,u,f,y,v,S,C,A){let z;const L=i.numAttributes,O=this.context,N=O.gl;if(O.extVertexArrayObject)this.vao&&this.destroy(),this.vao=O.extVertexArrayObject.createVertexArrayOES(),O.bindVertexArrayOES.set(this.vao),z=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=y,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=S,this.boundDynamicVertexBuffer2=C,this.boundDynamicVertexBuffer3=A;else{z=O.currentNumAttributes||0;for(let te=L;te<z;te++)N.disableVertexAttribArray(te)}u.enableAttributes(N,i);for(const te of f)te.enableAttributes(N,i);S&&S.enableAttributes(N,i),C&&C.enableAttributes(N,i),A&&A.enableAttributes(N,i),u.bind(),u.setVertexAttribPointers(N,i,v);for(const te of f)te.bind(),te.setVertexAttribPointers(N,i,v);S&&(S.bind(),S.setVertexAttribPointers(N,i,v)),y&&y.bind(),C&&(C.bind(),C.setVertexAttribPointers(N,i,v)),A&&(A.bind(),A.setVertexAttribPointers(N,i,v)),O.currentNumAttributes=L}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ec(m){const i=[];for(let u=0;u<m.length;u++){if(m[u]===null)continue;const f=m[u].split(" ");i.push(f.pop())}return i}class Uu{constructor(i,u,f,y,v,S,C){const A=i.gl;this.program=A.createProgram();const z=Ec(f.staticAttributes),L=y?y.getBinderAttributes():[],O=z.concat(L),N=ks.prelude.staticUniforms?Ec(ks.prelude.staticUniforms):[],te=f.staticUniforms?Ec(f.staticUniforms):[],Y=y?y.getBinderUniforms():[],J=N.concat(te).concat(Y),ce=[];for(const De of J)ce.indexOf(De)<0&&ce.push(De);const fe=y?y.defines():[];S&&fe.push("#define OVERDRAW_INSPECTOR;"),C&&fe.push("#define TERRAIN3D;");const xe=fe.concat(ks.prelude.fragmentSource,f.fragmentSource).join(`
`),re=fe.concat(ks.prelude.vertexSource,f.vertexSource).join(`
`),Se=A.createShader(A.FRAGMENT_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(Se,xe),A.compileShader(Se),A.attachShader(this.program,Se);const be=A.createShader(A.VERTEX_SHADER);if(A.isContextLost())return void(this.failedToCreate=!0);A.shaderSource(be,re),A.compileShader(be),A.attachShader(this.program,be),this.attributes={};const ze={};this.numAttributes=O.length;for(let De=0;De<this.numAttributes;De++)O[De]&&(A.bindAttribLocation(this.program,De,O[De]),this.attributes[O[De]]=De);A.linkProgram(this.program),A.deleteShader(be),A.deleteShader(Se);for(let De=0;De<ce.length;De++){const Oe=ce[De];if(Oe&&!ze[Oe]){const Ae=A.getUniformLocation(this.program,Oe);Ae&&(ze[Oe]=Ae)}}this.fixedUniforms=v(i,ze),this.terrainUniforms=((De,Oe)=>({u_depth:new l.Uniform1i(De,Oe.u_depth),u_terrain:new l.Uniform1i(De,Oe.u_terrain),u_terrain_dim:new l.Uniform1f(De,Oe.u_terrain_dim),u_terrain_matrix:new l.UniformMatrix4f(De,Oe.u_terrain_matrix),u_terrain_unpack:new l.Uniform4f(De,Oe.u_terrain_unpack),u_terrain_offset:new l.Uniform1f(De,Oe.u_terrain_offset),u_terrain_exaggeration:new l.Uniform1f(De,Oe.u_terrain_exaggeration)}))(i,ze),this.binderUniforms=y?y.getUniforms(i,ze):[]}draw(i,u,f,y,v,S,C,A,z,L,O,N,te,Y,J,ce,fe,xe){const re=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(f),i.setStencilMode(y),i.setColorMode(v),i.setCullFace(S),A){i.activeTexture.set(re.TEXTURE2),re.bindTexture(re.TEXTURE_2D,A.depthTexture),i.activeTexture.set(re.TEXTURE3),re.bindTexture(re.TEXTURE_2D,A.texture);for(const be in this.terrainUniforms)this.terrainUniforms[be].set(A[be])}for(const be in this.fixedUniforms)this.fixedUniforms[be].set(C[be]);J&&J.setUniforms(i,this.binderUniforms,te,{zoom:Y});let Se=0;switch(u){case re.LINES:Se=2;break;case re.TRIANGLES:Se=3;break;case re.LINE_STRIP:Se=1}for(const be of N.get()){const ze=be.vaos||(be.vaos={});(ze[z]||(ze[z]=new Tc)).bind(i,this,L,J?J.getPaintVertexBuffers():[],O,be.vertexOffset,ce,fe,xe),re.drawElements(u,be.primitiveLength*Se,re.UNSIGNED_SHORT,be.primitiveOffset*Se*2)}}}function ju(m,i,u){const f=1/Hr(u,1,i.transform.tileZoom),y=Math.pow(2,u.tileID.overscaledZ),v=u.tileSize*Math.pow(2,i.transform.tileZoom)/y,S=v*(u.tileID.canonical.x+u.tileID.wrap*y),C=v*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[f,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[S>>16,C>>16],u_pixel_coord_lower:[65535&S,65535&C]}}const Cc=(m,i,u,f)=>{const y=i.style.light,v=y.properties.get("position"),S=[v.x,v.y,v.z],C=l.create$1();y.properties.get("anchor")==="viewport"&&l.fromRotation(C,-i.transform.angle),l.transformMat3(S,S,C);const A=y.properties.get("color");return{u_matrix:m,u_lightpos:S,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+u,u_opacity:f}},xd=(m,i,u,f,y,v,S)=>l.extend(Cc(m,i,u,f),ju(v,i,S),{u_height_factor:-Math.pow(2,y.overscaledZ)/S.tileSize/8}),ma=m=>({u_matrix:m}),Ts=(m,i,u,f)=>l.extend(ma(m),ju(u,i,f)),Gu=(m,i)=>({u_matrix:m,u_world:i}),Zu=(m,i,u,f,y)=>l.extend(Ts(m,i,u,f),{u_world:y}),Ac=(m,i,u,f)=>{const y=m.transform;let v,S;if(f.paint.get("circle-pitch-alignment")==="map"){const C=Hr(u,1,y.zoom);v=!0,S=[C,C]}else v=!1,S=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(i.posMatrix,u,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+v,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:S}},ga=(m,i,u)=>{const f=Hr(u,1,i.zoom),y=Math.pow(2,i.zoom-u.tileID.overscaledZ),v=u.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:f,u_extrude_scale:[i.pixelsToGLUnits[0]/(f*y),i.pixelsToGLUnits[1]/(f*y)],u_overscale_factor:v}},Es=(m,i,u=1)=>({u_matrix:m,u_color:i,u_overlay:0,u_overlay_scale:u}),Ua=m=>({u_matrix:m}),Cs=(m,i,u,f)=>({u_matrix:m,u_extrude_scale:Hr(i,1,u),u_intensity:f});function vl(m,i){const u=Math.pow(2,i.canonical.z),f=i.canonical.y;return[new l.MercatorCoordinate(0,f/u).toLngLat().lat,new l.MercatorCoordinate(0,(f+1)/u).toLngLat().lat]}const ja=(m,i,u,f)=>{const y=m.transform;return{u_matrix:Ps(m,i,u,f),u_ratio:1/Hr(i,1,y.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Pc=(m,i,u,f,y)=>l.extend(ja(m,i,u,y),{u_image:0,u_image_height:f}),Ga=(m,i,u,f,y)=>{const v=m.transform,S=Cr(i,v);return{u_matrix:Ps(m,i,u,y),u_texsize:i.imageAtlasTexture.size,u_ratio:1/Hr(i,1,v.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[S,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},As=(m,i,u,f,y,v)=>{const S=m.lineAtlas,C=Cr(i,m.transform),A=u.layout.get("line-cap")==="round",z=S.getDash(f.from,A),L=S.getDash(f.to,A),O=z.width*y.fromScale,N=L.width*y.toScale;return l.extend(ja(m,i,u,v),{u_patternscale_a:[C/O,-z.height/2],u_patternscale_b:[C/N,-L.height/2],u_sdfgamma:S.width/(256*Math.min(O,N)*m.pixelRatio)/2,u_image:0,u_tex_y_a:z.y,u_tex_y_b:L.y,u_mix:y.t})};function Cr(m,i){return 1/Hr(m,1,i.tileZoom)}function Ps(m,i,u,f){return m.translatePosMatrix(f?f.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Is=(m,i,u,f,y)=>{return{u_matrix:m,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(S=y.paint.get("raster-saturation"),S>0?1-1/(1.001-S):-S),u_contrast_factor:(v=y.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:xl(y.paint.get("raster-hue-rotate"))};var v,S};function xl(m){m*=Math.PI/180;const i=Math.sin(m),u=Math.cos(m);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const zs=(m,i,u,f,y,v,S,C,A,z)=>{const L=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.cameraToCenterDistance,u_pitch:L.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:L.width/L.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:v,u_label_plane_matrix:S,u_coord_matrix:C,u_is_text:+A,u_pitch_with_map:+f,u_texsize:z,u_texture:0}},Za=(m,i,u,f,y,v,S,C,A,z,L)=>{const O=y.transform;return l.extend(zs(m,i,u,f,y,v,S,C,A,z),{u_gamma_scale:f?Math.cos(O._pitch)*O.cameraToCenterDistance:1,u_device_pixel_ratio:y.pixelRatio,u_is_halo:+L})},Wu=(m,i,u,f,y,v,S,C,A,z)=>l.extend(Za(m,i,u,f,y,v,S,C,!0,A,!0),{u_texsize_icon:z,u_texture_icon:1}),Hu=(m,i,u)=>({u_matrix:m,u_opacity:i,u_color:u}),Ic=(m,i,u,f,y,v)=>l.extend(function(S,C,A,z){const L=A.imageManager.getPattern(S.from.toString()),O=A.imageManager.getPattern(S.to.toString()),{width:N,height:te}=A.imageManager.getPixelSize(),Y=Math.pow(2,z.tileID.overscaledZ),J=z.tileSize*Math.pow(2,A.transform.tileZoom)/Y,ce=J*(z.tileID.canonical.x+z.tileID.wrap*Y),fe=J*z.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:O.tl,u_pattern_br_b:O.br,u_texsize:[N,te],u_mix:C.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:O.displaySize,u_scale_a:C.fromScale,u_scale_b:C.toScale,u_tile_units_to_pixels:1/Hr(z,1,A.transform.tileZoom),u_pixel_coord_upper:[ce>>16,fe>>16],u_pixel_coord_lower:[65535&ce,65535&fe]}}(f,v,u,y),{u_matrix:m,u_opacity:i}),bl={fillExtrusion:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_lightpos:new l.Uniform3f(m,i.u_lightpos),u_lightintensity:new l.Uniform1f(m,i.u_lightintensity),u_lightcolor:new l.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(m,i.u_vertical_gradient),u_opacity:new l.Uniform1f(m,i.u_opacity)}),fillExtrusionPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_lightpos:new l.Uniform3f(m,i.u_lightpos),u_lightintensity:new l.Uniform1f(m,i.u_lightintensity),u_lightcolor:new l.Uniform3f(m,i.u_lightcolor),u_vertical_gradient:new l.Uniform1f(m,i.u_vertical_gradient),u_height_factor:new l.Uniform1f(m,i.u_height_factor),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade),u_opacity:new l.Uniform1f(m,i.u_opacity)}),fill:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),fillPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),fillOutline:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world)}),fillOutlinePattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world),u_image:new l.Uniform1i(m,i.u_image),u_texsize:new l.Uniform2f(m,i.u_texsize),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),circle:(m,i)=>({u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_scale_with_map:new l.Uniform1i(m,i.u_scale_with_map),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_extrude_scale:new l.Uniform2f(m,i.u_extrude_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),collisionBox:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pixels_to_tile_units:new l.Uniform1f(m,i.u_pixels_to_tile_units),u_extrude_scale:new l.Uniform2f(m,i.u_extrude_scale),u_overscale_factor:new l.Uniform1f(m,i.u_overscale_factor)}),collisionCircle:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_inv_matrix:new l.UniformMatrix4f(m,i.u_inv_matrix),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_viewport_size:new l.Uniform2f(m,i.u_viewport_size)}),debug:(m,i)=>({u_color:new l.UniformColor(m,i.u_color),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_overlay:new l.Uniform1i(m,i.u_overlay),u_overlay_scale:new l.Uniform1f(m,i.u_overlay_scale)}),clippingMask:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),heatmap:(m,i)=>({u_extrude_scale:new l.Uniform1f(m,i.u_extrude_scale),u_intensity:new l.Uniform1f(m,i.u_intensity),u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),heatmapTexture:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_world:new l.Uniform2f(m,i.u_world),u_image:new l.Uniform1i(m,i.u_image),u_color_ramp:new l.Uniform1i(m,i.u_color_ramp),u_opacity:new l.Uniform1f(m,i.u_opacity)}),hillshade:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_latrange:new l.Uniform2f(m,i.u_latrange),u_light:new l.Uniform2f(m,i.u_light),u_shadow:new l.UniformColor(m,i.u_shadow),u_highlight:new l.UniformColor(m,i.u_highlight),u_accent:new l.UniformColor(m,i.u_accent)}),hillshadePrepare:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_image:new l.Uniform1i(m,i.u_image),u_dimension:new l.Uniform2f(m,i.u_dimension),u_zoom:new l.Uniform1f(m,i.u_zoom),u_unpack:new l.Uniform4f(m,i.u_unpack)}),line:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels)}),lineGradient:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_image:new l.Uniform1i(m,i.u_image),u_image_height:new l.Uniform1f(m,i.u_image_height)}),linePattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_texsize:new l.Uniform2f(m,i.u_texsize),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_image:new l.Uniform1i(m,i.u_image),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_scale:new l.Uniform3f(m,i.u_scale),u_fade:new l.Uniform1f(m,i.u_fade)}),lineSDF:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_ratio:new l.Uniform1f(m,i.u_ratio),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_units_to_pixels:new l.Uniform2f(m,i.u_units_to_pixels),u_patternscale_a:new l.Uniform2f(m,i.u_patternscale_a),u_patternscale_b:new l.Uniform2f(m,i.u_patternscale_b),u_sdfgamma:new l.Uniform1f(m,i.u_sdfgamma),u_image:new l.Uniform1i(m,i.u_image),u_tex_y_a:new l.Uniform1f(m,i.u_tex_y_a),u_tex_y_b:new l.Uniform1f(m,i.u_tex_y_b),u_mix:new l.Uniform1f(m,i.u_mix)}),raster:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_tl_parent:new l.Uniform2f(m,i.u_tl_parent),u_scale_parent:new l.Uniform1f(m,i.u_scale_parent),u_buffer_scale:new l.Uniform1f(m,i.u_buffer_scale),u_fade_t:new l.Uniform1f(m,i.u_fade_t),u_opacity:new l.Uniform1f(m,i.u_opacity),u_image0:new l.Uniform1i(m,i.u_image0),u_image1:new l.Uniform1i(m,i.u_image1),u_brightness_low:new l.Uniform1f(m,i.u_brightness_low),u_brightness_high:new l.Uniform1f(m,i.u_brightness_high),u_saturation_factor:new l.Uniform1f(m,i.u_saturation_factor),u_contrast_factor:new l.Uniform1f(m,i.u_contrast_factor),u_spin_weights:new l.Uniform3f(m,i.u_spin_weights)}),symbolIcon:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texture:new l.Uniform1i(m,i.u_texture)}),symbolSDF:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texture:new l.Uniform1i(m,i.u_texture),u_gamma_scale:new l.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(m,i.u_is_halo)}),symbolTextAndIcon:(m,i)=>({u_is_size_zoom_constant:new l.Uniform1i(m,i.u_is_size_zoom_constant),u_is_size_feature_constant:new l.Uniform1i(m,i.u_is_size_feature_constant),u_size_t:new l.Uniform1f(m,i.u_size_t),u_size:new l.Uniform1f(m,i.u_size),u_camera_to_center_distance:new l.Uniform1f(m,i.u_camera_to_center_distance),u_pitch:new l.Uniform1f(m,i.u_pitch),u_rotate_symbol:new l.Uniform1i(m,i.u_rotate_symbol),u_aspect_ratio:new l.Uniform1f(m,i.u_aspect_ratio),u_fade_change:new l.Uniform1f(m,i.u_fade_change),u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_label_plane_matrix:new l.UniformMatrix4f(m,i.u_label_plane_matrix),u_coord_matrix:new l.UniformMatrix4f(m,i.u_coord_matrix),u_is_text:new l.Uniform1i(m,i.u_is_text),u_pitch_with_map:new l.Uniform1i(m,i.u_pitch_with_map),u_texsize:new l.Uniform2f(m,i.u_texsize),u_texsize_icon:new l.Uniform2f(m,i.u_texsize_icon),u_texture:new l.Uniform1i(m,i.u_texture),u_texture_icon:new l.Uniform1i(m,i.u_texture_icon),u_gamma_scale:new l.Uniform1f(m,i.u_gamma_scale),u_device_pixel_ratio:new l.Uniform1f(m,i.u_device_pixel_ratio),u_is_halo:new l.Uniform1i(m,i.u_is_halo)}),background:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_opacity:new l.Uniform1f(m,i.u_opacity),u_color:new l.UniformColor(m,i.u_color)}),backgroundPattern:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_opacity:new l.Uniform1f(m,i.u_opacity),u_image:new l.Uniform1i(m,i.u_image),u_pattern_tl_a:new l.Uniform2f(m,i.u_pattern_tl_a),u_pattern_br_a:new l.Uniform2f(m,i.u_pattern_br_a),u_pattern_tl_b:new l.Uniform2f(m,i.u_pattern_tl_b),u_pattern_br_b:new l.Uniform2f(m,i.u_pattern_br_b),u_texsize:new l.Uniform2f(m,i.u_texsize),u_mix:new l.Uniform1f(m,i.u_mix),u_pattern_size_a:new l.Uniform2f(m,i.u_pattern_size_a),u_pattern_size_b:new l.Uniform2f(m,i.u_pattern_size_b),u_scale_a:new l.Uniform1f(m,i.u_scale_a),u_scale_b:new l.Uniform1f(m,i.u_scale_b),u_pixel_coord_upper:new l.Uniform2f(m,i.u_pixel_coord_upper),u_pixel_coord_lower:new l.Uniform2f(m,i.u_pixel_coord_lower),u_tile_units_to_pixels:new l.Uniform1f(m,i.u_tile_units_to_pixels)}),terrain:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_texture:new l.Uniform1i(m,i.u_texture)}),terrainDepth:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix)}),terrainCoords:(m,i)=>({u_matrix:new l.UniformMatrix4f(m,i.u_matrix),u_texture:new l.Uniform1i(m,i.u_texture),u_terrain_coords_id:new l.Uniform1f(m,i.u_terrain_coords_id)})};class vo{constructor(i,u,f){this.context=i;const y=i.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const ya={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class zc{constructor(i,u,f,y){this.length=u.length,this.attributes=f,this.itemSize=u.bytesPerElement,this.dynamicDraw=y,this.context=i;const v=i.gl;this.buffer=v.createBuffer(),i.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let f=0;f<this.attributes.length;f++){const y=u.attributes[this.attributes[f].name];y!==void 0&&i.enableVertexAttribArray(y)}}setVertexAttribPointers(i,u,f){for(let y=0;y<this.attributes.length;y++){const v=this.attributes[y],S=u.attributes[v.name];S!==void 0&&i.vertexAttribPointer(S,v.components,i[ya[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Yt{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class qu extends Yt{getDefault(){return l.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Xu extends Yt{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Ms extends Yt{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class Ds extends Yt{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Mc extends Yt{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class oi extends Yt{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Q extends Yt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class de extends Yt{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class Te extends Yt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class st extends Yt{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class Ht extends Yt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class or extends Yt{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class Sr extends Yt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class Ut extends Yt{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class mr extends Yt{getDefault(){return l.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ai extends Yt{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Vn extends Yt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class Qi extends Yt{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class Dc extends Yt{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class Rc extends Yt{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class Ku extends Yt{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class E_ extends Yt{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class C_ extends Yt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class A_ extends Yt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class bd extends Yt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class Yu extends Yt{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class wd extends Yt{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class Sd extends Yt{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class wl extends Yt{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class fm extends Yt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class pm extends Yt{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class Ju extends Yt{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class Rs extends Ju{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class mm extends Ju{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class Sl{constructor(i,u,f,y){this.context=i,this.width=u,this.height=f;const v=i.gl,S=this.framebuffer=v.createFramebuffer();if(this.colorAttachment=new Rs(i,S),y&&(this.depthAttachment=new mm(i,S)),v.checkFramebufferStatus(v.FRAMEBUFFER)!==v.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const f=this.depthAttachment.get();f&&i.deleteRenderbuffer(f)}i.deleteFramebuffer(this.framebuffer)}}class Mr{constructor(i,u,f){this.blendFunction=i,this.blendColor=u,this.mask=f}}Mr.Replace=[1,0],Mr.disabled=new Mr(Mr.Replace,l.Color.transparent,[!1,!1,!1,!1]),Mr.unblended=new Mr(Mr.Replace,l.Color.transparent,[!0,!0,!0,!0]),Mr.alphaBlended=new Mr([1,771],l.Color.transparent,[!0,!0,!0,!0]);class gm{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new qu(this),this.clearDepth=new Xu(this),this.clearStencil=new Ms(this),this.colorMask=new Ds(this),this.depthMask=new Mc(this),this.stencilMask=new oi(this),this.stencilFunc=new Q(this),this.stencilOp=new de(this),this.stencilTest=new Te(this),this.depthRange=new st(this),this.depthTest=new Ht(this),this.depthFunc=new or(this),this.blend=new Sr(this),this.blendFunc=new Ut(this),this.blendColor=new mr(this),this.blendEquation=new ai(this),this.cullFace=new Vn(this),this.cullFaceSide=new Qi(this),this.frontFace=new Dc(this),this.program=new Rc(this),this.activeTexture=new Ku(this),this.viewport=new E_(this),this.bindFramebuffer=new C_(this),this.bindRenderbuffer=new A_(this),this.bindTexture=new bd(this),this.bindVertexBuffer=new Yu(this),this.bindElementBuffer=new wd(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Sd(this),this.pixelStoreUnpack=new wl(this),this.pixelStoreUnpackPremultiplyAlpha=new fm(this),this.pixelStoreUnpackFlipY=new pm(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new vo(this,i,u)}createVertexBuffer(i,u,f){return new zc(this,i,u,f)}createRenderbuffer(i,u,f){const y=this.gl,v=y.createRenderbuffer();return this.bindRenderbuffer.set(v),y.renderbufferStorage(y.RENDERBUFFER,i,u,f),this.bindRenderbuffer.set(null),v}createFramebuffer(i,u,f){return new Sl(this,i,u,f)}clear({color:i,depth:u}){const f=this.gl;let y=0;i&&(y|=f.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(y|=f.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),f.clear(y)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){D(i.blendFunction,Mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class jt{constructor(i,u,f){this.func=i,this.mask=u,this.range=f}}jt.ReadOnly=!1,jt.ReadWrite=!0,jt.disabled=new jt(519,jt.ReadOnly,[0,1]);const tr=7680;class Ar{constructor(i,u,f,y,v,S){this.test=i,this.ref=u,this.mask=f,this.fail=y,this.depthFail=v,this.pass=S}}Ar.disabled=new Ar({func:519,mask:0},0,0,tr,tr,tr);class Rr{constructor(i,u,f){this.enable=i,this.mode=u,this.frontFace=f}}let Lc;function kl(m,i,u,f,y,v,S){const C=m.context,A=C.gl,z=m.useProgram("collisionBox"),L=[];let O=0,N=0;for(let re=0;re<f.length;re++){const Se=f[re],be=i.getTile(Se),ze=be.getBucket(u);if(!ze)continue;let De=Se.posMatrix;y[0]===0&&y[1]===0||(De=m.translatePosMatrix(Se.posMatrix,be,y,v));const Oe=S?ze.textCollisionBox:ze.iconCollisionBox,Ae=ze.collisionCircleArray;if(Ae.length>0){const et=l.create(),He=De;l.mul(et,ze.placementInvProjMatrix,m.transform.glCoordMatrix),l.mul(et,et,ze.placementViewportMatrix),L.push({circleArray:Ae,circleOffset:N,transform:He,invTransform:et,coord:Se}),O+=Ae.length/4,N=O}Oe&&z.draw(C,A.LINES,jt.disabled,Ar.disabled,m.colorModeForRenderPass(),Rr.disabled,ga(De,m.transform,be),m.style.terrain&&m.style.terrain.getTerrainData(Se),u.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,null,m.transform.zoom,null,null,Oe.collisionVertexBuffer)}if(!S||!L.length)return;const te=m.useProgram("collisionCircle"),Y=new l.CollisionCircleLayoutArray;Y.resize(4*O),Y._trim();let J=0;for(const re of L)for(let Se=0;Se<re.circleArray.length/4;Se++){const be=4*Se,ze=re.circleArray[be+0],De=re.circleArray[be+1],Oe=re.circleArray[be+2],Ae=re.circleArray[be+3];Y.emplace(J++,ze,De,Oe,Ae,0),Y.emplace(J++,ze,De,Oe,Ae,1),Y.emplace(J++,ze,De,Oe,Ae,2),Y.emplace(J++,ze,De,Oe,Ae,3)}(!Lc||Lc.length<2*O)&&(Lc=function(re){const Se=2*re,be=new l.QuadTriangleArray;be.resize(Se),be._trim();for(let ze=0;ze<Se;ze++){const De=6*ze;be.uint16[De+0]=4*ze+0,be.uint16[De+1]=4*ze+1,be.uint16[De+2]=4*ze+2,be.uint16[De+3]=4*ze+2,be.uint16[De+4]=4*ze+3,be.uint16[De+5]=4*ze+0}return be}(O));const ce=C.createIndexBuffer(Lc,!0),fe=C.createVertexBuffer(Y,l.collisionCircleLayout.members,!0);for(const re of L){const Se={u_matrix:re.transform,u_inv_matrix:re.invTransform,u_camera_to_center_distance:(xe=m.transform).cameraToCenterDistance,u_viewport_size:[xe.width,xe.height]};te.draw(C,A.TRIANGLES,jt.disabled,Ar.disabled,m.colorModeForRenderPass(),Rr.disabled,Se,m.style.terrain&&m.style.terrain.getTerrainData(re.coord),u.id,fe,ce,l.SegmentVector.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,m.transform.zoom,null,null,null)}var xe;fe.destroy(),ce.destroy()}Rr.disabled=new Rr(!1,1029,2305),Rr.backCCW=new Rr(!0,1029,2305);const P_=l.identity(new Float32Array(16));function I_(m,i,u,f,y,v){const{horizontalAlign:S,verticalAlign:C}=l.getAnchorAlignment(m),A=-(S-.5)*i,z=-(C-.5)*u,L=l.evaluateVariableOffset(m,f);return new l.pointGeometry((A/y+L[0])*v,(z/y+L[1])*v)}function ym(m,i,u,f,y,v,S,C,A,z,L){const O=m.text.placedSymbolArray,N=m.text.dynamicLayoutVertexArray,te=m.icon.dynamicLayoutVertexArray,Y={};N.clear();for(let J=0;J<O.length;J++){const ce=O.get(J),fe=m.allowVerticalPlacement&&!ce.placedOrientation,xe=ce.hidden||!ce.crossTileID||fe?null:f[ce.crossTileID];if(xe){const re=new l.pointGeometry(ce.anchorX,ce.anchorY),Se=Nt(re,u?S:v,L),be=ri(y.cameraToCenterDistance,Se.signedDistanceFromCamera);let ze=l.evaluateSizeForFeature(m.textSizeData,A,ce)*be/l.ONE_EM;u&&(ze*=m.tilePixelRatio/C);const{width:De,height:Oe,anchor:Ae,textOffset:et,textBoxScale:He}=xe,rt=I_(Ae,De,Oe,et,He,ze),At=u?Nt(re.add(rt),v,L).point:Se.point.add(i?rt.rotate(-y.angle):rt),Dt=m.allowVerticalPlacement&&ce.placedOrientation===l.WritingMode.vertical?Math.PI/2:0;for(let gt=0;gt<ce.numGlyphs;gt++)l.addDynamicAttributes(N,At,Dt);z&&ce.associatedIconIndex>=0&&(Y[ce.associatedIconIndex]={shiftedAnchor:At,angle:Dt})}else St(ce.numGlyphs,N)}if(z){te.clear();const J=m.icon.placedSymbolArray;for(let ce=0;ce<J.length;ce++){const fe=J.get(ce);if(fe.hidden)St(fe.numGlyphs,te);else{const xe=Y[ce];if(xe)for(let re=0;re<fe.numGlyphs;re++)l.addDynamicAttributes(te,xe.shiftedAnchor,xe.angle);else St(fe.numGlyphs,te)}}m.icon.dynamicLayoutVertexBuffer.updateData(te)}m.text.dynamicLayoutVertexBuffer.updateData(N)}function z_(m,i,u){return u.iconsInText&&i?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Qu(m,i,u,f,y,v,S,C,A,z,L,O){const N=m.context,te=N.gl,Y=m.transform,J=C==="map",ce=A==="map",fe=C!=="viewport"&&u.layout.get("symbol-placement")!=="point",xe=J&&!ce&&!fe,re=!u.layout.get("symbol-sort-key").isConstant();let Se=!1;const be=m.depthModeForSublayer(0,jt.ReadOnly),ze=u.layout.get("text-variable-anchor"),De=[];for(const Oe of f){const Ae=i.getTile(Oe),et=Ae.getBucket(u);if(!et)continue;const He=y?et.text:et.icon;if(!He||!He.segments.get().length)continue;const rt=He.programConfigurations.get(u.id),At=y||et.sdfIcons,Dt=y?et.textSizeData:et.iconSizeData,gt=ce||Y.pitch!==0,ur=m.useProgram(z_(At,y,et),rt),hr=l.evaluateSizeForZoom(Dt,Y.zoom),Xt=m.style.terrain&&m.style.terrain.getTerrainData(Oe);let Jt,fr,Sn,Xo,bo=[0,0],Ko=null;if(y){if(fr=Ae.glyphAtlasTexture,Sn=te.LINEAR,Jt=Ae.glyphAtlasTexture.size,et.iconsInText){bo=Ae.imageAtlasTexture.size,Ko=Ae.imageAtlasTexture;const ro=Dt.kind==="composite"||Dt.kind==="camera";Xo=gt||m.options.rotating||m.options.zooming||ro?te.LINEAR:te.NEAREST}}else{const ro=u.layout.get("icon-size").constantOr(0)!==1||et.iconsNeedLinear;fr=Ae.imageAtlasTexture,Sn=At||m.options.rotating||m.options.zooming||ro||gt?te.LINEAR:te.NEAREST,Jt=Ae.imageAtlasTexture.size}const Ja=Hr(Ae,1,m.transform.zoom),to=Wo(Oe.posMatrix,ce,J,m.transform,Ja),bi=vi(Oe.posMatrix,ce,J,m.transform,Ja),xa=ze&&et.hasTextData(),sh=u.layout.get("icon-text-fit")!=="none"&&xa&&et.hasIconData();if(fe){const ro=m.style.terrain?($d,Il)=>m.style.terrain.getElevation(Oe,$d,Il):null,$s=u.layout.get("text-rotation-alignment")==="map";ii(et,Oe.posMatrix,m,y,to,bi,ce,z,$s,ro)}const gn=m.translatePosMatrix(Oe.posMatrix,Ae,v,S),Lt=fe||y&&ze||sh?P_:to,ar=m.translatePosMatrix(bi,Ae,v,S,!0),kn=At&&u.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let Tn;Tn=At?et.iconsInText?Wu(Dt.kind,hr,xe,ce,m,gn,Lt,ar,Jt,bo):Za(Dt.kind,hr,xe,ce,m,gn,Lt,ar,y,Jt,!0):zs(Dt.kind,hr,xe,ce,m,gn,Lt,ar,y,Jt);const Br={program:ur,buffers:He,uniformValues:Tn,atlasTexture:fr,atlasTextureIcon:Ko,atlasInterpolation:Sn,atlasInterpolationIcon:Xo,isSDF:At,hasHalo:kn};if(re&&et.canOverlap){Se=!0;const ro=He.segments.get();for(const $s of ro)De.push({segments:new l.SegmentVector([$s]),sortKey:$s.sortKey,state:Br,terrainData:Xt})}else De.push({segments:He.segments,sortKey:0,state:Br,terrainData:Xt})}Se&&De.sort((Oe,Ae)=>Oe.sortKey-Ae.sortKey);for(const Oe of De){const Ae=Oe.state;if(N.activeTexture.set(te.TEXTURE0),Ae.atlasTexture.bind(Ae.atlasInterpolation,te.CLAMP_TO_EDGE),Ae.atlasTextureIcon&&(N.activeTexture.set(te.TEXTURE1),Ae.atlasTextureIcon&&Ae.atlasTextureIcon.bind(Ae.atlasInterpolationIcon,te.CLAMP_TO_EDGE)),Ae.isSDF){const et=Ae.uniformValues;Ae.hasHalo&&(et.u_is_halo=1,Bc(Ae.buffers,Oe.segments,u,m,Ae.program,be,L,O,et,Oe.terrainData)),et.u_is_halo=0}Bc(Ae.buffers,Oe.segments,u,m,Ae.program,be,L,O,Ae.uniformValues,Oe.terrainData)}}function Bc(m,i,u,f,y,v,S,C,A,z){const L=f.context;y.draw(L,L.gl.TRIANGLES,v,S,C,Rr.disabled,A,z,u.id,m.layoutVertexBuffer,m.indexBuffer,i,u.paint,f.transform.zoom,m.programConfigurations.get(u.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Fc(m,i,u,f,y,v,S){const C=m.context.gl,A=u.paint.get("fill-pattern"),z=A&&A.constantOr(1),L=u.getCrossfadeParameters();let O,N,te,Y,J;S?(N=z&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",O=C.LINES):(N=z?"fillPattern":"fill",O=C.TRIANGLES);for(const ce of f){const fe=i.getTile(ce);if(z&&!fe.patternsLoaded())continue;const xe=fe.getBucket(u);if(!xe)continue;const re=xe.programConfigurations.get(u.id),Se=m.useProgram(N,re),be=m.style.terrain&&m.style.terrain.getTerrainData(ce);z&&(m.context.activeTexture.set(C.TEXTURE0),fe.imageAtlasTexture.bind(C.LINEAR,C.CLAMP_TO_EDGE),re.updatePaintBuffers(L));const ze=A.constantOr(null);if(ze&&fe.imageAtlas){const Ae=fe.imageAtlas,et=Ae.patternPositions[ze.to.toString()],He=Ae.patternPositions[ze.from.toString()];et&&He&&re.setConstantPatternPositions(et,He)}const De=be?ce:null,Oe=m.translatePosMatrix(De?De.posMatrix:ce.posMatrix,fe,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(S){Y=xe.indexBuffer2,J=xe.segments2;const Ae=[C.drawingBufferWidth,C.drawingBufferHeight];te=N==="fillOutlinePattern"&&z?Zu(Oe,m,L,fe,Ae):Gu(Oe,Ae)}else Y=xe.indexBuffer,J=xe.segments,te=z?Ts(Oe,m,L,fe):ma(Oe);Se.draw(m.context,O,y,m.stencilModeForClipping(ce),v,Rr.disabled,te,be,u.id,xe.layoutVertexBuffer,Y,J,u.paint,m.transform.zoom,re)}}function $c(m,i,u,f,y,v,S){const C=m.context,A=C.gl,z=u.paint.get("fill-extrusion-pattern"),L=z.constantOr(1),O=u.getCrossfadeParameters(),N=u.paint.get("fill-extrusion-opacity");for(const te of f){const Y=i.getTile(te),J=Y.getBucket(u);if(!J)continue;const ce=m.style.terrain&&m.style.terrain.getTerrainData(te),fe=J.programConfigurations.get(u.id),xe=m.useProgram(L?"fillExtrusionPattern":"fillExtrusion",fe);L&&(m.context.activeTexture.set(A.TEXTURE0),Y.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),fe.updatePaintBuffers(O));const re=z.constantOr(null);if(re&&Y.imageAtlas){const De=Y.imageAtlas,Oe=De.patternPositions[re.to.toString()],Ae=De.patternPositions[re.from.toString()];Oe&&Ae&&fe.setConstantPatternPositions(Oe,Ae)}const Se=m.translatePosMatrix(te.posMatrix,Y,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),be=u.paint.get("fill-extrusion-vertical-gradient"),ze=L?xd(Se,m,be,N,te,O,Y):Cc(Se,m,be,N);xe.draw(C,C.gl.TRIANGLES,y,v,S,Rr.backCCW,ze,ce,u.id,J.layoutVertexBuffer,J.indexBuffer,J.segments,u.paint,m.transform.zoom,fe,m.style.terrain&&J.centroidVertexBuffer)}}function kd(m,i,u,f,y,v,S){const C=m.context,A=C.gl,z=u.fbo;if(!z)return;const L=m.useProgram("hillshade"),O=m.style.terrain&&m.style.terrain.getTerrainData(i);C.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,z.colorAttachment.get()),L.draw(C,A.TRIANGLES,y,v,S,Rr.disabled,((N,te,Y,J)=>{const ce=Y.paint.get("hillshade-shadow-color"),fe=Y.paint.get("hillshade-highlight-color"),xe=Y.paint.get("hillshade-accent-color");let re=Y.paint.get("hillshade-illumination-direction")*(Math.PI/180);Y.paint.get("hillshade-illumination-anchor")==="viewport"&&(re-=N.transform.angle);const Se=!N.options.moving;return{u_matrix:J?J.posMatrix:N.transform.calculatePosMatrix(te.tileID.toUnwrapped(),Se),u_image:0,u_latrange:vl(0,te.tileID),u_light:[Y.paint.get("hillshade-exaggeration"),re],u_shadow:ce,u_highlight:fe,u_accent:xe}})(m,u,f,O?i:null),O,f.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}function _m(m,i,u,f,y,v){const S=m.context,C=S.gl,A=i.dem;if(A&&A.data){const z=A.dim,L=A.stride,O=A.getPixels();if(S.activeTexture.set(C.TEXTURE1),S.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||m.getTileTexture(L),i.demTexture){const te=i.demTexture;te.update(O,{premultiply:!1}),te.bind(C.NEAREST,C.CLAMP_TO_EDGE)}else i.demTexture=new ee(S,O,C.RGBA,{premultiply:!1}),i.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);S.activeTexture.set(C.TEXTURE0);let N=i.fbo;if(!N){const te=new ee(S,{width:z,height:z,data:null},C.RGBA);te.bind(C.LINEAR,C.CLAMP_TO_EDGE),N=i.fbo=S.createFramebuffer(z,z,!0),N.colorAttachment.set(te.texture)}S.bindFramebuffer.set(N.framebuffer),S.viewport.set([0,0,z,z]),m.useProgram("hillshadePrepare").draw(S,C.TRIANGLES,f,y,v,Rr.disabled,((te,Y)=>{const J=Y.stride,ce=l.create();return l.ortho(ce,0,l.EXTENT,-l.EXTENT,0,0,1),l.translate(ce,ce,[0,-l.EXTENT,0]),{u_matrix:ce,u_image:1,u_dimension:[J,J],u_zoom:te.overscaledZ,u_unpack:Y.getUnpackVector()}})(i.tileID,A),null,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function eh(m,i,u,f,y,v){const S=f.paint.get("raster-fade-duration");if(!v&&S>0){const C=l.exported.now(),A=(C-m.timeAdded)/S,z=i?(C-i.timeAdded)/S:-1,L=u.getSource(),O=y.coveringZoomLevel({tileSize:L.tileSize,roundZoom:L.roundZoom}),N=!i||Math.abs(i.tileID.overscaledZ-O)>Math.abs(m.tileID.overscaledZ-O),te=N&&m.refreshedUponExpiration?1:l.clamp(N?A:1-z,0,1);return m.refreshedUponExpiration&&A>=1&&(m.refreshedUponExpiration=!1),i?{opacity:1,mix:1-te}:{opacity:te,mix:0}}return{opacity:1,mix:0}}const th=new l.Color(1,0,0,1),xo=new l.Color(0,1,0,1),vm=new l.Color(0,0,1,1),Td=new l.Color(1,0,1,1),xm=new l.Color(0,1,1,1);function Ls(m,i,u,f){Tl(m,0,i+u/2,m.transform.width,u,f)}function Oc(m,i,u,f){Tl(m,i-u/2,0,u,m.transform.height,f)}function Tl(m,i,u,f,y,v){const S=m.context,C=S.gl;C.enable(C.SCISSOR_TEST),C.scissor(i*m.pixelRatio,u*m.pixelRatio,f*m.pixelRatio,y*m.pixelRatio),S.clear({color:v}),C.disable(C.SCISSOR_TEST)}function M_(m,i,u){const f=m.context,y=f.gl,v=u.posMatrix,S=m.useProgram("debug"),C=jt.disabled,A=Ar.disabled,z=m.colorModeForRenderPass(),L="$debug",O=m.style.terrain&&m.style.terrain.getTerrainData(u);f.activeTexture.set(y.TEXTURE0),m.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE);const N=i.getTileByID(u.key).latestRawTileData,te=Math.floor((N&&N.byteLength||0)/1024),Y=i.getTile(u).tileSize,J=512/Math.min(Y,512)*(u.overscaledZ/m.transform.zoom)*.5;let ce=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ce+=` => ${u.overscaledZ}`),function(fe,xe){fe.initDebugOverlayCanvas();const re=fe.debugOverlayCanvas,Se=fe.context.gl,be=fe.debugOverlayCanvas.getContext("2d");be.clearRect(0,0,re.width,re.height),be.shadowColor="white",be.shadowBlur=2,be.lineWidth=1.5,be.strokeStyle="white",be.textBaseline="top",be.font="bold 36px Open Sans, sans-serif",be.fillText(xe,5,5),be.strokeText(xe,5,5),fe.debugOverlayTexture.update(re),fe.debugOverlayTexture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE)}(m,`${ce} ${te}kB`),S.draw(f,y.TRIANGLES,C,A,Mr.alphaBlended,Rr.disabled,Es(v,l.Color.transparent,J),null,L,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),S.draw(f,y.LINE_STRIP,C,A,z,Rr.disabled,Es(v,l.Color.red),O,L,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function rh(m,i,u){const f=m.context,y=f.gl,v=m.colorModeForRenderPass(),S=new jt(y.LEQUAL,jt.ReadWrite,m.depthRangeFor3D),C=m.useProgram("terrain"),A=i.getTerrainMesh(),z=i.getTerrainData(u.tileID);f.bindFramebuffer.set(null),f.viewport.set([0,0,m.width,m.height]),f.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,i.getRTTFramebuffer().colorAttachment.get());const L=m.transform.calculatePosMatrix(u.tileID.toUnwrapped());C.draw(f,y.TRIANGLES,S,Ar.disabled,v,Rr.backCCW,{u_matrix:L,u_texture:0},z,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}function bm(m,i,u,f){const y=m.context,v=u.tileSize*i.qualityFactor;u.textures[f]||(u.textures[f]=m.getTileTexture(v)||new ee(y,{width:v,height:v,data:null},y.gl.RGBA),u.textures[f].bind(y.gl.LINEAR,y.gl.CLAMP_TO_EDGE),f===0&&i.sourceCache.renderHistory.unshift(u.tileID.key));const S=i.getRTTFramebuffer();S.colorAttachment.set(u.textures[f].texture),y.bindFramebuffer.set(S.framebuffer),y.viewport.set([0,0,v,v])}class wm{constructor(i){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=i,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=i.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const i=this.painter.style,u=i.terrain;for(const f in i.sourceCaches){this._coordsDescendingInv[f]={};const y=i.sourceCaches[f].getVisibleCoordinates();for(const v of y){const S=u.sourceCache.getTerrainCoords(v);for(const C in S)this._coordsDescendingInv[f][C]||(this._coordsDescendingInv[f][C]=[]),this._coordsDescendingInv[f][C].push(S[C])}}for(const f of i._order){const y=i._layers[f],v=y.source;if(this._renderToTexture[y.type]&&!this._coordsDescendingInvStr[v]){this._coordsDescendingInvStr[v]={};for(const S in this._coordsDescendingInv[v])this._coordsDescendingInvStr[v][S]=this._coordsDescendingInv[v][S].map(C=>C.key).sort().join()}}return this._renderableTiles.forEach(f=>{for(const y in this._coordsDescendingInvStr){const v=this._coordsDescendingInvStr[y][f.tileID.key];v&&v!==f.textureCoords[y]&&f.clearTextures(this.painter),u.needsRerender(y,f.tileID)&&f.clearTextures(this.painter)}this._rerender[f.tileID.key]=!f.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(i){const u=i.type,f=this.painter,y=f.style._order,v=f.currentLayer,S=v+1===y.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(y[v]),!S))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&S){this._prevType=u;const C=this._stacks.length-1,A=this._stacks[C]||[];for(const z of this._renderableTiles){if(bm(f,f.style.terrain,z,C),this._rerender[z.tileID.key]){f.context.clear({color:l.Color.transparent});for(let L=0;L<A.length;L++){const O=f.style._layers[A[L]],N=O.source?this._coordsDescendingInv[O.source][z.tileID.key]:[z.tileID];f._renderTileClippingMasks(O,N),f.renderLayer(f,f.style.sourceCaches[O.source],O,N),O.source&&(z.textureCoords[O.source]=this._coordsDescendingInvStr[O.source][z.tileID.key])}}rh(f,f.style.terrain,z)}if(u==="hillshade"){this._stacks.push([y[v]]);for(const z of this._renderableTiles){const L=this._coordsDescendingInv[i.source][z.tileID.key];bm(f,f.style.terrain,z,this._stacks.length-1),f.context.clear({color:l.Color.transparent}),f._renderTileClippingMasks(i,L),f.renderLayer(f,f.style.sourceCaches[i.source],i,L),rh(f,f.style.terrain,z)}return!0}return this._renderToTexture[u]}return!1}}const Vc={symbol:function(m,i,u,f,y){if(m.renderPass!=="translucent")return;const v=Ar.disabled,S=m.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(C,A,z,L,O,N,te){const Y=A.transform,J=O==="map",ce=N==="map";for(const fe of C){const xe=L.getTile(fe),re=xe.getBucket(z);if(!re||!re.text||!re.text.segments.get().length)continue;const Se=l.evaluateSizeForZoom(re.textSizeData,Y.zoom),be=Hr(xe,1,A.transform.zoom),ze=Wo(fe.posMatrix,ce,J,A.transform,be),De=z.layout.get("icon-text-fit")!=="none"&&re.hasIconData();if(Se){const Oe=Math.pow(2,Y.zoom-xe.tileID.overscaledZ);ym(re,J,ce,te,Y,ze,fe.posMatrix,Oe,Se,De,A.style.terrain?(Ae,et)=>A.style.terrain.getElevation(fe,Ae,et):null)}}}(f,m,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),y),u.paint.get("icon-opacity").constantOr(1)!==0&&Qu(m,i,u,f,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),v,S),u.paint.get("text-opacity").constantOr(1)!==0&&Qu(m,i,u,f,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),v,S),i.map.showCollisionBoxes&&(kl(m,i,u,f,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),kl(m,i,u,f,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(m,i,u,f){if(m.renderPass!=="translucent")return;const y=u.paint.get("circle-opacity"),v=u.paint.get("circle-stroke-width"),S=u.paint.get("circle-stroke-opacity"),C=!u.layout.get("circle-sort-key").isConstant();if(y.constantOr(1)===0&&(v.constantOr(1)===0||S.constantOr(1)===0))return;const A=m.context,z=A.gl,L=m.depthModeForSublayer(0,jt.ReadOnly),O=Ar.disabled,N=m.colorModeForRenderPass(),te=[];for(let Y=0;Y<f.length;Y++){const J=f[Y],ce=i.getTile(J),fe=ce.getBucket(u);if(!fe)continue;const xe=fe.programConfigurations.get(u.id),re=m.useProgram("circle",xe),Se=fe.layoutVertexBuffer,be=fe.indexBuffer,ze=m.style.terrain&&m.style.terrain.getTerrainData(J),De={programConfiguration:xe,program:re,layoutVertexBuffer:Se,indexBuffer:be,uniformValues:Ac(m,J,ce,u),terrainData:ze};if(C){const Oe=fe.segments.get();for(const Ae of Oe)te.push({segments:new l.SegmentVector([Ae]),sortKey:Ae.sortKey,state:De})}else te.push({segments:fe.segments,sortKey:0,state:De})}C&&te.sort((Y,J)=>Y.sortKey-J.sortKey);for(const Y of te){const{programConfiguration:J,program:ce,layoutVertexBuffer:fe,indexBuffer:xe,uniformValues:re,terrainData:Se}=Y.state;ce.draw(A,z.TRIANGLES,L,O,N,Rr.disabled,re,Se,u.id,fe,xe,Y.segments,u.paint,m.transform.zoom,J)}},heatmap:function(m,i,u,f){if(u.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const y=m.context,v=y.gl,S=Ar.disabled,C=new Mr([v.ONE,v.ONE],l.Color.transparent,[!0,!0,!0,!0]);(function(A,z,L){const O=A.gl;A.activeTexture.set(O.TEXTURE1),A.viewport.set([0,0,z.width/4,z.height/4]);let N=L.heatmapFbo;if(N)O.bindTexture(O.TEXTURE_2D,N.colorAttachment.get()),A.bindFramebuffer.set(N.framebuffer);else{const te=O.createTexture();O.bindTexture(O.TEXTURE_2D,te),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_S,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_WRAP_T,O.CLAMP_TO_EDGE),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MIN_FILTER,O.LINEAR),O.texParameteri(O.TEXTURE_2D,O.TEXTURE_MAG_FILTER,O.LINEAR),N=L.heatmapFbo=A.createFramebuffer(z.width/4,z.height/4,!1),function(Y,J,ce,fe){const xe=Y.gl;xe.texImage2D(xe.TEXTURE_2D,0,xe.RGBA,J.width/4,J.height/4,0,xe.RGBA,Y.extRenderToTextureHalfFloat?Y.extTextureHalfFloat.HALF_FLOAT_OES:xe.UNSIGNED_BYTE,null),fe.colorAttachment.set(ce)}(A,z,te,N)}})(y,m,u),y.clear({color:l.Color.transparent});for(let A=0;A<f.length;A++){const z=f[A];if(i.hasRenderableParent(z))continue;const L=i.getTile(z),O=L.getBucket(u);if(!O)continue;const N=O.programConfigurations.get(u.id),te=m.useProgram("heatmap",N),{zoom:Y}=m.transform;te.draw(y,v.TRIANGLES,jt.disabled,S,C,Rr.disabled,Cs(z.posMatrix,L,Y,u.paint.get("heatmap-intensity")),null,u.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,u.paint,m.transform.zoom,N)}y.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(y,v){const S=y.context,C=S.gl,A=v.heatmapFbo;if(!A)return;S.activeTexture.set(C.TEXTURE0),C.bindTexture(C.TEXTURE_2D,A.colorAttachment.get()),S.activeTexture.set(C.TEXTURE1);let z=v.colorRampTexture;z||(z=v.colorRampTexture=new ee(S,v.colorRamp,C.RGBA)),z.bind(C.LINEAR,C.CLAMP_TO_EDGE),y.useProgram("heatmapTexture").draw(S,C.TRIANGLES,jt.disabled,Ar.disabled,y.colorModeForRenderPass(),Rr.disabled,((L,O,N,te)=>{const Y=l.create();l.ortho(Y,0,L.width,L.height,0,0,1);const J=L.context.gl;return{u_matrix:Y,u_world:[J.drawingBufferWidth,J.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:O.paint.get("heatmap-opacity")}})(y,v),null,v.id,y.viewportBuffer,y.quadTriangleIndexBuffer,y.viewportSegments,v.paint,y.transform.zoom)}(m,u))},line:function(m,i,u,f){if(m.renderPass!=="translucent")return;const y=u.paint.get("line-opacity"),v=u.paint.get("line-width");if(y.constantOr(1)===0||v.constantOr(1)===0)return;const S=m.depthModeForSublayer(0,jt.ReadOnly),C=m.colorModeForRenderPass(),A=u.paint.get("line-dasharray"),z=u.paint.get("line-pattern"),L=z.constantOr(1),O=u.paint.get("line-gradient"),N=u.getCrossfadeParameters(),te=L?"linePattern":A?"lineSDF":O?"lineGradient":"line",Y=m.context,J=Y.gl;let ce=!0;for(const fe of f){const xe=i.getTile(fe);if(L&&!xe.patternsLoaded())continue;const re=xe.getBucket(u);if(!re)continue;const Se=re.programConfigurations.get(u.id),be=m.context.program.get(),ze=m.useProgram(te,Se),De=ce||ze.program!==be,Oe=m.style.terrain&&m.style.terrain.getTerrainData(fe),Ae=z.constantOr(null);if(Ae&&xe.imageAtlas){const rt=xe.imageAtlas,At=rt.patternPositions[Ae.to.toString()],Dt=rt.patternPositions[Ae.from.toString()];At&&Dt&&Se.setConstantPatternPositions(At,Dt)}const et=Oe?fe:null,He=L?Ga(m,xe,u,N,et):A?As(m,xe,u,A,N,et):O?Pc(m,xe,u,re.lineClipsArray.length,et):ja(m,xe,u,et);if(L)Y.activeTexture.set(J.TEXTURE0),xe.imageAtlasTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),Se.updatePaintBuffers(N);else if(A&&(De||m.lineAtlas.dirty))Y.activeTexture.set(J.TEXTURE0),m.lineAtlas.bind(Y);else if(O){const rt=re.gradients[u.id];let At=rt.texture;if(u.gradientVersion!==rt.version){let Dt=256;if(u.stepInterpolant){const gt=i.getSource().maxzoom,ur=fe.canonical.z===gt?Math.ceil(1<<m.transform.maxZoom-fe.canonical.z):1;Dt=l.clamp(l.nextPowerOfTwo(re.maxLineLength/l.EXTENT*1024*ur),256,Y.maxTextureSize)}rt.gradient=l.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:Dt,image:rt.gradient||void 0,clips:re.lineClipsArray}),rt.texture?rt.texture.update(rt.gradient):rt.texture=new ee(Y,rt.gradient,J.RGBA),rt.version=u.gradientVersion,At=rt.texture}Y.activeTexture.set(J.TEXTURE0),At.bind(u.stepInterpolant?J.NEAREST:J.LINEAR,J.CLAMP_TO_EDGE)}ze.draw(Y,J.TRIANGLES,S,m.stencilModeForClipping(fe),C,Rr.disabled,He,Oe,u.id,re.layoutVertexBuffer,re.indexBuffer,re.segments,u.paint,m.transform.zoom,Se,re.layoutVertexBuffer2),ce=!1}},fill:function(m,i,u,f){const y=u.paint.get("fill-color"),v=u.paint.get("fill-opacity");if(v.constantOr(1)===0)return;const S=m.colorModeForRenderPass(),C=u.paint.get("fill-pattern"),A=m.opaquePassEnabledForLayer()&&!C.constantOr(1)&&y.constantOr(l.Color.transparent).a===1&&v.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===A){const z=m.depthModeForSublayer(1,m.renderPass==="opaque"?jt.ReadWrite:jt.ReadOnly);Fc(m,i,u,f,z,S,!1)}if(m.renderPass==="translucent"&&u.paint.get("fill-antialias")){const z=m.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,jt.ReadOnly);Fc(m,i,u,f,z,S,!0)}},"fill-extrusion":function(m,i,u,f){const y=u.paint.get("fill-extrusion-opacity");if(y!==0&&m.renderPass==="translucent"){const v=new jt(m.context.gl.LEQUAL,jt.ReadWrite,m.depthRangeFor3D);if(y!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))$c(m,i,u,f,v,Ar.disabled,Mr.disabled),$c(m,i,u,f,v,m.stencilModeFor3D(),m.colorModeForRenderPass());else{const S=m.colorModeForRenderPass();$c(m,i,u,f,v,Ar.disabled,S)}}},hillshade:function(m,i,u,f){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const y=m.context,v=m.depthModeForSublayer(0,jt.ReadOnly),S=m.colorModeForRenderPass(),[C,A]=m.renderPass==="translucent"?m.stencilConfigForOverlap(f):[{},f];for(const z of A){const L=i.getTile(z);L.needsHillshadePrepare!==void 0&&L.needsHillshadePrepare&&m.renderPass==="offscreen"?_m(m,L,u,v,Ar.disabled,S):m.renderPass==="translucent"&&kd(m,z,L,u,v,C[z.overscaledZ],S)}y.viewport.set([0,0,m.width,m.height])},raster:function(m,i,u,f){if(m.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!f.length)return;const y=m.context,v=y.gl,S=i.getSource(),C=m.useProgram("raster"),A=m.colorModeForRenderPass(),[z,L]=S instanceof _t?[{},f]:m.stencilConfigForOverlap(f),O=L[L.length-1].overscaledZ,N=!m.options.moving;for(const te of L){const Y=m.depthModeForSublayer(te.overscaledZ-O,u.paint.get("raster-opacity")===1?jt.ReadWrite:jt.ReadOnly,v.LESS),J=i.getTile(te);J.registerFadeDuration(u.paint.get("raster-fade-duration"));const ce=i.findLoadedParent(te,0),fe=eh(J,ce,i,u,m.transform,m.style.terrain);let xe,re;const Se=u.paint.get("raster-resampling")==="nearest"?v.NEAREST:v.LINEAR;y.activeTexture.set(v.TEXTURE0),J.texture.bind(Se,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(v.TEXTURE1),ce?(ce.texture.bind(Se,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST),xe=Math.pow(2,ce.tileID.overscaledZ-J.tileID.overscaledZ),re=[J.tileID.canonical.x*xe%1,J.tileID.canonical.y*xe%1]):J.texture.bind(Se,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST);const be=m.style.terrain&&m.style.terrain.getTerrainData(te),ze=be?te:null,De=ze?ze.posMatrix:m.transform.calculatePosMatrix(te.toUnwrapped(),N),Oe=Is(De,re||[0,0],xe||1,fe,u);S instanceof _t?C.draw(y,v.TRIANGLES,Y,Ar.disabled,A,Rr.disabled,Oe,be,u.id,S.boundsBuffer,m.quadTriangleIndexBuffer,S.boundsSegments):C.draw(y,v.TRIANGLES,Y,z[te.overscaledZ],A,Rr.disabled,Oe,be,u.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,i,u,f){const y=u.paint.get("background-color"),v=u.paint.get("background-opacity");if(v===0)return;const S=m.context,C=S.gl,A=m.transform,z=A.tileSize,L=u.paint.get("background-pattern");if(m.isPatternMissing(L))return;const O=!L&&y.a===1&&v===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==O)return;const N=Ar.disabled,te=m.depthModeForSublayer(0,O==="opaque"?jt.ReadWrite:jt.ReadOnly),Y=m.colorModeForRenderPass(),J=m.useProgram(L?"backgroundPattern":"background"),ce=f||A.coveringTiles({tileSize:z,terrain:m.style.terrain});L&&(S.activeTexture.set(C.TEXTURE0),m.imageManager.bind(m.context));const fe=u.getCrossfadeParameters();for(const xe of ce){const re=f?xe.posMatrix:m.transform.calculatePosMatrix(xe.toUnwrapped()),Se=L?Ic(re,v,m,L,{tileID:xe,tileSize:z},fe):Hu(re,v,y),be=m.style.terrain&&m.style.terrain.getTerrainData(xe);J.draw(S,C.TRIANGLES,te,N,Y,Rr.disabled,Se,be,u.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}},debug:function(m,i,u){for(let f=0;f<u.length;f++)M_(m,i,u[f])},custom:function(m,i,u){const f=m.context,y=u.implementation;if(m.renderPass==="offscreen"){const v=y.prerender;v&&(m.setCustomLayerDefaults(),f.setColorMode(m.colorModeForRenderPass()),v.call(y,f.gl,m.transform.customLayerMatrix()),f.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),f.setColorMode(m.colorModeForRenderPass()),f.setStencilMode(Ar.disabled);const v=y.renderingMode==="3d"?new jt(m.context.gl.LEQUAL,jt.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,jt.ReadOnly);f.setDepthMode(v),y.render(f.gl,m.transform.customLayerMatrix()),f.setDirty(),m.setBaseState(),f.bindFramebuffer.set(null)}}};class Ed{constructor(i,u){this.context=new gm(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:l.create(),renderTime:0},this.setup(),this.numSublayers=Qr.maxUnderzooming+Qr.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new xt,this.gpuTimers={}}resize(i,u,f){if(this.width=i*f,this.height=u*f,this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const i=this.context,u=new l.PosArray;u.emplaceBack(0,0),u.emplaceBack(l.EXTENT,0),u.emplaceBack(0,l.EXTENT),u.emplaceBack(l.EXTENT,l.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,Zt.members),this.tileExtentSegments=l.SegmentVector.simpleSegment(0,0,4,2);const f=new l.PosArray;f.emplaceBack(0,0),f.emplaceBack(l.EXTENT,0),f.emplaceBack(0,l.EXTENT),f.emplaceBack(l.EXTENT,l.EXTENT),this.debugBuffer=i.createVertexBuffer(f,Zt.members),this.debugSegments=l.SegmentVector.simpleSegment(0,0,4,5);const y=new l.RasterBoundsArray;y.emplaceBack(0,0,0,0),y.emplaceBack(l.EXTENT,0,l.EXTENT,0),y.emplaceBack(0,l.EXTENT,0,l.EXTENT),y.emplaceBack(l.EXTENT,l.EXTENT,l.EXTENT,l.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(y,tt.members),this.rasterBoundsSegments=l.SegmentVector.simpleSegment(0,0,4,2);const v=new l.PosArray;v.emplaceBack(0,0),v.emplaceBack(1,0),v.emplaceBack(0,1),v.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(v,Zt.members),this.viewportSegments=l.SegmentVector.simpleSegment(0,0,4,2);const S=new l.LineStripIndexArray;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(S);const C=new l.TriangleIndexArray;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(C),this.emptyTexture=new ee(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const A=this.context.gl;this.stencilClearMode=new Ar({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const f=l.create();l.ortho(f,0,this.width,this.height,0,0,1),l.scale(f,f,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,jt.disabled,this.stencilClearMode,Mr.disabled,Rr.disabled,Ua(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const f=this.context,y=f.gl;this.nextStencilID+u.length>256&&this.clearStencil(),f.setColorMode(Mr.disabled),f.setDepthMode(jt.disabled);const v=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const S of u){const C=this._tileClippingMaskIDs[S.key]=this.nextStencilID++,A=this.style.terrain&&this.style.terrain.getTerrainData(S);v.draw(f,y.TRIANGLES,jt.disabled,new Ar({func:y.ALWAYS,mask:0},C,255,y.KEEP,y.KEEP,y.REPLACE),Mr.disabled,Rr.disabled,Ua(S.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new Ar({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new Ar({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,f=i.sort((S,C)=>C.overscaledZ-S.overscaledZ),y=f[f.length-1].overscaledZ,v=f[0].overscaledZ-y+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();const S={};for(let C=0;C<v;C++)S[C+y]=new Ar({func:u.GEQUAL,mask:255},C+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=v,[S,f]}return[{[y]:Ar.disabled},f]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new Mr([i.CONSTANT_COLOR,i.ONE],new l.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mr.unblended:Mr.alphaBlended}depthModeForSublayer(i,u,f){if(!this.opaquePassEnabledForLayer())return jt.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new jt(f||this.context.gl.LEQUAL,u,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(l.exported.now()),this.imageManager.beginFrame();const f=this.style._order,y=this.style.sourceCaches,v=this.style.terrain&&new wm(this);for(const z in y){const L=y[z];L.used&&L.prepare(this.context)}const S={},C={},A={};for(const z in y){const L=y[z];S[z]=L.getVisibleCoordinates(),C[z]=S[z].slice().reverse(),A[z]=L.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let z=0;z<f.length;z++)if(this.style._layers[f[z]].is3D()){this.opaquePassCutoff=z;break}if(v){this.opaquePassCutoff=0;const z=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!l.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||z.length)&&(l.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(L,O){const N=L.context,te=N.gl,Y=Mr.unblended,J=new jt(te.LEQUAL,jt.ReadWrite,[0,1]),ce=O.getTerrainMesh(),fe=O.sourceCache.getRenderableTiles(),xe=L.useProgram("terrainDepth");N.bindFramebuffer.set(O.getFramebuffer("depth").framebuffer),N.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),N.clear({color:l.Color.transparent,depth:1});for(const re of fe){const Se=O.getTerrainData(re.tileID),be=L.transform.calculatePosMatrix(re.tileID.toUnwrapped());xe.draw(N,te.TRIANGLES,J,Ar.disabled,Y,Rr.backCCW,{u_matrix:be},Se,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments)}N.bindFramebuffer.set(null),N.viewport.set([0,0,L.width,L.height])}(this,this.style.terrain),function(L,O){const N=L.context,te=N.gl,Y=Mr.unblended,J=new jt(te.LEQUAL,jt.ReadWrite,[0,1]),ce=O.getTerrainMesh(),fe=O.getCoordsTexture(),xe=O.sourceCache.getRenderableTiles(),re=L.useProgram("terrainCoords");N.bindFramebuffer.set(O.getFramebuffer("coords").framebuffer),N.viewport.set([0,0,L.width/devicePixelRatio,L.height/devicePixelRatio]),N.clear({color:l.Color.transparent,depth:1}),O.coordsIndex=[];for(const Se of xe){const be=O.getTerrainData(Se.tileID);N.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,fe.texture);const ze=L.transform.calculatePosMatrix(Se.tileID.toUnwrapped());re.draw(N,te.TRIANGLES,J,Ar.disabled,Y,Rr.backCCW,{u_matrix:ze,u_terrain_coords_id:(255-O.coordsIndex.length)/255,u_texture:0},be,"terrain",ce.vertexBuffer,ce.indexBuffer,ce.segments),O.coordsIndex.push(Se.tileID.key)}N.bindFramebuffer.set(null),N.viewport.set([0,0,L.width,L.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const z of f){const L=this.style._layers[z];if(!L.hasOffscreenPass()||L.isHidden(this.transform.zoom))continue;const O=C[L.source];(L.type==="custom"||O.length)&&this.renderLayer(this,y[L.source],L,O)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?l.Color.black:l.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!v)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){const z=this.style._layers[f[this.currentLayer]],L=y[z.source],O=S[z.source];this._renderTileClippingMasks(z,O),this.renderLayer(this,L,z,O)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){const z=this.style._layers[f[this.currentLayer]],L=y[z.source];if(v&&v.renderLayer(z))continue;const O=(z.type==="symbol"?A:C)[z.source];this._renderTileClippingMasks(z,S[z.source]),this.renderLayer(this,L,z,O)}if(this.options.showTileBoundaries){let z,L;Object.values(this.style._layers).forEach(O=>{O.source&&!O.isHidden(this.transform.zoom)&&(O.source!==(L&&L.id)&&(L=this.style.sourceCaches[O.source]),(!z||z.getSource().maxzoom<L.getSource().maxzoom)&&(z=L))}),z&&Vc.debug(this,z,z.getVisibleCoordinates())}this.options.showPadding&&function(z){const L=z.transform.padding;Ls(z,z.transform.height-(L.top||0),3,th),Ls(z,L.bottom||0,3,xo),Oc(z,L.left||0,3,vm),Oc(z,z.transform.width-(L.right||0),3,Td);const O=z.transform.centerPoint;(function(N,te,Y,J){Tl(N,te-1,Y-10,2,20,J),Tl(N,te-10,Y-1,20,2,J)})(z,O.x,z.transform.height-O.y,xm)}(this),this.context.setDefault()}renderLayer(i,u,f,y){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(y||[]).length)&&(this.id=f.id,this.gpuTimingStart(f),Vc[f.type](i,u,f,y,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let f=this.gpuTimers[i.id];f||(f=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),f.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,f.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const f in i){const y=i[f],v=this.context.extTimerQuery,S=v.getQueryObjectEXT(y.query,v.QUERY_RESULT_EXT)/1e6;v.deleteQueryEXT(y.query),u[f]=S}return u}translatePosMatrix(i,u,f,y,v){if(!f[0]&&!f[1])return i;const S=v?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(S){const z=Math.sin(S),L=Math.cos(S);f=[f[0]*L-f[1]*z,f[0]*z+f[1]*L]}const C=[v?f[0]:Hr(u,f[0],this.transform.zoom),v?f[1]:Hr(u,f[1],this.transform.zoom),0],A=new Float32Array(16);return l.translate(A,i,C),A}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),f=this.imageManager.getPattern(i.to.toString());return!u||!f}useProgram(i,u){this.cache=this.cache||{};const f=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Uu(this.context,i,ks[i],u,bl[i],this._showOverdrawInspector,this.style.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ee(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class nh{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,f){const y=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(C=>{const A=1/(C=l.transformMat4([],C,i))[3]/u*y;return l.mul$1(C,C,[A,A,1/C[3],A])}),S=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(C=>{const A=l.sub([],v[C[0]],v[C[1]]),z=l.sub([],v[C[2]],v[C[1]]),L=l.normalize([],l.cross([],A,z)),O=-l.dot(L,v[C[1]]);return L.concat(O)});return new nh(v,S)}}class Nc{constructor(i,u){this.min=i,this.max=u,this.center=l.scale$1([],l.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],f=l.clone$2(this.min),y=l.clone$2(this.max);for(let v=0;v<u.length;v++)f[v]=u[v]?this.min[v]:this.center[v],y[v]=u[v]?this.center[v]:this.max[v];return y[2]=this.max[2],new Nc(f,y)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let f=!0;for(let y=0;y<i.planes.length;y++){const v=i.planes[y];let S=0;for(let C=0;C<u.length;C++)l.dot$1(v,u[C])>=0&&S++;if(S===0)return 0;S!==u.length&&(f=!1)}if(f)return 2;for(let y=0;y<3;y++){let v=Number.MAX_VALUE,S=-Number.MAX_VALUE;for(let C=0;C<i.points.length;C++){const A=i.points[C][y]-this.min[y];v=Math.min(v,A),S=Math.max(S,A)}if(S<0||v>this.max[y]-this.min[y])return 0}return 1}}class El{constructor(i=0,u=0,f=0,y=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(f)||f<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=f,this.right=y}interpolate(i,u,f){return u.top!=null&&i.top!=null&&(this.top=l.number(i.top,u.top,f)),u.bottom!=null&&i.bottom!=null&&(this.bottom=l.number(i.bottom,u.bottom,f)),u.left!=null&&i.left!=null&&(this.left=l.number(i.left,u.left,f)),u.right!=null&&i.right!=null&&(this.right=l.number(i.right,u.right,f)),this}getCenter(i,u){const f=l.clamp((this.left+i-this.right)/2,0,i),y=l.clamp((this.top+u-this.bottom)/2,0,u);return new l.pointGeometry(f,y)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new El(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Uc{constructor(i,u,f,y,v){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=v===void 0||!!v,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=f??0,this._maxPitch=y??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new l.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new El,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new Uc(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i._elevation=this._elevation,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new l.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-l.wrap(i,-180,180)*Math.PI/180;var f;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(f=new l.ARRAY_TYPE(4),l.ARRAY_TYPE!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f),function(y,v,S){var C=v[0],A=v[1],z=v[2],L=v[3],O=Math.sin(S),N=Math.cos(S);y[0]=C*N+z*O,y[1]=A*N+L*O,y[2]=C*-O+z*N,y[3]=A*-O+L*N}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=l.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,f){this._unmodified=!1,this._edgeInsets.interpolate(i,u,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new l.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const f=this.pointCoordinate(new l.pointGeometry(0,0)),y=this.pointCoordinate(new l.pointGeometry(this.width,0)),v=this.pointCoordinate(new l.pointGeometry(this.width,this.height)),S=this.pointCoordinate(new l.pointGeometry(0,this.height)),C=Math.floor(Math.min(f.x,y.x,v.x,S.x)),A=Math.floor(Math.max(f.x,y.x,v.x,S.x)),z=1;for(let L=C-z;L<=A+z;L++)L!==0&&u.push(new l.UnwrappedTileID(L,i))}return u}coveringTiles(i){var u,f;let y=this.coveringZoomLevel(i);const v=y;if(i.minzoom!==void 0&&y<i.minzoom)return[];i.maxzoom!==void 0&&y>i.maxzoom&&(y=i.maxzoom);const S=this.pointCoordinate(this.getCameraPoint()),C=l.MercatorCoordinate.fromLngLat(this.center),A=Math.pow(2,y),z=[A*S.x,A*S.y,0],L=[A*C.x,A*C.y,0],O=nh.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,y);let N=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(N=y);const te=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Y=re=>({aabb:new Nc([re*A,0,0],[(re+1)*A,A,0]),zoom:0,x:0,y:0,wrap:re,fullyVisible:!1}),J=[],ce=[],fe=y,xe=i.reparseOverscaled?v:y;if(this._renderWorldCopies)for(let re=1;re<=3;re++)J.push(Y(-re)),J.push(Y(re));for(J.push(Y(0));J.length>0;){const re=J.pop(),Se=re.x,be=re.y;let ze=re.fullyVisible;if(!ze){const rt=re.aabb.intersects(O);if(rt===0)continue;ze=rt===2}const De=i.terrain?z:L,Oe=re.aabb.distanceX(De),Ae=re.aabb.distanceY(De),et=Math.max(Math.abs(Oe),Math.abs(Ae)),He=te+(1<<fe-re.zoom)-2;if(re.zoom===fe||et>He&&re.zoom>=N){const rt=fe-re.zoom,At=z[0]-.5-(Se<<rt),Dt=z[1]-.5-(be<<rt);ce.push({tileID:new l.OverscaledTileID(re.zoom===fe?xe:re.zoom,re.wrap,re.zoom,Se,be),distanceSq:l.sqrLen([L[0]-.5-Se,L[1]-.5-be]),tileDistanceToCamera:Math.sqrt(At*At+Dt*Dt)})}else for(let rt=0;rt<4;rt++){const At=(Se<<1)+rt%2,Dt=(be<<1)+(rt>>1),gt=re.zoom+1;let ur=re.aabb.quadrant(rt);if(i.terrain){const hr=new l.OverscaledTileID(gt,re.wrap,gt,At,Dt),Xt=i.terrain.getMinMaxElevation(hr),Jt=(u=Xt.minElevation)!==null&&u!==void 0?u:this.elevation,fr=(f=Xt.maxElevation)!==null&&f!==void 0?f:this.elevation;ur=new Nc([ur.min[0],ur.min[1],Jt],[ur.max[0],ur.max[1],fr])}J.push({aabb:ur,zoom:gt,x:At,y:Dt,wrap:re.wrap,fullyVisible:ze})}}return ce.sort((re,Se)=>re.distanceSq-Se.distanceSq).map(re=>re.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=l.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new l.pointGeometry(l.mercatorXfromLng(i.lng)*this.worldSize,l.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new l.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,u){const f=l.MercatorCoordinate.fromLngLat(i),y=(1<<this.tileZoom)*l.EXTENT,v=f.x*y,S=f.y*y,C=Math.floor(v/l.EXTENT),A=Math.floor(S/l.EXTENT),z=new l.OverscaledTileID(this.tileZoom,0,this.tileZoom,C,A);return u.getElevation(z,v%l.EXTENT,S%l.EXTENT,l.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),f=this.getElevation(u,i);if(!(this.elevation-f))return;const y=this.getCameraPosition(),v=l.MercatorCoordinate.fromLngLat(y.lngLat,y.altitude),S=l.MercatorCoordinate.fromLngLat(u,f),C=v.x-S.x,A=v.y-S.y,z=v.z-S.z,L=Math.sqrt(C*C+A*A+z*z),O=this.scaleZoom(this.cameraToCenterDistance/L/this.tileSize);this._elevation=f,this._center=u,this.zoom=O}setLocationAtPoint(i,u){const f=this.pointCoordinate(u),y=this.pointCoordinate(this.centerPoint),v=this.locationCoordinate(i),S=new l.MercatorCoordinate(v.x-(f.x-y.x),v.y-(f.y-y.y));this.center=this.coordinateLocation(S),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return l.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const N=u.pointCoordinate(i);if(N!=null)return N}const f=[i.x,i.y,0,1],y=[i.x,i.y,1,1];l.transformMat4(f,f,this.pixelMatrixInverse),l.transformMat4(y,y,this.pixelMatrixInverse);const v=f[3],S=y[3],C=f[1]/v,A=y[1]/S,z=f[2]/v,L=y[2]/S,O=z===L?0:(0-z)/(L-z);return new l.MercatorCoordinate(l.number(f[0]/v,y[0]/S,O)/this.worldSize,l.number(C,A,O)/this.worldSize)}coordinatePoint(i,u=0,f=this.pixelMatrix){const y=[i.x*this.worldSize,i.y*this.worldSize,u,1];return l.transformMat4(y,y,f),new l.pointGeometry(y[0]/y[3],y[1]/y[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new l.LngLatBounds().extend(this.pointLocation(new l.pointGeometry(0,i))).extend(this.pointLocation(new l.pointGeometry(this.width,i))).extend(this.pointLocation(new l.pointGeometry(this.width,this.height))).extend(this.pointLocation(new l.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new l.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const f=i.key,y=u?this._alignedPosMatrixCache:this._posMatrixCache;if(y[f])return y[f];const v=i.canonical,S=this.worldSize/this.zoomScale(v.z),C=v.x+Math.pow(2,v.z)*i.wrap,A=l.identity(new Float64Array(16));return l.translate(A,A,[C*S,v.y*S,0]),l.scale(A,A,[S/l.EXTENT,S/l.EXTENT,1]),l.multiply(A,u?this.alignedProjMatrix:this.projMatrix,A),y[f]=new Float32Array(A),y[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,f,y,v=-90,S=90,C=-180,A=180;const z=this.size,L=this._unmodified;if(this.latRange){const te=this.latRange;v=l.mercatorYfromLat(te[1])*this.worldSize,S=l.mercatorYfromLat(te[0])*this.worldSize,i=S-v<z.y?z.y/(S-v):0}if(this.lngRange){const te=this.lngRange;C=l.wrap(l.mercatorXfromLng(te[0])*this.worldSize,0,this.worldSize),A=l.wrap(l.mercatorXfromLng(te[1])*this.worldSize,0,this.worldSize),A<C&&(A+=this.worldSize),u=A-C<z.x?z.x/(A-C):0}const O=this.point,N=Math.max(u||0,i||0);if(N)return this.center=this.unproject(new l.pointGeometry(u?(A+C)/2:O.x,i?(S+v)/2:O.y)),this.zoom+=this.scaleZoom(N),this._unmodified=L,void(this._constraining=!1);if(this.latRange){const te=O.y,Y=z.y/2;te-Y<v&&(y=v+Y),te+Y>S&&(y=S-Y)}if(this.lngRange){const te=(C+A)/2,Y=l.wrap(O.x,te-this.worldSize/2,te+this.worldSize/2),J=z.x/2;Y-J<C&&(f=C+J),Y+J>A&&(f=A-J)}f===void 0&&y===void 0||(this.center=this.unproject(new l.pointGeometry(f!==void 0?f:O.x,y!==void 0?y:O.y)).wrap()),this._unmodified=L,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=l.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let y=l.identity(new Float64Array(16));l.scale(y,y,[this.width/2,-this.height/2,1]),l.translate(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=l.identity(new Float64Array(16)),l.scale(y,y,[1,-1,1]),l.translate(y,y,[-1,-1,0]),l.scale(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const v=Math.PI/2+this._pitch,S=this._fov*(.5+i.y/this.height),C=Math.sin(S)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-v-S,.01,Math.PI-.01)),A=this.getHorizon(),z=2*Math.atan(A/this.cameraToCenterDistance)*(.5+i.y/(2*A)),L=Math.sin(z)*this.cameraToSeaLevelDistance/Math.sin(l.clamp(Math.PI-v-z,.01,Math.PI-.01)),O=Math.cos(Math.PI/2-this._pitch)*C+this.cameraToSeaLevelDistance,N=Math.cos(Math.PI/2-this._pitch)*L+this.cameraToSeaLevelDistance,te=1.01*Math.min(O,N),Y=this.height/50;y=new Float64Array(16),l.perspective(y,this._fov,this.width/this.height,Y,te),y[8]=2*-i.x/this.width,y[9]=2*i.y/this.height,l.scale(y,y,[1,-1,1]),l.translate(y,y,[0,0,-this.cameraToCenterDistance]),l.rotateX(y,y,this._pitch),l.rotateZ(y,y,this.angle),l.translate(y,y,[-u,-f,0]),this.mercatorMatrix=l.scale([],y,[this.worldSize,this.worldSize,this.worldSize]),l.scale(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=l.multiply(new Float64Array(16),this.labelPlaneMatrix,y),l.translate(y,y,[0,0,-this.elevation]),this.projMatrix=y,this.invProjMatrix=l.invert([],y),this.pixelMatrix3D=l.multiply(new Float64Array(16),this.labelPlaneMatrix,y);const J=this.width%2/2,ce=this.height%2/2,fe=Math.cos(this.angle),xe=Math.sin(this.angle),re=u-Math.round(u)+fe*J+xe*ce,Se=f-Math.round(f)+fe*ce+xe*J,be=new Float64Array(y);if(l.translate(be,be,[re>.5?re-1:re,Se>.5?Se-1:Se,0]),this.alignedProjMatrix=be,y=l.invert(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new l.pointGeometry(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return l.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new l.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let f=u.x,y=u.y,v=u.x,S=u.y;for(const C of i)f=Math.min(f,C.x),y=Math.min(y,C.y),v=Math.max(v,C.x),S=Math.max(S,C.y);return[new l.pointGeometry(f,y),new l.pointGeometry(v,y),new l.pointGeometry(v,S),new l.pointGeometry(f,S),new l.pointGeometry(f,y)]}}}class Sm{constructor(i){this._hashName=i&&encodeURIComponent(i),l.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,f){let y=!1,v=null;const S=()=>{v=null,y&&(u(),v=setTimeout(S,300),y=!1)};return()=>(y=!0,v||S(),v)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,y=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,y),S=Math.round(u.lng*v)/v,C=Math.round(u.lat*v)/v,A=this._map.getBearing(),z=this._map.getPitch();let L="";if(L+=i?`/${S}/${C}/${f}`:`${f}/${C}/${S}`,(A||z)&&(L+="/"+Math.round(10*A)/10),z&&(L+=`/${Math.round(z)}`),this._hashName){const O=this._hashName;let N=!1;const te=window.location.hash.slice(1).split("&").map(Y=>{const J=Y.split("=")[0];return J===O?(N=!0,`${J}=${L}`):Y}).filter(Y=>Y);return N||te.push(`${O}=${L}`),`#${te.join("&")}`}return`#${L}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(f=>f.split("=")).forEach(f=>{f[0]===this._hashName&&(u=f)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const jc={linearity:.3,easing:l.bezier(0,0,.3,1)},km=l.extend({deceleration:2500,maxSpeed:1400},jc),Tm=l.extend({deceleration:20,maxSpeed:1400},jc),Em=l.extend({deceleration:1e3,maxSpeed:360},jc),Cl=l.extend({deceleration:1e3,maxSpeed:90},jc);class Cm{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:l.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=l.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new l.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:v}of this._inertiaBuffer)u.zoom+=v.zoomDelta||0,u.bearing+=v.bearingDelta||0,u.pitch+=v.pitchDelta||0,v.panDelta&&u.pan._add(v.panDelta),v.around&&(u.around=v.around),v.pinchAround&&(u.pinchAround=v.pinchAround);const f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(u.pan.mag()){const v=Zc(u.pan.mag(),f,l.extend({},km,i||{}));y.offset=u.pan.mult(v.amount/u.pan.mag()),y.center=this._map.transform.center,Gc(y,v)}if(u.zoom){const v=Zc(u.zoom,f,Tm);y.zoom=this._map.transform.zoom+v.amount,Gc(y,v)}if(u.bearing){const v=Zc(u.bearing,f,Em);y.bearing=this._map.transform.bearing+l.clamp(v.amount,-179,179),Gc(y,v)}if(u.pitch){const v=Zc(u.pitch,f,Cl);y.pitch=this._map.transform.pitch+v.amount,Gc(y,v)}if(y.zoom||y.bearing){const v=u.pinchAround===void 0?u.around:u.pinchAround;y.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),l.extend(y,{noMoveStart:!0})}}function Gc(m,i){(!m.duration||m.duration<i.duration)&&(m.duration=i.duration,m.easing=i.easing)}function Zc(m,i,u){const{maxSpeed:f,linearity:y,deceleration:v}=u,S=l.clamp(m*y/(i/1e3),-f,f),C=Math.abs(S)/(v*y);return{easing:u.easing,duration:1e3*C,amount:S*(C/2)}}class zi extends l.Event{constructor(i,u,f,y={}){const v=P.mousePos(u.getCanvasContainer(),f),S=u.unproject(v);super(i,l.extend({point:v,lngLat:S,originalEvent:f},y)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Wc extends l.Event{constructor(i,u,f){const y=i==="touchend"?f.changedTouches:f.touches,v=P.touchPos(u.getCanvasContainer(),y),S=v.map(A=>u.unproject(A)),C=v.reduce((A,z,L,O)=>A.add(z.div(O.length)),new l.pointGeometry(0,0));super(i,{points:v,point:C,lngLats:S,lngLat:u.unproject(C),originalEvent:f}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class Mi extends l.Event{constructor(i,u,f){super(i,{originalEvent:f}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class D_{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new Mi(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new zi(i.type,this._map,i))}mouseup(i){this._map.fire(new zi(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new zi(i.type,this._map,i))}dblclick(i){return this._firePreventable(new zi(i.type,this._map,i))}mouseover(i){this._map.fire(new zi(i.type,this._map,i))}mouseout(i){this._map.fire(new zi(i.type,this._map,i))}touchstart(i){return this._firePreventable(new Wc(i.type,this._map,i))}touchmove(i){this._map.fire(new Wc(i.type,this._map,i))}touchend(i){this._map.fire(new Wc(i.type,this._map,i))}touchcancel(i){this._map.fire(new Wc(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Wa{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new zi(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new zi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new zi(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Am{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(P.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const f=u;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=f,this._box||(this._box=P.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const v=Math.min(y.x,f.x),S=Math.max(y.x,f.x),C=Math.min(y.y,f.y),A=Math.max(y.y,f.y);P.setTransform(this._box,`translate(${v}px,${C}px)`),this._box.style.width=S-v+"px",this._box.style.height=A-C+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const f=this._startPos,y=u;if(this.reset(),P.suppressClick(),f.x!==y.x||f.y!==y.y)return this._map.fire(new l.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:v=>v.fitScreenCoordinates(f,y,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(P.remove(this._box),this._box=null),P.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new l.Event(i,{originalEvent:u}))}}function _a(m,i){if(m.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${i.length}`);const u={};for(let f=0;f<m.length;f++)u[m[f].identifier]=i[f];return u}class Hc{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),f.length===this.numTouches&&(this.centroid=function(y){const v=new l.pointGeometry(0,0);for(const S of y)v._add(S);return v.div(y.length)}(u),this.touches=_a(f,u)))}touchmove(i,u,f){if(this.aborted||!this.centroid)return;const y=_a(f,u);for(const v in this.touches){const S=this.touches[v],C=y[v];(!C||C.dist(S)>30)&&(this.aborted=!0)}}touchend(i,u,f){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class Cd{constructor(i){this.singleTap=new Hc(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,f){this.singleTap.touchstart(i,u,f)}touchmove(i,u,f){this.singleTap.touchmove(i,u,f)}touchend(i,u,f){const y=this.singleTap.touchend(i,u,f);if(y){const v=i.timeStamp-this.lastTime<500,S=!this.lastTap||this.lastTap.dist(y)<30;if(v&&S||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class R_{constructor(){this._zoomIn=new Cd({numTouches:1,numTaps:2}),this._zoomOut=new Cd({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,f){this._zoomIn.touchstart(i,u,f),this._zoomOut.touchstart(i,u,f)}touchmove(i,u,f){this._zoomIn.touchmove(i,u,f),this._zoomOut.touchmove(i,u,f)}touchend(i,u,f){const y=this._zoomIn.touchend(i,u,f),v=this._zoomOut.touchend(i,u,f);return y?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()+1,around:S.unproject(y)},{originalEvent:i})}):v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:S.getZoom()-1,around:S.unproject(v)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const L_={0:1,2:2};class ih{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const f=P.mouseButton(i);this._correctButton(i,f)&&(this._lastPoint=u,this._eventButton=f)}mousemoveWindow(i,u){const f=this._lastPoint;if(f){if(i.preventDefault(),function(y,v){const S=L_[v];return y.buttons===void 0||(y.buttons&S)!==S}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(f)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(f,u)}}mouseupWindow(i){this._lastPoint&&P.mouseButton(i)===this._eventButton&&(this._moved&&P.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class qc extends ih{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class va extends ih{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const f=.8*(u.x-i.x);if(f)return this._active=!0,{bearingDelta:f}}contextmenu(i){i.preventDefault()}}class it extends ih{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const f=-.5*(u.y-i.y);if(f)return this._active=!0,{pitchDelta:f}}contextmenu(i){i.preventDefault()}}class Pm{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new l.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,f){return this._calculateTransform(i,u,f)}touchmove(i,u,f){if(this._map._cooperativeGestures&&(this._minTouches===2&&f.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,f.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(f.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,f)}touchend(i,u,f){this._calculateTransform(i,u,f),this._active&&f.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,f){f.length>0&&(this._active=!0);const y=_a(f,u),v=new l.pointGeometry(0,0),S=new l.pointGeometry(0,0);let C=0;for(const z in y){const L=y[z],O=this._touches[z];O&&(v._add(L),S._add(L.sub(O)),C++,y[z]=L)}if(this._touches=y,C<this._minTouches||!S.mag())return;const A=S.div(C);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(C),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bs{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,f){return{}}touchstart(i,u,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,f){if(!this._firstTwoTouches)return;i.preventDefault();const[y,v]=this._firstTwoTouches,S=Ha(f,u,y),C=Ha(f,u,v);if(!S||!C)return;const A=this._aroundCenter?null:S.add(C).div(2);return this._move([S,C],A,i)}touchend(i,u,f){if(!this._firstTwoTouches)return;const[y,v]=this._firstTwoTouches,S=Ha(f,u,y),C=Ha(f,u,v);S&&C||(this._active&&P.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ha(m,i,u){for(let f=0;f<m.length;f++)if(m[f].identifier===u)return i[f]}function Ad(m,i){return Math.log(m/i)/Math.LN2}class Ye extends Bs{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const f=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Ad(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Ad(this._distance,f),pinchAround:u}}}function oh(m,i){return 180*m.angleWith(i)/Math.PI}class B_ extends Bs{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const f=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:oh(this._vector,f),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,f=oh(i,this._startVector);return Math.abs(f)<u}}function Pd(m){return Math.abs(m.y)>Math.abs(m.x)}class Id extends Bs{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,f){super.touchstart(i,u,f),this._currentTouchCount=f.length}_start(i){this._lastPoints=i,Pd(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,f){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const y=i[0].sub(this._lastPoints[0]),v=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,v,f.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(y.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,f){if(this._valid!==void 0)return this._valid;const y=i.mag()>=2,v=u.mag()>=2;if(!y&&!v)return;if(!y||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;const S=i.y>0==u.y>0;return Pd(i)&&Pd(u)&&S}}const Im={panStep:100,bearingStep:15,pitchStep:10};class zm{constructor(){const i=Im;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,f=0,y=0,v=0,S=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?f=-1:(i.preventDefault(),v=-1);break;case 39:i.shiftKey?f=1:(i.preventDefault(),v=1);break;case 38:i.shiftKey?y=1:(i.preventDefault(),S=-1);break;case 40:i.shiftKey?y=-1:(i.preventDefault(),S=1);break;default:return}return this._rotationDisabled&&(f=0,y=0),{cameraAnimation:C=>{const A=C.getZoom();C.easeTo({duration:300,easeId:"keyboardHandler",easing:F_,zoom:u?Math.round(A)+u*(i.shiftKey?2:1):A,bearing:C.getBearing()+f*this._bearingStep,pitch:C.getPitch()+y*this._pitchStep,offset:[-v*this._panStep,-S*this._panStep],center:C.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function F_(m){return m*(2-m)}const Mm=4.000244140625;class zd{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,l.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const f=l.exported.now(),y=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,u!==0&&u%Mm==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(y*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=P.mousePos(this._el,i);this._around=l.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const C=this._type==="wheel"&&Math.abs(this._delta)>Mm?this._wheelZoomRate:this._defaultZoomRate;let A=2/(1+Math.exp(-Math.abs(this._delta*C)));this._delta<0&&A!==0&&(A=1/A);const z=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(z*A))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,f=this._startZoom,y=this._easing;let v,S=!1;if(this._type==="wheel"&&f&&y){const C=Math.min((l.exported.now()-this._lastWheelEventTime)/200,1),A=y(C);v=l.number(f,u,A),C<1?this._frameId||(this._frameId=!0):S=!0}else v=u,S=!0;return this._active=!0,S&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!S,zoomDelta:v-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=l.ease;if(this._prevEase){const f=this._prevEase,y=(l.exported.now()-f.start)/f.duration,v=f.easing(y+.01)-f.easing(y),S=.27/Math.sqrt(v*v+1e-4)*.01,C=Math.sqrt(.0729-S*S);u=l.bezier(S,C,.25,1)}return this._prevEase={start:l.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class Md{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Dd{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:f.getZoom()+(i.shiftKey?-1:1),around:f.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Rd{constructor(){this._tap=new Cd({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,f){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?f.length>0&&(this._swipePoint=u[0],this._swipeTouch=f[0].identifier):this._tap.touchstart(i,u,f))}touchmove(i,u,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;const y=u[0],v=y.y-this._swipePoint.y;return this._swipePoint=y,i.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(i,u,f)}touchend(i,u,f){this._tapTime?this._swipePoint&&f.length===0&&this.reset():this._tap.touchend(i,u,f)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xi{constructor(i,u,f){this._el=i,this._mousePan=u,this._touchPan=f}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class qa{constructor(i,u,f){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Dm{constructor(i,u,f,y){this._el=i,this._touchZoom=u,this._touchRotate=f,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Al=m=>m.zoom||m.drag||m.pitch||m.rotate;class Ld extends l.Event{}function Xc(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class Rm{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Cm(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),l.bindAll(["handleEvent","handleWindowEvent"],this);const f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,v,S]of this._listeners)P.addEventListener(y,v,y===document?this.handleWindowEvent:this.handleEvent,S)}destroy(){for(const[i,u,f]of this._listeners)P.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(i){const u=this._map,f=u.getCanvasContainer();this._add("mapEvent",new D_(u,i));const y=u.boxZoom=new Am(u,i);this._add("boxZoom",y);const v=new R_,S=new Dd;u.doubleClickZoom=new Md(S,v),this._add("tapZoom",v),this._add("clickZoom",S);const C=new Rd;this._add("tapDragZoom",C);const A=u.touchPitch=new Id(u);this._add("touchPitch",A);const z=new va(i),L=new it(i);u.dragRotate=new qa(i,z,L),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",L,["mouseRotate"]);const O=new qc(i),N=new Pm(i,u);u.dragPan=new xi(f,O,N),this._add("mousePan",O),this._add("touchPan",N,["touchZoom","touchRotate"]);const te=new B_,Y=new Ye;u.touchZoomRotate=new Dm(f,Y,te,C),this._add("touchRotate",te,["touchPan","touchZoom"]),this._add("touchZoom",Y,["touchPan","touchRotate"]);const J=u.scrollZoom=new zd(u,this);this._add("scrollZoom",J,["mousePan"]);const ce=u.keyboard=new zm;this._add("keyboard",ce),this._add("blockableMapEvent",new Wa(u));for(const fe of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[fe]&&u[fe].enable(i[fe])}_add(i,u,f){this._handlers.push({handlerName:i,handler:u,allowed:f}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Al(this._eventsInProgress)||this.isZooming()}_blockedByActive(i,u,f){for(const y in i)if(y!==f&&(!u||u.indexOf(y)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const f of i)this._el.contains(f.target)&&u.push(f);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const f=i.type==="renderFrame"?void 0:i,y={needsRenderFrame:!1},v={},S={},C=i.touches,A=C?this._getMapTouches(C):void 0,z=A?P.touchPos(this._el,A):P.mousePos(this._el,i);for(const{handlerName:N,handler:te,allowed:Y}of this._handlers){if(!te.isEnabled())continue;let J;this._blockedByActive(S,Y,N)?te.reset():te[u||i.type]&&(J=te[u||i.type](i,z,A),this.mergeHandlerResult(y,v,J,N,f),J&&J.needsRenderFrame&&this._triggerRenderFrame()),(J||te.isActive())&&(S[N]=te)}const L={};for(const N in this._previousActiveHandlers)S[N]||(L[N]=f);this._previousActiveHandlers=S,(Object.keys(L).length||Xc(y))&&(this._changes.push([y,v,L]),this._triggerRenderFrame()),(Object.keys(S).length||Xc(y))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:O}=y;O&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],O(this._map))}mergeHandlerResult(i,u,f,y,v){if(!f)return;l.extend(i,f);const S={handlerName:y,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(u.zoom=S),f.panDelta!==void 0&&(u.drag=S),f.pitchDelta!==void 0&&(u.pitch=S),f.bearingDelta!==void 0&&(u.rotate=S)}_applyChanges(){const i={},u={},f={};for(const[y,v,S]of this._changes)y.panDelta&&(i.panDelta=(i.panDelta||new l.pointGeometry(0,0))._add(y.panDelta)),y.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(i.around=y.around),y.pinchAround!==void 0&&(i.pinchAround=y.pinchAround),y.noInertia&&(i.noInertia=y.noInertia),l.extend(u,v),l.extend(f,S);this._updateMapTransform(i,u,f),this._changes=[]}_updateMapTransform(i,u,f){const y=this._map,v=y.transform,S=y.style&&y.style.terrain;if(!(Xc(i)||S&&this._drag))return this._fireEvents(u,f,!0);let{panDelta:C,zoomDelta:A,bearingDelta:z,pitchDelta:L,around:O,pinchAround:N}=i;N!==void 0&&(O=N),y._stop(!0),O=O||y.transform.centerPoint;const te=v.pointLocation(C?O.sub(C):O);z&&(v.bearing+=z),L&&(v.pitch+=L),A&&(v.zoom+=A),S?u.drag&&!this._drag?(this._drag={center:v.centerPoint,lngLat:v.pointLocation(O),point:O,handlerName:u.drag.handlerName},y.fire(new l.Event("freezeElevation",{freeze:!0}))):this._drag&&f[this._drag.handlerName]?(y.fire(new l.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(v.center=v.pointLocation(v.centerPoint.sub(C))):v.setLocationAtPoint(te,O),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,f,!0)}_fireEvents(i,u,f){const y=Al(this._eventsInProgress),v=Al(i),S={};for(const L in i){const{originalEvent:O}=i[L];this._eventsInProgress[L]||(S[`${L}start`]=O),this._eventsInProgress[L]=i[L]}!y&&v&&this._fireEvent("movestart",v.originalEvent);for(const L in S)this._fireEvent(L,S[L]);v&&this._fireEvent("move",v.originalEvent);for(const L in i){const{originalEvent:O}=i[L];this._fireEvent(L,O)}const C={};let A;for(const L in this._eventsInProgress){const{handlerName:O,originalEvent:N}=this._eventsInProgress[L];this._handlersById[O].isActive()||(delete this._eventsInProgress[L],A=u[O]||N,C[`${L}end`]=A)}for(const L in C)this._fireEvent(L,C[L]);const z=Al(this._eventsInProgress);if(f&&(y||v)&&!z){this._updatingCamera=!0;const L=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),O=N=>N!==0&&-this._bearingSnap<N&&N<this._bearingSnap;L?(O(L.bearing||this._map.getBearing())&&(L.bearing=0),this._map.easeTo(L,{originalEvent:A})):(this._map.fire(new l.Event("moveend",{originalEvent:A})),O(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new l.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new Ld("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const eo={extend:(m,...i)=>l.extend(m,...i),run(m){m()},logToElement(m,i=!1,u="log"){const f=window.document.getElementById(u);f&&(i&&(f.innerHTML=""),f.innerHTML+=`<br>${m}`)}};class Lr extends l.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,l.bindAll(["_renderFrameCallback"],this)}getCenter(){return new l.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,f){return i=l.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,l.extend({offset:i},u),f)}panTo(i,u,f){return this.easeTo(l.extend({center:i},u),f)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,f){return this.easeTo(l.extend({zoom:i},u),f)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,f){return this.easeTo(l.extend({bearing:i},u),f)}resetNorth(i,u){return this.rotateTo(0,l.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(l.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=l.LngLatBounds.convert(i);const f=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),f,u)}_cameraForBoxAndBearing(i,u,f,y){const v={top:0,bottom:0,right:0,left:0};if(typeof(y=l.extend({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const be=y.padding;y.padding={top:be,bottom:be,right:be,left:be}}y.padding=l.extend(v,y.padding);const S=this.transform,C=S.padding,A=S.project(l.LngLat.convert(i)),z=S.project(l.LngLat.convert(u)),L=A.rotate(-f*Math.PI/180),O=z.rotate(-f*Math.PI/180),N=new l.pointGeometry(Math.max(L.x,O.x),Math.max(L.y,O.y)),te=new l.pointGeometry(Math.min(L.x,O.x),Math.min(L.y,O.y)),Y=N.sub(te),J=(S.width-(C.left+C.right+y.padding.left+y.padding.right))/Y.x,ce=(S.height-(C.top+C.bottom+y.padding.top+y.padding.bottom))/Y.y;if(ce<0||J<0)return void l.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const fe=Math.min(S.scaleZoom(S.scale*Math.min(J,ce)),y.maxZoom),xe=l.pointGeometry.convert(y.offset),re=new l.pointGeometry((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(f*Math.PI/180),Se=xe.add(re).mult(S.scale/S.zoomScale(fe));return{center:S.unproject(A.add(z).div(2).sub(Se)),zoom:fe,bearing:f}}fitBounds(i,u,f){return this._fitInternal(this.cameraForBounds(i,u),u,f)}fitScreenCoordinates(i,u,f,y,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(l.pointGeometry.convert(i)),this.transform.pointLocation(l.pointGeometry.convert(u)),f,y),y,v)}_fitInternal(i,u,f){return i?(delete(u=l.extend(i,u)).padding,u.linear?this.easeTo(u,f):this.flyTo(u,f)):this}jumpTo(i,u){this.stop();const f=this.transform;let y=!1,v=!1,S=!1;return"zoom"in i&&f.zoom!==+i.zoom&&(y=!0,f.zoom=+i.zoom),i.center!==void 0&&(f.center=l.LngLat.convert(i.center)),"bearing"in i&&f.bearing!==+i.bearing&&(v=!0,f.bearing=+i.bearing),"pitch"in i&&f.pitch!==+i.pitch&&(S=!0,f.pitch=+i.pitch),i.padding==null||f.isPaddingEqual(i.padding)||(f.padding=i.padding),this.fire(new l.Event("movestart",u)).fire(new l.Event("move",u)),y&&this.fire(new l.Event("zoomstart",u)).fire(new l.Event("zoom",u)).fire(new l.Event("zoomend",u)),v&&this.fire(new l.Event("rotatestart",u)).fire(new l.Event("rotate",u)).fire(new l.Event("rotateend",u)),S&&this.fire(new l.Event("pitchstart",u)).fire(new l.Event("pitch",u)).fire(new l.Event("pitchend",u)),this.fire(new l.Event("moveend",u))}calculateCameraOptionsFromTo(i,u,f,y=0){const v=l.MercatorCoordinate.fromLngLat(i,u),S=l.MercatorCoordinate.fromLngLat(f,y),C=S.x-v.x,A=S.y-v.y,z=S.z-v.z,L=Math.hypot(C,A,z);if(L===0)throw new Error("Can't calculate camera options with same From and To");const O=Math.hypot(C,A),N=this.transform.scaleZoom(this.transform.cameraToCenterDistance/L/this.transform.tileSize),te=180*Math.atan2(C,-A)/Math.PI;let Y=180*Math.acos(O/L)/Math.PI;return Y=z<0?90-Y:90+Y,{center:S.toLngLat(),zoom:N,pitch:Y,bearing:te}}easeTo(i,u){this._stop(!1,i.easeId),((i=l.extend({offset:[0,0],duration:500,easing:l.ease},i)).animate===!1||!i.essential&&l.exported.prefersReducedMotion)&&(i.duration=0);const f=this.transform,y=this.getZoom(),v=this.getBearing(),S=this.getPitch(),C=this.getPadding(),A="zoom"in i?+i.zoom:y,z="bearing"in i?this._normalizeBearing(i.bearing,v):v,L="pitch"in i?+i.pitch:S,O="padding"in i?i.padding:f.padding,N=l.pointGeometry.convert(i.offset);let te=f.centerPoint.add(N);const Y=f.pointLocation(te),J=l.LngLat.convert(i.center||Y);this._normalizeCenter(J);const ce=f.project(Y),fe=f.project(J).sub(ce),xe=f.zoomScale(A-y);let re,Se;i.around&&(re=l.LngLat.convert(i.around),Se=f.locationPoint(re));const be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||A!==y,this._rotating=this._rotating||v!==z,this._pitching=this._pitching||L!==S,this._padding=!f.isPaddingEqual(O),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,be),this._ease(ze=>{if(this._zooming&&(f.zoom=l.number(y,A,ze)),this._rotating&&(f.bearing=l.number(v,z,ze)),this._pitching&&(f.pitch=l.number(S,L,ze)),this._padding&&(f.interpolatePadding(C,O,ze),te=f.centerPoint.add(N)),re)f.setLocationAtPoint(re,Se);else{const De=f.zoomScale(f.zoom-y),Oe=A>y?Math.min(2,xe):Math.max(.5,xe),Ae=Math.pow(Oe,1-ze),et=f.unproject(ce.add(fe.mult(ze*Ae)).mult(De));f.setLocationAtPoint(f.renderWorldCopies?et.wrap():et,te)}this._fireMoveEvents(u)},ze=>{this._afterEase(u,ze)},i),this}_prepareEase(i,u,f={}){this._moving=!0,this.fire(new l.Event("freezeElevation",{freeze:!0})),u||f.moving||this.fire(new l.Event("movestart",i)),this._zooming&&!f.zooming&&this.fire(new l.Event("zoomstart",i)),this._rotating&&!f.rotating&&this.fire(new l.Event("rotatestart",i)),this._pitching&&!f.pitching&&this.fire(new l.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new l.Event("move",i)),this._zooming&&this.fire(new l.Event("zoom",i)),this._rotating&&this.fire(new l.Event("rotate",i)),this._pitching&&this.fire(new l.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new l.Event("freezeElevation",{freeze:!1}));const f=this._zooming,y=this._rotating,v=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new l.Event("zoomend",i)),y&&this.fire(new l.Event("rotateend",i)),v&&this.fire(new l.Event("pitchend",i)),this.fire(new l.Event("moveend",i))}flyTo(i,u){if(!i.essential&&l.exported.prefersReducedMotion){const gt=l.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(gt,u)}this.stop(),i=l.extend({offset:[0,0],speed:1.2,curve:1.42,easing:l.ease},i);const f=this.transform,y=this.getZoom(),v=this.getBearing(),S=this.getPitch(),C=this.getPadding(),A="zoom"in i?l.clamp(+i.zoom,f.minZoom,f.maxZoom):y,z="bearing"in i?this._normalizeBearing(i.bearing,v):v,L="pitch"in i?+i.pitch:S,O="padding"in i?i.padding:f.padding,N=f.zoomScale(A-y),te=l.pointGeometry.convert(i.offset);let Y=f.centerPoint.add(te);const J=f.pointLocation(Y),ce=l.LngLat.convert(i.center||J);this._normalizeCenter(ce);const fe=f.project(J),xe=f.project(ce).sub(fe);let re=i.curve;const Se=Math.max(f.width,f.height),be=Se/N,ze=xe.mag();if("minZoom"in i){const gt=l.clamp(Math.min(i.minZoom,y,A),f.minZoom,f.maxZoom),ur=Se/f.zoomScale(gt-y);re=Math.sqrt(ur/ze*2)}const De=re*re;function Oe(gt){const ur=(be*be-Se*Se+(gt?-1:1)*De*De*ze*ze)/(2*(gt?be:Se)*De*ze);return Math.log(Math.sqrt(ur*ur+1)-ur)}function Ae(gt){return(Math.exp(gt)-Math.exp(-gt))/2}function et(gt){return(Math.exp(gt)+Math.exp(-gt))/2}const He=Oe(0);let rt=function(gt){return et(He)/et(He+re*gt)},At=function(gt){return Se*((et(He)*(Ae(ur=He+re*gt)/et(ur))-Ae(He))/De)/ze;var ur},Dt=(Oe(1)-He)/re;if(Math.abs(ze)<1e-6||!isFinite(Dt)){if(Math.abs(Se-be)<1e-6)return this.easeTo(i,u);const gt=be<Se?-1:1;Dt=Math.abs(Math.log(be/Se))/re,At=function(){return 0},rt=function(ur){return Math.exp(gt*re*ur)}}return i.duration="duration"in i?+i.duration:1e3*Dt/("screenSpeed"in i?+i.screenSpeed/re:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=v!==z,this._pitching=L!==S,this._padding=!f.isPaddingEqual(O),this._prepareEase(u,!1),this._ease(gt=>{const ur=gt*Dt,hr=1/rt(ur);f.zoom=gt===1?A:y+f.scaleZoom(hr),this._rotating&&(f.bearing=l.number(v,z,gt)),this._pitching&&(f.pitch=l.number(S,L,gt)),this._padding&&(f.interpolatePadding(C,O,gt),Y=f.centerPoint.add(te));const Xt=gt===1?ce:f.unproject(fe.add(xe.mult(At(ur))).mult(hr));f.setLocationAtPoint(f.renderWorldCopies?Xt.wrap():Xt,Y),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const f=this._onEaseEnd;delete this._onEaseEnd,f.call(this,u)}if(!i){const f=this.handlers;f&&f.stop(!1)}return this}_ease(i,u,f){f.animate===!1||f.duration===0?(i(1),u()):(this._easeStart=l.exported.now(),this._easeOptions=f,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((l.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=l.wrap(i,-180,180);const f=Math.abs(i-u);return Math.abs(i-360-u)<f&&(i-=360),Math.abs(i+360-u)<f&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const f=i.lng-u.center.lng;i.lng+=f>180?-360:f<-180?360:0}}class Kc{constructor(i={}){this.options=i,l.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=P.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){P.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const f=this._map._getUIString(`AttributionControl.${u}`);i.title=f,i.setAttribute("aria-label",f)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const u=this._map.style.sourceCaches;for(const y in u){const v=u[y];if(v.used||v.usedForTerrain){const S=v.getSource();S.attribution&&i.indexOf(S.attribution)<0&&i.push(S.attribution)}}i=i.filter(y=>String(y).trim()),i.sort((y,v)=>y.length-v.length),i=i.filter((y,v)=>{for(let S=v+1;S<i.length;S++)if(i[S].indexOf(y)>=0)return!1;return!0});const f=i.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,i.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class ah{constructor(i={}){this.options=i,l.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=P.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=P.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){P.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class Lm{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,f=u?this._queue.concat(u):this._queue;for(const y of f)if(y.id===i)return void(y.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const f of u)if(!f.cancelled&&(f.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Bm={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Fm={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},$_={showCompass:!0,showZoom:!0,visualizePitch:!1};class Ho{constructor(i,u,f=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new va({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,f&&(this.mousePitch=new it({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),l.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),P.addEventListener(u,"mousedown",this.mousedown),P.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),P.addEventListener(u,"touchmove",this.touchmove),P.addEventListener(u,"touchend",this.touchend),P.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),P.disableDrag()}move(i,u){const f=this.map,y=this.mouseRotate.mousemoveWindow(i,u);if(y&&y.bearingDelta&&f.setBearing(f.getBearing()+y.bearingDelta),this.mousePitch){const v=this.mousePitch.mousemoveWindow(i,u);v&&v.pitchDelta&&f.setPitch(f.getPitch()+v.pitchDelta)}}off(){const i=this.element;P.removeEventListener(i,"mousedown",this.mousedown),P.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),P.removeEventListener(i,"touchmove",this.touchmove),P.removeEventListener(i,"touchend",this.touchend),P.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){P.enableDrag(),P.removeEventListener(window,"mousemove",this.mousemove),P.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(l.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),P.mousePos(this.element,i)),P.addEventListener(window,"mousemove",this.mousemove),P.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,P.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=P.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=P.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function Yc(m,i,u){if(m=new l.LngLat(m.lng,m.lat),i){const f=new l.LngLat(m.lng-360,m.lat),y=new l.LngLat(m.lng+360,m.lat),v=u.locationPoint(m).distSqr(i);u.locationPoint(f).distSqr(i)<v?m=f:u.locationPoint(y).distSqr(i)<v&&(m=y)}for(;Math.abs(m.lng-u.center.lng)>180;){const f=u.locationPoint(m);if(f.x>=0&&f.y>=0&&f.x<=u.width&&f.y<=u.height)break;m.lng>u.center.lng?m.lng-=360:m.lng+=360}return m}const dt={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function bt(m,i,u){const f=m.classList;for(const y in dt)f.remove(`maplibregl-${u}-anchor-${y}`,`mapboxgl-${u}-anchor-${y}`);f.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class Pl extends l.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=l.extend({element:i},u)),l.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=l.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=P.create("div"),this._element.setAttribute("aria-label","Map marker");const f=P.createNS("http://www.w3.org/2000/svg","svg"),y=41,v=27;f.setAttributeNS(null,"display","block"),f.setAttributeNS(null,"height",`${y}px`),f.setAttributeNS(null,"width",`${v}px`),f.setAttributeNS(null,"viewBox",`0 0 ${v} ${y}`);const S=P.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"stroke","none"),S.setAttributeNS(null,"stroke-width","1"),S.setAttributeNS(null,"fill","none"),S.setAttributeNS(null,"fill-rule","evenodd");const C=P.createNS("http://www.w3.org/2000/svg","g");C.setAttributeNS(null,"fill-rule","nonzero");const A=P.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"transform","translate(3.0, 29.0)"),A.setAttributeNS(null,"fill","#000000");const z=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const xe of z){const re=P.createNS("http://www.w3.org/2000/svg","ellipse");re.setAttributeNS(null,"opacity","0.04"),re.setAttributeNS(null,"cx","10.5"),re.setAttributeNS(null,"cy","5.80029008"),re.setAttributeNS(null,"rx",xe.rx),re.setAttributeNS(null,"ry",xe.ry),A.appendChild(re)}const L=P.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const O=P.createNS("http://www.w3.org/2000/svg","path");O.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(O);const N=P.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");const te=P.createNS("http://www.w3.org/2000/svg","path");te.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(te);const Y=P.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Y.setAttributeNS(null,"fill","#FFFFFF");const J=P.createNS("http://www.w3.org/2000/svg","g");J.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ce=P.createNS("http://www.w3.org/2000/svg","circle");ce.setAttributeNS(null,"fill","#000000"),ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"cx","5.5"),ce.setAttributeNS(null,"cy","5.5"),ce.setAttributeNS(null,"r","5.4999962");const fe=P.createNS("http://www.w3.org/2000/svg","circle");fe.setAttributeNS(null,"fill","#FFFFFF"),fe.setAttributeNS(null,"cx","5.5"),fe.setAttributeNS(null,"cy","5.5"),fe.setAttributeNS(null,"r","5.4999962"),J.appendChild(ce),J.appendChild(fe),C.appendChild(A),C.appendChild(L),C.appendChild(N),C.appendChild(Y),C.appendChild(J),f.appendChild(C),f.setAttributeNS(null,"height",y*this._scale+"px"),f.setAttributeNS(null,"width",v*this._scale+"px"),this._element.appendChild(f),this._offset=l.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",f=>{f.preventDefault()}),this._element.addEventListener("mousedown",f=>{f.preventDefault()}),bt(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),P.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=l.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const y=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,f=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&f!==32&&f!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,f=this._element;this._popup&&(u===f||f.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=Yc(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let f="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?f="rotateX(0deg)":this._pitchAlignment==="map"&&(f=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),P.setTransform(this._element,`${dt[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${f} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const y=this._map.unproject(this._pos),v=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=y.distanceTo(this._lngLat)>20*v?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=l.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new l.Event("dragstart"))),this.fire(new l.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new l.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const Bd={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Xa,Mn=0,Ka=!1;const qo={maxWidth:100,unit:"metric"};function $m(m,i,u){const f=u&&u.maxWidth||100,y=m._container.clientHeight/2,v=m.unproject([0,y]),S=m.unproject([f,y]),C=v.distanceTo(S);if(u&&u.unit==="imperial"){const A=3.2808*C;A>5280?Ya(i,f,A/5280,m._getUIString("ScaleControl.Miles")):Ya(i,f,A,m._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?Ya(i,f,C/1852,m._getUIString("ScaleControl.NauticalMiles")):C>=1e3?Ya(i,f,C/1e3,m._getUIString("ScaleControl.Kilometers")):Ya(i,f,C,m._getUIString("ScaleControl.Meters"))}function Ya(m,i,u,f){const y=function(v){const S=Math.pow(10,`${Math.floor(v)}`.length-1);let C=v/S;return C=C>=10?10:C>=5?5:C>=3?3:C>=2?2:C>=1?1:function(A){const z=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*z)/z}(C),S*C}(u);m.style.width=i*(y/u)+"px",m.innerHTML=`${y}&nbsp;${f}`}const qr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},cn=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Fd(m){if(m){if(typeof m=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(m,2)));return{center:new l.pointGeometry(0,0),top:new l.pointGeometry(0,m),"top-left":new l.pointGeometry(i,i),"top-right":new l.pointGeometry(-i,i),bottom:new l.pointGeometry(0,-m),"bottom-left":new l.pointGeometry(i,-i),"bottom-right":new l.pointGeometry(-i,-i),left:new l.pointGeometry(m,0),right:new l.pointGeometry(-m,0)}}if(m instanceof l.pointGeometry||Array.isArray(m)){const i=l.pointGeometry.convert(m);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:l.pointGeometry.convert(m.center||[0,0]),top:l.pointGeometry.convert(m.top||[0,0]),"top-left":l.pointGeometry.convert(m["top-left"]||[0,0]),"top-right":l.pointGeometry.convert(m["top-right"]||[0,0]),bottom:l.pointGeometry.convert(m.bottom||[0,0]),"bottom-left":l.pointGeometry.convert(m["bottom-left"]||[0,0]),"bottom-right":l.pointGeometry.convert(m["bottom-right"]||[0,0]),left:l.pointGeometry.convert(m.left||[0,0]),right:l.pointGeometry.convert(m.right||[0,0])}}return Fd(new l.pointGeometry(0,0))}const Fs={supported:b,setRTLTextPlugin:l.setRTLTextPlugin,getRTLTextPluginStatus:l.getRTLTextPluginStatus,Map:class extends Lr{constructor(m){var i;if(l.PerformanceUtils.mark(l.PerformanceMarkers.create),(m=l.extend({},Fm,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Uc(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),{bearingSnap:m.bearingSnap}),this._interactive=m.interactive,this._cooperativeGestures=m.cooperativeGestures,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._crossSourceCollisions=m.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=m.collectResourceTiming,this._renderTaskQueue=new Lm,this._controls=[],this._mapId=l.uniqueId(),this._locale=l.extend({},Bm,m.locale),this._clickTolerance=m.clickTolerance,this._pixelRatio=(i=m.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new $(m.transformRequest),typeof m.container=="string"){if(this._container=document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(m.maxBounds&&this.setMaxBounds(m.maxBounds),l.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Rm(this,m),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=m.hash&&new Sm(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,l.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localIdeographFontFamily:m.localIdeographFontFamily}),m.attributionControl&&this.addControl(new Kc({customAttribution:m.customAttribution})),m.maplibreLogo&&this.addControl(new ah,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new l.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new l.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new l.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(m,i){if(i===void 0&&(i=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=m.onAdd(this);this._controls.push(m);const f=this._controlPositions[i];return i.indexOf("bottom")!==-1?f.insertBefore(u,f.firstChild):f.appendChild(u),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new l.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(m);return i>-1&&this._controls.splice(i,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,i,u,f){return f==null&&this.style.terrain&&(f=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(m,i,u,f)}resize(m){const i=this._containerDimensions(),u=i[0],f=i[1];this._resizeCanvas(u,f,this.getPixelRatio()),this.transform.resize(u,f),this.painter.resize(u,f,this.getPixelRatio());const y=!this._moving;return y&&(this.stop(),this.fire(new l.Event("movestart",m)).fire(new l.Event("move",m))),this.fire(new l.Event("resize",m)),y&&this.fire(new l.Event("moveend",m)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(m){const[i,u]=this._containerDimensions();this._pixelRatio=m,this._resizeCanvas(i,u,m),this.painter.resize(i,u,m)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(l.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this._update()}project(m){return this.transform.locationPoint(l.LngLat.convert(m),this.style&&this.style.terrain)}unproject(m){return this.transform.pointLocation(l.pointGeometry.convert(m),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(m,i,u){if(m==="mouseenter"||m==="mouseover"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:v=>{const S=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];S.length?f||(f=!0,u.call(this,new zi(m,this,v.originalEvent,{features:S}))):f=!1},mouseout:()=>{f=!1}}}}if(m==="mouseleave"||m==="mouseout"){let f=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{(this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[]).length?f=!0:f&&(f=!1,u.call(this,new zi(m,this,S.originalEvent)))},mouseout:S=>{f&&(f=!1,u.call(this,new zi(m,this,S.originalEvent)))}}}}{const f=y=>{const v=this.getLayer(i)?this.queryRenderedFeatures(y.point,{layers:[i]}):[];v.length&&(y.features=v,u.call(this,y),delete y.features)};return{layer:i,listener:u,delegates:{[m]:f}}}}on(m,i,u){if(u===void 0)return super.on(m,i);const f=this._createDelegatedListener(m,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(f);for(const y in f.delegates)this.on(y,f.delegates[y]);return this}once(m,i,u){if(u===void 0)return super.once(m,i);const f=this._createDelegatedListener(m,i,u);for(const y in f.delegates)this.once(y,f.delegates[y]);return this}off(m,i,u){return u===void 0?super.off(m,i):(this._delegatedListeners&&this._delegatedListeners[m]&&(f=>{const y=this._delegatedListeners[m];for(let v=0;v<y.length;v++){const S=y[v];if(S.layer===i&&S.listener===u){for(const C in S.delegates)this.off(C,S.delegates[C]);return y.splice(v,1),this}}})(),this)}queryRenderedFeatures(m,i){if(!this.style)return[];let u;if(i!==void 0||m===void 0||m instanceof l.pointGeometry||Array.isArray(m)||(i=m,m=void 0),i=i||{},(m=m||[[0,0],[this.transform.width,this.transform.height]])instanceof l.pointGeometry||typeof m[0]=="number")u=[l.pointGeometry.convert(m)];else{const f=l.pointGeometry.convert(m[0]),y=l.pointGeometry.convert(m[1]);u=[f,new l.pointGeometry(y.x,f.y),y,new l.pointGeometry(f.x,y.y),f]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(m,i){return this.style.querySourceFeatures(m,i)}setStyle(m,i){return(i=l.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(m,i))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){const i=this._locale[m];if(i==null)throw new Error(`Missing UI string '${m}'`);return i}_updateStyle(m,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),m?(this.style=new wn(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wn(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,i){if(typeof m=="string"){const u=this._requestManager.transformRequest(m,l.ResourceType.Style);l.getJSON(u,(f,y)=>{f?this.fire(new l.ErrorEvent(f)):y&&this._updateDiff(y,i)})}else typeof m=="object"&&this._updateDiff(m,i)}_updateDiff(m,i){try{this.style.setState(m)&&this._update(!0)}catch(u){l.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(m,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():l.warnOnce("There is no style added to the map.")}addSource(m,i){return this._lazyInitEmptyStyle(),this.style.addSource(m,i),this._update(!0)}isSourceLoaded(m){const i=this.style&&this.style.sourceCaches[m];if(i!==void 0)return i.loaded();this.fire(new l.ErrorEvent(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){return this.style.setTerrain(m),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const m=this.style&&this.style.sourceCaches;for(const i in m){const u=m[i]._tiles;for(const f in u){const y=u[f];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}addSourceType(m,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(m,i,u)}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,i,{pixelRatio:u=1,sdf:f=!1,stretchX:y,stretchY:v,content:S}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||l.isImageBitmap(i)){const{width:C,height:A,data:z}=l.exported.getImageData(i);this.style.addImage(m,{data:new l.RGBAImage({width:C,height:A},z),pixelRatio:u,stretchX:y,stretchY:v,content:S,sdf:f,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:C,height:A,data:z}=i,L=i;this.style.addImage(m,{data:new l.RGBAImage({width:C,height:A},new Uint8Array(z)),pixelRatio:u,stretchX:y,stretchY:v,content:S,sdf:f,version:0,userImage:L}),L.onAdd&&L.onAdd(this,m)}}}updateImage(m,i){const u=this.style.getImage(m);if(!u)return this.fire(new l.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const f=i instanceof HTMLImageElement||l.isImageBitmap(i)?l.exported.getImageData(i):i,{width:y,height:v,data:S}=f;if(y===void 0||v===void 0)return this.fire(new l.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==u.data.width||v!==u.data.height)return this.fire(new l.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const C=!(i instanceof HTMLImageElement||l.isImageBitmap(i));u.data.replace(S,C),this.style.updateImage(m,u)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new l.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,i){l.getImage(this._requestManager.transformRequest(m,l.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(m,i){return this._lazyInitEmptyStyle(),this.style.addLayer(m,i),this._update(!0)}moveLayer(m,i){return this.style.moveLayer(m,i),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,i,u){return this.style.setLayerZoomRange(m,i,u),this._update(!0)}setFilter(m,i,u={}){return this.style.setFilter(m,i,u),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,i,u,f={}){return this.style.setPaintProperty(m,i,u,f),this._update(!0)}getPaintProperty(m,i){return this.style.getPaintProperty(m,i)}setLayoutProperty(m,i,u,f={}){return this.style.setLayoutProperty(m,i,u,f),this._update(!0)}getLayoutProperty(m,i){return this.style.getLayoutProperty(m,i)}setLight(m,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(m,i){return this.style.setFeatureState(m,i),this._update()}removeFeatureState(m,i){return this.style.removeFeatureState(m,i),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,i=0;return this._container&&(m=this._container.clientWidth||400,i=this._container.clientHeight||300),[m,i]}_setupContainer(){const m=this._container;m.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=P.create("div","maplibregl-canvas-container mapboxgl-canvas-container",m);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=P.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const f=this._controlContainer=P.create("div","maplibregl-control-container mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(v=>{y[v]=P.create("div",`maplibregl-ctrl-${v} mapboxgl-ctrl-${v}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const m=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=P.create("div","maplibregl-cooperative-gesture-screen",m);let i="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use  + scroll to zoom the map",i="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",f=>{f.key===i&&(this._metaPress=!0)}),document.addEventListener("keyup",f=>{f.key===i&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",f=>{this._onCooperativeGesture(f,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(m,i,u){this._canvas.width=u*m,this._canvas.height=u*i,this._canvas.style.width=`${m}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const m=l.extend({},b.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);i?(this.painter=new Ed(i,this.transform),l.exported$1.testSupport(i)):this.fire(new l.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new l.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new l.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(m,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){let i,u=0;const f=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,i),u=l.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let y=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const S=this.transform.zoom,C=l.exported.now();this.style.zoomHistory.update(S,C);const A=new l.EvaluationParameters(S,{now:C,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),z=A.crossFadingFactor();z===1&&z===this._crossFadingFactor||(y=!0,this._crossFadingFactor=z),this.style.update(A)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new l.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.load),this.fire(new l.Event("load"))),this.style&&(this.style.hasTransitions()||y)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const S=l.exported.now()-u;f.endQueryEXT(f.TIME_ELAPSED_EXT,i),setTimeout(()=>{const C=f.getQueryObjectEXT(i,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(i),this.fire(new l.Event("gpu-timing-frame",{cpuTime:S,gpuTime:C}))},50)}if(this.listens("gpu-timing-layer")){const S=this.painter.collectGpuTimers();setTimeout(()=>{const C=this.painter.queryGpuTimers(S);this.fire(new l.Event("gpu-timing-layer",{layerTimes:C}))},50)}const v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new l.Event("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,l.PerformanceUtils.mark(l.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),P.remove(this._canvasContainer),P.remove(this._controlContainer),this._cooperativeGestures&&P.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),l.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new l.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=l.exported.frame(m=>{l.PerformanceUtils.frame(m),this._frame=null,this._render(m)}))}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}_setCacheLimits(m,i){l.setCacheLimits(m,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(m){this.options=l.extend({},$_,m),this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(l.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(l.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map.getZoom(),i=m===this._map.getMaxZoom(),u=m===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const m=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=m}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ho(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){P.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,i){const u=P.create("button",m,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(m,i){const u=this._map._getUIString(`NavigationControl.${i}`);m.title=u,m.setAttribute("aria-label",u)}},GeolocateControl:class extends l.Evented{constructor(m){super(),this.options=l.extend({},Bd,m),l.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(m){var i;return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Xa!==void 0?i(Xa):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Xa=u.state!=="denied",i(Xa)}):(Xa=!!window.navigator.geolocation,i(Xa)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),P.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Mn=0,Ka=!1}_isOutOfMapMaxBounds(m){const i=this._map.getMaxBounds(),u=m.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new l.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("geolocate",m)),this._finish()}}_updateCamera(m){const i=new l.LngLat(m.coords.longitude,m.coords.latitude),u=m.coords.accuracy,f=this._map.getBearing(),y=l.extend({bearing:f},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),y,{geolocateSource:!0})}_updateMarker(m){if(m){const i=new l.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map._container.clientHeight/2,i=this._map.unproject([0,m]),u=this._map.unproject([1,m]),f=i.distanceTo(u),y=Math.ceil(2*this._accuracy/f);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&Ka)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new l.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=P.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){l.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new Pl(this._dotElement),this._circleElement=P.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Pl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new l.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return l.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new l.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Mn--,Ka=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new l.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new l.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Mn++,Mn>1?(m={maximumAge:6e5,timeout:0},Ka=!0):(m=this.options.positionOptions,Ka=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Kc,LogoControl:ah,ScaleControl:class{constructor(m){this.options=l.extend({},qo,m),l.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){$m(this._map,this._container,this.options)}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){P.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(m){this.options.unit=m,$m(this._map,this._container,this.options)}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:l.warnOnce("Full screen control 'container' must be a DOM element.")),l.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",l.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){P.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=P.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(m){this.options=m,l.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(m){return this._map=m,this._container=P.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=P.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),P.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){P.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends l.Evented{constructor(m){super(),this.options=l.extend(Object.create(qr),m),l.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new l.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&P.remove(this._content),this._container&&(P.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new l.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=l.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){const i=document.createDocumentFragment(),u=document.createElement("body");let f;for(u.innerHTML=m;f=u.firstChild,f;)i.appendChild(f);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=P.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){this._container&&this._container.classList.add(m)}removeClassName(m){this._container&&this._container.classList.remove(m)}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}_createCloseButton(){this.options.closeButton&&(this._closeButton=P.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(m){this._update(m.point)}_onMouseMove(m){this._update(m.point)}_onDrag(m){this._update(m.point)}_update(m){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=P.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=P.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(v=>this._container.classList.add(v)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Yc(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!m))return;const i=this._pos=this._trackPointer&&m?m:this._map.project(this._lngLat);let u=this.options.anchor;const f=Fd(this.options.offset);if(!u){const v=this._container.offsetWidth,S=this._container.offsetHeight;let C;C=i.y+f.bottom.y<S?["top"]:i.y>this._map.transform.height-S?["bottom"]:[],i.x<v/2?C.push("left"):i.x>this._map.transform.width-v/2&&C.push("right"),u=C.length===0?"bottom":C.join("-")}const y=i.add(f[u]).round();P.setTransform(this._container,`${dt[u]} translate(${y.x}px,${y.y}px)`),bt(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(cn);m&&m.focus()}_onClose(){this.remove()}},Marker:Pl,Style:wn,LngLat:l.LngLat,LngLatBounds:l.LngLatBounds,Point:l.pointGeometry,MercatorCoordinate:l.MercatorCoordinate,Evented:l.Evented,AJAXError:l.AJAXError,config:l.config,CanvasSource:Tt,GeoJSONSource:It,ImageSource:_t,RasterDEMTileSource:ut,RasterTileSource:Bt,VectorTileSource:Er,VideoSource:wt,prewarm:function(){La().acquire(Qn)},clearPrewarmedResources:function(){const m=Zo;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Qn),Zo=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return bn.workerCount},set workerCount(m){bn.workerCount=m},get maxParallelImageRequests(){return l.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){l.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){l.clearTileCache(m)},workerUrl:"",addProtocol(m,i){l.config.REGISTERED_PROTOCOLS[m]=i},removeProtocol(m){delete l.config.REGISTERED_PROTOCOLS[m]}};return eo.extend(Fs,{isSafari:l.isSafari,getPerformanceMetrics:l.PerformanceUtils.getPerformanceMetrics}),Fs});var p=c;return p})})(nH);const Fg=xb;(function(e){if(e.TextEncoder&&e.TextDecoder)return!1;function t(o="utf-8"){if(o!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${o}') is invalid.`)}Object.defineProperty(t.prototype,"encoding",{value:"utf-8"}),t.prototype.encode=function(o,c={stream:!1}){if(c.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let h=0;const p=o.length;let l=0,b=Math.max(32,p+(p>>1)+7),w=new Uint8Array(b>>3<<3);for(;h<p;){let T=o.charCodeAt(h++);if(T>=55296&&T<=56319){if(h<p){const D=o.charCodeAt(h);(D&64512)===56320&&(++h,T=((T&1023)<<10)+(D&1023)+65536)}if(T>=55296&&T<=56319)continue}if(l+4>w.length){b+=8,b*=1+h/o.length*2,b=b>>3<<3;const D=new Uint8Array(b);D.set(w),w=D}if(T&4294967168)if(!(T&4294965248))w[l++]=T>>6&31|192;else if(!(T&4294901760))w[l++]=T>>12&15|224,w[l++]=T>>6&63|128;else if(!(T&4292870144))w[l++]=T>>18&7|240,w[l++]=T>>12&63|128,w[l++]=T>>6&63|128;else continue;else{w[l++]=T;continue}w[l++]=T&63|128}return w.slice(0,l)};function r(o="utf-8",c={fatal:!1}){if(o!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${o}') is invalid.`);if(c.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(r.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(r.prototype,"fatal",{value:!1}),Object.defineProperty(r.prototype,"ignoreBOM",{value:!1}),r.prototype.decode=function(o,c={stream:!1}){if(c.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const h=new Uint8Array(o);let p=0;const l=h.length,b=[];for(;p<l;){const w=h[p++];if(w===0)break;if(!(w&128))b.push(w);else if((w&224)===192){const T=h[p++]&63;b.push((w&31)<<6|T)}else if((w&240)===224){const T=h[p++]&63,D=h[p++]&63;b.push((w&31)<<12|T<<6|D)}else if((w&248)===240){const T=h[p++]&63,D=h[p++]&63,P=h[p++]&63;let $=(w&7)<<18|T<<12|D<<6|P;$>65535&&($-=65536,b.push($>>>10&1023|55296),$=56320|$&1023),b.push($)}}return String.fromCharCode.apply(null,b)},e.TextEncoder=t,e.TextDecoder=r})(typeof window<"u"?window:typeof self<"u"?self:globalThis);function $C(e,t="utf8"){return new TextDecoder(t).decode(e)}const iH=new TextEncoder;function oH(e){return iH.encode(e)}const aH=1024*8,sH=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),Tv={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class m0{constructor(t=aH,r={}){let o=!1;typeof t=="number"?t=new ArrayBuffer(t):(o=!0,this.lastWrittenByte=t.byteLength);const c=r.offset?r.offset>>>0:0,h=t.byteLength-c;let p=c;(ArrayBuffer.isView(t)||t instanceof m0)&&(t.byteLength!==t.buffer.byteLength&&(p=t.byteOffset+c),t=t.buffer),o?this.lastWrittenByte=h:this.lastWrittenByte=0,this.buffer=t,this.length=h,this.byteLength=h,this.byteOffset=p,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,p,h),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const o=(this.offset+t)*2,c=new Uint8Array(o);c.set(new Uint8Array(this.buffer)),this.buffer=c.buffer,this.length=this.byteLength=o,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const o=Tv[r].BYTES_PER_ELEMENT*t,c=this.byteOffset+this.offset,h=this.buffer.slice(c,c+o);if(this.littleEndian===sH&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(c,c+o));l.reverse();const b=new Tv[r](l.buffer);return this.offset+=o,b.reverse(),b}const p=new Tv[r](h);return this.offset+=o,p}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let o=0;o<t;o++)r+=this.readChar();return r}readUtf8(t=1){return $C(this.readBytes(t))}decodeText(t=1,r="utf-8"){return $C(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(oH(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */const lH=4,OC=0,VC=1,cH=2;function md(e){let t=e.length;for(;--t>=0;)e[t]=0}const uH=0,JI=1,hH=2,dH=3,fH=258,T2=29,cm=256,Lp=cm+1+T2,Yh=30,E2=19,QI=2*Lp+1,vu=15,Ev=16,pH=7,C2=256,ez=16,tz=17,rz=18,bb=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),my=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),mH=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),nz=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gH=512,Js=new Array((Lp+2)*2);md(Js);const ep=new Array(Yh*2);md(ep);const Bp=new Array(gH);md(Bp);const Fp=new Array(fH-dH+1);md(Fp);const A2=new Array(T2);md(A2);const g0=new Array(Yh);md(g0);function Cv(e,t,r,o,c){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=o,this.max_length=c,this.has_stree=e&&e.length}let iz,oz,az;function Av(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}const sz=e=>e<256?Bp[e]:Bp[256+(e>>>7)],$p=(e,t)=>{e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255},co=(e,t,r)=>{e.bi_valid>Ev-r?(e.bi_buf|=t<<e.bi_valid&65535,$p(e,e.bi_buf),e.bi_buf=t>>Ev-e.bi_valid,e.bi_valid+=r-Ev):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},fs=(e,t,r)=>{co(e,r[t*2],r[t*2+1])},lz=(e,t)=>{let r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1},yH=e=>{e.bi_valid===16?($p(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},_H=(e,t)=>{const r=t.dyn_tree,o=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,p=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,b=t.stat_desc.max_length;let w,T,D,P,$,q,ee=0;for(P=0;P<=vu;P++)e.bl_count[P]=0;for(r[e.heap[e.heap_max]*2+1]=0,w=e.heap_max+1;w<QI;w++)T=e.heap[w],P=r[r[T*2+1]*2+1]+1,P>b&&(P=b,ee++),r[T*2+1]=P,!(T>o)&&(e.bl_count[P]++,$=0,T>=l&&($=p[T-l]),q=r[T*2],e.opt_len+=q*(P+$),h&&(e.static_len+=q*(c[T*2+1]+$)));if(ee!==0){do{for(P=b-1;e.bl_count[P]===0;)P--;e.bl_count[P]--,e.bl_count[P+1]+=2,e.bl_count[b]--,ee-=2}while(ee>0);for(P=b;P!==0;P--)for(T=e.bl_count[P];T!==0;)D=e.heap[--w],!(D>o)&&(r[D*2+1]!==P&&(e.opt_len+=(P-r[D*2+1])*r[D*2],r[D*2+1]=P),T--)}},cz=(e,t,r)=>{const o=new Array(vu+1);let c=0,h,p;for(h=1;h<=vu;h++)c=c+r[h-1]<<1,o[h]=c;for(p=0;p<=t;p++){let l=e[p*2+1];l!==0&&(e[p*2]=lz(o[l]++,l))}},vH=()=>{let e,t,r,o,c;const h=new Array(vu+1);for(r=0,o=0;o<T2-1;o++)for(A2[o]=r,e=0;e<1<<bb[o];e++)Fp[r++]=o;for(Fp[r-1]=o,c=0,o=0;o<16;o++)for(g0[o]=c,e=0;e<1<<my[o];e++)Bp[c++]=o;for(c>>=7;o<Yh;o++)for(g0[o]=c<<7,e=0;e<1<<my[o]-7;e++)Bp[256+c++]=o;for(t=0;t<=vu;t++)h[t]=0;for(e=0;e<=143;)Js[e*2+1]=8,e++,h[8]++;for(;e<=255;)Js[e*2+1]=9,e++,h[9]++;for(;e<=279;)Js[e*2+1]=7,e++,h[7]++;for(;e<=287;)Js[e*2+1]=8,e++,h[8]++;for(cz(Js,Lp+1,h),e=0;e<Yh;e++)ep[e*2+1]=5,ep[e*2]=lz(e,5);iz=new Cv(Js,bb,cm+1,Lp,vu),oz=new Cv(ep,my,0,Yh,vu),az=new Cv(new Array(0),mH,0,E2,pH)},uz=e=>{let t;for(t=0;t<Lp;t++)e.dyn_ltree[t*2]=0;for(t=0;t<Yh;t++)e.dyn_dtree[t*2]=0;for(t=0;t<E2;t++)e.bl_tree[t*2]=0;e.dyn_ltree[C2*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},hz=e=>{e.bi_valid>8?$p(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},NC=(e,t,r,o)=>{const c=t*2,h=r*2;return e[c]<e[h]||e[c]===e[h]&&o[t]<=o[r]},Pv=(e,t,r)=>{const o=e.heap[r];let c=r<<1;for(;c<=e.heap_len&&(c<e.heap_len&&NC(t,e.heap[c+1],e.heap[c],e.depth)&&c++,!NC(t,o,e.heap[c],e.depth));)e.heap[r]=e.heap[c],r=c,c<<=1;e.heap[r]=o},UC=(e,t,r)=>{let o,c,h=0,p,l;if(e.sym_next!==0)do o=e.pending_buf[e.sym_buf+h++]&255,o+=(e.pending_buf[e.sym_buf+h++]&255)<<8,c=e.pending_buf[e.sym_buf+h++],o===0?fs(e,c,t):(p=Fp[c],fs(e,p+cm+1,t),l=bb[p],l!==0&&(c-=A2[p],co(e,c,l)),o--,p=sz(o),fs(e,p,r),l=my[p],l!==0&&(o-=g0[p],co(e,o,l)));while(h<e.sym_next);fs(e,C2,t)},wb=(e,t)=>{const r=t.dyn_tree,o=t.stat_desc.static_tree,c=t.stat_desc.has_stree,h=t.stat_desc.elems;let p,l,b=-1,w;for(e.heap_len=0,e.heap_max=QI,p=0;p<h;p++)r[p*2]!==0?(e.heap[++e.heap_len]=b=p,e.depth[p]=0):r[p*2+1]=0;for(;e.heap_len<2;)w=e.heap[++e.heap_len]=b<2?++b:0,r[w*2]=1,e.depth[w]=0,e.opt_len--,c&&(e.static_len-=o[w*2+1]);for(t.max_code=b,p=e.heap_len>>1;p>=1;p--)Pv(e,r,p);w=h;do p=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Pv(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=p,e.heap[--e.heap_max]=l,r[w*2]=r[p*2]+r[l*2],e.depth[w]=(e.depth[p]>=e.depth[l]?e.depth[p]:e.depth[l])+1,r[p*2+1]=r[l*2+1]=w,e.heap[1]=w++,Pv(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],_H(e,t),cz(r,b,e.bl_count)},jC=(e,t,r)=>{let o,c=-1,h,p=t[0*2+1],l=0,b=7,w=4;for(p===0&&(b=138,w=3),t[(r+1)*2+1]=65535,o=0;o<=r;o++)h=p,p=t[(o+1)*2+1],!(++l<b&&h===p)&&(l<w?e.bl_tree[h*2]+=l:h!==0?(h!==c&&e.bl_tree[h*2]++,e.bl_tree[ez*2]++):l<=10?e.bl_tree[tz*2]++:e.bl_tree[rz*2]++,l=0,c=h,p===0?(b=138,w=3):h===p?(b=6,w=3):(b=7,w=4))},GC=(e,t,r)=>{let o,c=-1,h,p=t[0*2+1],l=0,b=7,w=4;for(p===0&&(b=138,w=3),o=0;o<=r;o++)if(h=p,p=t[(o+1)*2+1],!(++l<b&&h===p)){if(l<w)do fs(e,h,e.bl_tree);while(--l!==0);else h!==0?(h!==c&&(fs(e,h,e.bl_tree),l--),fs(e,ez,e.bl_tree),co(e,l-3,2)):l<=10?(fs(e,tz,e.bl_tree),co(e,l-3,3)):(fs(e,rz,e.bl_tree),co(e,l-11,7));l=0,c=h,p===0?(b=138,w=3):h===p?(b=6,w=3):(b=7,w=4)}},xH=e=>{let t;for(jC(e,e.dyn_ltree,e.l_desc.max_code),jC(e,e.dyn_dtree,e.d_desc.max_code),wb(e,e.bl_desc),t=E2-1;t>=3&&e.bl_tree[nz[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t},bH=(e,t,r,o)=>{let c;for(co(e,t-257,5),co(e,r-1,5),co(e,o-4,4),c=0;c<o;c++)co(e,e.bl_tree[nz[c]*2+1],3);GC(e,e.dyn_ltree,t-1),GC(e,e.dyn_dtree,r-1)},wH=e=>{let t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return OC;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return VC;for(r=32;r<cm;r++)if(e.dyn_ltree[r*2]!==0)return VC;return OC};let ZC=!1;const SH=e=>{ZC||(vH(),ZC=!0),e.l_desc=new Av(e.dyn_ltree,iz),e.d_desc=new Av(e.dyn_dtree,oz),e.bl_desc=new Av(e.bl_tree,az),e.bi_buf=0,e.bi_valid=0,uz(e)},dz=(e,t,r,o)=>{co(e,(uH<<1)+(o?1:0),3),hz(e),$p(e,r),$p(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r},kH=e=>{co(e,JI<<1,3),fs(e,C2,Js),yH(e)},TH=(e,t,r,o)=>{let c,h,p=0;e.level>0?(e.strm.data_type===cH&&(e.strm.data_type=wH(e)),wb(e,e.l_desc),wb(e,e.d_desc),p=xH(e),c=e.opt_len+3+7>>>3,h=e.static_len+3+7>>>3,h<=c&&(c=h)):c=h=r+5,r+4<=c&&t!==-1?dz(e,t,r,o):e.strategy===lH||h===c?(co(e,(JI<<1)+(o?1:0),3),UC(e,Js,ep)):(co(e,(hH<<1)+(o?1:0),3),bH(e,e.l_desc.max_code+1,e.d_desc.max_code+1,p+1),UC(e,e.dyn_ltree,e.dyn_dtree)),uz(e),o&&hz(e)},EH=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(Fp[r]+cm+1)*2]++,e.dyn_dtree[sz(t)*2]++),e.sym_next===e.sym_end);var CH=SH,AH=dz,PH=TH,IH=EH,zH=kH,MH={_tr_init:CH,_tr_stored_block:AH,_tr_flush_block:PH,_tr_tally:IH,_tr_align:zH};const DH=(e,t,r,o)=>{let c=e&65535|0,h=e>>>16&65535|0,p=0;for(;r!==0;){p=r>2e3?2e3:r,r-=p;do c=c+t[o++]|0,h=h+c|0;while(--p);c%=65521,h%=65521}return c|h<<16|0};var Op=DH;const RH=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var o=0;o<8;o++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},LH=new Uint32Array(RH()),BH=(e,t,r,o)=>{const c=LH,h=o+r;e^=-1;for(let p=o;p<h;p++)e=e>>>8^c[(e^t[p])&255];return e^-1};var Zn=BH,ld={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},um={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:FH,_tr_stored_block:Sb,_tr_flush_block:$H,_tr_tally:fc,_tr_align:OH}=MH,{Z_NO_FLUSH:pc,Z_PARTIAL_FLUSH:VH,Z_FULL_FLUSH:NH,Z_FINISH:ia,Z_BLOCK:WC,Z_OK:di,Z_STREAM_END:HC,Z_STREAM_ERROR:xs,Z_DATA_ERROR:UH,Z_BUF_ERROR:Iv,Z_DEFAULT_COMPRESSION:jH,Z_FILTERED:GH,Z_HUFFMAN_ONLY:$g,Z_RLE:ZH,Z_FIXED:WH,Z_DEFAULT_STRATEGY:HH,Z_UNKNOWN:qH,Z_DEFLATED:y_}=um,XH=9,KH=15,YH=8,JH=29,QH=256,kb=QH+1+JH,eq=30,tq=19,rq=2*kb+1,nq=15,rr=3,ec=258,bs=ec+rr+1,iq=32,cd=42,P2=57,Tb=69,Eb=73,Cb=91,Ab=103,xu=113,Cf=666,Ui=1,gd=2,Lu=3,yd=4,oq=3,bu=(e,t)=>(e.msg=ld[t],t),qC=e=>e*2-(e>4?9:0),Xl=e=>{let t=e.length;for(;--t>=0;)e[t]=0},aq=e=>{let t,r,o,c=e.w_size;t=e.hash_size,o=t;do r=e.head[--o],e.head[o]=r>=c?r-c:0;while(--t);t=c,o=t;do r=e.prev[--o],e.prev[o]=r>=c?r-c:0;while(--t)};let sq=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,mc=sq;const Ao=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))},Lo=(e,t)=>{$H(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Ao(e.strm)},yr=(e,t)=>{e.pending_buf[e.pending++]=t},yf=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255},Pb=(e,t,r,o)=>{let c=e.avail_in;return c>o&&(c=o),c===0?0:(e.avail_in-=c,t.set(e.input.subarray(e.next_in,e.next_in+c),r),e.state.wrap===1?e.adler=Op(e.adler,t,c,r):e.state.wrap===2&&(e.adler=Zn(e.adler,t,c,r)),e.next_in+=c,e.total_in+=c,c)},fz=(e,t)=>{let r=e.max_chain_length,o=e.strstart,c,h,p=e.prev_length,l=e.nice_match;const b=e.strstart>e.w_size-bs?e.strstart-(e.w_size-bs):0,w=e.window,T=e.w_mask,D=e.prev,P=e.strstart+ec;let $=w[o+p-1],q=w[o+p];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(c=t,!(w[c+p]!==q||w[c+p-1]!==$||w[c]!==w[o]||w[++c]!==w[o+1])){o+=2,c++;do;while(w[++o]===w[++c]&&w[++o]===w[++c]&&w[++o]===w[++c]&&w[++o]===w[++c]&&w[++o]===w[++c]&&w[++o]===w[++c]&&w[++o]===w[++c]&&w[++o]===w[++c]&&o<P);if(h=ec-(P-o),o=P-ec,h>p){if(e.match_start=t,p=h,h>=l)break;$=w[o+p-1],q=w[o+p]}}while((t=D[t&T])>b&&--r!==0);return p<=e.lookahead?p:e.lookahead},ud=e=>{const t=e.w_size;let r,o,c;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-bs)&&(e.window.set(e.window.subarray(t,t+t-o),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),aq(e),o+=t),e.strm.avail_in===0)break;if(r=Pb(e.strm,e.window,e.strstart+e.lookahead,o),e.lookahead+=r,e.lookahead+e.insert>=rr)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=mc(e,e.ins_h,e.window[c+1]);e.insert&&(e.ins_h=mc(e,e.ins_h,e.window[c+rr-1]),e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<rr)););}while(e.lookahead<bs&&e.strm.avail_in!==0)},pz=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o,c,h,p=0,l=e.strm.avail_in;do{if(o=65535,h=e.bi_valid+42>>3,e.strm.avail_out<h||(h=e.strm.avail_out-h,c=e.strstart-e.block_start,o>c+e.strm.avail_in&&(o=c+e.strm.avail_in),o>h&&(o=h),o<r&&(o===0&&t!==ia||t===pc||o!==c+e.strm.avail_in)))break;p=t===ia&&o===c+e.strm.avail_in?1:0,Sb(e,0,0,p),e.pending_buf[e.pending-4]=o,e.pending_buf[e.pending-3]=o>>8,e.pending_buf[e.pending-2]=~o,e.pending_buf[e.pending-1]=~o>>8,Ao(e.strm),c&&(c>o&&(c=o),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+c),e.strm.next_out),e.strm.next_out+=c,e.strm.avail_out-=c,e.strm.total_out+=c,e.block_start+=c,o-=c),o&&(Pb(e.strm,e.strm.output,e.strm.next_out,o),e.strm.next_out+=o,e.strm.avail_out-=o,e.strm.total_out+=o)}while(p===0);return l-=e.strm.avail_in,l&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),p?yd:t!==pc&&t!==ia&&e.strm.avail_in===0&&e.strstart===e.block_start?gd:(h=e.window_size-e.strstart,e.strm.avail_in>h&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,h+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),h>e.strm.avail_in&&(h=e.strm.avail_in),h&&(Pb(e.strm,e.window,e.strstart,h),e.strstart+=h,e.insert+=h>e.w_size-e.insert?e.w_size-e.insert:h),e.high_water<e.strstart&&(e.high_water=e.strstart),h=e.bi_valid+42>>3,h=e.pending_buf_size-h>65535?65535:e.pending_buf_size-h,r=h>e.w_size?e.w_size:h,c=e.strstart-e.block_start,(c>=r||(c||t===ia)&&t!==pc&&e.strm.avail_in===0&&c<=h)&&(o=c>h?h:c,p=t===ia&&e.strm.avail_in===0&&o===c?1:0,Sb(e,e.block_start,o,p),e.block_start+=o,Ao(e.strm)),p?Lu:Ui)},zv=(e,t)=>{let r,o;for(;;){if(e.lookahead<bs){if(ud(e),e.lookahead<bs&&t===pc)return Ui;if(e.lookahead===0)break}if(r=0,e.lookahead>=rr&&(e.ins_h=mc(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-bs&&(e.match_length=fz(e,r)),e.match_length>=rr)if(o=fc(e,e.strstart-e.match_start,e.match_length-rr),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=rr){e.match_length--;do e.strstart++,e.ins_h=mc(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=mc(e,e.ins_h,e.window[e.strstart+1]);else o=fc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(o&&(Lo(e,!1),e.strm.avail_out===0))return Ui}return e.insert=e.strstart<rr-1?e.strstart:rr-1,t===ia?(Lo(e,!0),e.strm.avail_out===0?Lu:yd):e.sym_next&&(Lo(e,!1),e.strm.avail_out===0)?Ui:gd},xh=(e,t)=>{let r,o,c;for(;;){if(e.lookahead<bs){if(ud(e),e.lookahead<bs&&t===pc)return Ui;if(e.lookahead===0)break}if(r=0,e.lookahead>=rr&&(e.ins_h=mc(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=rr-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-bs&&(e.match_length=fz(e,r),e.match_length<=5&&(e.strategy===GH||e.match_length===rr&&e.strstart-e.match_start>4096)&&(e.match_length=rr-1)),e.prev_length>=rr&&e.match_length<=e.prev_length){c=e.strstart+e.lookahead-rr,o=fc(e,e.strstart-1-e.prev_match,e.prev_length-rr),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=c&&(e.ins_h=mc(e,e.ins_h,e.window[e.strstart+rr-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=rr-1,e.strstart++,o&&(Lo(e,!1),e.strm.avail_out===0))return Ui}else if(e.match_available){if(o=fc(e,0,e.window[e.strstart-1]),o&&Lo(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Ui}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(o=fc(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<rr-1?e.strstart:rr-1,t===ia?(Lo(e,!0),e.strm.avail_out===0?Lu:yd):e.sym_next&&(Lo(e,!1),e.strm.avail_out===0)?Ui:gd},lq=(e,t)=>{let r,o,c,h;const p=e.window;for(;;){if(e.lookahead<=ec){if(ud(e),e.lookahead<=ec&&t===pc)return Ui;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=rr&&e.strstart>0&&(c=e.strstart-1,o=p[c],o===p[++c]&&o===p[++c]&&o===p[++c])){h=e.strstart+ec;do;while(o===p[++c]&&o===p[++c]&&o===p[++c]&&o===p[++c]&&o===p[++c]&&o===p[++c]&&o===p[++c]&&o===p[++c]&&c<h);e.match_length=ec-(h-c),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=rr?(r=fc(e,1,e.match_length-rr),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=fc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Lo(e,!1),e.strm.avail_out===0))return Ui}return e.insert=0,t===ia?(Lo(e,!0),e.strm.avail_out===0?Lu:yd):e.sym_next&&(Lo(e,!1),e.strm.avail_out===0)?Ui:gd},cq=(e,t)=>{let r;for(;;){if(e.lookahead===0&&(ud(e),e.lookahead===0)){if(t===pc)return Ui;break}if(e.match_length=0,r=fc(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Lo(e,!1),e.strm.avail_out===0))return Ui}return e.insert=0,t===ia?(Lo(e,!0),e.strm.avail_out===0?Lu:yd):e.sym_next&&(Lo(e,!1),e.strm.avail_out===0)?Ui:gd};function ns(e,t,r,o,c){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=o,this.func=c}const Af=[new ns(0,0,0,0,pz),new ns(4,4,8,4,zv),new ns(4,5,16,8,zv),new ns(4,6,32,32,zv),new ns(4,4,16,16,xh),new ns(8,16,32,32,xh),new ns(8,16,128,128,xh),new ns(8,32,128,256,xh),new ns(32,128,258,1024,xh),new ns(32,258,258,4096,xh)],uq=e=>{e.window_size=2*e.w_size,Xl(e.head),e.max_lazy_match=Af[e.level].max_lazy,e.good_match=Af[e.level].good_length,e.nice_match=Af[e.level].nice_length,e.max_chain_length=Af[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=rr-1,e.match_available=0,e.ins_h=0};function hq(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=y_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(rq*2),this.dyn_dtree=new Uint16Array((2*eq+1)*2),this.bl_tree=new Uint16Array((2*tq+1)*2),Xl(this.dyn_ltree),Xl(this.dyn_dtree),Xl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(nq+1),this.heap=new Uint16Array(2*kb+1),Xl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*kb+1),Xl(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const hm=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==cd&&t.status!==P2&&t.status!==Tb&&t.status!==Eb&&t.status!==Cb&&t.status!==Ab&&t.status!==xu&&t.status!==Cf?1:0},mz=e=>{if(hm(e))return bu(e,xs);e.total_in=e.total_out=0,e.data_type=qH;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap===2?P2:t.wrap?cd:xu,e.adler=t.wrap===2?0:1,t.last_flush=-2,FH(t),di},gz=e=>{const t=mz(e);return t===di&&uq(e.state),t},dq=(e,t)=>hm(e)||e.state.wrap!==2?xs:(e.state.gzhead=t,di),yz=(e,t,r,o,c,h)=>{if(!e)return xs;let p=1;if(t===jH&&(t=6),o<0?(p=0,o=-o):o>15&&(p=2,o-=16),c<1||c>XH||r!==y_||o<8||o>15||t<0||t>9||h<0||h>WH||o===8&&p!==1)return bu(e,xs);o===8&&(o=9);const l=new hq;return e.state=l,l.strm=e,l.status=cd,l.wrap=p,l.gzhead=null,l.w_bits=o,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=c+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+rr-1)/rr),l.window=new Uint8Array(l.w_size*2),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<c+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=(l.lit_bufsize-1)*3,l.level=t,l.strategy=h,l.method=r,gz(e)},fq=(e,t)=>yz(e,t,y_,KH,YH,HH),pq=(e,t)=>{if(hm(e)||t>WC||t<0)return e?bu(e,xs):xs;const r=e.state;if(!e.output||e.avail_in!==0&&!e.input||r.status===Cf&&t!==ia)return bu(e,e.avail_out===0?Iv:xs);const o=r.last_flush;if(r.last_flush=t,r.pending!==0){if(Ao(e),e.avail_out===0)return r.last_flush=-1,di}else if(e.avail_in===0&&qC(t)<=qC(o)&&t!==ia)return bu(e,Iv);if(r.status===Cf&&e.avail_in!==0)return bu(e,Iv);if(r.status===cd&&r.wrap===0&&(r.status=xu),r.status===cd){let c=y_+(r.w_bits-8<<4)<<8,h=-1;if(r.strategy>=$g||r.level<2?h=0:r.level<6?h=1:r.level===6?h=2:h=3,c|=h<<6,r.strstart!==0&&(c|=iq),c+=31-c%31,yf(r,c),r.strstart!==0&&(yf(r,e.adler>>>16),yf(r,e.adler&65535)),e.adler=1,r.status=xu,Ao(e),r.pending!==0)return r.last_flush=-1,di}if(r.status===P2){if(e.adler=0,yr(r,31),yr(r,139),yr(r,8),r.gzhead)yr(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),yr(r,r.gzhead.time&255),yr(r,r.gzhead.time>>8&255),yr(r,r.gzhead.time>>16&255),yr(r,r.gzhead.time>>24&255),yr(r,r.level===9?2:r.strategy>=$g||r.level<2?4:0),yr(r,r.gzhead.os&255),r.gzhead.extra&&r.gzhead.extra.length&&(yr(r,r.gzhead.extra.length&255),yr(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=Zn(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=Tb;else if(yr(r,0),yr(r,0),yr(r,0),yr(r,0),yr(r,0),yr(r,r.level===9?2:r.strategy>=$g||r.level<2?4:0),yr(r,oq),r.status=xu,Ao(e),r.pending!==0)return r.last_flush=-1,di}if(r.status===Tb){if(r.gzhead.extra){let c=r.pending,h=(r.gzhead.extra.length&65535)-r.gzindex;for(;r.pending+h>r.pending_buf_size;){let l=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+l),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>c&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-c,c)),r.gzindex+=l,Ao(e),r.pending!==0)return r.last_flush=-1,di;c=0,h-=l}let p=new Uint8Array(r.gzhead.extra);r.pending_buf.set(p.subarray(r.gzindex,r.gzindex+h),r.pending),r.pending+=h,r.gzhead.hcrc&&r.pending>c&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-c,c)),r.gzindex=0}r.status=Eb}if(r.status===Eb){if(r.gzhead.name){let c=r.pending,h;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>c&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-c,c)),Ao(e),r.pending!==0)return r.last_flush=-1,di;c=0}r.gzindex<r.gzhead.name.length?h=r.gzhead.name.charCodeAt(r.gzindex++)&255:h=0,yr(r,h)}while(h!==0);r.gzhead.hcrc&&r.pending>c&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-c,c)),r.gzindex=0}r.status=Cb}if(r.status===Cb){if(r.gzhead.comment){let c=r.pending,h;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>c&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-c,c)),Ao(e),r.pending!==0)return r.last_flush=-1,di;c=0}r.gzindex<r.gzhead.comment.length?h=r.gzhead.comment.charCodeAt(r.gzindex++)&255:h=0,yr(r,h)}while(h!==0);r.gzhead.hcrc&&r.pending>c&&(e.adler=Zn(e.adler,r.pending_buf,r.pending-c,c))}r.status=Ab}if(r.status===Ab){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(Ao(e),r.pending!==0))return r.last_flush=-1,di;yr(r,e.adler&255),yr(r,e.adler>>8&255),e.adler=0}if(r.status=xu,Ao(e),r.pending!==0)return r.last_flush=-1,di}if(e.avail_in!==0||r.lookahead!==0||t!==pc&&r.status!==Cf){let c=r.level===0?pz(r,t):r.strategy===$g?cq(r,t):r.strategy===ZH?lq(r,t):Af[r.level].func(r,t);if((c===Lu||c===yd)&&(r.status=Cf),c===Ui||c===Lu)return e.avail_out===0&&(r.last_flush=-1),di;if(c===gd&&(t===VH?OH(r):t!==WC&&(Sb(r,0,0,!1),t===NH&&(Xl(r.head),r.lookahead===0&&(r.strstart=0,r.block_start=0,r.insert=0))),Ao(e),e.avail_out===0))return r.last_flush=-1,di}return t!==ia?di:r.wrap<=0?HC:(r.wrap===2?(yr(r,e.adler&255),yr(r,e.adler>>8&255),yr(r,e.adler>>16&255),yr(r,e.adler>>24&255),yr(r,e.total_in&255),yr(r,e.total_in>>8&255),yr(r,e.total_in>>16&255),yr(r,e.total_in>>24&255)):(yf(r,e.adler>>>16),yf(r,e.adler&65535)),Ao(e),r.wrap>0&&(r.wrap=-r.wrap),r.pending!==0?di:HC)},mq=e=>{if(hm(e))return xs;const t=e.state.status;return e.state=null,t===xu?bu(e,UH):di},gq=(e,t)=>{let r=t.length;if(hm(e))return xs;const o=e.state,c=o.wrap;if(c===2||c===1&&o.status!==cd||o.lookahead)return xs;if(c===1&&(e.adler=Op(e.adler,t,r,0)),o.wrap=0,r>=o.w_size){c===0&&(Xl(o.head),o.strstart=0,o.block_start=0,o.insert=0);let b=new Uint8Array(o.w_size);b.set(t.subarray(r-o.w_size,r),0),t=b,r=o.w_size}const h=e.avail_in,p=e.next_in,l=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,ud(o);o.lookahead>=rr;){let b=o.strstart,w=o.lookahead-(rr-1);do o.ins_h=mc(o,o.ins_h,o.window[b+rr-1]),o.prev[b&o.w_mask]=o.head[o.ins_h],o.head[o.ins_h]=b,b++;while(--w);o.strstart=b,o.lookahead=rr-1,ud(o)}return o.strstart+=o.lookahead,o.block_start=o.strstart,o.insert=o.lookahead,o.lookahead=0,o.match_length=o.prev_length=rr-1,o.match_available=0,e.next_in=p,e.input=l,e.avail_in=h,o.wrap=c,di};var yq=fq,_q=yz,vq=gz,xq=mz,bq=dq,wq=pq,Sq=mq,kq=gq,Tq="pako deflate (from Nodeca project)",tp={deflateInit:yq,deflateInit2:_q,deflateReset:vq,deflateResetKeep:xq,deflateSetHeader:bq,deflate:wq,deflateEnd:Sq,deflateSetDictionary:kq,deflateInfo:Tq};const Eq=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Cq=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const o in r)Eq(r,o)&&(e[o]=r[o])}}return e},Aq=e=>{let t=0;for(let o=0,c=e.length;o<c;o++)t+=e[o].length;const r=new Uint8Array(t);for(let o=0,c=0,h=e.length;o<h;o++){let p=e[o];r.set(p,c),c+=p.length}return r},__={assign:Cq,flattenChunks:Aq};let _z=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{_z=!1}const Vp=new Uint8Array(256);for(let e=0;e<256;e++)Vp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Vp[254]=Vp[254]=1;var Pq=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,o,c,h,p=e.length,l=0;for(c=0;c<p;c++)r=e.charCodeAt(c),(r&64512)===55296&&c+1<p&&(o=e.charCodeAt(c+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),c++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),h=0,c=0;h<l;c++)r=e.charCodeAt(c),(r&64512)===55296&&c+1<p&&(o=e.charCodeAt(c+1),(o&64512)===56320&&(r=65536+(r-55296<<10)+(o-56320),c++)),r<128?t[h++]=r:r<2048?(t[h++]=192|r>>>6,t[h++]=128|r&63):r<65536?(t[h++]=224|r>>>12,t[h++]=128|r>>>6&63,t[h++]=128|r&63):(t[h++]=240|r>>>18,t[h++]=128|r>>>12&63,t[h++]=128|r>>>6&63,t[h++]=128|r&63);return t};const Iq=(e,t)=>{if(t<65534&&e.subarray&&_z)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let o=0;o<t;o++)r+=String.fromCharCode(e[o]);return r};var zq=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let o,c;const h=new Array(r*2);for(c=0,o=0;o<r;){let p=e[o++];if(p<128){h[c++]=p;continue}let l=Vp[p];if(l>4){h[c++]=65533,o+=l-1;continue}for(p&=l===2?31:l===3?15:7;l>1&&o<r;)p=p<<6|e[o++]&63,l--;if(l>1){h[c++]=65533;continue}p<65536?h[c++]=p:(p-=65536,h[c++]=55296|p>>10&1023,h[c++]=56320|p&1023)}return Iq(h,c)},Mq=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Vp[e[r]]>t?r:t},Np={string2buf:Pq,buf2string:zq,utf8border:Mq};function Dq(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var vz=Dq;const xz=Object.prototype.toString,{Z_NO_FLUSH:Rq,Z_SYNC_FLUSH:Lq,Z_FULL_FLUSH:Bq,Z_FINISH:Fq,Z_OK:y0,Z_STREAM_END:$q,Z_DEFAULT_COMPRESSION:Oq,Z_DEFAULT_STRATEGY:Vq,Z_DEFLATED:Nq}=um;function dm(e){this.options=__.assign({level:Oq,method:Nq,chunkSize:16384,windowBits:15,memLevel:8,strategy:Vq},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vz,this.strm.avail_out=0;let r=tp.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==y0)throw new Error(ld[r]);if(t.header&&tp.deflateSetHeader(this.strm,t.header),t.dictionary){let o;if(typeof t.dictionary=="string"?o=Np.string2buf(t.dictionary):xz.call(t.dictionary)==="[object ArrayBuffer]"?o=new Uint8Array(t.dictionary):o=t.dictionary,r=tp.deflateSetDictionary(this.strm,o),r!==y0)throw new Error(ld[r]);this._dict_set=!0}}dm.prototype.push=function(e,t){const r=this.strm,o=this.options.chunkSize;let c,h;if(this.ended)return!1;for(t===~~t?h=t:h=t===!0?Fq:Rq,typeof e=="string"?r.input=Np.string2buf(e):xz.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){if(r.avail_out===0&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),(h===Lq||h===Bq)&&r.avail_out<=6){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(c=tp.deflate(r,h),c===$q)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),c=tp.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===y0;if(r.avail_out===0){this.onData(r.output);continue}if(h>0&&r.next_out>0){this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;continue}if(r.avail_in===0)break}return!0};dm.prototype.onData=function(e){this.chunks.push(e)};dm.prototype.onEnd=function(e){e===y0&&(this.result=__.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function I2(e,t){const r=new dm(t);if(r.push(e,!0),r.err)throw r.msg||ld[r.err];return r.result}function Uq(e,t){return t=t||{},t.raw=!0,I2(e,t)}function jq(e,t){return t=t||{},t.gzip=!0,I2(e,t)}var Gq=dm,Zq=I2,Wq=Uq,Hq=jq,qq=um,Xq={Deflate:Gq,deflate:Zq,deflateRaw:Wq,gzip:Hq,constants:qq};const Og=16209,Kq=16191;var Yq=function(t,r){let o,c,h,p,l,b,w,T,D,P,$,q,ee,me,Z,j,H,ie,_e,Le,ve,Pe,Ne,$e;const ct=t.state;o=t.next_in,Ne=t.input,c=o+(t.avail_in-5),h=t.next_out,$e=t.output,p=h-(r-t.avail_out),l=h+(t.avail_out-257),b=ct.dmax,w=ct.wsize,T=ct.whave,D=ct.wnext,P=ct.window,$=ct.hold,q=ct.bits,ee=ct.lencode,me=ct.distcode,Z=(1<<ct.lenbits)-1,j=(1<<ct.distbits)-1;e:do{q<15&&($+=Ne[o++]<<q,q+=8,$+=Ne[o++]<<q,q+=8),H=ee[$&Z];t:for(;;){if(ie=H>>>24,$>>>=ie,q-=ie,ie=H>>>16&255,ie===0)$e[h++]=H&65535;else if(ie&16){_e=H&65535,ie&=15,ie&&(q<ie&&($+=Ne[o++]<<q,q+=8),_e+=$&(1<<ie)-1,$>>>=ie,q-=ie),q<15&&($+=Ne[o++]<<q,q+=8,$+=Ne[o++]<<q,q+=8),H=me[$&j];r:for(;;){if(ie=H>>>24,$>>>=ie,q-=ie,ie=H>>>16&255,ie&16){if(Le=H&65535,ie&=15,q<ie&&($+=Ne[o++]<<q,q+=8,q<ie&&($+=Ne[o++]<<q,q+=8)),Le+=$&(1<<ie)-1,Le>b){t.msg="invalid distance too far back",ct.mode=Og;break e}if($>>>=ie,q-=ie,ie=h-p,Le>ie){if(ie=Le-ie,ie>T&&ct.sane){t.msg="invalid distance too far back",ct.mode=Og;break e}if(ve=0,Pe=P,D===0){if(ve+=w-ie,ie<_e){_e-=ie;do $e[h++]=P[ve++];while(--ie);ve=h-Le,Pe=$e}}else if(D<ie){if(ve+=w+D-ie,ie-=D,ie<_e){_e-=ie;do $e[h++]=P[ve++];while(--ie);if(ve=0,D<_e){ie=D,_e-=ie;do $e[h++]=P[ve++];while(--ie);ve=h-Le,Pe=$e}}}else if(ve+=D-ie,ie<_e){_e-=ie;do $e[h++]=P[ve++];while(--ie);ve=h-Le,Pe=$e}for(;_e>2;)$e[h++]=Pe[ve++],$e[h++]=Pe[ve++],$e[h++]=Pe[ve++],_e-=3;_e&&($e[h++]=Pe[ve++],_e>1&&($e[h++]=Pe[ve++]))}else{ve=h-Le;do $e[h++]=$e[ve++],$e[h++]=$e[ve++],$e[h++]=$e[ve++],_e-=3;while(_e>2);_e&&($e[h++]=$e[ve++],_e>1&&($e[h++]=$e[ve++]))}}else if(ie&64){t.msg="invalid distance code",ct.mode=Og;break e}else{H=me[(H&65535)+($&(1<<ie)-1)];continue r}break}}else if(ie&64)if(ie&32){ct.mode=Kq;break e}else{t.msg="invalid literal/length code",ct.mode=Og;break e}else{H=ee[(H&65535)+($&(1<<ie)-1)];continue t}break}}while(o<c&&h<l);_e=q>>3,o-=_e,q-=_e<<3,$&=(1<<q)-1,t.next_in=o,t.next_out=h,t.avail_in=o<c?5+(c-o):5-(o-c),t.avail_out=h<l?257+(l-h):257-(h-l),ct.hold=$,ct.bits=q};const bh=15,XC=852,KC=592,YC=0,Mv=1,JC=2,Jq=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Qq=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),eX=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tX=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rX=(e,t,r,o,c,h,p,l)=>{const b=l.bits;let w=0,T=0,D=0,P=0,$=0,q=0,ee=0,me=0,Z=0,j=0,H,ie,_e,Le,ve,Pe=null,Ne;const $e=new Uint16Array(bh+1),ct=new Uint16Array(bh+1);let qt=null,Er,Bt,Ft;for(w=0;w<=bh;w++)$e[w]=0;for(T=0;T<o;T++)$e[t[r+T]]++;for($=b,P=bh;P>=1&&$e[P]===0;P--);if($>P&&($=P),P===0)return c[h++]=1<<24|64<<16|0,c[h++]=1<<24|64<<16|0,l.bits=1,0;for(D=1;D<P&&$e[D]===0;D++);for($<D&&($=D),me=1,w=1;w<=bh;w++)if(me<<=1,me-=$e[w],me<0)return-1;if(me>0&&(e===YC||P!==1))return-1;for(ct[1]=0,w=1;w<bh;w++)ct[w+1]=ct[w]+$e[w];for(T=0;T<o;T++)t[r+T]!==0&&(p[ct[t[r+T]]++]=T);if(e===YC?(Pe=qt=p,Ne=20):e===Mv?(Pe=Jq,qt=Qq,Ne=257):(Pe=eX,qt=tX,Ne=0),j=0,T=0,w=D,ve=h,q=$,ee=0,_e=-1,Z=1<<$,Le=Z-1,e===Mv&&Z>XC||e===JC&&Z>KC)return 1;for(;;){Er=w-ee,p[T]+1<Ne?(Bt=0,Ft=p[T]):p[T]>=Ne?(Bt=qt[p[T]-Ne],Ft=Pe[p[T]-Ne]):(Bt=32+64,Ft=0),H=1<<w-ee,ie=1<<q,D=ie;do ie-=H,c[ve+(j>>ee)+ie]=Er<<24|Bt<<16|Ft|0;while(ie!==0);for(H=1<<w-1;j&H;)H>>=1;if(H!==0?(j&=H-1,j+=H):j=0,T++,--$e[w]===0){if(w===P)break;w=t[r+p[T]]}if(w>$&&(j&Le)!==_e){for(ee===0&&(ee=$),ve+=D,q=w-ee,me=1<<q;q+ee<P&&(me-=$e[q+ee],!(me<=0));)q++,me<<=1;if(Z+=1<<q,e===Mv&&Z>XC||e===JC&&Z>KC)return 1;_e=j&Le,c[_e]=$<<24|q<<16|ve-h|0}}return j!==0&&(c[ve+j]=w-ee<<24|64<<16|0),l.bits=$,0};var rp=rX;const nX=0,bz=1,wz=2,{Z_FINISH:QC,Z_BLOCK:iX,Z_TREES:Vg,Z_OK:Bu,Z_STREAM_END:oX,Z_NEED_DICT:aX,Z_STREAM_ERROR:ha,Z_DATA_ERROR:Sz,Z_MEM_ERROR:kz,Z_BUF_ERROR:sX,Z_DEFLATED:e3}=um,v_=16180,t3=16181,r3=16182,n3=16183,i3=16184,o3=16185,a3=16186,s3=16187,l3=16188,c3=16189,_0=16190,qs=16191,Dv=16192,u3=16193,Rv=16194,h3=16195,d3=16196,f3=16197,p3=16198,Ng=16199,Ug=16200,m3=16201,g3=16202,y3=16203,_3=16204,v3=16205,Lv=16206,x3=16207,b3=16208,Kr=16209,Tz=16210,Ez=16211,lX=852,cX=592,uX=15,hX=uX,w3=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function dX(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Nu=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<v_||t.mode>Ez?1:0},Cz=e=>{if(Nu(e))return ha;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=v_,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(lX),t.distcode=t.distdyn=new Int32Array(cX),t.sane=1,t.back=-1,Bu},Az=e=>{if(Nu(e))return ha;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Cz(e)},Pz=(e,t)=>{let r;if(Nu(e))return ha;const o=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?ha:(o.window!==null&&o.wbits!==t&&(o.window=null),o.wrap=r,o.wbits=t,Az(e))},Iz=(e,t)=>{if(!e)return ha;const r=new dX;e.state=r,r.strm=e,r.window=null,r.mode=v_;const o=Pz(e,t);return o!==Bu&&(e.state=null),o},fX=e=>Iz(e,hX);let S3=!0,Bv,Fv;const pX=e=>{if(S3){Bv=new Int32Array(512),Fv=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(rp(bz,e.lens,0,288,Bv,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;rp(wz,e.lens,0,32,Fv,0,e.work,{bits:5}),S3=!1}e.lencode=Bv,e.lenbits=9,e.distcode=Fv,e.distbits=5},zz=(e,t,r,o)=>{let c;const h=e.state;return h.window===null&&(h.wsize=1<<h.wbits,h.wnext=0,h.whave=0,h.window=new Uint8Array(h.wsize)),o>=h.wsize?(h.window.set(t.subarray(r-h.wsize,r),0),h.wnext=0,h.whave=h.wsize):(c=h.wsize-h.wnext,c>o&&(c=o),h.window.set(t.subarray(r-o,r-o+c),h.wnext),o-=c,o?(h.window.set(t.subarray(r-o,r),0),h.wnext=o,h.whave=h.wsize):(h.wnext+=c,h.wnext===h.wsize&&(h.wnext=0),h.whave<h.wsize&&(h.whave+=c))),0},mX=(e,t)=>{let r,o,c,h,p,l,b,w,T,D,P,$,q,ee,me=0,Z,j,H,ie,_e,Le,ve,Pe;const Ne=new Uint8Array(4);let $e,ct;const qt=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Nu(e)||!e.output||!e.input&&e.avail_in!==0)return ha;r=e.state,r.mode===qs&&(r.mode=Dv),p=e.next_out,c=e.output,b=e.avail_out,h=e.next_in,o=e.input,l=e.avail_in,w=r.hold,T=r.bits,D=l,P=b,Pe=Bu;e:for(;;)switch(r.mode){case v_:if(r.wrap===0){r.mode=Dv;break}for(;T<16;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(r.wrap&2&&w===35615){r.wbits===0&&(r.wbits=15),r.check=0,Ne[0]=w&255,Ne[1]=w>>>8&255,r.check=Zn(r.check,Ne,2,0),w=0,T=0,r.mode=t3;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((w&255)<<8)+(w>>8))%31){e.msg="incorrect header check",r.mode=Kr;break}if((w&15)!==e3){e.msg="unknown compression method",r.mode=Kr;break}if(w>>>=4,T-=4,ve=(w&15)+8,r.wbits===0&&(r.wbits=ve),ve>15||ve>r.wbits){e.msg="invalid window size",r.mode=Kr;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=w&512?c3:qs,w=0,T=0;break;case t3:for(;T<16;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(r.flags=w,(r.flags&255)!==e3){e.msg="unknown compression method",r.mode=Kr;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Kr;break}r.head&&(r.head.text=w>>8&1),r.flags&512&&r.wrap&4&&(Ne[0]=w&255,Ne[1]=w>>>8&255,r.check=Zn(r.check,Ne,2,0)),w=0,T=0,r.mode=r3;case r3:for(;T<32;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}r.head&&(r.head.time=w),r.flags&512&&r.wrap&4&&(Ne[0]=w&255,Ne[1]=w>>>8&255,Ne[2]=w>>>16&255,Ne[3]=w>>>24&255,r.check=Zn(r.check,Ne,4,0)),w=0,T=0,r.mode=n3;case n3:for(;T<16;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}r.head&&(r.head.xflags=w&255,r.head.os=w>>8),r.flags&512&&r.wrap&4&&(Ne[0]=w&255,Ne[1]=w>>>8&255,r.check=Zn(r.check,Ne,2,0)),w=0,T=0,r.mode=i3;case i3:if(r.flags&1024){for(;T<16;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}r.length=w,r.head&&(r.head.extra_len=w),r.flags&512&&r.wrap&4&&(Ne[0]=w&255,Ne[1]=w>>>8&255,r.check=Zn(r.check,Ne,2,0)),w=0,T=0}else r.head&&(r.head.extra=null);r.mode=o3;case o3:if(r.flags&1024&&($=r.length,$>l&&($=l),$&&(r.head&&(ve=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(o.subarray(h,h+$),ve)),r.flags&512&&r.wrap&4&&(r.check=Zn(r.check,o,$,h)),l-=$,h+=$,r.length-=$),r.length))break e;r.length=0,r.mode=a3;case a3:if(r.flags&2048){if(l===0)break e;$=0;do ve=o[h+$++],r.head&&ve&&r.length<65536&&(r.head.name+=String.fromCharCode(ve));while(ve&&$<l);if(r.flags&512&&r.wrap&4&&(r.check=Zn(r.check,o,$,h)),l-=$,h+=$,ve)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=s3;case s3:if(r.flags&4096){if(l===0)break e;$=0;do ve=o[h+$++],r.head&&ve&&r.length<65536&&(r.head.comment+=String.fromCharCode(ve));while(ve&&$<l);if(r.flags&512&&r.wrap&4&&(r.check=Zn(r.check,o,$,h)),l-=$,h+=$,ve)break e}else r.head&&(r.head.comment=null);r.mode=l3;case l3:if(r.flags&512){for(;T<16;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(r.wrap&4&&w!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Kr;break}w=0,T=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=qs;break;case c3:for(;T<32;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}e.adler=r.check=w3(w),w=0,T=0,r.mode=_0;case _0:if(r.havedict===0)return e.next_out=p,e.avail_out=b,e.next_in=h,e.avail_in=l,r.hold=w,r.bits=T,aX;e.adler=r.check=1,r.mode=qs;case qs:if(t===iX||t===Vg)break e;case Dv:if(r.last){w>>>=T&7,T-=T&7,r.mode=Lv;break}for(;T<3;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}switch(r.last=w&1,w>>>=1,T-=1,w&3){case 0:r.mode=u3;break;case 1:if(pX(r),r.mode=Ng,t===Vg){w>>>=2,T-=2;break e}break;case 2:r.mode=d3;break;case 3:e.msg="invalid block type",r.mode=Kr}w>>>=2,T-=2;break;case u3:for(w>>>=T&7,T-=T&7;T<32;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if((w&65535)!==(w>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Kr;break}if(r.length=w&65535,w=0,T=0,r.mode=Rv,t===Vg)break e;case Rv:r.mode=h3;case h3:if($=r.length,$){if($>l&&($=l),$>b&&($=b),$===0)break e;c.set(o.subarray(h,h+$),p),l-=$,h+=$,b-=$,p+=$,r.length-=$;break}r.mode=qs;break;case d3:for(;T<14;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(r.nlen=(w&31)+257,w>>>=5,T-=5,r.ndist=(w&31)+1,w>>>=5,T-=5,r.ncode=(w&15)+4,w>>>=4,T-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Kr;break}r.have=0,r.mode=f3;case f3:for(;r.have<r.ncode;){for(;T<3;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}r.lens[qt[r.have++]]=w&7,w>>>=3,T-=3}for(;r.have<19;)r.lens[qt[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,$e={bits:r.lenbits},Pe=rp(nX,r.lens,0,19,r.lencode,0,r.work,$e),r.lenbits=$e.bits,Pe){e.msg="invalid code lengths set",r.mode=Kr;break}r.have=0,r.mode=p3;case p3:for(;r.have<r.nlen+r.ndist;){for(;me=r.lencode[w&(1<<r.lenbits)-1],Z=me>>>24,j=me>>>16&255,H=me&65535,!(Z<=T);){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(H<16)w>>>=Z,T-=Z,r.lens[r.have++]=H;else{if(H===16){for(ct=Z+2;T<ct;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(w>>>=Z,T-=Z,r.have===0){e.msg="invalid bit length repeat",r.mode=Kr;break}ve=r.lens[r.have-1],$=3+(w&3),w>>>=2,T-=2}else if(H===17){for(ct=Z+3;T<ct;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}w>>>=Z,T-=Z,ve=0,$=3+(w&7),w>>>=3,T-=3}else{for(ct=Z+7;T<ct;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}w>>>=Z,T-=Z,ve=0,$=11+(w&127),w>>>=7,T-=7}if(r.have+$>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Kr;break}for(;$--;)r.lens[r.have++]=ve}}if(r.mode===Kr)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Kr;break}if(r.lenbits=9,$e={bits:r.lenbits},Pe=rp(bz,r.lens,0,r.nlen,r.lencode,0,r.work,$e),r.lenbits=$e.bits,Pe){e.msg="invalid literal/lengths set",r.mode=Kr;break}if(r.distbits=6,r.distcode=r.distdyn,$e={bits:r.distbits},Pe=rp(wz,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,$e),r.distbits=$e.bits,Pe){e.msg="invalid distances set",r.mode=Kr;break}if(r.mode=Ng,t===Vg)break e;case Ng:r.mode=Ug;case Ug:if(l>=6&&b>=258){e.next_out=p,e.avail_out=b,e.next_in=h,e.avail_in=l,r.hold=w,r.bits=T,Yq(e,P),p=e.next_out,c=e.output,b=e.avail_out,h=e.next_in,o=e.input,l=e.avail_in,w=r.hold,T=r.bits,r.mode===qs&&(r.back=-1);break}for(r.back=0;me=r.lencode[w&(1<<r.lenbits)-1],Z=me>>>24,j=me>>>16&255,H=me&65535,!(Z<=T);){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(j&&!(j&240)){for(ie=Z,_e=j,Le=H;me=r.lencode[Le+((w&(1<<ie+_e)-1)>>ie)],Z=me>>>24,j=me>>>16&255,H=me&65535,!(ie+Z<=T);){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}w>>>=ie,T-=ie,r.back+=ie}if(w>>>=Z,T-=Z,r.back+=Z,r.length=H,j===0){r.mode=v3;break}if(j&32){r.back=-1,r.mode=qs;break}if(j&64){e.msg="invalid literal/length code",r.mode=Kr;break}r.extra=j&15,r.mode=m3;case m3:if(r.extra){for(ct=r.extra;T<ct;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}r.length+=w&(1<<r.extra)-1,w>>>=r.extra,T-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=g3;case g3:for(;me=r.distcode[w&(1<<r.distbits)-1],Z=me>>>24,j=me>>>16&255,H=me&65535,!(Z<=T);){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(!(j&240)){for(ie=Z,_e=j,Le=H;me=r.distcode[Le+((w&(1<<ie+_e)-1)>>ie)],Z=me>>>24,j=me>>>16&255,H=me&65535,!(ie+Z<=T);){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}w>>>=ie,T-=ie,r.back+=ie}if(w>>>=Z,T-=Z,r.back+=Z,j&64){e.msg="invalid distance code",r.mode=Kr;break}r.offset=H,r.extra=j&15,r.mode=y3;case y3:if(r.extra){for(ct=r.extra;T<ct;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}r.offset+=w&(1<<r.extra)-1,w>>>=r.extra,T-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Kr;break}r.mode=_3;case _3:if(b===0)break e;if($=P-b,r.offset>$){if($=r.offset-$,$>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Kr;break}$>r.wnext?($-=r.wnext,q=r.wsize-$):q=r.wnext-$,$>r.length&&($=r.length),ee=r.window}else ee=c,q=p-r.offset,$=r.length;$>b&&($=b),b-=$,r.length-=$;do c[p++]=ee[q++];while(--$);r.length===0&&(r.mode=Ug);break;case v3:if(b===0)break e;c[p++]=r.length,b--,r.mode=Ug;break;case Lv:if(r.wrap){for(;T<32;){if(l===0)break e;l--,w|=o[h++]<<T,T+=8}if(P-=b,e.total_out+=P,r.total+=P,r.wrap&4&&P&&(e.adler=r.check=r.flags?Zn(r.check,c,P,p-P):Op(r.check,c,P,p-P)),P=b,r.wrap&4&&(r.flags?w:w3(w))!==r.check){e.msg="incorrect data check",r.mode=Kr;break}w=0,T=0}r.mode=x3;case x3:if(r.wrap&&r.flags){for(;T<32;){if(l===0)break e;l--,w+=o[h++]<<T,T+=8}if(r.wrap&4&&w!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Kr;break}w=0,T=0}r.mode=b3;case b3:Pe=oX;break e;case Kr:Pe=Sz;break e;case Tz:return kz;case Ez:default:return ha}return e.next_out=p,e.avail_out=b,e.next_in=h,e.avail_in=l,r.hold=w,r.bits=T,(r.wsize||P!==e.avail_out&&r.mode<Kr&&(r.mode<Lv||t!==QC))&&zz(e,e.output,e.next_out,P-e.avail_out),D-=e.avail_in,P-=e.avail_out,e.total_in+=D,e.total_out+=P,r.total+=P,r.wrap&4&&P&&(e.adler=r.check=r.flags?Zn(r.check,c,P,e.next_out-P):Op(r.check,c,P,e.next_out-P)),e.data_type=r.bits+(r.last?64:0)+(r.mode===qs?128:0)+(r.mode===Ng||r.mode===Rv?256:0),(D===0&&P===0||t===QC)&&Pe===Bu&&(Pe=sX),Pe},gX=e=>{if(Nu(e))return ha;let t=e.state;return t.window&&(t.window=null),e.state=null,Bu},yX=(e,t)=>{if(Nu(e))return ha;const r=e.state;return r.wrap&2?(r.head=t,t.done=!1,Bu):ha},_X=(e,t)=>{const r=t.length;let o,c,h;return Nu(e)||(o=e.state,o.wrap!==0&&o.mode!==_0)?ha:o.mode===_0&&(c=1,c=Op(c,t,r,0),c!==o.check)?Sz:(h=zz(e,t,r,r),h?(o.mode=Tz,kz):(o.havedict=1,Bu))};var vX=Az,xX=Pz,bX=Cz,wX=fX,SX=Iz,kX=mX,TX=gX,EX=yX,CX=_X,AX="pako inflate (from Nodeca project)",Qs={inflateReset:vX,inflateReset2:xX,inflateResetKeep:bX,inflateInit:wX,inflateInit2:SX,inflate:kX,inflateEnd:TX,inflateGetHeader:EX,inflateSetDictionary:CX,inflateInfo:AX};function PX(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var IX=PX;const Mz=Object.prototype.toString,{Z_NO_FLUSH:zX,Z_FINISH:MX,Z_OK:Up,Z_STREAM_END:$v,Z_NEED_DICT:Ov,Z_STREAM_ERROR:DX,Z_DATA_ERROR:k3,Z_MEM_ERROR:RX}=um;function z2(e){this.options=__.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vz,this.strm.avail_out=0;let r=Qs.inflateInit2(this.strm,t.windowBits);if(r!==Up)throw new Error(ld[r]);if(this.header=new IX,Qs.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Np.string2buf(t.dictionary):Mz.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Qs.inflateSetDictionary(this.strm,t.dictionary),r!==Up)))throw new Error(ld[r])}z2.prototype.push=function(e,t){const r=this.strm,o=this.options.chunkSize,c=this.options.dictionary;let h,p,l;if(this.ended)return!1;for(t===~~t?p=t:p=t===!0?MX:zX,Mz.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(o),r.next_out=0,r.avail_out=o),h=Qs.inflate(r,p),h===Ov&&c&&(h=Qs.inflateSetDictionary(r,c),h===Up?h=Qs.inflate(r,p):h===k3&&(h=Ov));r.avail_in>0&&h===$v&&r.state.wrap>0&&e[r.next_in]!==0;)Qs.inflateReset(r),h=Qs.inflate(r,p);switch(h){case DX:case k3:case Ov:case RX:return this.onEnd(h),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||h===$v))if(this.options.to==="string"){let b=Np.utf8border(r.output,r.next_out),w=r.next_out-b,T=Np.buf2string(r.output,b);r.next_out=w,r.avail_out=o-w,w&&r.output.set(r.output.subarray(b,b+w),0),this.onData(T)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(h===Up&&l===0)){if(h===$v)return h=Qs.inflateEnd(this.strm),this.onEnd(h),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};z2.prototype.onData=function(e){this.chunks.push(e)};z2.prototype.onEnd=function(e){e===Up&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=__.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const{Deflate:PJ,deflate:LX,deflateRaw:IJ,gzip:zJ}=Xq;var BX=LX;const FX=[137,80,78,71,13,10,26,10],Dz=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;Dz[e]=t}const T3=4294967295;function $X(e,t,r){let o=e;for(let c=0;c<r;c++)o=Dz[(o^t[c])&255]^o>>>8;return o}function OX(e,t){return($X(T3,e,t)^T3)>>>0}var Kl;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.GREYSCALE=0]="GREYSCALE",e[e.TRUECOLOUR=2]="TRUECOLOUR",e[e.INDEXED_COLOUR=3]="INDEXED_COLOUR",e[e.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",e[e.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(Kl||(Kl={}));var Ib;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.DEFLATE=0]="DEFLATE"})(Ib||(Ib={}));var zb;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.ADAPTIVE=0]="ADAPTIVE"})(zb||(zb={}));var Mb;(function(e){e[e.UNKNOWN=-1]="UNKNOWN",e[e.NO_INTERLACE=0]="NO_INTERLACE",e[e.ADAM7=1]="ADAM7"})(Mb||(Mb={}));const VX=new Uint16Array([255]),NX=new Uint8Array(VX.buffer);NX[0];const UX={level:3};class jX extends m0{constructor(t,r={}){super(),this._colorType=Kl.UNKNOWN,this._zlibOptions=Object.assign({},UX,r.zlib),this._png=this._checkData(t),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(FX)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(Ib.DEFLATE),this.writeByte(zb.ADAPTIVE),this.writeByte(Mb.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(t){this.writeUint32(t.length),this.writeChars("IDAT"),this.writeBytes(t),this.writeCrc(t.length+4)}encodeData(){const{width:t,height:r,channels:o,depth:c,data:h}=this._png,p=o*t,l=new m0().setBigEndian();let b=0;for(let D=0;D<r;D++)if(l.writeByte(0),c===8)b=ZX(h,l,p,b);else if(c===16)b=WX(h,l,p,b);else throw new Error("unreachable");const w=l.toArray(),T=BX(w,this._zlibOptions);this.encodeIDAT(T)}_checkData(t){const{colorType:r,channels:o,depth:c}=GX(t),h={width:E3(t.width,"width"),height:E3(t.height,"height"),channels:o,data:t.data,depth:c,text:{}};this._colorType=r;const p=h.width*h.height*o;if(h.data.length!==p)throw new RangeError(`wrong data size. Found ${h.data.length}, expected ${p}`);return h}writeCrc(t){this.writeUint32(OX(new Uint8Array(this.buffer,this.byteOffset+this.offset-t,t),t))}}function E3(e,t){if(Number.isInteger(e)&&e>0)return e;throw new TypeError(`${t} must be a positive integer`)}function GX(e){const{channels:t=4,depth:r=8}=e;if(t!==4&&t!==3&&t!==2&&t!==1)throw new RangeError(`unsupported number of channels: ${t}`);if(r!==8&&r!==16)throw new RangeError(`unsupported bit depth: ${r}`);const o={channels:t,depth:r,colorType:Kl.UNKNOWN};switch(t){case 4:o.colorType=Kl.TRUECOLOUR_ALPHA;break;case 3:o.colorType=Kl.TRUECOLOUR;break;case 1:o.colorType=Kl.GREYSCALE;break;case 2:o.colorType=Kl.GREYSCALE_ALPHA;break;default:throw new Error("unsupported number of channels")}return o}function ZX(e,t,r,o){for(let c=0;c<r;c++)t.writeByte(e[o++]);return o}function WX(e,t,r,o){for(let c=0;c<r;c++)t.writeUint16(e[o++]);return o}var C3;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(C3||(C3={}));function HX(e,t){return new jX(e,t).encode()}const qX=(e,t,r)=>{let o=(e<<16)+(t<<8)+r,c=0;o<8388608?c=o*.01:o>8388608&&(c=(o-Math.pow(2,24))*.01),o=Math.floor((c+1e4)/.1);const h=(o&16711680)>>16,p=(o&65280)>>8,l=o&255;return[h,p,l]},XX=(e,t={})=>(e("gsidem",(r,o)=>{const c=new Image;return c.crossOrigin="",c.onload=()=>{const h=document.createElement("canvas");h.width=c.width,h.height=c.height;const p=h.getContext("2d",{willReadFrequently:!0});p.drawImage(c,0,0);const l=p.getImageData(0,0,h.width,h.height);for(let w=0;w<l.data.length/4;w++){const T=qX(l.data[w*4],l.data[w*4+1],l.data[w*4+2]);l.data[w*4]=T[0],l.data[w*4+1]=T[1],l.data[w*4+2]=T[2]}const b=HX(l);o(null,b,null,null)},c.src=r.url.replace("gsidem://",""),{cancel:()=>{c.src=""}}}),{type:"raster-dem",tiles:["gsidem://https://cyberjapandata.gsi.go.jp/xyz/dem_png/{z}/{x}/{y}.png"],tileSize:256,minzoom:t.minzoom??1,maxzoom:t.maxzoom??14,attribution:t.attribution??'<a href="https://maps.gsi.go.jp/development/ichiran.html"></a>'});var _d={};/**
 * @license React
 * react-dom-server-legacy.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rz=Me;function Vt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var io=Object.prototype.hasOwnProperty,KX=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A3={},P3={};function Lz(e){return io.call(P3,e)?!0:io.call(A3,e)?!1:KX.test(e)?P3[e]=!0:(A3[e]=!0,!1)}function qi(e,t,r,o,c,h,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=p}var yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){yi[e]=new qi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];yi[t]=new qi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){yi[e]=new qi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){yi[e]=new qi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){yi[e]=new qi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){yi[e]=new qi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){yi[e]=new qi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){yi[e]=new qi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){yi[e]=new qi(e,5,!1,e.toLowerCase(),null,!1,!1)});var M2=/[\-:]([a-z])/g;function D2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(M2,D2);yi[t]=new qi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(M2,D2);yi[t]=new qi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(M2,D2);yi[t]=new qi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){yi[e]=new qi(e,1,!1,e.toLowerCase(),null,!1,!1)});yi.xlinkHref=new qi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){yi[e]=new qi(e,1,!1,e.toLowerCase(),null,!0,!0)});var gy={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},YX=["Webkit","ms","Moz","O"];Object.keys(gy).forEach(function(e){YX.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),gy[t]=gy[e]})});var JX=/["'&<>]/;function Vi(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=JX.exec(e);if(t){var r="",o,c=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==o&&(r+=e.substring(c,o)),c=o+1,r+=t}e=c!==o?r+e.substring(c,o):r}return e}var QX=/([A-Z])/g,eK=/^ms-/,Db=Array.isArray;function Xs(e,t){return{insertionMode:e,selectedValue:t}}function tK(e,t,r){switch(t){case"select":return Xs(1,r.value!=null?r.value:r.defaultValue);case"svg":return Xs(2,null);case"math":return Xs(3,null);case"foreignObject":return Xs(1,null);case"table":return Xs(4,null);case"thead":case"tbody":case"tfoot":return Xs(5,null);case"colgroup":return Xs(7,null);case"tr":return Xs(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Xs(1,null):e}var I3=new Map;function Bz(e,t,r){if(typeof r!="object")throw Error(Vt(62));t=!0;for(var o in r)if(io.call(r,o)){var c=r[o];if(c!=null&&typeof c!="boolean"&&c!==""){if(o.indexOf("--")===0){var h=Vi(o);c=Vi((""+c).trim())}else{h=o;var p=I3.get(h);p!==void 0||(p=Vi(h.replace(QX,"-$1").toLowerCase().replace(eK,"-ms-")),I3.set(h,p)),h=p,c=typeof c=="number"?c===0||io.call(gy,o)?""+c:c+"px":Vi((""+c).trim())}t?(t=!1,e.push(' style="',h,":",c)):e.push(";",h,":",c)}}t||e.push('"')}function Eo(e,t,r,o){switch(r){case"style":Bz(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=yi.hasOwnProperty(r)?yi[r]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=t.attributeName,t.type){case 3:o&&e.push(" ",r,'=""');break;case 4:o===!0?e.push(" ",r,'=""'):o!==!1&&e.push(" ",r,'="',Vi(o),'"');break;case 5:isNaN(o)||e.push(" ",r,'="',Vi(o),'"');break;case 6:!isNaN(o)&&1<=o&&e.push(" ",r,'="',Vi(o),'"');break;default:t.sanitizeURL&&(o=""+o),e.push(" ",r,'="',Vi(o),'"')}}else if(Lz(r)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",r,'="',Vi(o),'"')}}}function yy(e,t,r){if(t!=null){if(r!=null)throw Error(Vt(60));if(typeof t!="object"||!("__html"in t))throw Error(Vt(61));t=t.__html,t!=null&&e.push(""+t)}}function rK(e){var t="";return Rz.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function Vv(e,t,r,o){e.push(is(r));var c=r=null,h;for(h in t)if(io.call(t,h)){var p=t[h];if(p!=null)switch(h){case"children":r=p;break;case"dangerouslySetInnerHTML":c=p;break;default:Eo(e,o,h,p)}}return e.push(">"),yy(e,c,r),typeof r=="string"?(e.push(Vi(r)),null):r}var nK=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,z3=new Map;function is(e){var t=z3.get(e);if(t===void 0){if(!nK.test(e))throw Error(Vt(65,e));t="<"+e,z3.set(e,t)}return t}function iK(e,t,r,o,c){switch(t){case"select":e.push(is("select"));var h=null,p=null;for(T in r)if(io.call(r,T)){var l=r[T];if(l!=null)switch(T){case"children":h=l;break;case"dangerouslySetInnerHTML":p=l;break;case"defaultValue":case"value":break;default:Eo(e,o,T,l)}}return e.push(">"),yy(e,p,h),h;case"option":p=c.selectedValue,e.push(is("option"));var b=l=null,w=null,T=null;for(h in r)if(io.call(r,h)){var D=r[h];if(D!=null)switch(h){case"children":l=D;break;case"selected":w=D;break;case"dangerouslySetInnerHTML":T=D;break;case"value":b=D;default:Eo(e,o,h,D)}}if(p!=null)if(r=b!==null?""+b:rK(l),Db(p)){for(o=0;o<p.length;o++)if(""+p[o]===r){e.push(' selected=""');break}}else""+p===r&&e.push(' selected=""');else w&&e.push(' selected=""');return e.push(">"),yy(e,T,l),l;case"textarea":e.push(is("textarea")),T=p=h=null;for(l in r)if(io.call(r,l)&&(b=r[l],b!=null))switch(l){case"children":T=b;break;case"value":h=b;break;case"defaultValue":p=b;break;case"dangerouslySetInnerHTML":throw Error(Vt(91));default:Eo(e,o,l,b)}if(h===null&&p!==null&&(h=p),e.push(">"),T!=null){if(h!=null)throw Error(Vt(92));if(Db(T)&&1<T.length)throw Error(Vt(93));h=""+T}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h!==null&&e.push(Vi(""+h)),null;case"input":e.push(is("input")),b=T=l=h=null;for(p in r)if(io.call(r,p)&&(w=r[p],w!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(Vt(399,"input"));case"defaultChecked":b=w;break;case"defaultValue":l=w;break;case"checked":T=w;break;case"value":h=w;break;default:Eo(e,o,p,w)}return T!==null?Eo(e,o,"checked",T):b!==null&&Eo(e,o,"checked",b),h!==null?Eo(e,o,"value",h):l!==null&&Eo(e,o,"value",l),e.push("/>"),null;case"menuitem":e.push(is("menuitem"));for(var P in r)if(io.call(r,P)&&(h=r[P],h!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(Vt(400));default:Eo(e,o,P,h)}return e.push(">"),null;case"title":e.push(is("title")),h=null;for(D in r)if(io.call(r,D)&&(p=r[D],p!=null))switch(D){case"children":h=p;break;case"dangerouslySetInnerHTML":throw Error(Vt(434));default:Eo(e,o,D,p)}return e.push(">"),h;case"listing":case"pre":e.push(is(t)),p=h=null;for(b in r)if(io.call(r,b)&&(l=r[b],l!=null))switch(b){case"children":h=l;break;case"dangerouslySetInnerHTML":p=l;break;default:Eo(e,o,b,l)}if(e.push(">"),p!=null){if(h!=null)throw Error(Vt(60));if(typeof p!="object"||!("__html"in p))throw Error(Vt(61));r=p.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(`
`,r):e.push(""+r))}return typeof h=="string"&&h[0]===`
`&&e.push(`
`),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(is(t));for(var $ in r)if(io.call(r,$)&&(h=r[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(Vt(399,t));default:Eo(e,o,$,h)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Vv(e,r,t,o);case"html":return c.insertionMode===0&&e.push("<!DOCTYPE html>"),Vv(e,r,t,o);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return Vv(e,r,t,o);e.push(is(t)),p=h=null;for(w in r)if(io.call(r,w)&&(l=r[w],l!=null))switch(w){case"children":h=l;break;case"dangerouslySetInnerHTML":p=l;break;case"style":Bz(e,o,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Lz(w)&&typeof l!="function"&&typeof l!="symbol"&&e.push(" ",w,'="',Vi(l),'"')}return e.push(">"),yy(e,p,h),h}}function M3(e,t,r){if(e.push('<!--$?--><template id="'),r===null)throw Error(Vt(395));return e.push(r),e.push('"></template>')}function oK(e,t,r,o){switch(r.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=o.toString(16),e.push(t),e.push('">');default:throw Error(Vt(397))}}function aK(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(Vt(397))}}var sK=/[<\u2028\u2029]/g;function Nv(e){return JSON.stringify(e).replace(sK,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function lK(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function D3(e,t,r,o){return r.generateStaticMarkup?(e.push(Vi(t)),!1):(t===""?e=o:(o&&e.push("<!-- -->"),e.push(Vi(t)),e=!0),e)}var np=Object.assign,cK=Symbol.for("react.element"),Fz=Symbol.for("react.portal"),$z=Symbol.for("react.fragment"),Oz=Symbol.for("react.strict_mode"),Vz=Symbol.for("react.profiler"),Nz=Symbol.for("react.provider"),Uz=Symbol.for("react.context"),jz=Symbol.for("react.forward_ref"),Gz=Symbol.for("react.suspense"),Zz=Symbol.for("react.suspense_list"),Wz=Symbol.for("react.memo"),R2=Symbol.for("react.lazy"),uK=Symbol.for("react.scope"),hK=Symbol.for("react.debug_trace_mode"),dK=Symbol.for("react.legacy_hidden"),fK=Symbol.for("react.default_value"),R3=Symbol.iterator;function Rb(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case $z:return"Fragment";case Fz:return"Portal";case Vz:return"Profiler";case Oz:return"StrictMode";case Gz:return"Suspense";case Zz:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Uz:return(e.displayName||"Context")+".Consumer";case Nz:return(e._context.displayName||"Context")+".Provider";case jz:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Wz:return t=e.displayName||null,t!==null?t:Rb(e.type)||"Memo";case R2:t=e._payload,e=e._init;try{return Rb(e(t))}catch{}}return null}var Hz={};function L3(e,t){if(e=e.contextTypes,!e)return Hz;var r={},o;for(o in e)r[o]=t[o];return r}var wu=null;function x_(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(Vt(401))}else{if(r===null)throw Error(Vt(401));x_(e,r)}t.context._currentValue2=t.value}}function qz(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&qz(e)}function Xz(e){var t=e.parent;t!==null&&Xz(t),e.context._currentValue2=e.value}function Kz(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(Vt(402));e.depth===t.depth?x_(e,t):Kz(e,t)}function Yz(e,t){var r=t.parent;if(r===null)throw Error(Vt(402));e.depth===r.depth?x_(e,r):Yz(e,r),t.context._currentValue2=t.value}function v0(e){var t=wu;t!==e&&(t===null?Xz(e):e===null?qz(t):t.depth===e.depth?x_(t,e):t.depth>e.depth?Kz(t,e):Yz(t,e),wu=e)}var B3={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function F3(e,t,r,o){var c=e.state!==void 0?e.state:null;e.updater=B3,e.props=r,e.state=c;var h={queue:[],replace:!1};e._reactInternals=h;var p=t.contextType;if(e.context=typeof p=="object"&&p!==null?p._currentValue2:o,p=t.getDerivedStateFromProps,typeof p=="function"&&(p=p(r,c),c=p==null?c:np({},c,p),e.state=c),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&B3.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,p=h.replace,h.queue=null,h.replace=!1,p&&t.length===1)e.state=t[0];else{for(h=p?t[0]:e.state,c=!0,p=p?1:0;p<t.length;p++){var l=t[p];l=typeof l=="function"?l.call(e,h,r,o):l,l!=null&&(c?(c=!1,h=np({},h,l)):np(h,l))}e.state=h}else h.queue=null}var pK={id:1,overflow:""};function Lb(e,t,r){var o=e.id;e=e.overflow;var c=32-_y(o)-1;o&=~(1<<c),r+=1;var h=32-_y(t)+c;if(30<h){var p=c-c%5;return h=(o&(1<<p)-1).toString(32),o>>=p,c-=p,{id:1<<32-_y(t)+c|r<<c|o,overflow:h+e}}return{id:1<<h|r<<c|o,overflow:e}}var _y=Math.clz32?Math.clz32:yK,mK=Math.log,gK=Math.LN2;function yK(e){return e>>>=0,e===0?32:31-(mK(e)/gK|0)|0}function _K(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vK=typeof Object.is=="function"?Object.is:_K,gl=null,L2=null,vy=null,Or=null,Pf=!1,x0=!1,jp=0,tc=null,b_=0;function hu(){if(gl===null)throw Error(Vt(321));return gl}function $3(){if(0<b_)throw Error(Vt(312));return{memoizedState:null,queue:null,next:null}}function B2(){return Or===null?vy===null?(Pf=!1,vy=Or=$3()):(Pf=!0,Or=vy):Or.next===null?(Pf=!1,Or=Or.next=$3()):(Pf=!0,Or=Or.next),Or}function F2(){L2=gl=null,x0=!1,vy=null,b_=0,Or=tc=null}function Jz(e,t){return typeof t=="function"?t(e):t}function O3(e,t,r){if(gl=hu(),Or=B2(),Pf){var o=Or.queue;if(t=o.dispatch,tc!==null&&(r=tc.get(o),r!==void 0)){tc.delete(o),o=Or.memoizedState;do o=e(o,r.action),r=r.next;while(r!==null);return Or.memoizedState=o,[o,t]}return[Or.memoizedState,t]}return e=e===Jz?typeof t=="function"?t():t:r!==void 0?r(t):t,Or.memoizedState=e,e=Or.queue={last:null,dispatch:null},e=e.dispatch=xK.bind(null,gl,e),[Or.memoizedState,e]}function V3(e,t){if(gl=hu(),Or=B2(),t=t===void 0?null:t,Or!==null){var r=Or.memoizedState;if(r!==null&&t!==null){var o=r[1];e:if(o===null)o=!1;else{for(var c=0;c<o.length&&c<t.length;c++)if(!vK(t[c],o[c])){o=!1;break e}o=!0}if(o)return r[0]}}return e=e(),Or.memoizedState=[e,t],e}function xK(e,t,r){if(25<=b_)throw Error(Vt(301));if(e===gl)if(x0=!0,e={action:r,next:null},tc===null&&(tc=new Map),r=tc.get(t),r===void 0)tc.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function bK(){throw Error(Vt(394))}function jg(){}var N3={readContext:function(e){return e._currentValue2},useContext:function(e){return hu(),e._currentValue2},useMemo:V3,useReducer:O3,useRef:function(e){gl=hu(),Or=B2();var t=Or.memoizedState;return t===null?(e={current:e},Or.memoizedState=e):t},useState:function(e){return O3(Jz,e)},useInsertionEffect:jg,useLayoutEffect:function(){},useCallback:function(e,t){return V3(function(){return e},t)},useImperativeHandle:jg,useEffect:jg,useDebugValue:jg,useDeferredValue:function(e){return hu(),e},useTransition:function(){return hu(),[!1,bK]},useId:function(){var e=L2.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-_y(e)-1)).toString(32)+t;var r=xy;if(r===null)throw Error(Vt(404));return t=jp++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return hu(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(Vt(407));return r()}},xy=null,Uv=Rz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function wK(e){return console.error(e),null}function If(){}function SK(e,t,r,o,c,h,p,l,b){var w=[],T=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:T,pingedTasks:w,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:c===void 0?wK:c,onAllReady:h===void 0?If:h,onShellReady:p===void 0?If:p,onShellError:l===void 0?If:l,onFatalError:b===void 0?If:b},r=b0(t,0,null,r,!1,!1),r.parentFlushed=!0,e=$2(t,e,null,r,T,Hz,null,pK),w.push(e),t}function $2(e,t,r,o,c,h,p,l){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var b={node:t,ping:function(){var w=e.pingedTasks;w.push(b),w.length===1&&t6(e)},blockedBoundary:r,blockedSegment:o,abortSet:c,legacyContext:h,context:p,treeContext:l};return c.add(b),b}function b0(e,t,r,o,c,h){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:r,lastPushedText:c,textEmbedded:h}}function Gp(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function w0(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function U3(e,t,r,o,c){for(gl={},L2=t,jp=0,e=r(o,c);x0;)x0=!1,jp=0,b_+=1,Or=null,e=r(o,c);return F2(),e}function j3(e,t,r,o){var c=r.render(),h=o.childContextTypes;if(h!=null){var p=t.legacyContext;if(typeof r.getChildContext!="function")o=p;else{r=r.getChildContext();for(var l in r)if(!(l in h))throw Error(Vt(108,Rb(o)||"Unknown",l));o=np({},p,r)}t.legacyContext=o,Io(e,t,c),t.legacyContext=p}else Io(e,t,c)}function G3(e,t){if(e&&e.defaultProps){t=np({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bb(e,t,r,o,c){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){c=L3(r,t.legacyContext);var h=r.contextType;h=new r(o,typeof h=="object"&&h!==null?h._currentValue2:c),F3(h,r,o,c),j3(e,t,h,r)}else{h=L3(r,t.legacyContext),c=U3(e,t,r,o,h);var p=jp!==0;if(typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0)F3(c,r,o,h),j3(e,t,c,r);else if(p){o=t.treeContext,t.treeContext=Lb(o,1,0);try{Io(e,t,c)}finally{t.treeContext=o}}else Io(e,t,c)}else if(typeof r=="string"){switch(c=t.blockedSegment,h=iK(c.chunks,r,o,e.responseState,c.formatContext),c.lastPushedText=!1,p=c.formatContext,c.formatContext=tK(p,r,o),Fb(e,t,h),c.formatContext=p,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:c.chunks.push("</",r,">")}c.lastPushedText=!1}else{switch(r){case dK:case hK:case Oz:case Vz:case $z:Io(e,t,o.children);return;case Zz:Io(e,t,o.children);return;case uK:throw Error(Vt(343));case Gz:e:{r=t.blockedBoundary,c=t.blockedSegment,h=o.fallback,o=o.children,p=new Set;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:p,errorDigest:null},b=b0(e,c.chunks.length,l,c.formatContext,!1,!1);c.children.push(b),c.lastPushedText=!1;var w=b0(e,0,null,c.formatContext,!1,!1);w.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=w;try{if(Fb(e,t,o),e.responseState.generateStaticMarkup||w.lastPushedText&&w.textEmbedded&&w.chunks.push("<!-- -->"),w.status=1,S0(l,w),l.pendingTasks===0)break e}catch(T){w.status=4,l.forceClientRender=!0,l.errorDigest=Gp(e,T)}finally{t.blockedBoundary=r,t.blockedSegment=c}t=$2(e,h,r,b,p,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case jz:if(o=U3(e,t,r.render,o,c),jp!==0){r=t.treeContext,t.treeContext=Lb(r,1,0);try{Io(e,t,o)}finally{t.treeContext=r}}else Io(e,t,o);return;case Wz:r=r.type,o=G3(r,o),Bb(e,t,r,o,c);return;case Nz:if(c=o.children,r=r._context,o=o.value,h=r._currentValue2,r._currentValue2=o,p=wu,wu=o={parent:p,depth:p===null?0:p.depth+1,context:r,parentValue:h,value:o},t.context=o,Io(e,t,c),e=wu,e===null)throw Error(Vt(403));o=e.parentValue,e.context._currentValue2=o===fK?e.context._defaultValue:o,e=wu=e.parent,t.context=e;return;case Uz:o=o.children,o=o(r._currentValue2),Io(e,t,o);return;case R2:c=r._init,r=c(r._payload),o=G3(r,o),Bb(e,t,r,o,void 0);return}throw Error(Vt(130,r==null?r:typeof r,""))}}function Io(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case cK:Bb(e,t,r.type,r.props,r.ref);return;case Fz:throw Error(Vt(257));case R2:var o=r._init;r=o(r._payload),Io(e,t,r);return}if(Db(r)){Z3(e,t,r);return}if(r===null||typeof r!="object"?o=null:(o=R3&&r[R3]||r["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(r))){if(r=o.next(),!r.done){var c=[];do c.push(r.value),r=o.next();while(!r.done);Z3(e,t,c)}return}throw e=Object.prototype.toString.call(r),Error(Vt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(o=t.blockedSegment,o.lastPushedText=D3(t.blockedSegment.chunks,r,e.responseState,o.lastPushedText)):typeof r=="number"&&(o=t.blockedSegment,o.lastPushedText=D3(t.blockedSegment.chunks,""+r,e.responseState,o.lastPushedText))}function Z3(e,t,r){for(var o=r.length,c=0;c<o;c++){var h=t.treeContext;t.treeContext=Lb(h,o,c);try{Fb(e,t,r[c])}finally{t.treeContext=h}}}function Fb(e,t,r){var o=t.blockedSegment.formatContext,c=t.legacyContext,h=t.context;try{return Io(e,t,r)}catch(b){if(F2(),typeof b=="object"&&b!==null&&typeof b.then=="function"){r=b;var p=t.blockedSegment,l=b0(e,p.chunks.length,null,p.formatContext,p.lastPushedText,!0);p.children.push(l),p.lastPushedText=!1,e=$2(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=c,t.context=h,v0(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=c,t.context=h,v0(h),b}}function kK(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,e6(this,t,e)}function Qz(e,t,r){var o=e.blockedBoundary;e.blockedSegment.status=3,o===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(o.pendingTasks--,o.forceClientRender||(o.forceClientRender=!0,e=r===void 0?Error(Vt(432)):r,o.errorDigest=t.onError(e),o.parentFlushed&&t.clientRenderedBoundaries.push(o)),o.fallbackAbortableTasks.forEach(function(c){return Qz(c,t,r)}),o.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(o=t.onAllReady,o()))}function S0(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&S0(e,r)}else e.completedSegments.push(t)}function e6(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(Vt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=If,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&S0(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(kK,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(S0(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function t6(e){if(e.status!==2){var t=wu,r=Uv.current;Uv.current=N3;var o=xy;xy=e.responseState;try{var c=e.pingedTasks,h;for(h=0;h<c.length;h++){var p=c[h],l=e,b=p.blockedSegment;if(b.status===0){v0(p.context);try{Io(l,p,p.node),l.responseState.generateStaticMarkup||b.lastPushedText&&b.textEmbedded&&b.chunks.push("<!-- -->"),p.abortSet.delete(p),b.status=1,e6(l,p.blockedBoundary,b)}catch(q){if(F2(),typeof q=="object"&&q!==null&&typeof q.then=="function"){var w=p.ping;q.then(w,w)}else{p.abortSet.delete(p),b.status=4;var T=p.blockedBoundary,D=q,P=Gp(l,D);if(T===null?w0(l,D):(T.pendingTasks--,T.forceClientRender||(T.forceClientRender=!0,T.errorDigest=P,T.parentFlushed&&l.clientRenderedBoundaries.push(T))),l.allPendingTasks--,l.allPendingTasks===0){var $=l.onAllReady;$()}}}finally{}}}c.splice(0,h),e.destination!==null&&O2(e,e.destination)}catch(q){Gp(e,q),w0(e,q)}finally{xy=o,Uv.current=r,r===N3&&v0(t)}}}function Gg(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var o=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=o.toString(16),t.push(e),t.push('"></template>');case 1:r.status=2;var c=!0;o=r.chunks;var h=0;r=r.children;for(var p=0;p<r.length;p++){for(c=r[p];h<c.index;h++)t.push(o[h]);c=w_(e,t,c)}for(;h<o.length-1;h++)t.push(o[h]);return h<o.length&&(c=t.push(o[h])),c;default:throw Error(Vt(390))}}function w_(e,t,r){var o=r.boundary;if(o===null)return Gg(e,t,r);if(o.parentFlushed=!0,o.forceClientRender)return e.responseState.generateStaticMarkup||(o=o.errorDigest,t.push("<!--$!-->"),t.push("<template"),o&&(t.push(' data-dgst="'),o=Vi(o),t.push(o),t.push('"')),t.push("></template>")),Gg(e,t,r),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var c=e.responseState,h=c.nextSuspenseID++;return c=c.boundaryPrefix+h.toString(16),o=o.id=c,M3(t,e.responseState,o),Gg(e,t,r),t.push("<!--/$-->")}if(o.byteSize>e.progressiveChunkSize)return o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),M3(t,e.responseState,o.id),Gg(e,t,r),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),r=o.completedSegments,r.length!==1)throw Error(Vt(391));return w_(e,t,r[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function W3(e,t,r){return oK(t,e.responseState,r.formatContext,r.id),w_(e,t,r),aK(t,r.formatContext)}function H3(e,t,r){for(var o=r.completedSegments,c=0;c<o.length;c++)r6(e,t,r,o[c]);if(o.length=0,e=e.responseState,o=r.id,r=r.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),o===null)throw Error(Vt(395));return r=r.toString(16),t.push(o),t.push('","'),t.push(e.segmentPrefix),t.push(r),t.push('")<\/script>')}function r6(e,t,r,o){if(o.status===2)return!0;var c=o.id;if(c===-1){if((o.id=r.rootSegmentID)===-1)throw Error(Vt(392));return W3(e,t,o)}return W3(e,t,o),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),c=c.toString(16),t.push(c),t.push('","'),t.push(e.placeholderPrefix),t.push(c),t.push('")<\/script>')}function O2(e,t){try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){w_(e,t,r),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(r=0;r<o.length-1;r++)t.push(o[r]);r<o.length&&t.push(o[r])}var c=e.clientRenderedBoundaries,h;for(h=0;h<c.length;h++){var p=c[h];o=t;var l=e.responseState,b=p.id,w=p.errorDigest,T=p.errorMessage,D=p.errorComponentStack;if(o.push(l.startInlineScript),l.sentClientRenderFunction?o.push('$RX("'):(l.sentClientRenderFunction=!0,o.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),b===null)throw Error(Vt(395));if(o.push(b),o.push('"'),w||T||D){o.push(",");var P=Nv(w||"");o.push(P)}if(T||D){o.push(",");var $=Nv(T||"");o.push($)}if(D){o.push(",");var q=Nv(D);o.push(q)}if(!o.push(")<\/script>")){e.destination=null,h++,c.splice(0,h);return}}c.splice(0,h);var ee=e.completedBoundaries;for(h=0;h<ee.length;h++)if(!H3(e,t,ee[h])){e.destination=null,h++,ee.splice(0,h);return}ee.splice(0,h);var me=e.partialBoundaries;for(h=0;h<me.length;h++){var Z=me[h];e:{c=e,p=t;var j=Z.completedSegments;for(l=0;l<j.length;l++)if(!r6(c,p,Z,j[l])){l++,j.splice(0,l);var H=!1;break e}j.splice(0,l),H=!0}if(!H){e.destination=null,h++,me.splice(0,h);return}}me.splice(0,h);var ie=e.completedBoundaries;for(h=0;h<ie.length;h++)if(!H3(e,t,ie[h])){e.destination=null,h++,ie.splice(0,h);return}ie.splice(0,h)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function TK(e,t){try{var r=e.abortableTasks;r.forEach(function(o){return Qz(o,e,t)}),r.clear(),e.destination!==null&&O2(e,e.destination)}catch(o){Gp(e,o),w0(e,o)}}function EK(){}function n6(e,t,r,o){var c=!1,h=null,p="",l={push:function(w){return w!==null&&(p+=w),!0},destroy:function(w){c=!0,h=w}},b=!1;if(e=SK(e,lK(r,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,EK,void 0,function(){b=!0},void 0,void 0),t6(e),TK(e,o),e.status===1)e.status=2,l.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=l;try{O2(e,l)}catch(w){Gp(e,w),w0(e,w)}}if(c)throw h;if(!b)throw Error(Vt(426));return p}_d.renderToNodeStream=function(){throw Error(Vt(207))};_d.renderToStaticMarkup=function(e,t){return n6(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};_d.renderToStaticNodeStream=function(){throw Error(Vt(208))};_d.renderToString=function(e,t){return n6(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};_d.version="18.2.0";var V2={};/**
 * @license React
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i6=Me;function Kt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var zo=null,Mo=0;function vt(e,t){if(t.length!==0)if(512<t.length)0<Mo&&(e.enqueue(new Uint8Array(zo.buffer,0,Mo)),zo=new Uint8Array(512),Mo=0),e.enqueue(t);else{var r=zo.length-Mo;r<t.length&&(r===0?e.enqueue(zo):(zo.set(t.subarray(0,r),Mo),e.enqueue(zo),t=t.subarray(r)),zo=new Uint8Array(512),Mo=0),zo.set(t,Mo),Mo+=t.length}}function Gr(e,t){return vt(e,t),!0}function q3(e){zo&&0<Mo&&(e.enqueue(new Uint8Array(zo.buffer,0,Mo)),zo=null,Mo=0)}var o6=new TextEncoder;function Qt(e){return o6.encode(e)}function lt(e){return o6.encode(e)}function a6(e,t){typeof e.error=="function"?e.error(t):e.close()}var oo=Object.prototype.hasOwnProperty,CK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,X3={},K3={};function s6(e){return oo.call(K3,e)?!0:oo.call(X3,e)?!1:CK.test(e)?K3[e]=!0:(X3[e]=!0,!1)}function Xi(e,t,r,o,c,h,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=o,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=p}var _i={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_i[e]=new Xi(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];_i[t]=new Xi(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){_i[e]=new Xi(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_i[e]=new Xi(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_i[e]=new Xi(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){_i[e]=new Xi(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){_i[e]=new Xi(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){_i[e]=new Xi(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){_i[e]=new Xi(e,5,!1,e.toLowerCase(),null,!1,!1)});var N2=/[\-:]([a-z])/g;function U2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(N2,U2);_i[t]=new Xi(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(N2,U2);_i[t]=new Xi(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(N2,U2);_i[t]=new Xi(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){_i[e]=new Xi(e,1,!1,e.toLowerCase(),null,!1,!1)});_i.xlinkHref=new Xi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){_i[e]=new Xi(e,1,!1,e.toLowerCase(),null,!0,!0)});var by={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AK=["Webkit","ms","Moz","O"];Object.keys(by).forEach(function(e){AK.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),by[t]=by[e]})});var PK=/["'&<>]/;function pi(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=PK.exec(e);if(t){var r="",o,c=0;for(o=t.index;o<e.length;o++){switch(e.charCodeAt(o)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}c!==o&&(r+=e.substring(c,o)),c=o+1,r+=t}e=c!==o?r+e.substring(c,o):r}return e}var IK=/([A-Z])/g,zK=/^ms-/,$b=Array.isArray,MK=lt("<script>"),DK=lt("<\/script>"),RK=lt('<script src="'),LK=lt('<script type="module" src="'),Y3=lt('" async=""><\/script>'),BK=/(<\/|<)(s)(cript)/gi;function FK(e,t,r,o){return""+t+(r==="s"?"\\u0073":"\\u0053")+o}function $K(e,t,r,o,c){e=e===void 0?"":e,t=t===void 0?MK:lt('<script nonce="'+pi(t)+'">');var h=[];if(r!==void 0&&h.push(t,Qt((""+r).replace(BK,FK)),DK),o!==void 0)for(r=0;r<o.length;r++)h.push(RK,Qt(pi(o[r])),Y3);if(c!==void 0)for(o=0;o<c.length;o++)h.push(LK,Qt(pi(c[o])),Y3);return{bootstrapChunks:h,startInlineScript:t,placeholderPrefix:lt(e+"P:"),segmentPrefix:lt(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function os(e,t){return{insertionMode:e,selectedValue:t}}function OK(e){return os(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function VK(e,t,r){switch(t){case"select":return os(1,r.value!=null?r.value:r.defaultValue);case"svg":return os(2,null);case"math":return os(3,null);case"foreignObject":return os(1,null);case"table":return os(4,null);case"thead":case"tbody":case"tfoot":return os(5,null);case"colgroup":return os(7,null);case"tr":return os(6,null)}return 4<=e.insertionMode||e.insertionMode===0?os(1,null):e}var j2=lt("<!-- -->");function J3(e,t,r,o){return t===""?o:(o&&e.push(j2),e.push(Qt(pi(t))),!0)}var Q3=new Map,NK=lt(' style="'),e4=lt(":"),UK=lt(";");function l6(e,t,r){if(typeof r!="object")throw Error(Kt(62));t=!0;for(var o in r)if(oo.call(r,o)){var c=r[o];if(c!=null&&typeof c!="boolean"&&c!==""){if(o.indexOf("--")===0){var h=Qt(pi(o));c=Qt(pi((""+c).trim()))}else{h=o;var p=Q3.get(h);p!==void 0||(p=lt(pi(h.replace(IK,"-$1").toLowerCase().replace(zK,"-ms-"))),Q3.set(h,p)),h=p,c=typeof c=="number"?c===0||oo.call(by,o)?Qt(""+c):Qt(c+"px"):Qt(pi((""+c).trim()))}t?(t=!1,e.push(NK,h,e4,c)):e.push(UK,h,e4,c)}}t||e.push(du)}var Nl=lt(" "),Sh=lt('="'),du=lt('"'),t4=lt('=""');function Co(e,t,r,o){switch(r){case"style":l6(e,t,o);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N"){if(t=_i.hasOwnProperty(r)?_i[r]:null,t!==null){switch(typeof o){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(r=Qt(t.attributeName),t.type){case 3:o&&e.push(Nl,r,t4);break;case 4:o===!0?e.push(Nl,r,t4):o!==!1&&e.push(Nl,r,Sh,Qt(pi(o)),du);break;case 5:isNaN(o)||e.push(Nl,r,Sh,Qt(pi(o)),du);break;case 6:!isNaN(o)&&1<=o&&e.push(Nl,r,Sh,Qt(pi(o)),du);break;default:t.sanitizeURL&&(o=""+o),e.push(Nl,r,Sh,Qt(pi(o)),du)}}else if(s6(r)){switch(typeof o){case"function":case"symbol":return;case"boolean":if(t=r.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(Nl,Qt(r),Sh,Qt(pi(o)),du)}}}var Ul=lt(">"),r4=lt("/>");function wy(e,t,r){if(t!=null){if(r!=null)throw Error(Kt(60));if(typeof t!="object"||!("__html"in t))throw Error(Kt(61));t=t.__html,t!=null&&e.push(Qt(""+t))}}function jK(e){var t="";return i6.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}var jv=lt(' selected=""');function Gv(e,t,r,o){e.push(as(r));var c=r=null,h;for(h in t)if(oo.call(t,h)){var p=t[h];if(p!=null)switch(h){case"children":r=p;break;case"dangerouslySetInnerHTML":c=p;break;default:Co(e,o,h,p)}}return e.push(Ul),wy(e,c,r),typeof r=="string"?(e.push(Qt(pi(r))),null):r}var Zv=lt(`
`),GK=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,n4=new Map;function as(e){var t=n4.get(e);if(t===void 0){if(!GK.test(e))throw Error(Kt(65,e));t=lt("<"+e),n4.set(e,t)}return t}var ZK=lt("<!DOCTYPE html>");function WK(e,t,r,o,c){switch(t){case"select":e.push(as("select"));var h=null,p=null;for(T in r)if(oo.call(r,T)){var l=r[T];if(l!=null)switch(T){case"children":h=l;break;case"dangerouslySetInnerHTML":p=l;break;case"defaultValue":case"value":break;default:Co(e,o,T,l)}}return e.push(Ul),wy(e,p,h),h;case"option":p=c.selectedValue,e.push(as("option"));var b=l=null,w=null,T=null;for(h in r)if(oo.call(r,h)){var D=r[h];if(D!=null)switch(h){case"children":l=D;break;case"selected":w=D;break;case"dangerouslySetInnerHTML":T=D;break;case"value":b=D;default:Co(e,o,h,D)}}if(p!=null)if(r=b!==null?""+b:jK(l),$b(p)){for(o=0;o<p.length;o++)if(""+p[o]===r){e.push(jv);break}}else""+p===r&&e.push(jv);else w&&e.push(jv);return e.push(Ul),wy(e,T,l),l;case"textarea":e.push(as("textarea")),T=p=h=null;for(l in r)if(oo.call(r,l)&&(b=r[l],b!=null))switch(l){case"children":T=b;break;case"value":h=b;break;case"defaultValue":p=b;break;case"dangerouslySetInnerHTML":throw Error(Kt(91));default:Co(e,o,l,b)}if(h===null&&p!==null&&(h=p),e.push(Ul),T!=null){if(h!=null)throw Error(Kt(92));if($b(T)&&1<T.length)throw Error(Kt(93));h=""+T}return typeof h=="string"&&h[0]===`
`&&e.push(Zv),h!==null&&e.push(Qt(pi(""+h))),null;case"input":e.push(as("input")),b=T=l=h=null;for(p in r)if(oo.call(r,p)&&(w=r[p],w!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(Kt(399,"input"));case"defaultChecked":b=w;break;case"defaultValue":l=w;break;case"checked":T=w;break;case"value":h=w;break;default:Co(e,o,p,w)}return T!==null?Co(e,o,"checked",T):b!==null&&Co(e,o,"checked",b),h!==null?Co(e,o,"value",h):l!==null&&Co(e,o,"value",l),e.push(r4),null;case"menuitem":e.push(as("menuitem"));for(var P in r)if(oo.call(r,P)&&(h=r[P],h!=null))switch(P){case"children":case"dangerouslySetInnerHTML":throw Error(Kt(400));default:Co(e,o,P,h)}return e.push(Ul),null;case"title":e.push(as("title")),h=null;for(D in r)if(oo.call(r,D)&&(p=r[D],p!=null))switch(D){case"children":h=p;break;case"dangerouslySetInnerHTML":throw Error(Kt(434));default:Co(e,o,D,p)}return e.push(Ul),h;case"listing":case"pre":e.push(as(t)),p=h=null;for(b in r)if(oo.call(r,b)&&(l=r[b],l!=null))switch(b){case"children":h=l;break;case"dangerouslySetInnerHTML":p=l;break;default:Co(e,o,b,l)}if(e.push(Ul),p!=null){if(h!=null)throw Error(Kt(60));if(typeof p!="object"||!("__html"in p))throw Error(Kt(61));r=p.__html,r!=null&&(typeof r=="string"&&0<r.length&&r[0]===`
`?e.push(Zv,Qt(r)):e.push(Qt(""+r)))}return typeof h=="string"&&h[0]===`
`&&e.push(Zv),h;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(as(t));for(var $ in r)if(oo.call(r,$)&&(h=r[$],h!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(Kt(399,t));default:Co(e,o,$,h)}return e.push(r4),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Gv(e,r,t,o);case"html":return c.insertionMode===0&&e.push(ZK),Gv(e,r,t,o);default:if(t.indexOf("-")===-1&&typeof r.is!="string")return Gv(e,r,t,o);e.push(as(t)),p=h=null;for(w in r)if(oo.call(r,w)&&(l=r[w],l!=null))switch(w){case"children":h=l;break;case"dangerouslySetInnerHTML":p=l;break;case"style":l6(e,o,l);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:s6(w)&&typeof l!="function"&&typeof l!="symbol"&&e.push(Nl,Qt(w),Sh,Qt(pi(l)),du)}return e.push(Ul),wy(e,p,h),h}}var HK=lt("</"),qK=lt(">"),XK=lt('<template id="'),KK=lt('"></template>'),YK=lt("<!--$-->"),JK=lt('<!--$?--><template id="'),QK=lt('"></template>'),eY=lt("<!--$!-->"),tY=lt("<!--/$-->"),rY=lt("<template"),nY=lt('"'),iY=lt(' data-dgst="');lt(' data-msg="');lt(' data-stck="');var oY=lt("></template>");function i4(e,t,r){if(vt(e,JK),r===null)throw Error(Kt(395));return vt(e,r),Gr(e,QK)}var aY=lt('<div hidden id="'),sY=lt('">'),lY=lt("</div>"),cY=lt('<svg aria-hidden="true" style="display:none" id="'),uY=lt('">'),hY=lt("</svg>"),dY=lt('<math aria-hidden="true" style="display:none" id="'),fY=lt('">'),pY=lt("</math>"),mY=lt('<table hidden id="'),gY=lt('">'),yY=lt("</table>"),_Y=lt('<table hidden><tbody id="'),vY=lt('">'),xY=lt("</tbody></table>"),bY=lt('<table hidden><tr id="'),wY=lt('">'),SY=lt("</tr></table>"),kY=lt('<table hidden><colgroup id="'),TY=lt('">'),EY=lt("</colgroup></table>");function CY(e,t,r,o){switch(r.insertionMode){case 0:case 1:return vt(e,aY),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,sY);case 2:return vt(e,cY),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,uY);case 3:return vt(e,dY),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,fY);case 4:return vt(e,mY),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,gY);case 5:return vt(e,_Y),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,vY);case 6:return vt(e,bY),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,wY);case 7:return vt(e,kY),vt(e,t.segmentPrefix),vt(e,Qt(o.toString(16))),Gr(e,TY);default:throw Error(Kt(397))}}function AY(e,t){switch(t.insertionMode){case 0:case 1:return Gr(e,lY);case 2:return Gr(e,hY);case 3:return Gr(e,pY);case 4:return Gr(e,yY);case 5:return Gr(e,xY);case 6:return Gr(e,SY);case 7:return Gr(e,EY);default:throw Error(Kt(397))}}var PY=lt('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),IY=lt('$RS("'),zY=lt('","'),MY=lt('")<\/script>'),DY=lt('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),RY=lt('$RC("'),LY=lt('","'),BY=lt('")<\/script>'),FY=lt('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),$Y=lt('$RX("'),OY=lt('"'),VY=lt(")<\/script>"),Wv=lt(","),NY=/[<\u2028\u2029]/g;function Hv(e){return JSON.stringify(e).replace(NY,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var ip=Object.assign,UY=Symbol.for("react.element"),c6=Symbol.for("react.portal"),u6=Symbol.for("react.fragment"),h6=Symbol.for("react.strict_mode"),d6=Symbol.for("react.profiler"),f6=Symbol.for("react.provider"),p6=Symbol.for("react.context"),m6=Symbol.for("react.forward_ref"),g6=Symbol.for("react.suspense"),y6=Symbol.for("react.suspense_list"),_6=Symbol.for("react.memo"),G2=Symbol.for("react.lazy"),jY=Symbol.for("react.scope"),GY=Symbol.for("react.debug_trace_mode"),ZY=Symbol.for("react.legacy_hidden"),WY=Symbol.for("react.default_value"),o4=Symbol.iterator;function Ob(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case u6:return"Fragment";case c6:return"Portal";case d6:return"Profiler";case h6:return"StrictMode";case g6:return"Suspense";case y6:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case p6:return(e.displayName||"Context")+".Consumer";case f6:return(e._context.displayName||"Context")+".Provider";case m6:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _6:return t=e.displayName||null,t!==null?t:Ob(e.type)||"Memo";case G2:t=e._payload,e=e._init;try{return Ob(e(t))}catch{}}return null}var v6={};function a4(e,t){if(e=e.contextTypes,!e)return v6;var r={},o;for(o in e)r[o]=t[o];return r}var Su=null;function S_(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var r=t.parent;if(e===null){if(r!==null)throw Error(Kt(401))}else{if(r===null)throw Error(Kt(401));S_(e,r)}t.context._currentValue=t.value}}function x6(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&x6(e)}function b6(e){var t=e.parent;t!==null&&b6(t),e.context._currentValue=e.value}function w6(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(Kt(402));e.depth===t.depth?S_(e,t):w6(e,t)}function S6(e,t){var r=t.parent;if(r===null)throw Error(Kt(402));e.depth===r.depth?S_(e,r):S6(e,r),t.context._currentValue=t.value}function k0(e){var t=Su;t!==e&&(t===null?b6(e):e===null?x6(t):t.depth===e.depth?S_(t,e):t.depth>e.depth?w6(t,e):S6(t,e),Su=e)}var s4={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function l4(e,t,r,o){var c=e.state!==void 0?e.state:null;e.updater=s4,e.props=r,e.state=c;var h={queue:[],replace:!1};e._reactInternals=h;var p=t.contextType;if(e.context=typeof p=="object"&&p!==null?p._currentValue:o,p=t.getDerivedStateFromProps,typeof p=="function"&&(p=p(r,c),c=p==null?c:ip({},c,p),e.state=c),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&s4.enqueueReplaceState(e,e.state,null),h.queue!==null&&0<h.queue.length)if(t=h.queue,p=h.replace,h.queue=null,h.replace=!1,p&&t.length===1)e.state=t[0];else{for(h=p?t[0]:e.state,c=!0,p=p?1:0;p<t.length;p++){var l=t[p];l=typeof l=="function"?l.call(e,h,r,o):l,l!=null&&(c?(c=!1,h=ip({},h,l)):ip(h,l))}e.state=h}else h.queue=null}var HY={id:1,overflow:""};function Vb(e,t,r){var o=e.id;e=e.overflow;var c=32-Sy(o)-1;o&=~(1<<c),r+=1;var h=32-Sy(t)+c;if(30<h){var p=c-c%5;return h=(o&(1<<p)-1).toString(32),o>>=p,c-=p,{id:1<<32-Sy(t)+c|r<<c|o,overflow:h+e}}return{id:1<<h|r<<c|o,overflow:e}}var Sy=Math.clz32?Math.clz32:KY,qY=Math.log,XY=Math.LN2;function KY(e){return e>>>=0,e===0?32:31-(qY(e)/XY|0)|0}function YY(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var JY=typeof Object.is=="function"?Object.is:YY,yl=null,Z2=null,ky=null,Vr=null,zf=!1,T0=!1,Zp=0,rc=null,k_=0;function fu(){if(yl===null)throw Error(Kt(321));return yl}function c4(){if(0<k_)throw Error(Kt(312));return{memoizedState:null,queue:null,next:null}}function W2(){return Vr===null?ky===null?(zf=!1,ky=Vr=c4()):(zf=!0,Vr=ky):Vr.next===null?(zf=!1,Vr=Vr.next=c4()):(zf=!0,Vr=Vr.next),Vr}function H2(){Z2=yl=null,T0=!1,ky=null,k_=0,Vr=rc=null}function k6(e,t){return typeof t=="function"?t(e):t}function u4(e,t,r){if(yl=fu(),Vr=W2(),zf){var o=Vr.queue;if(t=o.dispatch,rc!==null&&(r=rc.get(o),r!==void 0)){rc.delete(o),o=Vr.memoizedState;do o=e(o,r.action),r=r.next;while(r!==null);return Vr.memoizedState=o,[o,t]}return[Vr.memoizedState,t]}return e=e===k6?typeof t=="function"?t():t:r!==void 0?r(t):t,Vr.memoizedState=e,e=Vr.queue={last:null,dispatch:null},e=e.dispatch=QY.bind(null,yl,e),[Vr.memoizedState,e]}function h4(e,t){if(yl=fu(),Vr=W2(),t=t===void 0?null:t,Vr!==null){var r=Vr.memoizedState;if(r!==null&&t!==null){var o=r[1];e:if(o===null)o=!1;else{for(var c=0;c<o.length&&c<t.length;c++)if(!JY(t[c],o[c])){o=!1;break e}o=!0}if(o)return r[0]}}return e=e(),Vr.memoizedState=[e,t],e}function QY(e,t,r){if(25<=k_)throw Error(Kt(301));if(e===yl)if(T0=!0,e={action:r,next:null},rc===null&&(rc=new Map),r=rc.get(t),r===void 0)rc.set(t,e);else{for(t=r;t.next!==null;)t=t.next;t.next=e}}function eJ(){throw Error(Kt(394))}function Zg(){}var d4={readContext:function(e){return e._currentValue},useContext:function(e){return fu(),e._currentValue},useMemo:h4,useReducer:u4,useRef:function(e){yl=fu(),Vr=W2();var t=Vr.memoizedState;return t===null?(e={current:e},Vr.memoizedState=e):t},useState:function(e){return u4(k6,e)},useInsertionEffect:Zg,useLayoutEffect:function(){},useCallback:function(e,t){return h4(function(){return e},t)},useImperativeHandle:Zg,useEffect:Zg,useDebugValue:Zg,useDeferredValue:function(e){return fu(),e},useTransition:function(){return fu(),[!1,eJ]},useId:function(){var e=Z2.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Sy(e)-1)).toString(32)+t;var r=Ty;if(r===null)throw Error(Kt(404));return t=Zp++,e=":"+r.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return fu(),t(e._source)},useSyncExternalStore:function(e,t,r){if(r===void 0)throw Error(Kt(407));return r()}},Ty=null,qv=i6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function tJ(e){return console.error(e),null}function Mf(){}function rJ(e,t,r,o,c,h,p,l,b){var w=[],T=new Set;return t={destination:null,responseState:t,progressiveChunkSize:o===void 0?12800:o,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:T,pingedTasks:w,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:c===void 0?tJ:c,onAllReady:h===void 0?Mf:h,onShellReady:p===void 0?Mf:p,onShellError:l===void 0?Mf:l,onFatalError:b===void 0?Mf:b},r=E0(t,0,null,r,!1,!1),r.parentFlushed=!0,e=q2(t,e,null,r,T,v6,null,HY),w.push(e),t}function q2(e,t,r,o,c,h,p,l){e.allPendingTasks++,r===null?e.pendingRootTasks++:r.pendingTasks++;var b={node:t,ping:function(){var w=e.pingedTasks;w.push(b),w.length===1&&C6(e)},blockedBoundary:r,blockedSegment:o,abortSet:c,legacyContext:h,context:p,treeContext:l};return c.add(b),b}function E0(e,t,r,o,c,h){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:o,boundary:r,lastPushedText:c,textEmbedded:h}}function Wp(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function C0(e,t){var r=e.onShellError;r(t),r=e.onFatalError,r(t),e.destination!==null?(e.status=2,a6(e.destination,t)):(e.status=1,e.fatalError=t)}function f4(e,t,r,o,c){for(yl={},Z2=t,Zp=0,e=r(o,c);T0;)T0=!1,Zp=0,k_+=1,Vr=null,e=r(o,c);return H2(),e}function p4(e,t,r,o){var c=r.render(),h=o.childContextTypes;if(h!=null){var p=t.legacyContext;if(typeof r.getChildContext!="function")o=p;else{r=r.getChildContext();for(var l in r)if(!(l in h))throw Error(Kt(108,Ob(o)||"Unknown",l));o=ip({},p,r)}t.legacyContext=o,Do(e,t,c),t.legacyContext=p}else Do(e,t,c)}function m4(e,t){if(e&&e.defaultProps){t=ip({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Nb(e,t,r,o,c){if(typeof r=="function")if(r.prototype&&r.prototype.isReactComponent){c=a4(r,t.legacyContext);var h=r.contextType;h=new r(o,typeof h=="object"&&h!==null?h._currentValue:c),l4(h,r,o,c),p4(e,t,h,r)}else{h=a4(r,t.legacyContext),c=f4(e,t,r,o,h);var p=Zp!==0;if(typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0)l4(c,r,o,h),p4(e,t,c,r);else if(p){o=t.treeContext,t.treeContext=Vb(o,1,0);try{Do(e,t,c)}finally{t.treeContext=o}}else Do(e,t,c)}else if(typeof r=="string"){switch(c=t.blockedSegment,h=WK(c.chunks,r,o,e.responseState,c.formatContext),c.lastPushedText=!1,p=c.formatContext,c.formatContext=VK(p,r,o),Ub(e,t,h),c.formatContext=p,r){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:c.chunks.push(HK,Qt(r),qK)}c.lastPushedText=!1}else{switch(r){case ZY:case GY:case h6:case d6:case u6:Do(e,t,o.children);return;case y6:Do(e,t,o.children);return;case jY:throw Error(Kt(343));case g6:e:{r=t.blockedBoundary,c=t.blockedSegment,h=o.fallback,o=o.children,p=new Set;var l={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:p,errorDigest:null},b=E0(e,c.chunks.length,l,c.formatContext,!1,!1);c.children.push(b),c.lastPushedText=!1;var w=E0(e,0,null,c.formatContext,!1,!1);w.parentFlushed=!0,t.blockedBoundary=l,t.blockedSegment=w;try{if(Ub(e,t,o),w.lastPushedText&&w.textEmbedded&&w.chunks.push(j2),w.status=1,A0(l,w),l.pendingTasks===0)break e}catch(T){w.status=4,l.forceClientRender=!0,l.errorDigest=Wp(e,T)}finally{t.blockedBoundary=r,t.blockedSegment=c}t=q2(e,h,r,b,p,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof r=="object"&&r!==null)switch(r.$$typeof){case m6:if(o=f4(e,t,r.render,o,c),Zp!==0){r=t.treeContext,t.treeContext=Vb(r,1,0);try{Do(e,t,o)}finally{t.treeContext=r}}else Do(e,t,o);return;case _6:r=r.type,o=m4(r,o),Nb(e,t,r,o,c);return;case f6:if(c=o.children,r=r._context,o=o.value,h=r._currentValue,r._currentValue=o,p=Su,Su=o={parent:p,depth:p===null?0:p.depth+1,context:r,parentValue:h,value:o},t.context=o,Do(e,t,c),e=Su,e===null)throw Error(Kt(403));o=e.parentValue,e.context._currentValue=o===WY?e.context._defaultValue:o,e=Su=e.parent,t.context=e;return;case p6:o=o.children,o=o(r._currentValue),Do(e,t,o);return;case G2:c=r._init,r=c(r._payload),o=m4(r,o),Nb(e,t,r,o,void 0);return}throw Error(Kt(130,r==null?r:typeof r,""))}}function Do(e,t,r){if(t.node=r,typeof r=="object"&&r!==null){switch(r.$$typeof){case UY:Nb(e,t,r.type,r.props,r.ref);return;case c6:throw Error(Kt(257));case G2:var o=r._init;r=o(r._payload),Do(e,t,r);return}if($b(r)){g4(e,t,r);return}if(r===null||typeof r!="object"?o=null:(o=o4&&r[o4]||r["@@iterator"],o=typeof o=="function"?o:null),o&&(o=o.call(r))){if(r=o.next(),!r.done){var c=[];do c.push(r.value),r=o.next();while(!r.done);g4(e,t,c)}return}throw e=Object.prototype.toString.call(r),Error(Kt(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e))}typeof r=="string"?(o=t.blockedSegment,o.lastPushedText=J3(t.blockedSegment.chunks,r,e.responseState,o.lastPushedText)):typeof r=="number"&&(o=t.blockedSegment,o.lastPushedText=J3(t.blockedSegment.chunks,""+r,e.responseState,o.lastPushedText))}function g4(e,t,r){for(var o=r.length,c=0;c<o;c++){var h=t.treeContext;t.treeContext=Vb(h,o,c);try{Ub(e,t,r[c])}finally{t.treeContext=h}}}function Ub(e,t,r){var o=t.blockedSegment.formatContext,c=t.legacyContext,h=t.context;try{return Do(e,t,r)}catch(b){if(H2(),typeof b=="object"&&b!==null&&typeof b.then=="function"){r=b;var p=t.blockedSegment,l=E0(e,p.chunks.length,null,p.formatContext,p.lastPushedText,!0);p.children.push(l),p.lastPushedText=!1,e=q2(e,t.node,t.blockedBoundary,l,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,r.then(e,e),t.blockedSegment.formatContext=o,t.legacyContext=c,t.context=h,k0(h)}else throw t.blockedSegment.formatContext=o,t.legacyContext=c,t.context=h,k0(h),b}}function nJ(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,E6(this,t,e)}function T6(e,t,r){var o=e.blockedBoundary;e.blockedSegment.status=3,o===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(o.pendingTasks--,o.forceClientRender||(o.forceClientRender=!0,e=r===void 0?Error(Kt(432)):r,o.errorDigest=t.onError(e),o.parentFlushed&&t.clientRenderedBoundaries.push(o)),o.fallbackAbortableTasks.forEach(function(c){return T6(c,t,r)}),o.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(o=t.onAllReady,o()))}function A0(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var r=t.children[0];r.id=t.id,r.parentFlushed=!0,r.status===1&&A0(e,r)}else e.completedSegments.push(t)}function E6(e,t,r){if(t===null){if(r.parentFlushed){if(e.completedRootSegment!==null)throw Error(Kt(389));e.completedRootSegment=r}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Mf,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(r.parentFlushed&&r.status===1&&A0(t,r),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(nJ,e),t.fallbackAbortableTasks.clear()):r.parentFlushed&&r.status===1&&(A0(t,r),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function C6(e){if(e.status!==2){var t=Su,r=qv.current;qv.current=d4;var o=Ty;Ty=e.responseState;try{var c=e.pingedTasks,h;for(h=0;h<c.length;h++){var p=c[h],l=e,b=p.blockedSegment;if(b.status===0){k0(p.context);try{Do(l,p,p.node),b.lastPushedText&&b.textEmbedded&&b.chunks.push(j2),p.abortSet.delete(p),b.status=1,E6(l,p.blockedBoundary,b)}catch(q){if(H2(),typeof q=="object"&&q!==null&&typeof q.then=="function"){var w=p.ping;q.then(w,w)}else{p.abortSet.delete(p),b.status=4;var T=p.blockedBoundary,D=q,P=Wp(l,D);if(T===null?C0(l,D):(T.pendingTasks--,T.forceClientRender||(T.forceClientRender=!0,T.errorDigest=P,T.parentFlushed&&l.clientRenderedBoundaries.push(T))),l.allPendingTasks--,l.allPendingTasks===0){var $=l.onAllReady;$()}}}finally{}}}c.splice(0,h),e.destination!==null&&X2(e,e.destination)}catch(q){Wp(e,q),C0(e,q)}finally{Ty=o,qv.current=r,r===d4&&k0(t)}}}function Wg(e,t,r){switch(r.parentFlushed=!0,r.status){case 0:var o=r.id=e.nextSegmentId++;return r.lastPushedText=!1,r.textEmbedded=!1,e=e.responseState,vt(t,XK),vt(t,e.placeholderPrefix),e=Qt(o.toString(16)),vt(t,e),Gr(t,KK);case 1:r.status=2;var c=!0;o=r.chunks;var h=0;r=r.children;for(var p=0;p<r.length;p++){for(c=r[p];h<c.index;h++)vt(t,o[h]);c=T_(e,t,c)}for(;h<o.length-1;h++)vt(t,o[h]);return h<o.length&&(c=Gr(t,o[h])),c;default:throw Error(Kt(390))}}function T_(e,t,r){var o=r.boundary;if(o===null)return Wg(e,t,r);if(o.parentFlushed=!0,o.forceClientRender)o=o.errorDigest,Gr(t,eY),vt(t,rY),o&&(vt(t,iY),vt(t,Qt(pi(o))),vt(t,nY)),Gr(t,oY),Wg(e,t,r);else if(0<o.pendingTasks){o.rootSegmentID=e.nextSegmentId++,0<o.completedSegments.length&&e.partialBoundaries.push(o);var c=e.responseState,h=c.nextSuspenseID++;c=lt(c.boundaryPrefix+h.toString(16)),o=o.id=c,i4(t,e.responseState,o),Wg(e,t,r)}else if(o.byteSize>e.progressiveChunkSize)o.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(o),i4(t,e.responseState,o.id),Wg(e,t,r);else{if(Gr(t,YK),r=o.completedSegments,r.length!==1)throw Error(Kt(391));T_(e,t,r[0])}return Gr(t,tY)}function y4(e,t,r){return CY(t,e.responseState,r.formatContext,r.id),T_(e,t,r),AY(t,r.formatContext)}function _4(e,t,r){for(var o=r.completedSegments,c=0;c<o.length;c++)A6(e,t,r,o[c]);if(o.length=0,e=e.responseState,o=r.id,r=r.rootSegmentID,vt(t,e.startInlineScript),e.sentCompleteBoundaryFunction?vt(t,RY):(e.sentCompleteBoundaryFunction=!0,vt(t,DY)),o===null)throw Error(Kt(395));return r=Qt(r.toString(16)),vt(t,o),vt(t,LY),vt(t,e.segmentPrefix),vt(t,r),Gr(t,BY)}function A6(e,t,r,o){if(o.status===2)return!0;var c=o.id;if(c===-1){if((o.id=r.rootSegmentID)===-1)throw Error(Kt(392));return y4(e,t,o)}return y4(e,t,o),e=e.responseState,vt(t,e.startInlineScript),e.sentCompleteSegmentFunction?vt(t,IY):(e.sentCompleteSegmentFunction=!0,vt(t,PY)),vt(t,e.segmentPrefix),c=Qt(c.toString(16)),vt(t,c),vt(t,zY),vt(t,e.placeholderPrefix),vt(t,c),Gr(t,MY)}function X2(e,t){zo=new Uint8Array(512),Mo=0;try{var r=e.completedRootSegment;if(r!==null&&e.pendingRootTasks===0){T_(e,t,r),e.completedRootSegment=null;var o=e.responseState.bootstrapChunks;for(r=0;r<o.length-1;r++)vt(t,o[r]);r<o.length&&Gr(t,o[r])}var c=e.clientRenderedBoundaries,h;for(h=0;h<c.length;h++){var p=c[h];o=t;var l=e.responseState,b=p.id,w=p.errorDigest,T=p.errorMessage,D=p.errorComponentStack;if(vt(o,l.startInlineScript),l.sentClientRenderFunction?vt(o,$Y):(l.sentClientRenderFunction=!0,vt(o,FY)),b===null)throw Error(Kt(395));vt(o,b),vt(o,OY),(w||T||D)&&(vt(o,Wv),vt(o,Qt(Hv(w||"")))),(T||D)&&(vt(o,Wv),vt(o,Qt(Hv(T||"")))),D&&(vt(o,Wv),vt(o,Qt(Hv(D)))),Gr(o,VY)}c.splice(0,h);var P=e.completedBoundaries;for(h=0;h<P.length;h++)_4(e,t,P[h]);P.splice(0,h),q3(t),zo=new Uint8Array(512),Mo=0;var $=e.partialBoundaries;for(h=0;h<$.length;h++){var q=$[h];e:{c=e,p=t;var ee=q.completedSegments;for(l=0;l<ee.length;l++)if(!A6(c,p,q,ee[l])){l++,ee.splice(0,l);var me=!1;break e}ee.splice(0,l),me=!0}if(!me){e.destination=null,h++,$.splice(0,h);return}}$.splice(0,h);var Z=e.completedBoundaries;for(h=0;h<Z.length;h++)_4(e,t,Z[h]);Z.splice(0,h)}finally{q3(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function v4(e,t){try{var r=e.abortableTasks;r.forEach(function(o){return T6(o,e,t)}),r.clear(),e.destination!==null&&X2(e,e.destination)}catch(o){Wp(e,o),C0(e,o)}}V2.renderToReadableStream=function(e,t){return new Promise(function(r,o){var c,h,p=new Promise(function(T,D){h=T,c=D}),l=rJ(e,$K(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),OK(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,h,function(){var T=new ReadableStream({type:"bytes",pull:function(D){if(l.status===1)l.status=2,a6(D,l.fatalError);else if(l.status!==2&&l.destination===null){l.destination=D;try{X2(l,D)}catch(P){Wp(l,P),C0(l,P)}}},cancel:function(){v4(l)}},{highWaterMark:0});T.allReady=p,r(T)},function(T){p.catch(function(){}),o(T)},c);if(t&&t.signal){var b=t.signal,w=function(){v4(l,b.reason),b.removeEventListener("abort",w)};b.addEventListener("abort",w)}C6(l)})};V2.version="18.2.0";var vd,P6;vd=_d,P6=V2;vd.version;var iJ=vd.renderToString;vd.renderToStaticMarkup;vd.renderToNodeStream;vd.renderToStaticNodeStream;P6.renderToReadableStream;var I6={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},x4=Bo.createContext&&Bo.createContext(I6),gc=globalThis&&globalThis.__assign||function(){return gc=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++){t=arguments[r];for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])}return e},gc.apply(this,arguments)},oJ=globalThis&&globalThis.__rest||function(e,t){var r={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(r[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var c=0,o=Object.getOwnPropertySymbols(e);c<o.length;c++)t.indexOf(o[c])<0&&Object.prototype.propertyIsEnumerable.call(e,o[c])&&(r[o[c]]=e[o[c]]);return r};function z6(e){return e&&e.map(function(t,r){return Bo.createElement(t.tag,gc({key:r},t.attr),z6(t.child))})}function Yn(e){return function(t){return Bo.createElement(aJ,gc({attr:gc({},e.attr)},t),z6(e.child))}}function aJ(e){var t=function(r){var o=e.attr,c=e.size,h=e.title,p=oJ(e,["attr","size","title"]),l=c||r.size||"1em",b;return r.className&&(b=r.className),e.className&&(b=(b?b+" ":"")+e.className),Bo.createElement("svg",gc({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,o,p,{className:b,style:gc(gc({color:e.color||r.color},r.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),h&&Bo.createElement("title",null,h),e.children)};return x4!==void 0?Bo.createElement(x4.Consumer,null,function(r){return t(r)}):t(I6)}function sJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M192 160c44.2 0 80-35.8 80-80S236.2 0 192 0s-80 35.8-80 80 35.8 80 80 80zm-53.4 248.8l25.6-32-61.5-51.2L56.8 383c-11.4 14.2-11.7 34.4-.8 49l48 64c7.9 10.5 19.9 16 32 16 8.3 0 16.8-2.6 24-8 17.7-13.2 21.2-38.3 8-56l-29.4-39.2zm142.7-83.2l-61.5 51.2 25.6 32L216 448c-13.2 17.7-9.7 42.8 8 56 7.2 5.4 15.6 8 24 8 12.2 0 24.2-5.5 32-16l48-64c10.9-14.6 10.6-34.8-.8-49l-45.9-57.4zM376.7 145c-12.7-18.1-37.6-22.4-55.7-9.8l-40.6 28.5c-52.7 37-124.2 37-176.8 0L63 135.3C44.9 122.6 20 127 7.3 145-5.4 163.1-1 188 17 200.7l40.6 28.5c17 11.9 35.4 20.9 54.4 27.9V288h160v-30.8c19-7 37.4-16 54.4-27.9l40.6-28.5c18.1-12.8 22.4-37.7 9.7-55.8z"}}]})(e)}function lJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M624 448h-24.68L359.54 117.75l53.41-73.55c5.19-7.15 3.61-17.16-3.54-22.35l-25.9-18.79c-7.15-5.19-17.15-3.61-22.35 3.55L320 63.3 278.83 6.6c-5.19-7.15-15.2-8.74-22.35-3.55l-25.88 18.8c-7.15 5.19-8.74 15.2-3.54 22.35l53.41 73.55L40.68 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h608c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM320 288l116.36 160H203.64L320 288z"}}]})(e)}function cJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336 448H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h320c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zm208-320V80c0-8.84-7.16-16-16-16s-16 7.16-16 16v48h-32V80c0-8.84-7.16-16-16-16s-16 7.16-16 16v48h-16c-8.84 0-16 7.16-16 16v32c0 35.76 23.62 65.69 56 75.93v118.49c0 13.95-9.5 26.92-23.26 29.19C431.22 402.5 416 388.99 416 372v-28c0-48.6-39.4-88-88-88h-8V64c0-35.35-28.65-64-64-64H96C60.65 0 32 28.65 32 64v352h288V304h8c22.09 0 40 17.91 40 40v24.61c0 39.67 28.92 75.16 68.41 79.01C481.71 452.05 520 416.41 520 372V251.93c32.38-10.24 56-40.17 56-75.93v-32c0-8.84-7.16-16-16-16h-16zm-283.91 47.76l-93.7 139c-2.2 3.33-6.21 5.24-10.39 5.24-7.67 0-13.47-6.28-11.67-12.92L167.35 224H108c-7.25 0-12.85-5.59-11.89-11.89l16-107C112.9 99.9 117.98 96 124 96h68c7.88 0 13.62 6.54 11.6 13.21L192 160h57.7c9.24 0 15.01 8.78 10.39 15.76z"}}]})(e)}function uJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M192 384h192c53 0 96-43 96-96h32c70.6 0 128-57.4 128-128S582.6 32 512 32H120c-13.3 0-24 10.7-24 24v232c0 53 43 96 96 96zM512 96c35.3 0 64 28.7 64 64s-28.7 64-64 64h-32V96h32zm47.7 384H48.3c-47.6 0-61-64-36-64h583.3c25 0 11.8 64-35.9 64z"}}]})(e)}function hJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M336 448H16c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h320c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm157.2-340.7l-81-81c-6.2-6.2-16.4-6.2-22.6 0l-11.3 11.3c-6.2 6.2-6.2 16.4 0 22.6L416 97.9V160c0 28.1 20.9 51.3 48 55.2V376c0 13.2-10.8 24-24 24s-24-10.8-24-24v-32c0-48.6-39.4-88-88-88h-8V64c0-35.3-28.7-64-64-64H96C60.7 0 32 28.7 32 64v352h288V304h8c22.1 0 40 17.9 40 40v27.8c0 37.7 27 72 64.5 75.9 43 4.3 79.5-29.5 79.5-71.7V152.6c0-17-6.8-33.3-18.8-45.3zM256 192H96V64h160v128z"}}]})(e)}function dJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M488 192H336v56c0 39.7-32.3 72-72 72s-72-32.3-72-72V126.4l-64.9 39C107.8 176.9 96 197.8 96 220.2v47.3l-80 46.2C.7 322.5-4.6 342.1 4.3 357.4l80 138.6c8.8 15.3 28.4 20.5 43.7 11.7L231.4 448H368c35.3 0 64-28.7 64-64h16c17.7 0 32-14.3 32-32v-64h8c13.3 0 24-10.7 24-24v-48c0-13.3-10.7-24-24-24zm147.7-37.4L555.7 16C546.9.7 527.3-4.5 512 4.3L408.6 64H306.4c-12 0-23.7 3.4-33.9 9.7L239 94.6c-9.4 5.8-15 16.1-15 27.1V248c0 22.1 17.9 40 40 40s40-17.9 40-40v-88h184c30.9 0 56 25.1 56 56v28.5l80-46.2c15.3-8.9 20.5-28.4 11.7-43.7z"}}]})(e)}function fJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M414.21 177.65c1.02 8.21 7.75 14.35 15.75 14.35h16.12c9.51 0 17.08-8.57 16-18.35-4.34-39.11-22.4-74.53-50.13-97.16-17.37-14.17-28.82-36.75-31.98-62.15C378.96 6.14 372.22 0 364.23 0h-16.12c-9.51 0-17.09 8.57-16 18.35 4.34 39.11 22.4 74.53 50.13 97.16 17.36 14.17 28.82 36.75 31.97 62.14zm-108 0c1.02 8.21 7.75 14.35 15.75 14.35h16.12c9.51 0 17.08-8.57 16-18.35-4.34-39.11-22.4-74.53-50.13-97.16-17.37-14.17-28.82-36.75-31.98-62.15C270.96 6.14 264.22 0 256.23 0h-16.12c-9.51 0-17.09 8.57-16 18.35 4.34 39.11 22.4 74.53 50.13 97.16 17.36 14.17 28.82 36.75 31.97 62.14zM480 256H256l-110.93-83.2a63.99 63.99 0 0 0-38.4-12.8H64c-35.35 0-64 28.65-64 64v224c0 35.35 28.65 64 64 64h384c35.35 0 64-28.65 64-64V288c0-17.67-14.33-32-32-32zM128 440c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8V328c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v112zm96 0c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8V328c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v112zm96 0c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8V328c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v112zm96 0c0 4.42-3.58 8-8 8h-16c-4.42 0-8-3.58-8-8V328c0-4.42 3.58-8 8-8h16c4.42 0 8 3.58 8 8v112zM64 128c35.35 0 64-28.65 64-64S99.35 0 64 0 0 28.65 0 64s28.65 64 64 64z"}}]})(e)}function pJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M560 64c8.84 0 16-7.16 16-16V16c0-8.84-7.16-16-16-16H16C7.16 0 0 7.16 0 16v32c0 8.84 7.16 16 16 16h15.98v384H16c-8.84 0-16 7.16-16 16v32c0 8.84 7.16 16 16 16h240v-80c0-8.8 7.2-16 16-16h32c8.8 0 16 7.2 16 16v80h240c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16h-16V64h16zm-304 44.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4zm0 96c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4zm-128-96c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4zM179.2 256h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4c0 6.4-6.4 12.8-12.8 12.8zM192 384c0-53.02 42.98-96 96-96s96 42.98 96 96H192zm256-140.8c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-96c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4z"}}]})(e)}function mJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 192 512"},child:[{tag:"path",attr:{d:"M20 424.229h20V279.771H20c-11.046 0-20-8.954-20-20V212c0-11.046 8.954-20 20-20h112c11.046 0 20 8.954 20 20v212.229h20c11.046 0 20 8.954 20 20V492c0 11.046-8.954 20-20 20H20c-11.046 0-20-8.954-20-20v-47.771c0-11.046 8.954-20 20-20zM96 0C56.235 0 24 32.235 24 72s32.235 72 72 72 72-32.235 72-72S135.764 0 96 0z"}}]})(e)}function gJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M621.16 54.46C582.37 38.19 543.55 32 504.75 32c-123.17-.01-246.33 62.34-369.5 62.34-30.89 0-61.76-3.92-92.65-13.72-3.47-1.1-6.95-1.62-10.35-1.62C15.04 79 0 92.32 0 110.81v317.26c0 12.63 7.23 24.6 18.84 29.46C57.63 473.81 96.45 480 135.25 480c123.17 0 246.34-62.35 369.51-62.35 30.89 0 61.76 3.92 92.65 13.72 3.47 1.1 6.95 1.62 10.35 1.62 17.21 0 32.25-13.32 32.25-31.81V83.93c-.01-12.64-7.24-24.6-18.85-29.47zM48 132.22c20.12 5.04 41.12 7.57 62.72 8.93C104.84 170.54 79 192.69 48 192.69v-60.47zm0 285v-47.78c34.37 0 62.18 27.27 63.71 61.4-22.53-1.81-43.59-6.31-63.71-13.62zM320 352c-44.19 0-80-42.99-80-96 0-53.02 35.82-96 80-96s80 42.98 80 96c0 53.03-35.83 96-80 96zm272 27.78c-17.52-4.39-35.71-6.85-54.32-8.44 5.87-26.08 27.5-45.88 54.32-49.28v57.72zm0-236.11c-30.89-3.91-54.86-29.7-55.81-61.55 19.54 2.17 38.09 6.23 55.81 12.66v48.89z"}}]})(e)}function yJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.92 462.7l-288-448C341.03 5.54 330.89 0 320 0s-21.03 5.54-26.92 14.7l-288 448a32.001 32.001 0 0 0-1.17 32.64A32.004 32.004 0 0 0 32 512h576c11.71 0 22.48-6.39 28.09-16.67a31.983 31.983 0 0 0-1.17-32.63zM320 91.18L405.39 224H320l-64 64-38.06-38.06L320 91.18z"}}]})(e)}function _J(e){return Yn({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M352 160v-32C352 57.42 294.579 0 224 0 153.42 0 96 57.42 96 128v32H0v272c0 44.183 35.817 80 80 80h288c44.183 0 80-35.817 80-80V160h-96zm-192-32c0-35.29 28.71-64 64-64s64 28.71 64 64v32H160v-32zm160 120c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24zm-192 0c-13.255 0-24-10.745-24-24s10.745-24 24-24 24 10.745 24 24-10.745 24-24 24z"}}]})(e)}function vJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M304,320a16,16,0,1,0,16,16A16,16,0,0,0,304,320Zm32-96a16,16,0,1,0,16,16A16,16,0,0,0,336,224Zm32,64a16,16,0,1,0-16-16A16,16,0,0,0,368,288Zm-32,32a16,16,0,1,0-16-16A16,16,0,0,0,336,320Zm-32-64a16,16,0,1,0,16,16A16,16,0,0,0,304,256Zm128-32a16,16,0,1,0-16-16A16,16,0,0,0,432,224Zm-48,16a16,16,0,1,0,16-16A16,16,0,0,0,384,240Zm-16-48a16,16,0,1,0,16,16A16,16,0,0,0,368,192Zm96,32a16,16,0,1,0,16,16A16,16,0,0,0,464,224Zm32-32a16,16,0,1,0,16,16A16,16,0,0,0,496,192Zm-64,64a16,16,0,1,0,16,16A16,16,0,0,0,432,256Zm-32,32a16,16,0,1,0,16,16A16,16,0,0,0,400,288Zm-64,64a16,16,0,1,0,16,16A16,16,0,0,0,336,352Zm-32,32a16,16,0,1,0,16,16A16,16,0,0,0,304,384Zm64-64a16,16,0,1,0,16,16A16,16,0,0,0,368,320Zm21.65-218.35-11.3-11.31a16,16,0,0,0-22.63,0L350.05,96A111.19,111.19,0,0,0,272,64c-19.24,0-37.08,5.3-52.9,13.85l-10-10A121.72,121.72,0,0,0,123.44,32C55.49,31.5,0,92.91,0,160.85V464a16,16,0,0,0,16,16H48a16,16,0,0,0,16-16V158.4c0-30.15,21-58.2,51-61.93a58.38,58.38,0,0,1,48.93,16.67l10,10C165.3,138.92,160,156.76,160,176a111.23,111.23,0,0,0,32,78.05l-5.66,5.67a16,16,0,0,0,0,22.62l11.3,11.31a16,16,0,0,0,22.63,0L389.65,124.28A16,16,0,0,0,389.65,101.65Z"}}]})(e)}function xJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M378.31 378.49L298.42 288h30.63c9.01 0 16.98-5 20.78-13.06 3.8-8.04 2.55-17.26-3.28-24.05L268.42 160h28.89c9.1 0 17.3-5.35 20.86-13.61 3.52-8.13 1.86-17.59-4.24-24.08L203.66 4.83c-6.03-6.45-17.28-6.45-23.32 0L70.06 122.31c-6.1 6.49-7.75 15.95-4.24 24.08C69.38 154.65 77.59 160 86.69 160h28.89l-78.14 90.91c-5.81 6.78-7.06 15.99-3.27 24.04C37.97 283 45.93 288 54.95 288h30.63L5.69 378.49c-6 6.79-7.36 16.09-3.56 24.26 3.75 8.05 12 13.25 21.01 13.25H160v24.45l-30.29 48.4c-5.32 10.64 2.42 23.16 14.31 23.16h95.96c11.89 0 19.63-12.52 14.31-23.16L224 440.45V416h136.86c9.01 0 17.26-5.2 21.01-13.25 3.8-8.17 2.44-17.47-3.56-24.26z"}}]})(e)}function bJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 416 512"},child:[{tag:"path",attr:{d:"M207.9 15.2c.8 4.7 16.1 94.5 16.1 128.8 0 52.3-27.8 89.6-68.9 104.6L168 486.7c.7 13.7-10.2 25.3-24 25.3H80c-13.7 0-24.7-11.5-24-25.3l12.9-238.1C27.7 233.6 0 196.2 0 144 0 109.6 15.3 19.9 16.1 15.2 19.3-5.1 61.4-5.4 64 16.3v141.2c1.3 3.4 15.1 3.2 16 0 1.4-25.3 7.9-139.2 8-141.8 3.3-20.8 44.7-20.8 47.9 0 .2 2.7 6.6 116.5 8 141.8.9 3.2 14.8 3.4 16 0V16.3c2.6-21.6 44.8-21.4 48-1.1zm119.2 285.7l-15 185.1c-1.2 14 9.9 26 23.9 26h56c13.3 0 24-10.7 24-24V24c0-13.2-10.7-24-24-24-82.5 0-221.4 178.5-64.9 300.9z"}}]})(e)}function wJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496.101 385.669l14.227 28.663c3.929 7.915.697 17.516-7.218 21.445l-65.465 32.886c-16.049 7.967-35.556 1.194-43.189-15.055L331.679 320H192c-15.925 0-29.426-11.71-31.679-27.475C126.433 55.308 128.38 70.044 128 64c0-36.358 30.318-65.635 67.052-63.929 33.271 1.545 60.048 28.905 60.925 62.201.868 32.933-23.152 60.423-54.608 65.039l4.67 32.69H336c8.837 0 16 7.163 16 16v32c0 8.837-7.163 16-16 16H215.182l4.572 32H352a32 32 0 0 1 28.962 18.392L438.477 396.8l36.178-18.349c7.915-3.929 17.517-.697 21.446 7.218zM311.358 352h-24.506c-7.788 54.204-54.528 96-110.852 96-61.757 0-112-50.243-112-112 0-41.505 22.694-77.809 56.324-97.156-3.712-25.965-6.844-47.86-9.488-66.333C45.956 198.464 0 261.963 0 336c0 97.047 78.953 176 176 176 71.87 0 133.806-43.308 161.11-105.192L311.358 352z"}}]})(e)}function SJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634.91 154.88C457.74-8.99 182.19-8.93 5.09 154.88c-6.66 6.16-6.79 16.59-.35 22.98l34.24 33.97c6.14 6.1 16.02 6.23 22.4.38 145.92-133.68 371.3-133.71 517.25 0 6.38 5.85 16.26 5.71 22.4-.38l34.24-33.97c6.43-6.39 6.3-16.82-.36-22.98zM320 352c-35.35 0-64 28.65-64 64s28.65 64 64 64 64-28.65 64-64-28.65-64-64-64zm202.67-83.59c-115.26-101.93-290.21-101.82-405.34 0-6.9 6.1-7.12 16.69-.57 23.15l34.44 33.99c6 5.92 15.66 6.32 22.05.8 83.95-72.57 209.74-72.41 293.49 0 6.39 5.52 16.05 5.13 22.05-.8l34.44-33.99c6.56-6.46 6.33-17.06-.56-23.15z"}}]})(e)}function kJ(e){return Yn({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M22 11V9L12 2 2 9v2h2v9H2v2h20v-2h-2v-9h2zm-4 9H6V9h12v11z"}},{tag:"path",attr:{d:"M10 14l2 3 2-3v4h2v-7h-2l-2 3-2-3H8v7h2z"}}]})(e)}const TJ=({zoom:e,center:t})=>{const r=h=>iJ(h),o=Me.useRef(null),c=async h=>(await fetch(h)).json();return Me.useEffect(()=>{if(o.current){const h=new Fg.Map({container:o.current,zoom:e[0],center:t,style:{version:8,glyphs:"https://glyphs.geolonia.com/{fontstack}/{range}.pbf",sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],maxzoom:19,tileSize:256,attribution:"&copy;<a href='https://openstreetmap.org'>OpenStreetMap</a> contributors"}},layers:[{id:"osm-layer",type:"raster",source:"osm"}]}}),p=new Fg.GeolocateControl({trackUserLocation:!0});return h.addControl(p,"bottom-right"),h.on("load",async()=>{const l=await c("roadside_station.geojson");h.addSource("station-points",{type:"geojson",data:l,attribution:'<a href="https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-P35.html"></a>'});const b=XX(Fg.addProtocol);h.addSource("terrain",b),h.addLayer({id:"hillshade",source:"terrain",type:"hillshade",paint:{"hillshade-illumination-anchor":"map","hillshade-exaggeration":.3}}),h.addLayer({id:"station-points",type:"circle",source:"station-points",paint:{"circle-radius":["interpolate",["linear"],["zoom"],1,.1,5,3,10,10,15,15,20,30],"circle-color":["case",["==",["get","P35_016"],1],"#ff0000",["any",["==",["get","P35_013"],1],["==",["get","P35_014"],1]],"#ff7f00","#007cbf"]}}),h.addLayer({id:"station-points-text",type:"symbol",source:"station-points",minzoom:8,layout:{"text-field":["get","P35_006"],"text-font":["Noto Sans CJK JP Regular"],"text-offset":[0,.8],"text-anchor":"top","text-size":["interpolate",["linear"],["zoom"],10,10,14,14]},paint:{"text-halo-width":2,"text-halo-color":"#fff"}});const w=new Fg.Popup({closeButton:!1,closeOnClick:!0});h.on("click","station-points",T=>{var D,P,$,q,ee,me,Z,j,H,ie,_e,Le,ve,Pe,Ne,$e,ct,qt,Er,Bt,Ft,ut;if(T.features&&T.features.length>0){const It=T.features[0];w.setLngLat(It.geometry.coordinates).setHTML(`                <div style="font-weight:900; font-size: 1rem;"><a href=${(D=It.properties)==null?void 0:D.P35_007}>${(P=It.properties)==null?void 0:P.P35_006}</a></div>                <div>${($=It.properties)==null?void 0:$.P35_003} ${(q=It.properties)==null?void 0:q.P35_004}</div>                <div style="display: flex;>                <span ${((ee=It.properties)==null?void 0:ee.P35_011)===1?"":' color:#ccc"'}>${r(je(gJ,{}))}</span>                <span${((me=It.properties)==null?void 0:me.P35_012)===1?"":' style="color:#ccc"'}> ${r(je(sJ,{}))}</span>                <span${((Z=It.properties)==null?void 0:Z.P35_013)===1?"":' style="color:#ccc"'}> ${r(je(bJ,{}))}</span> 
                <span${((j=It.properties)==null?void 0:j.P35_014)===1?"":' style="color:#ccc"'}>  ${r(je(uJ,{}))}</span>   
                <span${((H=It.properties)==null?void 0:H.P35_015)===1?"":' style="color:#ccc"'}>  ${r(je(pJ,{}))}</span>                                  
                <span${((ie=It.properties)==null?void 0:ie.P35_016)===1?"":' style="color:#ccc"'}>  ${r(je(fJ,{}))}</span> 
                <span${((_e=It.properties)==null?void 0:_e.P35_017)===1?"":' style="color:#ccc"'}>  ${r(je(lJ,{}))}</span> 
                <span${((Le=It.properties)==null?void 0:Le.P35_018)===1?"":' style="color:#ccc"'}>  ${r(je(xJ,{}))}</span> 
                <span${((ve=It.properties)==null?void 0:ve.P35_019)===1?"":' style="color:#ccc"'}>  ${r(je(yJ,{}))}</span> 
                <span${((Pe=It.properties)==null?void 0:Pe.P35_020)===1?"":' style="color:#ccc"'}>  ${r(je(kJ,{}))}</span> 
                <span${((Ne=It.properties)==null?void 0:Ne.P35_021)===1?"":' style="color:#ccc"'}>  ${r(je(hJ,{}))}</span> 
                <span${(($e=It.properties)==null?void 0:$e.P35_022)===1?"":' style="color:#ccc"'}>  ${r(je(cJ,{}))}</span> 
                <span${((ct=It.properties)==null?void 0:ct.P35_023)===1?"":' style="color:#ccc"'}>  ${r(je(SJ,{}))}</span> 
                <span${((qt=It.properties)==null?void 0:qt.P35_024)===1?"":' style="color:#ccc"'}>  ${r(je(vJ,{}))}</span> 
                <span${((Er=It.properties)==null?void 0:Er.P35_025)===1?"":' style="color:#ccc"'}>  ${r(je(dJ,{}))}</span> 
                <span${((Bt=It.properties)==null?void 0:Bt.P35_026)===1?"":' style="color:#ccc"'}>  ${r(je(mJ,{}))}</span> 
                <span${((Ft=It.properties)==null?void 0:Ft.P35_027)===1?"":' style="color:#ccc"'}>  ${r(je(wJ,{}))}</span>                 
                <span${((ut=It.properties)==null?void 0:ut.P35_028)===1?"":' style="color:#ccc"'}>  ${r(je(_J,{}))}</span>   
                </div>                `).addTo(h)}})}),h.on("mouseenter","station-points",()=>{h.getCanvas().style.cursor="pointer"}),h.on("mouseleave","station-points",()=>{h.getCanvas().style.cursor=""}),()=>{h.remove()}}},[e,t]),je("div",{ref:o,style:{width:"100%",height:"100%"}})},EJ=()=>je(eH,{children:aa(KI,{direction:"column",height:"100vh",minWidth:"100vw",children:[je(tl,{backgroundColor:"blue.500",p:2,children:je(qI,{as:"h1",size:"md",color:"white",children:""})}),aa(tl,{flex:"1",position:"relative",children:[je(TJ,{zoom:[5],center:[139.6917,35.6895]}),je(rH,{})]})]})});Xv.createRoot(document.getElementById("root")).render(je(Bo.StrictMode,{children:je(EJ,{})}));
